!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,o){r.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){"use strict";var r=n(1);t.BookControl=r.BookControl;var o=n(179);t.jquery=o,n(182).polyfill();var i=n(408);t.HotspotUri=i.HotspotUri;var a=n(585);t.OverlayNotesViewer=a.OverlayNotesViewer;var s=n(452);t.SubtitleReader=s.SubtitleReader;var u=n(396);t.WordPlacement=u.WordPlacement;var c=n(725);t.TEXTSERVER_API_VERSION=c.TEXTSERVER_API_VERSION,"object"==typeof window.exports&&"object"==typeof window.module||"function"==typeof window.define&&window.define.amd||"object"==typeof window.exports||(window.com=window.com||{},window.com.becker=window.com.becker||{},window.com.becker.ebook=window.com.becker.ebook||{BookControl:r.BookControl},window.$=window.$||o)},function(e,t,n){"use strict";var r=n(2),o=n(10),i=function(){function e(e,t){t?this.root=new r.ControlRoot(t):this.root=new r.ControlRoot(e)}return e.prototype.getPageIdx=function(){return o.Context.store.getState().view.page},e.prototype.getZoomValue=function(){return 100*o.Context.store.getState().view.scale},e.prototype.gotoPage=function(e){this.root.gotoPage(e)},e.prototype.addEventListener=function(e){this.root.addEventListener(e)},e.prototype.removeEventListener=function(e){this.root.removeEventListener(e)},e}();t.BookControl=i},function(e,t,n){"use strict";n(3),n(4),n(5);var r=n(6),o=n(8),i=n(9),a=n(178),s=n(185),u=n(187),c=n(189),l=n(190),p=n(585),h=n(692),f=n(10),d=n(11),m=n(694),g=n(227),v=n(691),y=n(14),b=n(392),E=n(697),w=n(689),x=n(442),T=n(690),C=n(393),N=n(404),S=n(698),_=n(410),O=n(387),P=n(428),A=n(443),I=n(699),M=n(688),R=n(700),L=n(635),k=n(625);n(701)();var D=n(179),B=n(707),U=n(437);n(708);var F=function(){function e(e){var t=this;this.initiated=!1,this.gotoPage=function(e){e=parseInt(e,10),isNaN(e)||(t.initiated?t.setPage(e,!0):t.preInitGotoPage=e)},this.scrollIntoPageBoundsIfOutsideViewport=function(e,t){var n=f.Context.getPageBoundingClientRect(e),r={left:t.left+n.left,top:t.top+n.top,right:t.right+n.left,bottom:t.bottom+n.top},o=p.OverlayNotesViewer.calcNeededScrollToFocus(k.getViewportClientRectWithoutBars(f.Context.store.getState()),r);return S.scrollElement(D(f.Context.pagesScroll.getElement()),o)},f.Context.store=m.default({}),f.Context.externalEventEmitter=new r.ExternalEventEmitter,f.Context.internalEventEmitter=new c.InternalEventEmitter,new h.TouchEventHandler(document.body),void 0==e.baseUrl&&(e.baseUrl="./"),f.Context.controlSettings=e,f.Context.controlSettings.userActions=f.Context.controlSettings.userActions||[],f.Context.gotoPage=this.gotoPage,f.Context.pagesScroll=new R.PagesScroll,D(document.body).empty();var n={android:d.isAndroidDevice(),ios:d.isIOSDevice(),"ipad ios7":d.isIOS7iPad(),iphone:d.isiPhoneDevice(),mobile:d.isMobileDevice(),"no-mobile":!d.isMobileDevice(),standalone:d.isStandaloneMode(),windows:d.isWindowsDevice(),chrome:d.isChromeBrowser(),"mobile-mq":d.matchMobileMediaQuery(),"desktop-mq":d.matchDesktopMediaQuery()};for(var u in n)n.hasOwnProperty(u)&&n[u]&&document.body.classList.add(u);var l=new i.CommunicationFailure;f.Context.resourceLoader=new a.HttpResourceLoader(l),f.Context.userStorage=new s.UserActionStorage(l),f.Context.getPageBoundingClientRect=function(e){return t.bookView.getPageView(e).getBoundingClientRect()},f.Context.pagePointToClientCoords=function(e,n,r){return t.bookView.getPageView(e).pagePointToClientCoords(n,r)},f.Context.pageRectToClientCoords=function(e,n,r,o,i){return t.bookView.getPageView(e).pageRectToClientCoords(n,r,o,i)},v.initEnvironment()(f.Context.store.dispatch);var y=D('<div class="popupContainer"/>').appendTo(document.body)[0];new g.LayerViewportWrapper({store:f.Context.store},y),y=D('<div class="navContainer"/>').appendTo(document.body)[0],new g.LayerNavWrapper({store:f.Context.store},y),y=D('<div class="screenOverlayContainer"/>').appendTo(document.body)[0],new g.LayerScreenOverlayWrapper({store:f.Context.store},y),f.Context.resourceLoader.getJSON(f.Context.resourceLoader.getResourceUrl(o.ResourceType.BOOK_META,[]),function(e){t.loadedBookJson(e)});var b=f.Context.resourceLoader.getResourceUrl(o.ResourceType.THEME,[]),E=document.createElement("link");E.href=b,E.type="text/css",E.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(E),I.loadUserSettingsToStore()}return e.prototype.createTopBar=function(){var e=D('<div class="menu"/>'),t=D('<div class="menu__left" />');e.append(t),new g.ToolbarLeftPaneWrapper({store:f.Context.store},t[0]);var n=D('<div class="menu__seek" />');e.append(n),new g.ToolbarSeekBarWrapper({store:f.Context.store},n[0]);var r=D('<div class="menu__right" />');e.append(r),new g.ToolbarRightPaneWrapper({store:f.Context.store},r[0]);var o=D('<div class="menu__center" />');return e.append(o),new g.ToolbarCenterPaneWrapper({store:f.Context.store},o[0]),e},e.prototype.addEventListener=function(e){f.Context.externalEventEmitter.addListener(e)},e.prototype.removeEventListener=function(e){f.Context.externalEventEmitter.removeListener(e)},e.prototype.loadedBookJson=function(t){var n=this;w.loadBook(t),e.logErrorIfInvalidPlayerVersion(t),t.pages.forEach(function(e,t){e.name||(e.name=(t+1).toString())}),E.loadUserActions(f.Context.userStorage,f.Context.controlSettings.userActions),this.bookView=new l.BookView,this.bookView.onNewPageInCenter=function(e){n.setPage(e)},D(document.body).append(this.createTopBar()),this.bindEvents(),this.bindStoreListener(),this.onPageChanged(),L.bindGlobalShortcuts(),L.bindBaseShortcuts(),f.Context.controlSettings.disableMultimedia||d.isBrowserSupported()||y.browserNotSupported(),this.processPreInitCommands()},e.prototype.setPage=function(e,t){var n=f.Context.store.getState();P.isValidPageNumber(e)&&e>=0&&e<A.getPageCount(n)&&(e!=n.view.page||t)&&(x.setPage(e),this.bookView.updatePage())},e.prototype.bindEvents=function(){var e=this;f.Context.internalEventEmitter.bindNeedScrollIntoPageBounds(this.scrollIntoPageBoundsIfOutsideViewport),f.Context.internalEventEmitter.bindDidPageChange(function(){e.onPageChanged()})},e.prototype.bindStoreListener=function(){var e=this,t={};f.Context.store.subscribe(function(){var n=f.Context.store.getState(),r=t;t=n.mediaOpen,r!==t&&null!=t.gotoPlaylistItem&&r.gotoPlaylistItem!=t.gotoPlaylistItem&&e.scrollToPlaylistItem()})},e.prototype.scrollToPlaylistItem=function(){var t=this,n=f.Context.store.getState(),r=n.mediaOpen.gotoPlaylistItem,o=n.metadata.book.playlist[r];null==o?console.warn("Unable to find auto-play item %d",n.mediaOpen.gotoPlaylistItem):(o.page!=n.view.page&&this.gotoPage(o.page),M.getPageContent(o.page,!0).then(function(){if(e.isGoingToPlaylistItem(r)){n=f.Context.store.getState();var i=u.controlNameOfPlaylistItem(o);if(o.type==u.PlaylistItemType.PAGELECTURE)_.open(i,!0,!0);else{var a=C.getControlMapping(n).findControlByControlName(i);if(null==a)console.warn('Unable to find control of auto-play item "%s"',i);else{var s=N.calcControlBoundingPageRect(a,n.view.scale);s.right=null==s.right?s.left:s.right,s.bottom=null==s.bottom?s.top:s.bottom,t.scrollIntoPageBoundsIfOutsideViewport(o.page,s).then(function(){e.isGoingToPlaylistItem(r)&&(o.type==u.PlaylistItemType.VIDEO&&(a.inPlace?b.closeWindow(a.name):b.openWindow(a.name)),_.open(i,!0,!0))})}}}}))},e.isGoingToPlaylistItem=function(e){var t=f.Context.store.getState().mediaOpen;return t.gotoPlaylistItem==e},e.logErrorIfInvalidPlayerVersion=function(e){var t=T.parseVersion(O.CONTROL_VERSION),n=T.parseVersion(e.minPlayerVersion);isNaN(n.major)||isNaN(t.major)||!(t.major<n.major||t.major==n.major&&t.minor<n.minor)||console.error("Player version ("+O.CONTROL_VERSION+") is lower than required for this book ("+e.minPlayerVersion+")")},e.prototype.processPreInitCommands=function(){this.initiated=!0,void 0!=this.preInitGotoPage&&this.gotoPage(this.preInitGotoPage)},e.prototype.onPageChanged=function(){this.openVideoInPlaceIfInPlaceAndFirstInPagePlaylist(),f.Context.externalEventEmitter.emitEnterPage(f.Context.store.getState().view.page)},e.prototype.openVideoInPlaceIfInPlaceAndFirstInPagePlaylist=function(){var e=f.Context.store.getState();if(null==e.mediaOpen.gotoPlaylistItem){var t=B.getPlaylistPageFirstIndex(e);if(null!=t&&e.metadata.book.playlist[t].type==u.PlaylistItemType.VIDEO){var n=e.metadata.book.playlist[t].controlName,r=e.view.page;M.getPageContent(r,!1).then(function(){var e=f.Context.store.getState(),t=C.getControlMapping(e).findControlByControlName(n);t&&t.inPlace&&U.getOpenMediaControlName(e)!=n&&(b.closeWindow(n),_.open(n,!1))})}}},e}();t.ControlRoot=F},function(e,t){/*! modernizr 3.1.0 (Custom Build) | MIT *
	 * http://modernizr.com/download/?-audio-csscalc-csspointerevents-csstransforms-csstransforms3d-cssvwunit-flexbox-fontface-fullscreen-localstorage-svg-touchevents-video-addtest !*/
!function(e,t,n){function r(e,t){return typeof e===t}function o(){var e,t,n,o,i,a,s;for(var u in E){if(e=[],t=E[u],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=r(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)a=e[i],s=a.split("."),1===s.length?x[s[0]]=o:(!x[s[0]]||x[s[0]]instanceof Boolean||(x[s[0]]=new Boolean(x[s[0]])),x[s[0]][s[1]]=o),b.push((o?"":"no-")+s.join("-"))}}function i(e){var t=T.className,n=x._config.classPrefix||"";if(N&&(t=t.baseVal),x._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}x._config.enableClasses&&(t+=" "+n+e.join(" "+n),N?T.className.baseVal=t:T.className=t)}function a(e,t){if("object"==typeof e)for(var n in e)C(e,n)&&a(n,e[n]);else{e=e.toLowerCase();var r=e.split("."),o=x[r[0]];if(2==r.length&&(o=o[r[1]]),"undefined"!=typeof o)return x;t="function"==typeof t?t():t,1==r.length?x[r[0]]=t:(!x[r[0]]||x[r[0]]instanceof Boolean||(x[r[0]]=new Boolean(x[r[0]])),x[r[0]][r[1]]=t),i([(t&&0!=t?"":"no-")+r.join("-")]),x._trigger(e,t)}return x}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):N?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function u(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function c(e,t){return!!~(""+e).indexOf(t)}function l(){var e=t.body;return e||(e=s(N?"svg":"body"),e.fake=!0),e}function p(e,n,r,o){var i,a,u,c,p="modernizr",h=s("div"),f=l();if(parseInt(r,10))for(;r--;)u=s("div"),u.id=o?o[r]:p+(r+1),h.appendChild(u);return i=s("style"),i.type="text/css",i.id="s"+p,(f.fake?f:h).appendChild(i),f.appendChild(h),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),h.id=p,f.fake&&(f.style.background="",f.style.overflow="hidden",c=T.style.overflow,T.style.overflow="hidden",T.appendChild(f)),a=n(h,e),f.fake?(f.parentNode.removeChild(f),T.style.overflow=c,T.offsetHeight):h.parentNode.removeChild(h),!!a}function h(e,t){return function(){return e.apply(t,arguments)}}function f(e,t,n){var o;for(var i in e)if(e[i]in t)return n===!1?e[i]:(o=t[e[i]],r(o,"function")?h(o,n||t):o);return!1}function d(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function m(t,r){var o=t.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(d(t[o]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var i=[];o--;)i.push("("+d(t[o])+":"+r+")");return i=i.join(" or "),p("@supports ("+i+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function g(e,t,o,i){function a(){p&&(delete D.style,delete D.modElem)}if(i=!r(i,"undefined")&&i,!r(o,"undefined")){var l=m(e,o);if(!r(l,"undefined"))return l}for(var p,h,f,d,g,v=["modernizr","tspan"];!D.style;)p=!0,D.modElem=s(v.shift()),D.style=D.modElem.style;for(f=e.length,h=0;f>h;h++)if(d=e[h],g=D.style[d],c(d,"-")&&(d=u(d)),D.style[d]!==n){if(i||r(o,"undefined"))return a(),"pfx"!=t||d;try{D.style[d]=o}catch(e){}if(D.style[d]!=g)return a(),"pfx"!=t||d}return a(),!1}function v(e,t,n,o,i){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+A.join(a+" ")+a).split(" ");return r(t,"string")||r(t,"undefined")?g(s,t,o,i):(s=(e+" "+M.join(a+" ")+a).split(" "),f(s,t,n))}function y(e,t,r){return v(e,n,n,t,r)}var b=[],E=[],w={_version:"3.1.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){E.push({name:e,fn:t,options:n})},addAsyncTest:function(e){E.push({name:null,fn:e})}},x=function(){};x.prototype=w,x=new x,x.addTest("svg",!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var T=t.documentElement;x.addTest("localstorage",function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}});var C,N="svg"===T.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;C=r(e,"undefined")||r(e.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),w._l={},w.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),x.hasOwnProperty(e)&&setTimeout(function(){x._trigger(e,x[e])},0)},w._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e,r;for(e=0;e<n.length;e++)(r=n[e])(t)},0),delete this._l[e]}},x._q.push(function(){w.addTest=a}),x.addTest("audio",function(){var e=s("audio"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.opus=e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return t}),x.addTest("video",function(){var e=s("video"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),t.vp9=e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),t.hls=e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(e){}return t}),x.addTest("csspointerevents",function(){var e=s("a").style;return e.cssText="pointer-events:auto","auto"===e.pointerEvents});var S="CSS"in e&&"supports"in e.CSS,_="supportsCSS"in e;x.addTest("supports",S||_);var O=w._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];w._prefixes=O,x.addTest("csscalc",function(){var e="width:",t="calc(10px);",n=s("a");return n.style.cssText=e+O.join(t+e),!!n.style.length});var P="Moz O ms Webkit",A=w._config.usePrefixes?P.split(" "):[];w._cssomPrefixes=A;var I=function(t){var r,o=O.length,i=e.CSSRule;if("undefined"==typeof i)return n;if(!t)return!1;if(t=t.replace(/^@/,""),r=t.replace(/-/g,"_").toUpperCase()+"_RULE",r in i)return"@"+t;for(var a=0;o>a;a++){var s=O[a],u=s.toUpperCase()+"_"+r;if(u in i)return"@-"+s.toLowerCase()+"-"+t}return!1};w.atRule=I;var M=w._config.usePrefixes?P.toLowerCase().split(" "):[];w._domPrefixes=M;var R=w.testStyles=p;x.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var r=["@media (",O.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");R(r,function(e){n=9===e.offsetTop})}return n});var L=function(){var e=navigator.userAgent,t=e.match(/applewebkit\/([0-9]+)/gi)&&parseFloat(RegExp.$1),n=e.match(/w(eb)?osbrowser/gi),r=e.match(/windows phone/gi)&&e.match(/iemobile\/([0-9])+/gi)&&parseFloat(RegExp.$1)>=9,o=533>t&&e.match(/android/gi);return n||o||r}();L?x.addTest("fontface",!1):R('@font-face {font-family:"font";src:url("https://")}',function(e,n){var r=t.getElementById("smodernizr"),o=r.sheet||r.styleSheet,i=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"",a=/src/i.test(i)&&0===i.indexOf(n.split(" ")[0]);x.addTest("fontface",a)}),R("#modernizr { width: 50vw; }",function(t){var n=parseInt(e.innerWidth/2,10),r=parseInt((e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).width,10);x.addTest("cssvwunit",r==n)});var k={elem:s("modernizr")};x._q.push(function(){delete k.elem});var D={style:k.elem.style};x._q.unshift(function(){delete D.style}),w.testAllProps=v,w.testAllProps=y,x.addTest("flexbox",y("flexBasis","1px",!0)),x.addTest("csstransforms3d",function(){var e=!!y("perspective","1px",!0),t=x._config.usePrefixes;if(e&&(!t||"webkitPerspective"in T.style)){var n;x.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{left:9px;position:absolute;height:5px;margin:0;padding:0;border:0}}",R(n,function(t){e=9===t.offsetLeft&&5===t.offsetHeight})}return e}),x.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&y("transform","scale(1)",!0)});var B=w.prefixed=function(e,t,n){return 0===e.indexOf("@")?I(e):(-1!=e.indexOf("-")&&(e=u(e)),t?v(e,t,n):v(e,"pfx"))};x.addTest("fullscreen",!(!B("exitFullscreen",t,!1)&&!B("cancelFullScreen",t,!1))),o(),i(b),delete w.addTest,delete w.addAsyncTest;for(var U=0;U<x._q.length;U++)x._q[U]();e.Modernizr=x}(window,document)},function(e,t){!function(e){"use strict";e.console||(e.console={});for(var t,n,r=e.console,o=function(){},i=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=i.pop();)r[t]||(r[t]={});for(;n=a.pop();)"function"!=typeof r[n]&&(r[n]=o)}("undefined"==typeof window?this:window)},function(e,t,n){var r;!function(o,i,a){function s(e,t,n){return e.addEventListener?void e.addEventListener(t,n,!1):void e.attachEvent("on"+t,n)}function u(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return w[e.which]?w[e.which]:x[e.which]?x[e.which]:String.fromCharCode(e.which).toLowerCase()}function c(e,t){return e.sort().join(",")===t.sort().join(",")}function l(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function p(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}function h(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function d(){if(!E){E={};for(var e in w)e>95&&e<112||w.hasOwnProperty(e)&&(E[w[e]]=e)}return E}function m(e,t,n){return n||(n=d()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function g(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function v(e,t){var n,r,o,i=[];for(n=g(e),o=0;o<n.length;++o)r=n[o],C[r]&&(r=C[r]),t&&"keypress"!=t&&T[r]&&(r=T[r],i.push("shift")),f(r)&&i.push(r);return t=m(r,i,t),{key:r,modifiers:i,action:t}}function y(e,t){return null!==e&&e!==i&&(e===t||y(e.parentNode,t))}function b(e){function t(e){e=e||{};var t,n=!1;for(t in E)e[t]?n=!0:E[t]=0;n||(T=!1)}function n(e,t,n,r,o,i){var a,s,u=[],l=n.type;if(!g._callbacks[e])return[];for("keyup"==l&&f(e)&&(t=[e]),a=0;a<g._callbacks[e].length;++a)if(s=g._callbacks[e][a],(r||!s.seq||E[s.seq]==s.level)&&l==s.action&&("keypress"==l&&!n.metaKey&&!n.ctrlKey||c(t,s.modifiers))){var p=!r&&s.combo==o,h=r&&s.seq==r&&s.level==i;(p||h)&&g._callbacks[e].splice(a,1),u.push(s)}return u}function r(e,t,n,r){g.stopCallback(t,t.target||t.srcElement,n,r)||e(t,n)===!1&&(p(t),h(t))}function o(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=u(e);if(t)return"keyup"==e.type&&w===t?void(w=!1):void g.handleKey(t,l(e),e)}function a(){clearTimeout(y),y=setTimeout(t,1e3)}function d(e,n,o,i){function s(t){return function(){T=t,++E[e],a()}}function c(n){r(o,n,e),"keyup"!==i&&(w=u(n)),setTimeout(t,10)}E[e]=0;for(var l=0;l<n.length;++l){var p=l+1===n.length,h=p?c:s(i||v(n[l+1]).action);m(n[l],h,i,e,l)}}function m(e,t,r,o,i){g._directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var a,s=e.split(" ");return s.length>1?void d(e,s,t,r):(a=v(e,r),g._callbacks[a.key]=g._callbacks[a.key]||[],n(a.key,a.modifiers,{type:a.action},o,e,i),void g._callbacks[a.key][o?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:e}))}var g=this;if(e=e||i,!(g instanceof b))return new b(e);g.target=e,g._callbacks={},g._directMap={};var y,E={},w=!1,x=!1,T=!1;g._handleKey=function(e,o,i){var a,s=n(e,o,i),u={},c=0,l=!1;for(a=0;a<s.length;++a)s[a].seq&&(c=Math.max(c,s[a].level));for(a=0;a<s.length;++a)if(s[a].seq){if(s[a].level!=c)continue;l=!0,u[s[a].seq]=1,r(s[a].callback,i,s[a].combo,s[a].seq)}else l||r(s[a].callback,i,s[a].combo);var p="keypress"==i.type&&x;i.type!=T||f(e)||p||t(u),x=l&&"keydown"==i.type},g._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)m(e[r],t,n)},s(e,"keypress",o),s(e,"keydown",o),s(e,"keyup",o)}if(o){for(var E,w={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},x={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},T={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},C={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},N=1;N<20;++N)w[111+N]="f"+N;for(N=0;N<=9;++N)w[N+96]=N;b.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},b.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},b.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!y(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},b.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},b.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(w[t]=e[t]);E=null},b.init=function(){var e=b(i);for(var t in e)"_"!==t.charAt(0)&&(b[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},b.init(),o.Mousetrap=b,"undefined"!=typeof e&&e.exports&&(e.exports=b),r=function(){return b}.call(t,n,t,e),!(r!==a&&(e.exports=r))}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,t,n){"use strict";var r=n(7),o="ControlEvent";t.EVENT_TYPE_ENTER_PAGE="enterPage",t.EVENT_TYPE_BOOK_REACHED_END="bookReachedEnd";var i=function(){function e(){this.eventEmitter=new r}return e.prototype.addListener=function(e){this.eventEmitter.addListener(o,e)},e.prototype.removeListener=function(e){this.eventEmitter.removeListener(o,e)},e.prototype.emitEnterPage=function(e){this.emitUsage(t.EVENT_TYPE_ENTER_PAGE,{pageIdx:e})},e.prototype.emitBookReachedEnd=function(){this.emitUsage(t.EVENT_TYPE_BOOK_REACHED_END,{})},e.prototype.emitUsage=function(e,t){try{this.eventEmitter.emit(o,e,t)}catch(e){console.error(e)}},e}();t.ExternalEventEmitter=i},function(e,t,n){var r;!function(t){"use strict";function o(){}function i(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function a(e){return function(){return this[e].apply(this,arguments)}}function s(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&s(e.listener)}var u=o.prototype,c=t.EventEmitter;u.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},u.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},u.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},u.addListener=function(e,t){if(!s(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),o="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&i(r[n],t)===-1&&r[n].push(o?t:{listener:t,once:!1});return this},u.on=a("addListener"),u.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},u.once=a("addOnceListener"),u.defineEvent=function(e){return this.getListeners(e),this},u.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},u.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(n=i(o[r],t),n!==-1&&o[r].splice(n,1));return this},u.off=a("removeListener"),u.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},u.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},u.manipulateListeners=function(e,t,n){var r,o,i=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)i.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(o=t[r])&&("function"==typeof o?i.call(this,r,o):a.call(this,r,o));return this},u.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},u.removeAllListeners=a("removeEvent"),u.emitEvent=function(e,t){var n,r,o,i,a,s=this.getListenersAsObject(e);for(i in s)if(s.hasOwnProperty(i))for(n=s[i].slice(0),o=0;o<n.length;o++)r=n[o],r.once===!0&&this.removeListener(e,r.listener),a=r.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},u.trigger=a("emitEvent"),u.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},u.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},u._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},u._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=c,o},r=function(){return o}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this||{})},function(e,t){"use strict";var n;!function(e){e[e.BOOK_META=0]="BOOK_META",e[e.IMAGE=1]="IMAGE",e[e.AUDIO_MP3=2]="AUDIO_MP3",e[e.AUDIO_OGG=3]="AUDIO_OGG",e[e.PAGE_META=4]="PAGE_META",e[e.PAGE_BASE_IMG=5]="PAGE_BASE_IMG",e[e.PLACED_IMG=6]="PLACED_IMG",e[e.SEARCH_INDEX=7]="SEARCH_INDEX",e[e.THEME=8]="THEME",e[e.THUMB_STRIP=9]="THUMB_STRIP",e[e.VIDEO_THUMB=10]="VIDEO_THUMB",e[e.VIDEO_MP4=11]="VIDEO_MP4",e[e.DEPRECATED_VIDEO_WEBM=12]="DEPRECATED_VIDEO_WEBM",e[e.INTERACTIVITY_INDEX=13]="INTERACTIVITY_INDEX",e[e.FLASHCARDS=14]="FLASHCARDS",e[e.DEPRECATED_PLACED_IMG=15]="DEPRECATED_PLACED_IMG"}(n=t.ResourceType||(t.ResourceType={}))},function(e,t,n){"use strict";var r=n(10),o=n(14),i=function(){function e(){var e=this;this.retryCounter=0,this.retryHandlers=[],r.Context.internalEventEmitter.bindNeedRetryCommunication(function(){e.doRetry()})}return e.prototype.offRetry=function(e){var t=this.retryHandlers.indexOf(e);t!=-1&&this.retryHandlers.splice(t,1)},e.prototype.onRetry=function(e){this.retryHandlers.push(e)},e.prototype.requestSucceeded=function(){this.retryCounter=0},e.prototype.requestFailed=function(){this.enableRetryTimer()},e.prototype.doRetry=function(){var e=this;this.retryDeadline=void 0,o.clear(),this.retryHandlers.forEach(function(t){t(e.retryCounter>0)})},e.prototype.enableRetryTimer=function(){if(void 0==this.retryDeadline){var t=new Date;t.setSeconds(t.getSeconds()+Math.pow(e.WARNING_TIMEOUT,this.retryCounter)),this.retryDeadline=t,this.updateRetryWarning(),this.retryCounter++}},e.prototype.updateRetryWarning=function(){var t=this;if(void 0!=this.retryDeadline){var n=Math.round((this.retryDeadline.getTime()-(new Date).getTime())/1e3);o.retryIn(n),n>0?setTimeout(function(){t.updateRetryWarning()},e.RETRY_CALL_INTERVAL):this.doRetry()}},e}();i.WARNING_TIMEOUT=2,i.RETRY_CALL_INTERVAL=250,t.CommunicationFailure=i},function(e,t,n){"use strict";function r(){return void 0===a&&(t.Context.controlSettings.audioFormats&&t.Context.controlSettings.audioFormats.every(function(e){return"mp3"==e.toLowerCase()&&i.isMP3Supported()?(a=o.ResourceType.AUDIO_MP3,!1):"ogg"!=e.toLowerCase()||!i.isOggSupported()||(a=o.ResourceType.AUDIO_OGG,!1)}),void 0===a&&(a=i.isMP3Supported()?o.ResourceType.AUDIO_MP3:o.ResourceType.AUDIO_OGG)),a}var o=n(8),i=n(11);t.Context={getAudioResourceType:r};var a},function(e,t,n){"use strict";function r(){return N||(N=1,void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?N=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(N=window.devicePixelRatio)),N}function o(){return void 0==A&&(A=!!navigator.userAgent.match(/(iPhone|iPod)/g)),A}function i(){return void 0==I&&(I=navigator.userAgent.toLowerCase().indexOf("android")>-1),I}function a(e){for(var t,n=e.split("."),r=0,o=n.length,i=Modernizr||{};r<o&&(t=i[n[r]],r++,"object"==typeof t);)i=t;return"undefined"!=typeof t&&r===o&&t}function s(){var e=g()&&(m()||v());return P.forEach(function(t){a(t)||(e=!1)}),e}function u(){return void 0==M&&(M=!!navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)),M}function c(){return void 0==R&&(R=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)),R}function l(){return c()||i()}function p(){return void 0==L&&(L=navigator.userAgent.indexOf("Chrome")>-1),L}function h(){return void 0==k&&(k=navigator.userAgent.indexOf("Firefox")>-1),k}function f(){return void 0==D&&(D=S.msie),D}function d(){if(void 0==B){var e=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);B=e?parseInt(e[1]):void 0}return B}function m(){return void 0==U&&(U=!!a("audio.mp3")),U}function g(){return void 0==F&&(F=!!a("video.h264")),F}function v(){return void 0==j&&(j=!!a("audio.ogg")),j}function y(){return void 0==H&&(H=!(!("standalone"in window.navigator)||window.navigator.standalone)),H}function b(){return void 0==V&&(V=navigator.userAgent.toLowerCase().indexOf("msie")>-1),V}function E(){return Modernizr.touchevents===!0}function w(){return Modernizr.touchevents===!1}function x(){return!!window.matchMedia&&window.matchMedia(_).matches}function T(){return!window.matchMedia||window.matchMedia(O).matches}function C(e){setTimeout(function(){function t(s){i++,clearTimeout(n);var u=s&&"playing"===s.type||0!==a.currentTime;return!u&&i<o?void(n=setTimeout(t,r)):(a.removeEventListener("playing",t,!1),e(u),void(a.parentNode&&a.parentNode.removeChild(a)))}var n,r=200,o=5,i=0,a=document.createElement("audio"),s=a.style;if(!(Modernizr.video&&"autoplay"in a))return void e(!1);s.position="absolute",s.height="0",s.width="0";try{if(!Modernizr.audio.mp3)return void e(!1);a.src="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}catch(t){return void e(!1)}a.setAttribute("autoplay",""),a.volume=0,a.style.cssText="display:none",document.documentElement.appendChild(a),setTimeout(function(){a.addEventListener("playing",t,!1),n=setTimeout(t,r)},0)},10)}var N,S=n(12),_="only screen and (max-width: 718px)",O="only screen and (min-width: 719px)",P=["svg","audio","video","fontface","localstorage"];t.getDevicePixelRatio=r;var A;t.isiPhoneDevice=o;var I;t.isAndroidDevice=i,t.isBrowserSupported=s;var M;t.isIOS7iPad=u;var R;t.isIOSDevice=c,t.isMobileDevice=l;var L;t.isChromeBrowser=p;var k;t.isFirefoxBrowser=h;var D;t.isIeBrowser=f;var B;t.getIeBrowserVersion=d;var U;t.isMP3Supported=m;var F;t.isMP4Supported=g;var j;t.isOggSupported=v;var H;t.isStandaloneMode=y;var V;t.isWindowsDevice=b,t.hasTouchEvents=E,t.hasNotTouchEvents=w,t.matchMobileMediaQuery=x,t.matchDesktopMediaQuery=T,t.hasAudioAutoplaySupport=C},function(e,t,n){/*!
	 * Bowser - a browser detector
	 * https://github.com/ded/bowser
	 * MIT License | (c) Dustin Diaz 2015
	 */
!function(t,r,o){"undefined"!=typeof e&&e.exports?e.exports=o():n(13)(r,o)}(this,"bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}function r(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}var o,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(e),u=!s&&/android/i.test(e),c=/nexus\s*[0-6]\s*/i.test(e),l=!c&&/nexus\s*[0-9]+/i.test(e),p=/CrOS/.test(e),h=/silk/i.test(e),f=/sailfish/i.test(e),d=/tizen/i.test(e),m=/(web|hpw)os/i.test(e),g=/windows phone/i.test(e),v=(/SamsungBrowser/i.test(e),!g&&/windows/i.test(e)),y=!i&&!h&&/macintosh/i.test(e),b=!u&&!f&&!d&&!m&&/linux/i.test(e),E=t(/edge\/(\d+(\.\d+)?)/i),w=t(/version\/(\d+(\.\d+)?)/i),x=/tablet/i.test(e)&&!/tablet pc/i.test(e),T=!x&&/[^-]mobi/i.test(e),C=/xbox/i.test(e);/opera/i.test(e)?o={name:"Opera",opera:a,version:w||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?o={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||w}:/SamsungBrowser/i.test(e)?o={name:"Samsung Internet for Android",samsungBrowser:a,version:w||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?o={name:"Opera Coast",coast:a,version:w||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?o={name:"Yandex Browser",yandexbrowser:a,version:w||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?o={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?o={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?o={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?o={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?o={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?o={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(o={name:"Windows Phone",windowsphone:a},E?(o.msedge=a,o.version=E):(o.msie=a,o.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?o={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:p?o={name:"Chrome",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?o={name:"Microsoft Edge",msedge:a,version:E}:/vivaldi/i.test(e)?o={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||w}:f?o={name:"Sailfish",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?o={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(o={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(o.firefoxos=a)):h?o={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?o={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?o={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?o={name:"BlackBerry",blackberry:a,version:w||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:m?(o={name:"WebOS",webos:a,version:w||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(o.touchpad=a)):/bada/i.test(e)?o={name:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:d?o={name:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(e)?o={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(e)?o={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(e)?o={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:u?o={name:"Android",version:w}:/safari|applewebkit/i.test(e)?(o={name:"Safari",safari:a},w&&(o.version=w)):i?(o={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},w&&(o.version=w)):o=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||w}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(o.name=o.name||"Blink",o.blink=a):(o.name=o.name||"Webkit",o.webkit=a),!o.version&&w&&(o.version=w)):!o.opera&&/gecko\//i.test(e)&&(o.name=o.name||"Gecko",o.gecko=a,o.version=o.version||t(/gecko\/(\d+(\.\d+)?)/i)),o.windowsphone||o.msedge||!u&&!o.silk?o.windowsphone||o.msedge||!i?y?o.mac=a:C?o.xbox=a:v?o.windows=a:b&&(o.linux=a):(o[i]=a,o.ios=a):o.android=a;var N="";o.windows?N=r(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):o.windowsphone?N=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.mac?(N=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),N=N.replace(/[_\s]/g,".")):i?(N=t(/os (\d+([_\s]\d+)*) like mac os x/i),N=N.replace(/[_\s]/g,".")):u?N=t(/android[ \/-](\d+(\.\d+)*)/i):o.webos?N=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?N=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?N=t(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(N=t(/tizen[\/\s](\d+(\.\d+)*)/i)),N&&(o.osversion=N);var S=!o.windows&&N.split(".")[0];return x||l||"ipad"==i||u&&(3==S||S>=4&&!T)||o.silk?o.tablet=a:(T||"iphone"==i||"ipod"==i||u||c||o.blackberry||o.webos||o.bada)&&(o.mobile=a),o.msedge||o.msie&&o.version>=10||o.yandexbrowser&&o.version>=15||o.vivaldi&&o.version>=1||o.chrome&&o.version>=20||o.samsungBrowser&&o.version>=4||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1||o.chromium&&o.version>=20?o.a=a:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6||o.chromium&&o.version<20?o.c=a:o.x=a,o}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),o=n(e,function(e){var o=r-t(e);return e+=new Array(o+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(o[0][r]>o[1][r])return 1;if(o[0][r]!==o[1][r])return-1;if(0===r)return 0}}function o(t,n,o){var i=s;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(i=e(o));var a=""+i.version;for(var u in t)if(t.hasOwnProperty(u)&&i[u]){if("string"!=typeof t[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(t));return r([a,t[u]])<0}return n}function i(e,t,n){return!o(e,t,n)}var a=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=o,s.compareVersions=r,s.check=i,s._detect=e,s})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";function r(e,t){void 0===e&&(e=h);var n=null;switch(t.type){case c:n={retryIn:t.payload};break;case l:return{retryIn:0};case p:n={browserNotSupported:!0};break;default:return e}return u._assign({},e,n)}function o(e){var t=Math.max(0,Math.round(e));s.dispatchAction(c,t)}function i(){var e={browserNotSupported:!0};s.dispatchAction(p,e)}function a(){s.dispatchAction(l)}var s=n(15),u=n(16),c="failure/RETRY_IN",l="failure/CLEAR",p="failure/BROWSER_NOT_SUPPORTED",h={retryIn:0};Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.retryIn=o,t.browserNotSupported=i,t.clear=a},function(e,t,n){"use strict";function r(e,t){null==t?i.Context.store.dispatch({type:e}):i.Context.store.dispatch({type:e,payload:t})}function o(){return i.Context.store.getState()}var i=n(10);t.dispatchAction=r,t.getState=o},function(e,t,n){"use strict";var r=n(17);t._omit=r;var o=n(110);t._assign=o;var i=n(119);t._throttle=i;var a=n(120);t._debounce=a;var s=n(123);t._clone=s;var u=n(160);t._property=u;var c=n(171);t._isEqual=c},function(e,t,n){var r=n(18),o=n(19),i=n(65),a=n(69),s=n(86),u=n(108),c=a(function(e,t){return null==e?{}:(t=r(t,u),i(e,o(s(e),t)))});e.exports=c},function(e,t){function n(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t,n){function r(e,t,n,r){var p=-1,h=i,f=!0,d=e.length,m=[],g=t.length;if(!d)return m;n&&(t=s(t,u(n))),r?(h=a,f=!1):t.length>=l&&(h=c,f=!1,t=new o(t));e:for(;++p<d;){var v=e[p],y=n?n(v):v;if(v=r||0!==v?v:0,f&&y===y){for(var b=g;b--;)if(t[b]===y)continue e;m.push(v)}else h(t,y,r)||m.push(v)}return m}var o=n(20),i=n(57),a=n(62),s=n(18),u=n(63),c=n(64),l=200;e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(21),i=n(55),a=n(56);r.prototype.add=r.prototype.push=i,r.prototype.has=a,e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(22),i=n(49),a=n(52),s=n(53),u=n(54);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=n(23),i=n(40),a=n(48);e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(24),i=n(36),a=n(37),s=n(38),u=n(39);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(25);e.exports=r},function(e,t,n){var r=n(26),o=r(Object,"create");e.exports=o},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(27),i=n(35);e.exports=r},function(e,t,n){function r(e){if(!a(e)||i(e))return!1;var t=o(e)?d:c;return t.test(s(e))}var o=n(28),i=n(30),a=n(29),s=n(34),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,p=Object.prototype,h=l.toString,f=p.hasOwnProperty,d=RegExp("^"+h.call(f).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){var t=o(e)?c.call(e):"";return t==i||t==a||t==s}var o=n(29),i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]",u=Object.prototype,c=u.toString;e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function r(e){return!!i&&i in e}var o=n(31),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(32),o=r["__core-js_shared__"];e.exports=o},function(e,t,n){var r=n(33),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(o){var n=t[e];return n===i?void 0:n}return s.call(t,e)?t[e]:void 0}var o=n(25),i="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=n(25),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?i:t,this}var o=n(25),i="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(41),i=n(42),a=n(45),s=n(46),u=n(47);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():a.call(t,n,1),--this.size,!0}var o=n(43),i=Array.prototype,a=i.splice;e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(44);e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(43);e.exports=r},function(e,t,n){function r(e){return o(this.__data__,e)>-1}var o=n(43);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var o=n(43);e.exports=r},function(e,t,n){var r=n(26),o=n(32),i=r(o,"Map");e.exports=i},function(e,t,n){function r(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(50);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(51);e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return o(this,e).get(e)}var o=n(50);e.exports=r},function(e,t,n){function r(e){return o(this,e).has(e)}var o=n(50);e.exports=r},function(e,t,n){function r(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var o=n(50);e.exports=r},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=e?e.length:0;return!!n&&o(e,t,0)>-1}var o=n(58);e.exports=r},function(e,t,n){function r(e,t,n){return t===t?a(e,t,n):o(e,i,n)}var o=n(59),i=n(60),a=n(61);e.exports=r},function(e,t){function n(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}e.exports=n},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t){function n(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}e.exports=n},function(e,t){function n(e,t,n){for(var r=-1,o=e?e.length:0;++r<o;)if(n(t,e[r]))return!0;return!1}e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function r(e,t){return e=Object(e),o(e,t,function(t,n){return n in e})}var o=n(66);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var s=t[r],u=e[s];n(u,s)&&o(a,s,u)}return a}var o=n(67);e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(68);e.exports=r},function(e,t,n){var r=n(26),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){function r(e){return a(i(e,void 0,o),e+"")}var o=n(70),i=n(79),a=n(81);e.exports=r},function(e,t,n){function r(e){var t=e?e.length:0;return t?o(e,1):[]}var o=n(71);e.exports=r},function(e,t,n){function r(e,t,n,a,s){var u=-1,c=e.length;for(n||(n=i),s||(s=[]);++u<c;){var l=e[u];t>0&&n(l)?t>1?r(l,t-1,n,a,s):o(s,l):a||(s[s.length]=l)}return s}var o=n(72),i=n(73);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}e.exports=n},function(e,t,n){function r(e){return a(e)||i(e)||!!(s&&e&&e[s])}var o=n(74),i=n(75),a=n(78),s=o?o.isConcatSpreadable:void 0;e.exports=r},function(e,t,n){var r=n(32),o=r.Symbol;e.exports=o},function(e,t,n){var r=n(76),o=n(77),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){function r(e){return o(e)&&s.call(e)==i}var o=n(77),i="[object Arguments]",a=Object.prototype,s=a.toString;e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=i(r.length-t,0),u=Array(s);++a<s;)u[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=n(u),o(e,this,c)}}var o=n(80),i=Math.max;e.exports=r},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var r=n(82),o=n(85),i=o(r);e.exports=i},function(e,t,n){var r=n(83),o=n(68),i=n(84),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=i(),s=o-(a-n);if(n=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=500,o=16,i=Date.now;e.exports=n},function(e,t,n){function r(e){return o(e,a,i)}var o=n(87),i=n(88),a=n(93);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return i(e)?r:o(r,n(e))}var o=n(72),i=n(78);e.exports=r},function(e,t,n){var r=n(72),o=n(89),i=n(91),a=n(92),s=Object.getOwnPropertySymbols,u=s?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a;e.exports=u},function(e,t,n){var r=n(90),o=r(Object.getPrototypeOf,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){var r=n(90),o=n(92),i=Object.getOwnPropertySymbols,a=i?r(i,Object):o;e.exports=a},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){function r(e){return a(e)?o(e,!0):i(e)}var o=n(94),i=n(104),a=n(107);e.exports=r},function(e,t,n){function r(e,t){var n=a(e),r=!n&&i(e),l=!n&&!r&&s(e),h=!n&&!r&&!l&&c(e),f=n||r||l||h,d=f?o(e.length,String):[],m=d.length;for(var g in e)!t&&!p.call(e,g)||f&&("length"==g||l&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,m))||d.push(g);return d}var o=n(95),i=n(75),a=n(78),s=n(96),u=n(99),c=n(100),l=Object.prototype,p=l.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){(function(e){var r=n(32),o=n(98),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||o;e.exports=l}).call(t,n(97)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var r=n(101),o=n(63),i=n(103),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,t,n){function r(e){return i(e)&&o(e.length)&&!!A[M.call(e)]}var o=n(102),i=n(77),a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",p="[object Function]",h="[object Map]",f="[object Number]",d="[object Object]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",E="[object DataView]",w="[object Float32Array]",x="[object Float64Array]",T="[object Int8Array]",C="[object Int16Array]",N="[object Int32Array]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",O="[object Uint16Array]",P="[object Uint32Array]",A={};A[w]=A[x]=A[T]=A[C]=A[N]=A[S]=A[_]=A[O]=A[P]=!0,A[a]=A[s]=A[b]=A[u]=A[E]=A[c]=A[l]=A[p]=A[h]=A[f]=A[d]=A[m]=A[g]=A[v]=A[y]=!1;var I=Object.prototype,M=I.toString;e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){(function(e){var r=n(33),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a&&r.process,u=function(){try{return s&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(97)(e))},function(e,t,n){function r(e){if(!o(e))return a(e);var t=i(e),n=[];for(var r in e)("constructor"!=r||!t&&u.call(e,r))&&n.push(r);return n}var o=n(29),i=n(105),a=n(106),s=Object.prototype,u=s.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(28),i=n(102);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=n(109),i=1/0;e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||o(e)&&s.call(e)==i}var o=n(77),i="[object Symbol]",a=Object.prototype,s=a.toString;e.exports=r},function(e,t,n){var r=n(111),o=n(112),i=n(113),a=n(107),s=n(105),u=n(116),c=Object.prototype,l=c.hasOwnProperty,p=i(function(e,t){if(s(t)||a(t))return void o(t,u(t),e);for(var n in t)l.call(t,n)&&r(e,n,t[n])});e.exports=p},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(67),i=n(44),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=r?r(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):o(n,c,l)}return n}var o=n(111),i=n(67);e.exports=r},function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}var o=n(114),i=n(115);e.exports=r},function(e,t,n){function r(e,t){return a(i(e,t,o),e+"")}var o=n(84),i=n(79),a=n(81);e.exports=r},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&a(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(44),i=n(107),a=n(99),s=n(29);e.exports=r},function(e,t,n){function r(e){return a(e)?o(e):i(e)}var o=n(94),i=n(117),a=n(107);e.exports=r},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(105),i=n(118),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(90),o=r(Object.keys,Object);e.exports=o},function(e,t,n){function r(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return i(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),o(e,t,{leading:r,maxWait:t,trailing:s})}var o=n(120),i=n(29),a="Expected a function";e.exports=r},function(e,t,n){function r(e,t,n){function r(t){var n=y,r=b;return y=b=void 0,C=t,w=e.apply(r,n)}function l(e){return C=e,x=setTimeout(f,t),N?r(e):w}function p(e){var n=e-T,r=e-C,o=t-n;return S?c(o,E-r):o}function h(e){var n=e-T,r=e-C;return void 0===T||n>=t||n<0||S&&r>=E}function f(){var e=i();return h(e)?d(e):void(x=setTimeout(f,p(e)))}function d(e){return x=void 0,_&&y?r(e):(y=b=void 0,w)}function m(){void 0!==x&&clearTimeout(x),C=0,y=T=b=x=void 0}function g(){return void 0===x?w:d(i())}function v(){var e=i(),n=h(e);if(y=arguments,b=this,T=e,n){if(void 0===x)return l(T);if(S)return x=setTimeout(f,t),r(T)}return void 0===x&&(x=setTimeout(f,t)),w}var y,b,E,w,x,T,C=0,N=!1,S=!1,_=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,o(n)&&(N=!!n.leading,S="maxWait"in n,E=S?u(a(n.maxWait)||0,t):E,_="trailing"in n?!!n.trailing:_),v.cancel=m,v.flush=g,v}var o=n(29),i=n(121),a=n(122),s="Expected a function",u=Math.max,c=Math.min;e.exports=r},function(e,t,n){var r=n(32),o=function(){return r.Date.now()};e.exports=o},function(e,t,n){function r(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||l.test(e)?p(e.slice(2),n?2:8):u.test(e)?a:+e}var o=n(29),i=n(109),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,p=parseInt;e.exports=r},function(e,t,n){function r(e){return o(e,!1,!0)}var o=n(124);e.exports=r},function(e,t,n){function r(e,t,n,w,x,T,C){var _;if(w&&(_=T?w(e,x,T,C):w(e)),void 0!==_)return _;if(!y(e))return e;var O=g(e);if(O){if(_=f(e),!t)return c(e,_)}else{var A=h(e),I=A==N||A==S;if(v(e))return u(e,t);if(A==P||A==E||I&&!T){if(_=m(I?{}:e),!t)return l(e,s(_,e))}else{if(!q[A])return T?e:{};_=d(e,A,r,t)}}C||(C=new o);var M=C.get(e);if(M)return M;C.set(e,_);var R=O?void 0:(n?p:b)(e);return i(R||e,function(o,i){R&&(i=o,o=e[i]),a(_,i,r(o,t,n,w,i,e,C))}),_}var o=n(125),i=n(131),a=n(111),s=n(132),u=n(133),c=n(134),l=n(135),p=n(136),h=n(137),f=n(143),d=n(144),m=n(158),g=n(78),v=n(96),y=n(29),b=n(116),E="[object Arguments]",w="[object Array]",x="[object Boolean]",T="[object Date]",C="[object Error]",N="[object Function]",S="[object GeneratorFunction]",_="[object Map]",O="[object Number]",P="[object Object]",A="[object RegExp]",I="[object Set]",M="[object String]",R="[object Symbol]",L="[object WeakMap]",k="[object ArrayBuffer]",D="[object DataView]",B="[object Float32Array]",U="[object Float64Array]",F="[object Int8Array]",j="[object Int16Array]",H="[object Int32Array]",V="[object Uint8Array]",W="[object Uint8ClampedArray]",G="[object Uint16Array]",z="[object Uint32Array]",q={};q[E]=q[w]=q[k]=q[D]=q[x]=q[T]=q[B]=q[U]=q[F]=q[j]=q[H]=q[_]=q[O]=q[P]=q[A]=q[I]=q[M]=q[R]=q[V]=q[W]=q[G]=q[z]=!0,q[C]=q[N]=q[L]=!1,e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(40),i=n(126),a=n(127),s=n(128),u=n(129),c=n(130);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t,n){function r(){this.__data__=new o,this.size=0}var o=n(40);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(e,t),this.size=n.size,this}var o=n(40),i=n(48),a=n(21),s=200;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e?e.length:0;++n<r&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){function r(e,t){return e&&o(t,i(t),e)}var o=n(112),i=n(116);e.exports=r},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}var o=n(32),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?o.Buffer:void 0,c=u?u.allocUnsafe:void 0;e.exports=r}).call(t,n(97)(e))},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function r(e,t){return o(e,i(e),t)}var o=n(112),i=n(91);e.exports=r},function(e,t,n){function r(e){return o(e,a,i)}var o=n(87),i=n(91),a=n(116);e.exports=r},function(e,t,n){var r=n(138),o=n(48),i=n(139),a=n(140),s=n(141),u=n(142),c=n(34),l="[object Map]",p="[object Object]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",m="[object DataView]",g=Object.prototype,v=g.toString,y=c(r),b=c(o),E=c(i),w=c(a),x=c(s),T=u;(r&&T(new r(new ArrayBuffer(1)))!=m||o&&T(new o)!=l||i&&T(i.resolve())!=h||a&&T(new a)!=f||s&&T(new s)!=d)&&(T=function(e){var t=v.call(e),n=t==p?e.constructor:void 0,r=n?c(n):void 0;if(r)switch(r){case y:return m;case b:return l;case E:return h;case w:return f;case x:return d}return t}),e.exports=T},function(e,t,n){var r=n(26),o=n(32),i=r(o,"DataView");e.exports=i},function(e,t,n){var r=n(26),o=n(32),i=r(o,"Promise");e.exports=i},function(e,t,n){var r=n(26),o=n(32),i=r(o,"Set");e.exports=i},function(e,t,n){var r=n(26),o=n(32),i=r(o,"WeakMap");e.exports=i},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t){function n(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,o=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e,t,n,r){var A=e.constructor;switch(t){case b:return o(e);case p:case h:return new A(+e);case E:return i(e,r);case w:case x:case T:case C:case N:case S:case _:case O:case P:return l(e,r);case f:return a(e,r,n);case d:case v:return new A(e);case m:return s(e);case g:return u(e,r,n);case y:return c(e)}}var o=n(145),i=n(147),a=n(148),s=n(152),u=n(153),c=n(156),l=n(157),p="[object Boolean]",h="[object Date]",f="[object Map]",d="[object Number]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",E="[object DataView]",w="[object Float32Array]",x="[object Float64Array]",T="[object Int8Array]",C="[object Int16Array]",N="[object Int32Array]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",O="[object Uint16Array]",P="[object Uint32Array]";e.exports=r},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(146);e.exports=r},function(e,t,n){var r=n(32),o=r.Uint8Array;e.exports=o},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var o=n(145);e.exports=r},function(e,t,n){function r(e,t,n){var r=t?n(a(e),!0):a(e);return i(r,o,new e.constructor)}var o=n(149),i=n(150),a=n(151);e.exports=r},function(e,t){function n(e,t){return e.set(t[0],t[1]),e}e.exports=n},function(e,t){function n(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},function(e,t,n){function r(e,t,n){var r=t?n(a(e),!0):a(e);return i(r,o,new e.constructor)}var o=n(154),i=n(150),a=n(155);e.exports=r},function(e,t){function n(e,t){return e.add(t),e}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(e){return a?Object(a.call(e)):{}}var o=n(74),i=o?o.prototype:void 0,a=i?i.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(145);e.exports=r},function(e,t,n){function r(e){return"function"!=typeof e.constructor||a(e)?{}:o(i(e))}var o=n(159),i=n(89),a=n(105);e.exports=r},function(e,t,n){var r=n(29),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){function r(e){return a(e)?o(s(e)):i(e)}var o=n(161),i=n(162),a=n(170),s=n(108);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return o(t,e)}}var o=n(163);e.exports=r},function(e,t,n){function r(e,t){t=i(t,e)?[t]:o(t);for(var n=0,r=t.length;null!=e&&n<r;)e=e[a(t[n++])];return n&&n==r?e:void 0}var o=n(164),i=n(170),a=n(108);e.exports=r},function(e,t,n){function r(e){return o(e)?e:i(e)}var o=n(78),i=n(165);e.exports=r},function(e,t,n){var r=n(166),o=n(168),i=/^\./,a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,u=r(function(e){
e=o(e);var t=[];return i.test(e)&&t.push(""),e.replace(a,function(e,n,r,o){t.push(r?o.replace(s,"$1"):n||e)}),t});e.exports=u},function(e,t,n){function r(e){var t=o(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}var o=n(167),i=500;e.exports=r},function(e,t,n){function r(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(r.Cache||o),n}var o=n(21),i="Expected a function";r.Cache=o,e.exports=r},function(e,t,n){function r(e){return null==e?"":o(e)}var o=n(169);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(a(e))return i(e,r)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var o=n(74),i=n(18),a=n(78),s=n(109),u=1/0,c=o?o.prototype:void 0,l=c?c.toString:void 0;e.exports=r},function(e,t,n){function r(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=n(78),i=n(109),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t,n){function r(e,t){return o(e,t)}var o=n(172);e.exports=r},function(e,t,n){function r(e,t,n,s,u){return e===t||(null==e||null==t||!i(e)&&!a(t)?e!==e&&t!==t:o(e,t,r,n,s,u))}var o=n(173),i=n(29),a=n(77);e.exports=r},function(e,t,n){function r(e,t,n,r,g,y){var b=c(e),E=c(t),w=d,x=d;b||(w=u(e),w=w==f?m:w),E||(x=u(t),x=x==f?m:x);var T=w==m,C=x==m,N=w==x;if(N&&l(e)){if(!l(t))return!1;b=!0,T=!1}if(N&&!T)return y||(y=new o),b||p(e)?i(e,t,n,r,g,y):a(e,t,w,n,r,g,y);if(!(g&h)){var S=T&&v.call(e,"__wrapped__"),_=C&&v.call(t,"__wrapped__");if(S||_){var O=S?e.value():e,P=_?t.value():t;return y||(y=new o),n(O,P,r,g,y)}}return!!N&&(y||(y=new o),s(e,t,n,r,g,y))}var o=n(125),i=n(174),a=n(176),s=n(177),u=n(137),c=n(78),l=n(96),p=n(100),h=2,f="[object Arguments]",d="[object Array]",m="[object Object]",g=Object.prototype,v=g.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r,c,l){var p=c&u,h=e.length,f=t.length;if(h!=f&&!(p&&f>h))return!1;var d=l.get(e);if(d&&l.get(t))return d==t;var m=-1,g=!0,v=c&s?new o:void 0;for(l.set(e,t),l.set(t,e);++m<h;){var y=e[m],b=t[m];if(r)var E=p?r(b,y,m,t,e,l):r(y,b,m,e,t,l);if(void 0!==E){if(E)continue;g=!1;break}if(v){if(!i(t,function(e,t){if(!a(v,t)&&(y===e||n(y,e,r,c,l)))return v.push(t)})){g=!1;break}}else if(y!==b&&!n(y,b,r,c,l)){g=!1;break}}return l.delete(e),l.delete(t),g}var o=n(20),i=n(175),a=n(64),s=1,u=2;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n,r,o,T,N){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!r(new i(e),new i(t)));case h:case f:case g:return a(+e,+t);case d:return e.name==t.name&&e.message==t.message;case v:case b:return e==t+"";case m:var S=u;case y:var _=T&p;if(S||(S=c),e.size!=t.size&&!_)return!1;var O=N.get(e);if(O)return O==t;T|=l,N.set(e,t);var P=s(S(e),S(t),r,o,T,N);return N.delete(e),P;case E:if(C)return C.call(e)==C.call(t)}return!1}var o=n(74),i=n(146),a=n(44),s=n(174),u=n(151),c=n(155),l=1,p=2,h="[object Boolean]",f="[object Date]",d="[object Error]",m="[object Map]",g="[object Number]",v="[object RegExp]",y="[object Set]",b="[object String]",E="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",T=o?o.prototype:void 0,C=T?T.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t,n,r,a,u){var c=a&i,l=o(e),p=l.length,h=o(t),f=h.length;if(p!=f&&!c)return!1;for(var d=p;d--;){var m=l[d];if(!(c?m in t:s.call(t,m)))return!1}var g=u.get(e);if(g&&u.get(t))return g==t;var v=!0;u.set(e,t),u.set(t,e);for(var y=c;++d<p;){m=l[d];var b=e[m],E=t[m];if(r)var w=c?r(E,b,m,t,e,u):r(b,E,m,e,t,u);if(!(void 0===w?b===E||n(b,E,r,a,u):w)){v=!1;break}y||(y="constructor"==m)}if(v&&!y){var x=e.constructor,T=t.constructor;x!=T&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof T&&T instanceof T)&&(v=!1)}return u.delete(e),u.delete(t),v}var o=n(116),i=2,a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";var r,o=n(8),i=n(10),a=n(7),s=n(179),u=n(180);!function(e){e[e.JSON=0]="JSON",e[e.IMAGE=1]="IMAGE"}(r||(r={}));var c="__WAIT_FOR_ALL_URL__",l=function(){function e(){}return e}(),p=function(){function e(e){var t=this;this.retryQueue=[],this.urlRequests={},this.commFailure=e,this.successEventEmitter=new a,this.commFailure.onRetry(function(e){t.doRetry(e)})}return e.prototype.initiateRequest=function(e){var t=this,n=this.urlRequests[e];n.requestType==r.JSON?s.getJSON(e).done(function(r){n.data=r,t.commFailure.requestSucceeded(),t.emitSuccessEvents(e,n)}).fail(function(n,r){console.warn("Failed to load JSON from "+e),t.requestFail(r,e)}):u.ImageHelper.loadImage(e).then(function(r){n.data=e,t.commFailure.requestSucceeded(),t.emitSuccessEvents(e,n),u.ImageHelper.removeImage(e)}).catch(function(n){t.requestFail("",e)})},e.prototype.emitSuccessEvents=function(e,t){this.successEventEmitter.trigger(e,[t.data]),this.emitSuccessIfAllCompleted()},e.prototype.doRetry=function(e){for(var t=this.retryQueue.length-1;t>=0;t--){var n=this.urlRequests[this.retryQueue[t]];e||n.retriesLeft--,this.initiateRequest(this.retryQueue[t])}this.retryQueue=[]},e.prototype.waitForAll=function(e){var t=this;this.successEventEmitter.addOnceListener(c,e),setTimeout(function(){t.emitSuccessIfAllCompleted()})},e.prototype.emitSuccessIfAllCompleted=function(){for(var e in this.urlRequests)if(this.urlRequests.hasOwnProperty(e)&&null==this.urlRequests[e].data)return;this.successEventEmitter.trigger(c)},e.prototype.getImage=function(e,t){this.getResource(e,t,r.IMAGE)},e.prototype.getJSON=function(e,t){this.getResource(e,t,r.JSON)},e.prototype.getResource=function(t,n,r){var o=this,i=this.urlRequests[t];i?(this.successEventEmitter.addOnceListener(t,n),void 0!==i.data&&setTimeout(function(){o.emitSuccessEvents(t,i)})):(i=new l,i.requestType=r,i.retriesLeft=e.MAX_RETRIES,this.urlRequests[t]=i,this.successEventEmitter.addOnceListener(t,n),this.initiateRequest(t))},e.prototype.getResourceUrl=function(e,t){var n="";switch(e){case o.ResourceType.AUDIO_MP3:n="audio"+t[0]+".mp3";break;case o.ResourceType.AUDIO_OGG:n="audio"+t[0]+".ogg";break;case o.ResourceType.BOOK_META:n="book.json";break;case o.ResourceType.IMAGE:n="img"+t[0]+"."+t[1];break;case o.ResourceType.PAGE_META:n="page"+t[0]+".json";break;case o.ResourceType.PAGE_BASE_IMG:n="page"+t[0]+"_"+t[1]+".png";break;case o.ResourceType.DEPRECATED_PLACED_IMG:n="placedimg"+t[0]+"."+t[1];break;case o.ResourceType.PLACED_IMG:n="placedimg"+t[0]+"_"+t[1]+"."+t[2];break;case o.ResourceType.SEARCH_INDEX:n="search_index.json";break;case o.ResourceType.THEME:n="book.css";break;case o.ResourceType.THUMB_STRIP:n="strip"+t[0]+".jpg";break;case o.ResourceType.VIDEO_THUMB:n="video"+t[0]+"_"+t[1]+".jpg";break;case o.ResourceType.VIDEO_MP4:n="video"+t[0]+".mp4";break;case o.ResourceType.INTERACTIVITY_INDEX:n="interactivity"+t[0]+"/index.html?data="+(t[1]?t[1]:"");break;case o.ResourceType.FLASHCARDS:n="flashcards"+t[0]+".json"}return n=i.Context.controlSettings.baseUrl+n,i.Context.controlSettings.willLoadUrl&&(n=i.Context.controlSettings.willLoadUrl(n)),n},e.prototype.requestFail=function(e,t){"parsererror"==e?console.error("Unable to parse JSON at: "+t):this.urlRequests[t].retriesLeft<=0||"parsererror"==e?console.error("Quit requesting: "+t):(this.retryQueue.push(t),this.commFailure.requestFailed())},e}();p.MAX_RETRIES=3,t.HttpResourceLoader=p},function(e,t,n){var r,o;/*!
	 * jQuery JavaScript Library v2.2.3
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-04-05T19:26Z
	 */
!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){function a(e){var t=!!e&&"length"in e&&e.length,n=ce.type(e);return"function"!==n&&!ce.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e,t,n){if(ce.isFunction(t))return ce.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ce.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(be.test(t))return ce.filter(t,e,n);t=ce.filter(t,e)}return ce.grep(e,function(e){return re.call(t,e)>-1!==n})}function u(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function c(e){var t={};return ce.each(e.match(Ne)||[],function(e,n){t[n]=!0}),t}function l(){J.removeEventListener("DOMContentLoaded",l),n.removeEventListener("load",l),ce.ready()}function p(){this.expando=ce.expando+p.uid++}function h(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Me,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ie.test(n)?ce.parseJSON(n):n)}catch(e){}Ae.set(e,t,n)}else n=void 0;return n}function f(e,t,n,r){var o,i=1,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,"")},u=s(),c=n&&n[3]||(ce.cssNumber[t]?"":"px"),l=(ce.cssNumber[t]||"px"!==c&&+u)&&Le.exec(ce.css(e,t));if(l&&l[3]!==c){c=c||l[3],n=n||[],l=+u||1;do i=i||".5",l/=i,ce.style(e,t,l+c);while(i!==(i=s()/u)&&1!==i&&--a)}return n&&(l=+l||+u||0,o=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=o)),o}function d(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ce.nodeName(e,t)?ce.merge([e],n):n}function m(e,t){for(var n=0,r=e.length;n<r;n++)Pe.set(e[n],"globalEval",!t||Pe.get(t[n],"globalEval"))}function g(e,t,n,r,o){for(var i,a,s,u,c,l,p=t.createDocumentFragment(),h=[],f=0,g=e.length;f<g;f++)if(i=e[f],i||0===i)if("object"===ce.type(i))ce.merge(h,i.nodeType?[i]:i);else if(He.test(i)){for(a=a||p.appendChild(t.createElement("div")),s=(Ue.exec(i)||["",""])[1].toLowerCase(),u=je[s]||je._default,a.innerHTML=u[1]+ce.htmlPrefilter(i)+u[2],l=u[0];l--;)a=a.lastChild;ce.merge(h,a.childNodes),a=p.firstChild,a.textContent=""}else h.push(t.createTextNode(i));for(p.textContent="",f=0;i=h[f++];)if(r&&ce.inArray(i,r)>-1)o&&o.push(i);else if(c=ce.contains(i.ownerDocument,i),a=d(p.appendChild(i),"script"),c&&m(a),n)for(l=0;i=a[l++];)Fe.test(i.type||"")&&n.push(i);return p}function v(){return!0}function y(){return!1}function b(){try{return J.activeElement}catch(e){}}function E(e,t,n,r,o,i){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)E(e,s,n,r,t[s],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),o===!1)o=y;else if(!o)return e;return 1===i&&(a=o,o=function(e){return ce().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,o,r,n)})}function w(e,t){return ce.nodeName(e,"table")&&ce.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function x(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function T(e){var t=Xe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function C(e,t){var n,r,o,i,a,s,u,c;if(1===t.nodeType){if(Pe.hasData(e)&&(i=Pe.access(e),a=Pe.set(t,i),c=i.events)){delete a.handle,a.events={};for(o in c)for(n=0,r=c[o].length;n<r;n++)ce.event.add(t,o,c[o][n])}Ae.hasData(e)&&(s=Ae.access(e),u=ce.extend({},s),Ae.set(t,u))}}function N(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Be.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function S(e,t,n,r){t=te.apply([],t);var o,i,a,s,u,c,l=0,p=e.length,h=p-1,f=t[0],m=ce.isFunction(f);if(m||p>1&&"string"==typeof f&&!se.checkClone&&Ye.test(f))return e.each(function(o){var i=e.eq(o);m&&(t[0]=f.call(this,o,i.html())),S(i,t,n,r)});if(p&&(o=g(t,e[0].ownerDocument,!1,e,r),i=o.firstChild,1===o.childNodes.length&&(o=i),i||r)){for(a=ce.map(d(o,"script"),x),s=a.length;l<p;l++)u=o,l!==h&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,d(u,"script"))),n.call(e[l],u,l);if(s)for(c=a[a.length-1].ownerDocument,ce.map(a,T),l=0;l<s;l++)u=a[l],Fe.test(u.type||"")&&!Pe.access(u,"globalEval")&&ce.contains(c,u)&&(u.src?ce._evalUrl&&ce._evalUrl(u.src):ce.globalEval(u.textContent.replace(Ke,"")))}return e}function _(e,t,n){for(var r,o=t?ce.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||ce.cleanData(d(r)),r.parentNode&&(n&&ce.contains(r.ownerDocument,r)&&m(d(r,"script")),r.parentNode.removeChild(r));return e}function O(e,t){var n=ce(t.createElement(e)).appendTo(t.body),r=ce.css(n[0],"display");return n.detach(),r}function P(e){var t=J,n=$e[e];return n||(n=O(e,t),"none"!==n&&n||(Ze=(Ze||ce("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ze[0].contentDocument,t.write(),t.close(),n=O(e,t),Ze.detach()),$e[e]=n),n}function A(e,t,n){var r,o,i,a,s=e.style;return n=n||et(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||ce.contains(e.ownerDocument,e)||(a=ce.style(e,t)),n&&!se.pixelMarginRight()&&Je.test(a)&&Qe.test(t)&&(r=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=o,s.maxWidth=i),void 0!==a?a+"":a}function I(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function M(e){if(e in st)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=at.length;n--;)if(e=at[n]+t,e in st)return e}function R(e,t,n){var r=Le.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function L(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,a=0;i<4;i+=2)"margin"===n&&(a+=ce.css(e,n+ke[i],!0,o)),r?("content"===n&&(a-=ce.css(e,"padding"+ke[i],!0,o)),"margin"!==n&&(a-=ce.css(e,"border"+ke[i]+"Width",!0,o))):(a+=ce.css(e,"padding"+ke[i],!0,o),"padding"!==n&&(a+=ce.css(e,"border"+ke[i]+"Width",!0,o)));return a}function k(e,t,r){var o=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=et(e),s="border-box"===ce.css(e,"boxSizing",!1,a);if(J.msFullscreenElement&&n.top!==n&&e.getClientRects().length&&(i=Math.round(100*e.getBoundingClientRect()[t])),i<=0||null==i){if(i=A(e,t,a),(i<0||null==i)&&(i=e.style[t]),Je.test(i))return i;o=s&&(se.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+L(e,t,r||(s?"border":"content"),o,a)+"px"}function D(e,t){for(var n,r,o,i=[],a=0,s=e.length;a<s;a++)r=e[a],r.style&&(i[a]=Pe.get(r,"olddisplay"),n=r.style.display,t?(i[a]||"none"!==n||(r.style.display=""),""===r.style.display&&De(r)&&(i[a]=Pe.access(r,"olddisplay",P(r.nodeName)))):(o=De(r),"none"===n&&o||Pe.set(r,"olddisplay",o?n:ce.css(r,"display"))));for(a=0;a<s;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?i[a]||"":"none"));return e}function B(e,t,n,r,o){return new B.prototype.init(e,t,n,r,o)}function U(){return n.setTimeout(function(){ut=void 0}),ut=ce.now()}function F(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)n=ke[r],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function j(e,t,n){for(var r,o=(W.tweeners[t]||[]).concat(W.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function H(e,t,n){var r,o,i,a,s,u,c,l,p=this,h={},f=e.style,d=e.nodeType&&De(e),m=Pe.get(e,"fxshow");n.queue||(s=ce._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,ce.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=ce.css(e,"display"),l="none"===c?Pe.get(e,"olddisplay")||P(e.nodeName):c,"inline"===l&&"none"===ce.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(o=t[r],lt.exec(o)){if(delete t[r],i=i||"toggle"===o,o===(d?"hide":"show")){if("show"!==o||!m||void 0===m[r])continue;d=!0}h[r]=m&&m[r]||ce.style(e,r)}else c=void 0;if(ce.isEmptyObject(h))"inline"===("none"===c?P(e.nodeName):c)&&(f.display=c);else{m?"hidden"in m&&(d=m.hidden):m=Pe.access(e,"fxshow",{}),i&&(m.hidden=!d),d?ce(e).show():p.done(function(){ce(e).hide()}),p.done(function(){var t;Pe.remove(e,"fxshow");for(t in h)ce.style(e,t,h[t])});for(r in h)a=j(d?m[r]:0,r,p),r in m||(m[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function V(e,t){var n,r,o,i,a;for(n in e)if(r=ce.camelCase(n),o=t[r],i=e[n],ce.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),a=ce.cssHooks[r],a&&"expand"in a){i=a.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=o)}else t[r]=o}function W(e,t,n){var r,o,i=0,a=W.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=ut||U(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,i=1-r,a=0,u=c.tweens.length;a<u;a++)c.tweens[a].run(i);return s.notifyWith(e,[c,i,n]),i<1&&u?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:ce.extend({},t),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},n),originalProperties:t,originalOptions:n,startTime:ut||U(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ce.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(V(l,c.opts.specialEasing);i<a;i++)if(r=W.prefilters[i].call(c,e,l,c.opts))return ce.isFunction(r.stop)&&(ce._queueHooks(c.elem,c.opts.queue).stop=ce.proxy(r.stop,r)),r;return ce.map(l,j,c),ce.isFunction(c.opts.start)&&c.opts.start.call(e,c),ce.fx.timer(ce.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function G(e){return e.getAttribute&&e.getAttribute("class")||""}function z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(Ne)||[];if(ce.isFunction(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function q(e,t,n,r){function o(s){var u;return i[s]=!0,ce.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||i[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),u}var i={},a=e===At;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Y(e,t){var n,r,o=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}function X(e,t,n){for(var r,o,i,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){u.unshift(o);break}if(u[0]in n)i=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==u[0]&&u.unshift(i),n[i]}function K(e,t,n,r){var o,i,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=l.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(a=c[u+" "+i]||c["* "+i],!a)for(o in c)if(s=o.split(" "),s[1]===i&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[o]:c[o]!==!0&&(i=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}function Z(e,t,n,r){var o;if(ce.isArray(t))ce.each(t,function(t,o){n||Lt.test(e)?r(e,o):Z(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==ce.type(t))r(e,t);else for(o in t)Z(e+"["+o+"]",t[o],n,r)}function $(e){return ce.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Q=[],J=n.document,ee=Q.slice,te=Q.concat,ne=Q.push,re=Q.indexOf,oe={},ie=oe.toString,ae=oe.hasOwnProperty,se={},ue="2.2.3",ce=function(e,t){return new ce.fn.init(e,t)},le=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pe=/^-ms-/,he=/-([\da-z])/gi,fe=function(e,t){return t.toUpperCase()};ce.fn=ce.prototype={jquery:ue,constructor:ce,selector:"",length:0,toArray:function(){return ee.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:ee.call(this)},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ce.each(this,e)},map:function(e){return this.pushStack(ce.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ee.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ne,sort:Q.sort,splice:Q.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||ce.isFunction(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(c&&r&&(ce.isPlainObject(r)||(o=ce.isArray(r)))?(o?(o=!1,i=n&&ce.isArray(n)?n:[]):i=n&&ce.isPlainObject(n)?n:{},a[t]=ce.extend(c,i,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:"jQuery"+(ue+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ce.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!ce.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==ce.type(e)||e.nodeType||ce.isWindow(e))return!1;if(e.constructor&&!ae.call(e,"constructor")&&!ae.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ae.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?oe[ie.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=ce.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(pe,"ms-").replace(he,fe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(a(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(le,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?ce.merge(n,"string"==typeof e?[e]:e):ne.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:re.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r,o=[],i=0,a=e.length,s=!n;i<a;i++)r=!t(e[i],i),r!==s&&o.push(e[i]);return o},map:function(e,t,n){var r,o,i=0,s=[];if(a(e))for(r=e.length;i<r;i++)o=t(e[i],i,n),null!=o&&s.push(o);else for(i in e)o=t(e[i],i,n),null!=o&&s.push(o);return te.apply([],s)},guid:1,proxy:function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),ce.isFunction(e))return r=ee.call(arguments,2),o=function(){return e.apply(t||this,r.concat(ee.call(arguments)))},o.guid=e.guid=e.guid||ce.guid++,o},now:Date.now,support:se}),"function"==typeof Symbol&&(ce.fn[Symbol.iterator]=Q[Symbol.iterator]),ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){oe["[object "+t+"]"]=t.toLowerCase()});var de=/*!
	 * Sizzle CSS Selector Engine v2.2.1
	 * http://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2015-10-17
	 */
function(e){function t(e,t,n,r){var o,i,a,s,u,c,p,f,d=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&((t?t.ownerDocument||t:j)!==M&&I(t),t=t||M,L)){if(11!==m&&(c=ve.exec(e)))if(o=c[1]){if(9===m){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(d&&(a=d.getElementById(o))&&U(t,a)&&a.id===o)return n.push(a),n}else{if(c[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((o=c[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&!z[e+" "]&&(!k||!k.test(e))){if(1!==m)d=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,"\\$&"):t.setAttribute("id",s=F),p=N(e),i=p.length,u=he.test(s)?"#"+s:"[id='"+s+"']";i--;)p[i]=u+" "+h(p[i]);f=p.join(","),d=ye.test(e)&&l(t.parentNode)||t}if(f)try{return Q.apply(n,d.querySelectorAll(f)),n}catch(e){}finally{s===F&&t.removeAttribute("id")}}}return _(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function o(e){var t=M.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var n=e.split("|"),r=n.length;r--;)x.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function l(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function p(){}function h(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=V++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var s,u,c,l=[H,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(c=t[F]||(t[F]={}),u=c[t.uniqueID]||(c[t.uniqueID]={}),(s=u[r])&&s[0]===H&&s[1]===i)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function d(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var o=0,i=n.length;o<i;o++)t(e,n[o],r);return r}function g(e,t,n,r,o){for(var i,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(s)));return a}function v(e,t,n,o,i,a){return o&&!o[F]&&(o=v(o)),i&&!i[F]&&(i=v(i,a)),r(function(r,a,s,u){var c,l,p,h=[],f=[],d=a.length,v=r||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:g(v,h,e,s,u),b=n?i||(r?e:d||o)?[]:a:y;if(n&&n(y,b,s,u),o)for(c=g(b,f),o(c,[],s,u),l=c.length;l--;)(p=c[l])&&(b[f[l]]=!(y[f[l]]=p));if(r){if(i||e){if(i){for(c=[],l=b.length;l--;)(p=b[l])&&c.push(y[l]=p);i(null,b=[],c,u)}for(l=b.length;l--;)(p=b[l])&&(c=i?ee(r,p):h[l])>-1&&(r[c]=!(a[c]=p))}}else b=g(b===a?b.splice(d,b.length):b),i?i(null,a,b,u):Q.apply(a,b)})}function y(e){for(var t,n,r,o=e.length,i=x.relative[e[0].type],a=i||x.relative[" "],s=i?1:0,u=f(function(e){return e===t},a,!0),c=f(function(e){return ee(t,e)>-1},a,!0),l=[function(e,n,r){var o=!i&&(r||n!==O)||((t=n).nodeType?u(e,n,r):c(e,n,r));return t=null,o}];s<o;s++)if(n=x.relative[e[s].type])l=[f(d(l),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;r<o&&!x.relative[e[r].type];r++);return v(s>1&&d(l),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<r&&y(e.slice(s,r)),r<o&&y(e=e.slice(r)),r<o&&h(e))}l.push(n)}return d(l)}function b(e,n){var o=n.length>0,i=e.length>0,a=function(r,a,s,u,c){var l,p,h,f=0,d="0",m=r&&[],v=[],y=O,b=r||i&&x.find.TAG("*",c),E=H+=null==y?1:Math.random()||.1,w=b.length;for(c&&(O=a===M||a||c);d!==w&&null!=(l=b[d]);d++){if(i&&l){for(p=0,a||l.ownerDocument===M||(I(l),s=!L);h=e[p++];)if(h(l,a||M,s)){u.push(l);break}c&&(H=E)}o&&((l=!h&&l)&&f--,r&&m.push(l))}if(f+=d,o&&d!==f){for(p=0;h=n[p++];)h(m,v,a,s);if(r){if(f>0)for(;d--;)m[d]||v[d]||(v[d]=Z.call(u));v=g(v)}Q.apply(u,v),c&&!r&&v.length>0&&f+n.length>1&&t.uniqueSort(u)}return c&&(H=E,O=y),m};return o?r(a):a}var E,w,x,T,C,N,S,_,O,P,A,I,M,R,L,k,D,B,U,F="sizzle"+1*new Date,j=e.document,H=0,V=0,W=n(),G=n(),z=n(),q=function(e,t){return e===t&&(A=!0),0},Y=1<<31,X={}.hasOwnProperty,K=[],Z=K.pop,$=K.push,Q=K.push,J=K.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",ie=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),pe=new RegExp(ie),he=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,Ee=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=function(){I()};try{Q.apply(K=J.call(j.childNodes),j.childNodes),K[j.childNodes.length].nodeType}catch(e){Q={apply:K.length?function(e,t){$.apply(e,J.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:j;return r!==M&&9===r.nodeType&&r.documentElement?(M=r,R=M.documentElement,L=!C(M),(n=M.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ge.test(M.getElementsByClassName),w.getById=o(function(e){return R.appendChild(e).id=F,!M.getElementsByName||!M.getElementsByName(F).length}),w.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(Ee,we);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(Ee,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},x.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&L)return t.getElementsByClassName(e)},D=[],k=[],(w.qsa=ge.test(M.querySelectorAll))&&(o(function(e){R.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&k.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||k.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+F+"-]").length||k.push("~="),e.querySelectorAll(":checked").length||k.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||k.push(".#.+[+~]")}),o(function(e){var t=M.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&k.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||k.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),k.push(",.*:")})),(w.matchesSelector=ge.test(B=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&o(function(e){w.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),D.push("!=",ie)}),k=k.length&&new RegExp(k.join("|")),D=D.length&&new RegExp(D.join("|")),t=ge.test(R.compareDocumentPosition),U=t||ge.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===M||e.ownerDocument===j&&U(j,e)?-1:t===M||t.ownerDocument===j&&U(j,t)?1:P?ee(P,e)-ee(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,s=[e],u=[t];if(!o||!i)return e===M?-1:t===M?1:o?-1:i?1:P?ee(P,e)-ee(P,t):0;if(o===i)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?a(s[r],u[r]):s[r]===j?-1:u[r]===j?1:0},M):M},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==M&&I(e),n=n.replace(le,"='$1']"),w.matchesSelector&&L&&!z[n+" "]&&(!D||!D.test(n))&&(!k||!k.test(n)))try{var r=B.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,M,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==M&&I(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==M&&I(e);var n=x.attrHandle[t.toLowerCase()],r=n&&X.call(x.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==r?r:w.attributes||!L?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(A=!w.detectDuplicates,P=!w.sortStable&&e.slice(0),e.sort(q),A){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return P=null,e},T=t.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=T(t);return n},x=t.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ee,we),e[3]=(e[3]||e[4]||e[5]||"").replace(Ee,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=N(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ee,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(o){var i=t.attr(o,e);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(ae," ")+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var c,l,p,h,f,d,m=i!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(g){if(i){for(;m;){for(h=t;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?g.firstChild:g.lastChild],a&&y){for(h=g,p=h[F]||(h[F]={}),l=p[h.uniqueID]||(p[h.uniqueID]={}),c=l[e]||[],f=c[0]===H&&c[1],b=f&&c[2],h=f&&g.childNodes[f];h=++f&&h&&h[m]||(b=f=0)||d.pop();)if(1===h.nodeType&&++b&&h===t){l[e]=[H,f,b];break}}else if(y&&(h=t,p=h[F]||(h[F]={}),l=p[h.uniqueID]||(p[h.uniqueID]={}),c=l[e]||[],f=c[0]===H&&c[1],b=f),b===!1)for(;(h=++f&&h&&h[m]||(b=f=0)||d.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&(p=h[F]||(h[F]={}),l=p[h.uniqueID]||(p[h.uniqueID]={}),l[e]=[H,b]),h!==t)););return b-=o,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var o,i=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[F]?i(n):i.length>1?(o=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,o=i(e,n),a=o.length;a--;)r=ee(e,o[a]),e[r]=!(t[r]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:r(function(e){var t=[],n=[],o=S(e.replace(se,"$1"));return o[F]?r(function(e,t,n,r){for(var i,a=o(e,null,r,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(Ee,we),function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:r(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ee,we).toLowerCase(),function(t){var n;do if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},x.pseudos.nth=x.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[E]=s(E);for(E in{submit:!0,reset:!0})x.pseudos[E]=u(E);return p.prototype=x.filters=x.pseudos,x.setFilters=new p,N=t.tokenize=function(e,n){var r,o,i,a,s,u,c,l=G[e+" "];if(l)return n?0:l.slice(0);for(s=e,u=[],c=x.preFilter;s;){r&&!(o=ue.exec(s))||(o&&(s=s.slice(o[0].length)||s),u.push(i=[])),r=!1,(o=ce.exec(s))&&(r=o.shift(),i.push({value:r,type:o[0].replace(se," ")}),s=s.slice(r.length));for(a in x.filter)!(o=fe[a].exec(s))||c[a]&&!(o=c[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):G(e,u).slice(0)},S=t.compile=function(e,t){var n,r=[],o=[],i=z[e+" "];if(!i){for(t||(t=N(e)),n=t.length;n--;)i=y(t[n]),i[F]?r.push(i):o.push(i);i=z(e,b(o,r)),i.selector=e}return i},_=t.select=function(e,t,n,r){var o,i,a,s,u,c="function"==typeof e&&e,p=!r&&N(e=c.selector||e);if(n=n||[],1===p.length){if(i=p[0]=p[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&w.getById&&9===t.nodeType&&L&&x.relative[i[1].type]){if(t=(x.find.ID(a.matches[0].replace(Ee,we),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=fe.needsContext.test(e)?0:i.length;o--&&(a=i[o],!x.relative[s=a.type]);)if((u=x.find[s])&&(r=u(a.matches[0].replace(Ee,we),ye.test(i[0].type)&&l(t.parentNode)||t))){if(i.splice(o,1),e=r.length&&h(i),!e)return Q.apply(n,r),n;break}}return(c||S(e,p))(r,t,!L,n,!t||ye.test(e)&&l(t.parentNode)||t),n},w.sortStable=F.split("").sort(q).join("")===F,w.detectDuplicates=!!A,I(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(M.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||i(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);ce.find=de,ce.expr=de.selectors,ce.expr[":"]=ce.expr.pseudos,ce.uniqueSort=ce.unique=de.uniqueSort,ce.text=de.getText,ce.isXMLDoc=de.isXML,ce.contains=de.contains;var me=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ce(e).is(n))break;r.push(e)}return r},ge=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ve=ce.expr.match.needsContext,ye=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,be=/^.[^:#\[\.,]*$/;ce.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n=this.length,r=[],o=this;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<n;t++)if(ce.contains(o[t],this))return!0}));for(t=0;t<n;t++)ce.find(e,o[t],r);return r=this.pushStack(n>1?ce.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&ve.test(e)?ce(e):e||[],!1).length}});var Ee,we=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,xe=ce.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||Ee,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:we.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),ye.test(r[1])&&ce.isPlainObject(t))for(r in t)ce.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return o=J.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ce.isFunction(e)?void 0!==n.ready?n.ready(e):e(ce):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ce.makeArray(e,this))};xe.prototype=ce.fn,Ee=ce(J);var Te=/^(?:parents|prev(?:Until|All))/,Ce={children:!0,contents:!0,next:!0,prev:!0};ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,o=this.length,i=[],a=ve.test(e)||"string"!=typeof e?ce(e,t||this.context):0;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ce.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?ce.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?re.call(ce(e),this[0]):re.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return me(e,"parentNode")},parentsUntil:function(e,t,n){return me(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return me(e,"nextSibling")},prevAll:function(e){return me(e,"previousSibling")},nextUntil:function(e,t,n){return me(e,"nextSibling",n)},prevUntil:function(e,t,n){return me(e,"previousSibling",n)},siblings:function(e){return ge((e.parentNode||{}).firstChild,e)},children:function(e){return ge(e.firstChild)},contents:function(e){return e.contentDocument||ce.merge([],e.childNodes)}},function(e,t){ce.fn[e]=function(n,r){var o=ce.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=ce.filter(r,o)),this.length>1&&(Ce[e]||ce.uniqueSort(o),Te.test(e)&&o.reverse()),this.pushStack(o)}});var Ne=/\S+/g;ce.Callbacks=function(e){e="string"==typeof e?c(e):ce.extend({},e);var t,n,r,o,i=[],a=[],s=-1,u=function(){for(o=e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)i[s].apply(n[0],n[1])===!1&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},l={add:function(){return i&&(n&&!t&&(s=i.length-1,a.push(n)),function t(n){ce.each(n,function(n,r){ce.isFunction(r)?e.unique&&l.has(r)||i.push(r):r&&r.length&&"string"!==ce.type(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return ce.each(arguments,function(e,t){for(var n;(n=ce.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?ce.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=a=[],n||(i=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},ce.extend({Deferred:function(e){var t=[["resolve","done",ce.Callbacks("once memory"),"resolved"],["reject","fail",ce.Callbacks("once memory"),"rejected"],["notify","progress",ce.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ce.Deferred(function(n){ce.each(t,function(t,i){var a=ce.isFunction(e[t])&&e[t];o[i[1]](function(){var e=a&&a.apply(this,arguments);e&&ce.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ce.extend(e,r):r}},o={};return r.pipe=r.then,ce.each(t,function(e,i){var a=i[2],s=i[3];r[i[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[i[0]]=function(){return o[i[0]+"With"](this===o?r:this,arguments),this},o[i[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,i=ee.call(arguments),a=i.length,s=1!==a||e&&ce.isFunction(e.promise)?a:0,u=1===s?e:ce.Deferred(),c=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?ee.call(arguments):o,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);o<a;o++)i[o]&&ce.isFunction(i[o].promise)?i[o].promise().progress(c(o,n,t)).done(c(o,r,i)).fail(u.reject):--s;return s||u.resolveWith(r,i),u.promise()}});var Se;ce.fn.ready=function(e){return ce.ready.promise().done(e),this},ce.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ce.readyWait++:ce.ready(!0)},ready:function(e){(e===!0?--ce.readyWait:ce.isReady)||(ce.isReady=!0,e!==!0&&--ce.readyWait>0||(Se.resolveWith(J,[ce]),ce.fn.triggerHandler&&(ce(J).triggerHandler("ready"),ce(J).off("ready"))))}}),ce.ready.promise=function(e){return Se||(Se=ce.Deferred(),"complete"===J.readyState||"loading"!==J.readyState&&!J.documentElement.doScroll?n.setTimeout(ce.ready):(J.addEventListener("DOMContentLoaded",l),n.addEventListener("load",l))),Se.promise(e)},ce.ready.promise();var _e=function(e,t,n,r,o,i,a){var s=0,u=e.length,c=null==n;if("object"===ce.type(n)){o=!0;for(s in n)_e(e,t,s,n[s],!0,i,a)}else if(void 0!==r&&(o=!0,ce.isFunction(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):u?t(e[0],n):i},Oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};p.uid=1,p.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Oe(e))return{};var t=e[this.expando];return t||(t={},Oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[t]=n;else for(r in t)o[r]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,ce.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,o,i=e[this.expando];if(void 0!==i){if(void 0===t)this.register(e);else{ce.isArray(t)?r=t.concat(t.map(ce.camelCase)):(o=ce.camelCase(t),t in i?r=[t,o]:(r=o,r=r in i?[r]:r.match(Ne)||[])),n=r.length;for(;n--;)delete i[r[n]]}(void 0===t||ce.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var Pe=new p,Ae=new p,Ie=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Me=/[A-Z]/g;ce.extend({hasData:function(e){return Ae.hasData(e)||Pe.hasData(e)},data:function(e,t,n){return Ae.access(e,t,n)},removeData:function(e,t){Ae.remove(e,t)},_data:function(e,t,n){return Pe.access(e,t,n)},_removeData:function(e,t){Pe.remove(e,t)}}),ce.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=Ae.get(i),1===i.nodeType&&!Pe.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=ce.camelCase(r.slice(5)),h(i,r,o[r])));Pe.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){Ae.set(this,e)}):_e(this,function(t){var n,r;if(i&&void 0===t){if(n=Ae.get(i,e)||Ae.get(i,e.replace(Me,"-$&").toLowerCase()),void 0!==n)return n;if(r=ce.camelCase(e),n=Ae.get(i,r),void 0!==n)return n;if(n=h(i,r,void 0),void 0!==n)return n}else r=ce.camelCase(e),this.each(function(){var n=Ae.get(this,r);Ae.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&Ae.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ae.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Pe.get(e,t),n&&(!r||ce.isArray(n)?r=Pe.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ce.queue(e,t),r=n.length,o=n.shift(),i=ce._queueHooks(e,t),a=function(){ce.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,a,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Pe.get(e,n)||Pe.access(e,n,{empty:ce.Callbacks("once memory").add(function(){Pe.remove(e,[t+"queue",n])})})}}),ce.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ce.queue(this[0],e):void 0===t?this:this.each(function(){var n=ce.queue(this,e,t);ce._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ce.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=ce.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=Pe.get(i[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var Re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Le=new RegExp("^(?:([+-])=|)("+Re+")([a-z%]*)$","i"),ke=["Top","Right","Bottom","Left"],De=function(e,t){return e=t||e,"none"===ce.css(e,"display")||!ce.contains(e.ownerDocument,e)},Be=/^(?:checkbox|radio)$/i,Ue=/<([\w:-]+)/,Fe=/^$|\/(?:java|ecma)script/i,je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};je.optgroup=je.option,je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td;var He=/<|&#?\w+;/;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),se.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",se.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ve=/^key/,We=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ge=/^([^.]*)(?:\.(.+)|)/;ce.event={global:{},add:function(e,t,n,r,o){var i,a,s,u,c,l,p,h,f,d,m,g=Pe.get(e);if(g)for(n.handler&&(i=n,n=i.handler,o=i.selector),n.guid||(n.guid=ce.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(t){return"undefined"!=typeof ce&&ce.event.triggered!==t.type?ce.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ne)||[""],c=t.length;c--;)s=Ge.exec(t[c])||[],f=m=s[1],d=(s[2]||"").split(".").sort(),f&&(p=ce.event.special[f]||{},f=(o?p.delegateType:p.bindType)||f,p=ce.event.special[f]||{},l=ce.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&ce.expr.match.needsContext.test(o),namespace:d.join(".")},i),(h=u[f])||(h=u[f]=[],h.delegateCount=0,p.setup&&p.setup.call(e,r,d,a)!==!1||e.addEventListener&&e.addEventListener(f,a)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,l):h.push(l),ce.event.global[f]=!0)},remove:function(e,t,n,r,o){var i,a,s,u,c,l,p,h,f,d,m,g=Pe.hasData(e)&&Pe.get(e);if(g&&(u=g.events)){for(t=(t||"").match(Ne)||[""],c=t.length;c--;)if(s=Ge.exec(t[c])||[],f=m=s[1],d=(s[2]||"").split(".").sort(),f){for(p=ce.event.special[f]||{},f=(r?p.delegateType:p.bindType)||f,h=u[f]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=h.length;i--;)l=h[i],!o&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(i,1),
l.selector&&h.delegateCount--,p.remove&&p.remove.call(e,l));a&&!h.length&&(p.teardown&&p.teardown.call(e,d,g.handle)!==!1||ce.removeEvent(e,f,g.handle),delete u[f])}else for(f in u)ce.event.remove(e,f+t[c],n,r,!0);ce.isEmptyObject(u)&&Pe.remove(e,"handle events")}},dispatch:function(e){e=ce.event.fix(e);var t,n,r,o,i,a=[],s=ee.call(arguments),u=(Pe.get(this,"events")||{})[e.type]||[],c=ce.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=ce.event.handlers.call(this,e,u),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(i.namespace)||(e.handleObj=i,e.data=i.data,r=((ce.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,i,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(r=[],n=0;n<s;n++)i=t[n],o=i.selector+" ",void 0===r[o]&&(r[o]=i.needsContext?ce(o,this).index(u)>-1:ce.find(o,this,null,[u]).length),r[o]&&r.push(i);r.length&&a.push({elem:u,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,o,i=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,o=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e[ce.expando])return e;var t,n,r,o=e.type,i=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=We.test(o)?this.mouseHooks:Ve.test(o)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ce.Event(i),t=r.length;t--;)n=r[t],e[n]=i[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,i):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===b()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ce.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ce.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){return this instanceof ce.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?v:y):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||ce.now(),void(this[ce.expando]=!0)):new ce.Event(e,t)},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:y,isPropagationStopped:y,isImmediatePropagationStopped:y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=v,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=v,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=v,e&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ce.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,i=e.handleObj;return o&&(o===r||ce.contains(r,o))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),ce.fn.extend({on:function(e,t,n,r){return E(this,e,t,n,r)},one:function(e,t,n,r){return E(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=y),this.each(function(){ce.event.remove(this,e,n,t)})}});var ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Ye=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/^true\/(.*)/,Ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ce.extend({htmlPrefilter:function(e){return e.replace(ze,"<$1></$2>")},clone:function(e,t,n){var r,o,i,a,s=e.cloneNode(!0),u=ce.contains(e.ownerDocument,e);if(!(se.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=d(s),i=d(e),r=0,o=i.length;r<o;r++)N(i[r],a[r]);if(t)if(n)for(i=i||d(e),a=a||d(s),r=0,o=i.length;r<o;r++)C(i[r],a[r]);else C(e,s);return a=d(s,"script"),a.length>0&&m(a,!u&&d(e,"script")),s},cleanData:function(e){for(var t,n,r,o=ce.event.special,i=0;void 0!==(n=e[i]);i++)if(Oe(n)){if(t=n[Pe.expando]){if(t.events)for(r in t.events)o[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[Pe.expando]=void 0}n[Ae.expando]&&(n[Ae.expando]=void 0)}}}),ce.fn.extend({domManip:S,detach:function(e){return _(this,e,!0)},remove:function(e){return _(this,e)},text:function(e){return _e(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return S(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=w(this,e);t.appendChild(e)}})},prepend:function(){return S(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=w(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return S(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return S(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(d(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return _e(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!je[(Ue.exec(e)||["",""])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(ce.cleanData(d(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return S(this,arguments,function(t){var n=this.parentNode;ce.inArray(this,e)<0&&(ce.cleanData(d(this)),n&&n.replaceChild(t,this))},e)}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ce.fn[e]=function(e){for(var n,r=[],o=ce(e),i=o.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),ce(o[a])[t](n),ne.apply(r,n.get());return this.pushStack(r)}});var Ze,$e={HTML:"block",BODY:"block"},Qe=/^margin/,Je=new RegExp("^("+Re+")(?!px)[a-z%]+$","i"),et=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},tt=function(e,t,n,r){var o,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];o=n.apply(e,r||[]);for(i in t)e.style[i]=a[i];return o},nt=J.documentElement;!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",nt.appendChild(a);var e=n.getComputedStyle(s);t="1%"!==e.top,i="2px"===e.marginLeft,r="4px"===e.width,s.style.marginRight="50%",o="4px"===e.marginRight,nt.removeChild(a)}var t,r,o,i,a=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",se.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),ce.extend(se,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==r&&e(),r},pixelMarginRight:function(){return null==r&&e(),o},reliableMarginLeft:function(){return null==r&&e(),i},reliableMarginRight:function(){var e,t=s.appendChild(J.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",nt.appendChild(a),e=!parseFloat(n.getComputedStyle(t).marginRight),nt.removeChild(a),s.removeChild(t),e}}))}();var rt=/^(none|table(?!-c[ea]).+)/,ot={position:"absolute",visibility:"hidden",display:"block"},it={letterSpacing:"0",fontWeight:"400"},at=["Webkit","O","Moz","ms"],st=J.createElement("div").style;ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=A(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=ce.camelCase(t),u=e.style;return t=ce.cssProps[s]||(ce.cssProps[s]=M(s)||s),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:u[t]:(i=typeof n,"string"===i&&(o=Le.exec(n))&&o[1]&&(n=f(e,t,o),i="number"),null!=n&&n===n&&("number"===i&&(n+=o&&o[3]||(ce.cssNumber[s]?"":"px")),se.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var o,i,a,s=ce.camelCase(t);return t=ce.cssProps[s]||(ce.cssProps[s]=M(s)||s),a=ce.cssHooks[t]||ce.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=A(e,t,r)),"normal"===o&&t in it&&(o=it[t]),""===n||n?(i=parseFloat(o),n===!0||isFinite(i)?i||0:o):o}}),ce.each(["height","width"],function(e,t){ce.cssHooks[t]={get:function(e,n,r){if(n)return rt.test(ce.css(e,"display"))&&0===e.offsetWidth?tt(e,ot,function(){return k(e,t,r)}):k(e,t,r)},set:function(e,n,r){var o,i=r&&et(e),a=r&&L(e,t,r,"border-box"===ce.css(e,"boxSizing",!1,i),i);return a&&(o=Le.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=ce.css(e,t)),R(e,n,a)}}}),ce.cssHooks.marginLeft=I(se.reliableMarginLeft,function(e,t){if(t)return(parseFloat(A(e,"marginLeft"))||e.getBoundingClientRect().left-tt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ce.cssHooks.marginRight=I(se.reliableMarginRight,function(e,t){if(t)return tt(e,{display:"inline-block"},A,[e,"marginRight"])}),ce.each({margin:"",padding:"",border:"Width"},function(e,t){ce.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+ke[r]+t]=i[r]||i[r-2]||i[0];return o}},Qe.test(e)||(ce.cssHooks[e+t].set=R)}),ce.fn.extend({css:function(e,t){return _e(this,function(e,t,n){var r,o,i={},a=0;if(ce.isArray(t)){for(r=et(e),o=t.length;a<o;a++)i[t[a]]=ce.css(e,t[a],!1,r);return i}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){De(this)?ce(this).show():ce(this).hide()})}}),ce.Tween=B,B.prototype={constructor:B,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(ce.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ce.cssProps[e.prop]]&&!ce.cssHooks[e.prop]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ce.fx=B.prototype.init,ce.fx.step={};var ut,ct,lt=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;ce.Animation=ce.extend(W,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return f(n.elem,e,Le.exec(t),n),n}]},tweener:function(e,t){ce.isFunction(e)?(t=e,e=["*"]):e=e.match(Ne);for(var n,r=0,o=e.length;r<o;r++)n=e[r],W.tweeners[n]=W.tweeners[n]||[],W.tweeners[n].unshift(t)},prefilters:[H],prefilter:function(e,t){t?W.prefilters.unshift(e):W.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&"object"==typeof e?ce.extend({},e):{complete:n||!n&&t||ce.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ce.isFunction(t)&&t};return r.duration=ce.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ce.fx.speeds?ce.fx.speeds[r.duration]:ce.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){ce.isFunction(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(De).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=ce.isEmptyObject(e),i=ce.speed(t,n,r),a=function(){var t=W(this,ce.extend({},e),i);(o||Pe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||i.queue===!1?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=ce.timers,a=Pe.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&pt.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||ce.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Pe.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=ce.timers,a=r?r.length:0;for(n.finish=!0,ce.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ce.each(["toggle","show","hide"],function(e,t){var n=ce.fn[t];ce.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(F(t,!0),e,r,o)}}),ce.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ce.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(ut=ce.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),ut=void 0},ce.fx.timer=function(e){ce.timers.push(e),e()?ce.fx.start():ce.timers.pop()},ce.fx.interval=13,ce.fx.start=function(){ct||(ct=n.setInterval(ce.fx.tick,ce.fx.interval))},ce.fx.stop=function(){n.clearInterval(ct),ct=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(e,t){return e=ce.fx?ce.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var o=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(o)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",se.checkOn=""!==e.value,se.optSelected=n.selected,t.disabled=!0,se.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",se.radioValue="t"===e.value}();var ht,ft=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return _e(this,ce.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return"undefined"==typeof e.getAttribute?ce.prop(e,t,n):(1===i&&ce.isXMLDoc(e)||(t=t.toLowerCase(),o=ce.attrHooks[t]||(ce.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:(r=ce.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!se.radioValue&&"radio"===t&&ce.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,o=0,i=t&&t.match(Ne);if(i&&1===e.nodeType)for(;n=i[o++];)r=ce.propFix[n]||n,ce.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),ht={set:function(e,t,n){return t===!1?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ft[t]||ce.find.attr;ft[t]=function(e,t,r){var o,i;return r||(i=ft[t],ft[t]=o,o=null!=n(e,t,r)?t.toLowerCase():null,ft[t]=i),o}});var dt=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;ce.fn.extend({prop:function(e,t){return _e(this,ce.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,o=ce.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),se.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this});var gt=/[\t\r\n\f]/g;ce.fn.extend({addClass:function(e){var t,n,r,o,i,a,s,u=0;if(ce.isFunction(e))return this.each(function(t){ce(this).addClass(e.call(this,t,G(this)))});if("string"==typeof e&&e)for(t=e.match(Ne)||[];n=this[u++];)if(o=G(n),r=1===n.nodeType&&(" "+o+" ").replace(gt," ")){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=ce.trim(r),o!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,o,i,a,s,u=0;if(ce.isFunction(e))return this.each(function(t){ce(this).removeClass(e.call(this,t,G(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ne)||[];n=this[u++];)if(o=G(n),r=1===n.nodeType&&(" "+o+" ").replace(gt," ")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");s=ce.trim(r),o!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ce.isFunction(e)?this.each(function(n){ce(this).toggleClass(e.call(this,n,G(this),t),t)}):this.each(function(){var t,r,o,i;if("string"===n)for(r=0,o=ce(this),i=e.match(Ne)||[];t=i[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=G(this),t&&Pe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Pe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+G(n)+" ").replace(gt," ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g,yt=/[\x20\t\r\n\f]+/g;ce.fn.extend({val:function(e){var t,n,r,o=this[0];{if(arguments.length)return r=ce.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,ce(this).val()):e,null==o?o="":"number"==typeof o?o+="":ce.isArray(o)&&(o=ce.map(o,function(e){return null==e?"":e+""})),t=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=ce.valHooks[o.type]||ce.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(vt,""):null==n?"":n)}}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:ce.trim(ce.text(e)).replace(yt," ")}},select:{get:function(e){for(var t,n,r=e.options,o=e.selectedIndex,i="select-one"===e.type||o<0,a=i?null:[],s=i?o+1:r.length,u=o<0?s:i?o:0;u<s;u++)if(n=r[u],(n.selected||u===o)&&(se.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ce.nodeName(n.parentNode,"optgroup"))){if(t=ce(n).val(),i)return t;a.push(t)}return a},set:function(e,t){for(var n,r,o=e.options,i=ce.makeArray(t),a=o.length;a--;)r=o[a],(r.selected=ce.inArray(ce.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){if(ce.isArray(t))return e.checked=ce.inArray(ce(e).val(),t)>-1}},se.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var bt=/^(?:focusinfocus|focusoutblur)$/;ce.extend(ce.event,{trigger:function(e,t,r,o){var i,a,s,u,c,l,p,h=[r||J],f=ae.call(e,"type")?e.type:e,d=ae.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!bt.test(f+ce.event.triggered)&&(f.indexOf(".")>-1&&(d=f.split("."),f=d.shift(),d.sort()),c=f.indexOf(":")<0&&"on"+f,e=e[ce.expando]?e:new ce.Event(f,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:ce.makeArray(t,[e]),p=ce.event.special[f]||{},o||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!o&&!p.noBubble&&!ce.isWindow(r)){for(u=p.delegateType||f,bt.test(u+f)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||J)&&h.push(s.defaultView||s.parentWindow||n)}for(i=0;(a=h[i++])&&!e.isPropagationStopped();)e.type=i>1?u:p.bindType||f,l=(Pe.get(a,"events")||{})[e.type]&&Pe.get(a,"handle"),l&&l.apply(a,t),l=c&&a[c],l&&l.apply&&Oe(a)&&(e.result=l.apply(a,t),e.result===!1&&e.preventDefault());return e.type=f,o||e.isDefaultPrevented()||p._default&&p._default.apply(h.pop(),t)!==!1||!Oe(r)||c&&ce.isFunction(r[f])&&!ce.isWindow(r)&&(s=r[c],s&&(r[c]=null),ce.event.triggered=f,r[f](),ce.event.triggered=void 0,s&&(r[c]=s)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}}),ce.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ce.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ce.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),se.focusin="onfocusin"in n,se.focusin||ce.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ce.event.simulate(t,e.target,ce.event.fix(e))};ce.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=Pe.access(r,t);o||r.addEventListener(e,n,!0),Pe.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=Pe.access(r,t)-1;o?Pe.access(r,t,o):(r.removeEventListener(e,n,!0),Pe.remove(r,t))}}});var Et=n.location,wt=ce.now(),xt=/\?/;ce.parseJSON=function(e){return JSON.parse(e+"")},ce.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ce.error("Invalid XML: "+e),t};var Tt=/#.*$/,Ct=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,St=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_t=/^(?:GET|HEAD)$/,Ot=/^\/\//,Pt={},At={},It="*/".concat("*"),Mt=J.createElement("a");Mt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:St.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ce.parseJSON,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Y(Y(e,ce.ajaxSettings),t):Y(ce.ajaxSettings,e)},ajaxPrefilter:z(Pt),ajaxTransport:z(At),ajax:function(e,t){function r(e,t,r,s){var c,p,y,b,w,T=t;2!==E&&(E=2,u&&n.clearTimeout(u),o=void 0,a=s||"",x.readyState=e>0?4:0,c=e>=200&&e<300||304===e,r&&(b=X(h,x,r)),b=K(h,b,x,c),c?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ce.lastModified[i]=w),w=x.getResponseHeader("etag"),w&&(ce.etag[i]=w)),204===e||"HEAD"===h.type?T="nocontent":304===e?T="notmodified":(T=b.state,p=b.data,y=b.error,c=!y)):(y=T,!e&&T||(T="error",e<0&&(e=0))),x.status=e,x.statusText=(t||T)+"",c?m.resolveWith(f,[p,T,x]):m.rejectWith(f,[x,T,y]),x.statusCode(v),v=void 0,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[x,h,c?p:y]),g.fireWith(f,[x,T]),l&&(d.trigger("ajaxComplete",[x,h]),--ce.active||ce.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var o,i,a,s,u,c,l,p,h=ce.ajaxSetup({},t),f=h.context||h,d=h.context&&(f.nodeType||f.jquery)?ce(f):ce.event,m=ce.Deferred(),g=ce.Callbacks("once memory"),v=h.statusCode||{},y={},b={},E=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===E){if(!s)for(s={};t=Nt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===E?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return E||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return E||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(E<2)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return o&&o.abort(t),r(0,t),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||Et.href)+"").replace(Tt,"").replace(Ot,Et.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=ce.trim(h.dataType||"*").toLowerCase().match(Ne)||[""],null==h.crossDomain){c=J.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Mt.protocol+"//"+Mt.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ce.param(h.data,h.traditional)),q(Pt,h,t,x),2===E)return x;l=ce.event&&h.global,l&&0===ce.active++&&ce.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!_t.test(h.type),i=h.url,h.hasContent||(h.data&&(i=h.url+=(xt.test(i)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Ct.test(i)?i.replace(Ct,"$1_="+wt++):i+(xt.test(i)?"&":"?")+"_="+wt++)),h.ifModified&&(ce.lastModified[i]&&x.setRequestHeader("If-Modified-Since",ce.lastModified[i]),ce.etag[i]&&x.setRequestHeader("If-None-Match",ce.etag[i])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+It+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)x.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(h.beforeSend.call(f,x,h)===!1||2===E))return x.abort();w="abort";for(p in{success:1,error:1,complete:1})x[p](h[p]);if(o=q(At,h,t,x)){if(x.readyState=1,l&&d.trigger("ajaxSend",[x,h]),2===E)return x;h.async&&h.timeout>0&&(u=n.setTimeout(function(){x.abort("timeout")},h.timeout));try{E=1,o.send(y,r)}catch(e){if(!(E<2))throw e;r(-1,e)}}else r(-1,"No Transport");return x},getJSON:function(e,t,n){return ce.get(e,t,n,"json")},getScript:function(e,t){return ce.get(e,void 0,t,"script")}}),ce.each(["get","post"],function(e,t){ce[t]=function(e,n,r,o){return ce.isFunction(n)&&(o=o||r,r=n,n=void 0),ce.ajax(ce.extend({url:e,type:t,dataType:o,data:n,success:r},ce.isPlainObject(e)&&e))}}),ce._evalUrl=function(e){return ce.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ce.fn.extend({wrapAll:function(e){var t;return ce.isFunction(e)?this.each(function(t){ce(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ce.isFunction(e)?this.each(function(t){ce(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ce(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ce.isFunction(e);return this.each(function(n){ce(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ce.nodeName(this,"body")||ce(this).replaceWith(this.childNodes)}).end()}}),ce.expr.filters.hidden=function(e){return!ce.expr.filters.visible(e)},ce.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Rt=/%20/g,Lt=/\[\]$/,kt=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;ce.param=function(e,t){var n,r=[],o=function(e,t){t=ce.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ce.ajaxSettings&&ce.ajaxSettings.traditional),ce.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){o(this.name,this.value)});else for(n in e)Z(n,e[n],t,o);return r.join("&").replace(Rt,"+")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&Bt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!Be.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:ce.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}}),ce.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Ft=ce.ajaxSettings.xhr();se.cors=!!Ft&&"withCredentials"in Ft,se.ajax=Ft=!!Ft,ce.ajaxTransport(function(e){var t,r;if(se.cors||Ft&&!e.crossDomain)return{send:function(o,i){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");
for(a in o)s.setRequestHeader(a,o[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Ut[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ce.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,o){t=ce("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var jt=[],Ht=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jt.pop()||ce.expando+"_"+wt++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(e,t,r){var o,i,a,s=e.jsonp!==!1&&(Ht.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ht.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=ce.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ht,"$1"+o):e.jsonp!==!1&&(e.url+=(xt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||ce.error(o+" was not called"),a[0]},e.dataTypes[0]="json",i=n[o],n[o]=function(){a=arguments},r.always(function(){void 0===i?ce(n).removeProp(o):n[o]=i,e[o]&&(e.jsonpCallback=t.jsonpCallback,jt.push(o)),a&&ce.isFunction(i)&&i(a[0]),a=i=void 0}),"script"}),ce.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=ye.exec(e),o=!n&&[];return r?[t.createElement(r[1])]:(r=g([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],r.childNodes))};var Vt=ce.fn.load;ce.fn.load=function(e,t,n){if("string"!=typeof e&&Vt)return Vt.apply(this,arguments);var r,o,i,a=this,s=e.indexOf(" ");return s>-1&&(r=ce.trim(e.slice(s)),e=e.slice(0,s)),ce.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&ce.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?ce("<div>").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.expr.filters.animated=function(e){return ce.grep(ce.timers,function(t){return e===t.elem}).length},ce.offset={setOffset:function(e,t,n){var r,o,i,a,s,u,c,l=ce.css(e,"position"),p=ce(e),h={};"static"===l&&(e.style.position="relative"),s=p.offset(),i=ce.css(e,"top"),u=ce.css(e,"left"),c=("absolute"===l||"fixed"===l)&&(i+u).indexOf("auto")>-1,c?(r=p.position(),a=r.top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(u)||0),ce.isFunction(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):p.css(h)}},ce.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ce.offset.setOffset(this,e,t)});var t,n,r=this[0],o={top:0,left:0},i=r&&r.ownerDocument;if(i)return t=i.documentElement,ce.contains(t,r)?(o=r.getBoundingClientRect(),n=$(i),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===ce.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ce.nodeName(e[0],"html")||(r=e.offset()),r.top+=ce.css(e[0],"borderTopWidth",!0),r.left+=ce.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-ce.css(n,"marginTop",!0),left:t.left-r.left-ce.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ce.css(e,"position");)e=e.offsetParent;return e||nt})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ce.fn[e]=function(r){return _e(this,function(e,r,o){var i=$(e);return void 0===o?i?i[t]:e[r]:void(i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o)},e,r,arguments.length)}}),ce.each(["top","left"],function(e,t){ce.cssHooks[t]=I(se.pixelPosition,function(e,n){if(n)return n=A(e,t),Je.test(n)?ce(e).position()[t]+"px":n})}),ce.each({Height:"height",Width:"width"},function(e,t){ce.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ce.fn[r]=function(r,o){var i=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||o===!0?"margin":"border");return _e(this,function(t,n,r){var o;return ce.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?ce.css(t,n,a):ce.style(t,n,r,a)},t,i?r:void 0,i,null)}})}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),ce.fn.andSelf=ce.fn.addBack,r=[],o=function(){return ce}.apply(t,r),!(void 0!==o&&(e.exports=o));var Wt=n.jQuery,Gt=n.$;return ce.noConflict=function(e){return n.$===ce&&(n.$=Gt),e&&n.jQuery===ce&&(n.jQuery=Wt),ce},i||(n.jQuery=n.$=ce),ce})},function(e,t,n){"use strict";var r=n(181),o=n(182);t.ImageHelper={loadImage:function(e){var t=r.ImageCache.get(e);return new o.Promise(function(e,n){var r=function(){e(t)},o=function(){n(t)};t.naturalWidth&&t.naturalHeight?r():(t.addEventListener("load",r,!1),t.addEventListener("error",o,!1))})},loadImages:function(e){var t=e.map(this.loadImage.bind(this));return o.Promise.all(t)},stuffImages:function(e){r.ImageCache.stuff(e)},removeImage:function(e){r.ImageCache.remove(e)}}},function(e,t){"use strict";var n={},r=function(e){return n[e]||(n[e]=new Image,n[e].src=e),n[e]},o=function(e){return r(e)},i=function(e){return void 0!==n[e]},a=function(e){return e.length>0?e.map(r):[]},s=function(e){var t=n[e];t&&(n[e]=null)};t.ImageCache={add:r,remove:s,stuff:a,get:o,inCache:i}},function(e,t,n){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.5
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function i(e){K=e}function a(e){Z=e}function s(){return function(){return t.nextTick(h)}}function u(){return"undefined"!=typeof X?function(){X(h)}:p()}function c(){var e=0,t=new J(h),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=h,function(){return e.port2.postMessage(0)}}function p(){var e=setTimeout;return function(){return e(h,1)}}function h(){for(var e=0;e<Y;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}Y=0}function f(){try{var e=n(184);return X=e.runOnLoop||e.runOnContext,u()}catch(e){return p()}}function d(e,t){var n=arguments,r=this,o=new this.constructor(g);void 0===o[oe]&&k(o);var i=r._state;return i?!function(){var e=n[i-1];Z(function(){return M(i,o,e,r._result)})}():O(r,o,e,t),o}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return C(n,e),n}function g(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(e){return ue.error=e,ue}}function E(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function w(e,t,n){Z(function(e){var r=!1,o=E(n,t,function(n){r||(r=!0,t!==n?C(e,n):S(e,n))},function(t){r||(r=!0,_(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,_(e,o))},e)}function x(e,t){t._state===ae?S(e,t._result):t._state===se?_(e,t._result):O(t,void 0,function(t){return C(e,t)},function(t){return _(e,t)})}function T(e,t,n){t.constructor===e.constructor&&n===d&&t.constructor.resolve===m?x(e,t):n===ue?_(e,ue.error):void 0===n?S(e,t):o(n)?w(e,t,n):S(e,t)}function C(t,n){t===n?_(t,v()):e(n)?T(t,n,b(n)):S(t,n)}function N(e){e._onerror&&e._onerror(e._result),P(e)}function S(e,t){e._state===ie&&(e._result=t,e._state=ae,0!==e._subscribers.length&&Z(P,e))}function _(e,t){e._state===ie&&(e._state=se,e._result=t,Z(N,e))}function O(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+ae]=n,o[i+se]=r,0===i&&e._state&&Z(P,e)}function P(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?M(n,r,o,i):o(i);e._subscribers.length=0}}function A(){this.error=null}function I(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function M(e,t,n,r){var i=o(n),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=I(n,r),a===ce?(c=!0,s=a.error,a=null):u=!0,t===a)return void _(t,y())}else a=r,u=!0;t._state!==ie||(i&&u?C(t,a):c?_(t,s):e===ae?S(t,a):e===se&&_(t,a))}function R(e,t){try{t(function(t){C(e,t)},function(t){_(e,t)})}catch(t){_(e,t)}}function L(){return le++}function k(e){e[oe]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function D(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[oe]||k(this.promise),q(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):_(this.promise,B())}function B(){return new Error("Array Methods must be provided an Array")}function U(e){return new D(this,e).promise}function F(e){var t=this;return new t(q(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function j(e){var t=this,n=new t(g);return _(n,e),n}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function W(e){this[oe]=L(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&H(),this instanceof W?R(this,e):V())}function G(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=W}var z=void 0;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var q=z,Y=0,X=void 0,K=void 0,Z=function(e,t){ne[Y]=e,ne[Y+1]=t,Y+=2,2===Y&&(K?K(h):re())},$="undefined"!=typeof window?window:void 0,Q=$||{},J=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?s():J?c():te?l():void 0===$?f():p();var oe=Math.random().toString(36).substring(16),ie=void 0,ae=1,se=2,ue=new A,ce=new A,le=0;return D.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ie&&n<e;n++)this._eachEntry(t[n],n)},D.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var o=b(e);if(o===d&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===W){var i=new n(g);T(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},D.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ie&&(this._remaining--,e===se?_(r,n):this._result[t]=n),0===this._remaining&&S(r,this._result)},D.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,function(e){return n._settledAt(ae,t,e)},function(e){return n._settledAt(se,t,e)})},W.all=U,W.race=F,W.resolve=m,W.reject=j,W._setScheduler=i,W._setAsap=a,W._asap=Z,W.prototype={constructor:W,then:d,catch:function(e){return this.then(null,e)}},W.polyfill=G,W.Promise=W,W})}).call(t,n(183),function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?d=f.concat(d):g=-1,d.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=d.length;t;){for(f=d,d=[];++g<t;)f&&f[g].run();g=-1,t=d.length}f=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,p,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var f,d=[],m=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){},function(e,t,n){"use strict";var r=n(186),o=n(10),i=function(){function e(t){var n=this;this.posting=!1,this.statsQueued=[],this.statsSending=[],this.currentUserActions={},this.commFailure=t,this.commFailure.onRetry(function(e){n.doRetry(e)}),void 0==o.Context.controlSettings.submitUserActions&&(o.Context.controlSettings.submitUserActions=function(e,t){t()}),o.Context.controlSettings.submitUserActionsInterval||(o.Context.controlSettings.submitUserActionsInterval=e.DEFAULT_SUBMIT_USER_ACTIONS_INTERVAL),o.Context.controlSettings.userActions&&o.Context.controlSettings.userActions.forEach(function(e){n.addToCurrentUserActions(e)})}return Object.defineProperty(e.prototype,"disabled",{set:function(e){this._disabled=e},enumerable:!0,configurable:!0}),e.addToQueue=function(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].a==e.a&&t[n].k1==e.k1&&t[n].k2==e.k2){t.splice(n,1);break}t.push(e)},e.prototype.addToCurrentUserActions=function(e){var t=e.a+"#"+(void 0==e.k1||null==e.k1?"0":e.k1.toString())+"#"+(void 0==e.k2||null==e.k2?"":e.k2),n=JSON.stringify(e.p);return this.currentUserActions[t]!=n&&(this.currentUserActions[t]=n,!0)},e.prototype.addToStatsQueued=function(t){return!(this._disabled||!this.addToCurrentUserActions(t))&&(e.addToQueue(t,this.statsQueued),this.schedulePostStats(),!0)},e.prototype.deleteEllipseAnnotation=function(e,t){this.addToStatsQueued({a:r.UserActionType.ELLIPSE_ANNOTATION,k1:e,k2:t})},e.prototype.deleteRectangleAnnotation=function(e,t){this.addToStatsQueued({a:r.UserActionType.RECTANGLE_ANNOTATION,k1:e,k2:t})},e.prototype.deleteTextAnnotation=function(e,t){this.addToStatsQueued({a:r.UserActionType.TEXT_ANNOTATION,k1:e,k2:t})},e.prototype.doRetry=function(e){this.postStats()},e.prototype.flush=function(){this.isFlushed()||this.postStats()},e.prototype.isFlushed=function(){return 0==this.statsQueued.length&&0==this.statsSending.length},e.prototype.postStats=function(){var t=this;this.posting||(clearTimeout(this.postTimeoutId),this.postTimeoutId=void 0,0!=this.statsQueued.length&&(this.posting=!0,this.statsQueued.forEach(function(n){e.addToQueue(n,t.statsSending)}),this.statsQueued=[],o.Context.controlSettings.submitUserActions(this.statsSending,function(){t.posting=!1,t.statsSending=[],t.schedulePostStats()},function(){t.statsSending.forEach(function(n){e.addToQueue(n,t.statsQueued)}),t.posting=!1,t.statsSending=[],t.commFailure.requestFailed()})))},e.prototype.saveAnnotationColor=function(e){this.addToStatsQueued({a:r.UserActionType.ANNOTATION_COLOR,p:e})},e.prototype.saveBookNotes=function(e){""===e&&(e=null),this.addToStatsQueued({a:r.UserActionType.BOOK_NOTES,p:e})},e.prototype.saveControlState=function(e,t,n){this.addToStatsQueued({a:r.UserActionType.CONTROL_STATE,k1:e,k2:t,p:n})},e.prototype.saveEllipseAnnotation=function(e,t,n,o,i,a,s){this.addToStatsQueued({a:r.UserActionType.ELLIPSE_ANNOTATION,k1:e,k2:t,p:{x:Math.round(n),y:Math.round(o),w:Math.round(i),h:Math.round(a),c:Math.round(s)}})},e.prototype.saveLanguage=function(e){e=e?e:"",this.addToStatsQueued({a:r.UserActionType.LANGUAGE,p:e})},e.prototype.saveLayoutMode=function(e){this.addToStatsQueued({a:r.UserActionType.LAYOUT_MODE,p:e})},e.prototype.savePage=function(e){this.addToStatsQueued({a:r.UserActionType.PAGE,p:e})},e.prototype.savePageBookmarked=function(e,t){this.addToStatsQueued({a:r.UserActionType.PAGE_BOOKMARK,k1:e,p:t})},e.prototype.savePageHighlights=function(e,t){t&&0==t.length&&(t=null),this.addToStatsQueued({a:r.UserActionType.PAGE_HIGHLIGHTS,k1:e,p:t})},e.prototype.savePageNotes=function(e,t){t&&0==t.length&&(t=null),this.addToStatsQueued({a:r.UserActionType.PAGE_NOTES,k1:e,p:t})},e.prototype.saveRectangleAnnotation=function(e,t,n,o,i,a,s){this.addToStatsQueued({a:r.UserActionType.RECTANGLE_ANNOTATION,k1:e,k2:t,p:{x:Math.round(n),y:Math.round(o),w:Math.round(i),h:Math.round(a),c:Math.round(s)}})},e.prototype.saveTextAnnotation=function(e,t,n,o,i,a,s,u){this.addToStatsQueued({a:r.UserActionType.TEXT_ANNOTATION,k1:e,k2:t,p:{x:Math.round(n),y:Math.round(o),w:Math.round(i),h:Math.round(a),c:Math.round(s),t:u}})},e.prototype.saveZoom=function(e){this.addToStatsQueued({a:r.UserActionType.ZOOM,p:e})},e.prototype.schedulePostStats=function(){var e=this;void 0!=this.postTimeoutId||this.posting||this.isFlushed()||(this.postTimeoutId=setTimeout(function(){e.postStats()},o.Context.controlSettings.submitUserActionsInterval))},e}();i.MAX_RETRIES=3,i.DEFAULT_SUBMIT_USER_ACTIONS_INTERVAL=500,t.UserActionStorage=i},function(e,t){"use strict";var n;!function(e){e[e.FORM_CONTROL_VALUE=0]="FORM_CONTROL_VALUE",e[e.LANGUAGE=1]="LANGUAGE",e[e.LAYOUT_MODE=2]="LAYOUT_MODE",e[e.PAGE=3]="PAGE",e[e.PAGE_BOOKMARK=4]="PAGE_BOOKMARK",e[e.PAGE_HIGHLIGHTS=5]="PAGE_HIGHLIGHTS",e[e.PAGE_NOTES=6]="PAGE_NOTES",e[e.EMPTY2=7]="EMPTY2",e[e.ZOOM=8]="ZOOM",e[e.ELLIPSE_ANNOTATION=9]="ELLIPSE_ANNOTATION",e[e.RECTANGLE_ANNOTATION=10]="RECTANGLE_ANNOTATION",e[e.TEXT_ANNOTATION=11]="TEXT_ANNOTATION",e[e.ANNOTATION_COLOR=12]="ANNOTATION_COLOR",e[e.EMPTY3=13]="EMPTY3",e[e.CONTROL_STATE=14]="CONTROL_STATE",e[e.EMPTY4=15]="EMPTY4",e[e.BOOK_NOTES=16]="BOOK_NOTES"}(n=t.UserActionType||(t.UserActionType={}))},function(e,t,n){"use strict";function r(e){switch(e.type){case o.PAGELECTURE:return i.pageLectureControlName(e.page);case o.VIDEO:return e.controlName;case o.QUESTIONEXPLANATION:return e.controlName;default:return""}}var o,i=n(188);!function(e){e[e.PAGELECTURE=0]="PAGELECTURE",e[e.VIDEO=1]="VIDEO",e[e.QUESTIONEXPLANATION=2]="QUESTIONEXPLANATION"}(o=t.PlaylistItemType||(t.PlaylistItemType={})),t.controlNameOfPlaylistItem=r},function(e,t){"use strict";function n(e){return"$pglec_"+e}function r(e){if(e){var t=/^\$pglec\_(\d+)$/,n=e.match(t);if(null!=n)return parseInt(n[1],10)}return null}function o(e){return null!=r(e)}t.pageLectureControlName=n,t.parsePageLectureControlName=r,t.isPageLectureControlName=o},function(e,t,n){"use strict";var r=n(7),o="didLoadBaseImg",i="didPageChange",a="didSwipeLeft",s="didSwipeRight",u="needRetryCommunication",c="needStopAudioVideo",l="needMediaPause",p="needMediaPlay",h="needMediaSeek",f="needScrollIntoPageBounds",d="needFocusControl",m=function(){function e(){this.eventEmitter=new r}return e.prototype.bindNeedRetryCommunication=function(e){this.bind(u,e)},e.prototype.triggerNeedRetryCommunication=function(){this.trigger(u,[])},e.prototype.bindNeedScrollIntoPageBounds=function(e){this.bind(f,e)},e.prototype.triggerNeedScrollIntoPageBounds=function(e,t){this.trigger(f,[e,t])},e.prototype.bindNeedMediaPause=function(e){this.bind(l,e)},e.prototype.unbindNeedMediaPause=function(e){this.unbind(l,e)},e.prototype.triggerNeedMediaPause=function(){this.trigger(l,[])},e.prototype.bindNeedMediaPlay=function(e){this.bind(p,e)},e.prototype.unbindNeedMediaPlay=function(e){this.unbind(p,e)},e.prototype.triggerNeedMediaPlay=function(){this.trigger(p,[])},e.prototype.bindNeedMediaSeek=function(e){this.bind(h,e)},e.prototype.unbindNeedMediaSeek=function(e){this.unbind(h,e)},e.prototype.triggerNeedMediaSeek=function(e){this.trigger(h,[e])},e.prototype.bindDidPageChange=function(e){this.bind(i,e)},e.prototype.triggerDidPageChange=function(){this.trigger(i)},e.prototype.bindNeedStopAudioVideo=function(e){this.bind(c,e)},e.prototype.unbindNeedStopAudioVideo=function(e){this.unbind(c,e)},e.prototype.triggerNeedStopAudioVideo=function(){this.trigger(c)},e.prototype.bindDidSwipeLeft=function(e){this.bind(a,e)},e.prototype.unbindDidSwipeLeft=function(e){this.unbind(a,e)},e.prototype.triggerDidSwipeLeft=function(){this.trigger(a)},e.prototype.bindDidSwipeRight=function(e){this.bind(s,e)},e.prototype.unbindDidSwipeRight=function(e){this.unbind(s,e)},e.prototype.triggerDidSwipeRight=function(){this.trigger(s)},e.prototype.oneBindDidLoadBaseImg=function(e){this.oneBind(o,e)},e.prototype.triggerDidLoadBaseImg=function(){this.trigger(o)},e.prototype.bindNeedFocusControl=function(e){this.bind(d,e)},e.prototype.unbindNeedFocusControl=function(e){this.unbind(d,e)},e.prototype.triggerNeedFocusControl=function(e){this.trigger(d,[e])},e.prototype.bind=function(e,t){this.eventEmitter.addListener(e,t)},e.prototype.oneBind=function(e,t){this.eventEmitter.addOnceListener(e,t)},e.prototype.unbind=function(e,t){this.eventEmitter.removeListener(e,t)},e.prototype.trigger=function(e,t){this.eventEmitter.emitEvent(e,t)},e}();t.InternalEventEmitter=m},function(e,t,n){"use strict";var r,o=n(191),i=n(650),a=n(8),s=n(10),u=n(387),c=n(442),l=n(403),p=n(425),h=n(691),f=n(441),d=n(16),m=n(627),g=n(626),v=n(179);!function(e){e[e.NEAR=0]="NEAR",e[e.FAR=1]="FAR"}(r=t.PageZone||(t.PageZone={}));var y;!function(e){e[e.SCREEN_CENTER=0]="SCREEN_CENTER",e[e.SCREEN_TOP=1]="SCREEN_TOP",e[e.SCREEN_BOTTOM=2]="SCREEN_BOTTOM",e[e.NEAR_TOP=3]="NEAR_TOP",e[e.NEAR_BOTTOM=4]="NEAR_BOTTOM"}(y=t.ScreenZone||(t.ScreenZone={}));var b=250,E=40,w=10,x=1,T=2,C=1,N="#FFF",S="#FFF",_=["layout-single","layout-side-by-side","layout-continuous"],O=300,P=function(){function e(){var t=this;this.appliedViewportSize={x:-1,y:-1},this.zonePending=!1,this.reachedBookEnd=!1,this.isInitialized=!1,this.requestedSearchIndex=!1,this.pageViews=[],this.pageViewRects=[],this.handleScroll=function(){t.debouncedScrollHandling(),t.throttledScrollHandling()},this.debouncedScrollHandling=d._debounce(function(){t.layoutPages(!1)},b),this.throttledScrollHandling=d._throttle(function(){t.updateScrollPageNumber(),e.updateScrollInStore()},u.THROTTLE_DOM_EVENTS),this.debouncedDeactivatePageNumber=d._debounce(function(){t.scrollPageNumber.removeClass("active")},u.DEBOUNCE_DEACTIVATE_PAGENUMBER),this.debouncedHidePageNumber=d._debounce(function(){t.scrollPageNumber.hide()},u.DEBOUNCE_HIDE_PAGENUMBER);var n=s.Context.store.getState().metadata.book,r=document.body;this.pageCount=n.pages.length,n.backgroundColor||(n.backgroundColor=S),this.maxPageWidth=0,n.pages.forEach(function(e){t.maxPageWidth=Math.max(t.maxPageWidth,e.width)}),this.clientPane=v('<div class="clientPane"/>').css("background-color",n.backgroundColor).appendTo(r)[0],this.pagesPane=v('<div class="clientPagesPane"/>').appendTo(this.clientPane),this.scrollPageNumber=v('<div class="scroll-page-number scroll-page-number--fixed" data-qa="scroll-page-number"/>').hide().appendTo(r),this.scrollPageNumberLabel=v('<span class="scroll-page-number__text"></span>').appendTo(this.scrollPageNumber)[0],v('<div class="arrow arrow--right arrow--edge"/>').appendTo(this.scrollPageNumber),this.clientPane.addEventListener("scroll",this.handleScroll),s.Context.pagesScroll.setElement(this.clientPane),v(window).on("resize",d._debounce(function(){t.updateZoomToFit(),t.layoutPages(!1)},u.DEBOUNCE_RESIZE_EVENT)),v(window).on("beforeunload",function(){return s.Context.userStorage.isFlushed()?void 0:"WARNING: There is pending progress. You may lose recent progress by navigating away."}),s.Context.internalEventEmitter.oneBindDidLoadBaseImg(function(){t.loadAfterPageAppears()}),this.createPageViews(),this.updateLayout(),this.updateZoom(),this.updatePage(),this.bindStoreListener(),this.isInitialized=!0}return e.prototype.bindStoreListener=function(){var e=this,t=null,n=null,r=null,o=null;s.Context.store.subscribe(function(){var i=s.Context.store.getState(),a=t;t=i.view.page,a!==t&&e.updatePage();var u=n;n=i.userSettings.layout,u!==n&&e.updateLayout();var c=r;r=i.userSettings.zoom,c!==r&&e.updateZoom();var l=o;o=i.userSettings.playlistOpen,l!==o&&(e.layoutPages(!1),e.updateZoomToFit())})},Object.defineProperty(e.prototype,"onNewPageInCenter",{set:function(e){this._onNewPageInCenter=e},enumerable:!0,configurable:!0}),e.prototype.createPageViews=function(){var e=s.Context.store.getState().metadata.book;e.pageBackgroundColor||(e.pageBackgroundColor=N);for(var t=0;t<this.pageCount;t++)e.pages[t].name||(e.pages[t].name=(t+1).toString()),void 0==e.pages[t].placedImgs&&(e.pages[t].placedImgs=[]),this.pageViews[t]=new o.PageView(t,this.pagesPane)},e.prototype.getPageView=function(e){return e<0||e>=this.pageViews.length?(console.warn("Page index out of bounds: "+e),null):this.pageViews[e]},e.prototype.getPageName=function(e){return this.pageViews[e].getName()},e.getSideBySideLeftPageIndex=function(){return(s.Context.store.getState().view.page+1&1048574)-1},e.prototype.layoutPages=function(t){var n=this,i=s.Context.pagesScroll.getViewportWidth(),a=s.Context.pagesScroll.getViewportHeight(),u=s.Context.pagesScroll.getTop(),l=s.Context.store.getState().view.scale!=this.appliedScale,h=s.Context.store.getState().userSettings.layout!=this.appliedLayoutMode,f=g.isPlaylistOpen(s.Context.store.getState())!=this.appliedPlaylistOpen,d=s.Context.store.getState().view.page,v=d!=this.appliedPageIdx,b=this.appliedViewportSize.x!=i||this.appliedViewportSize.y!=a,E=u!=this.appliedScrollPos,C=s.Context.store.getState().userSettings.layout==p.LayoutMode.CONTINUOUS,N=h||v&&!C;if(N)for(var S=this.pageViews.length-1;S>=0;S--)this.pageViews[S].setVisible(!1);var _=h||l||v&&!C||f;if(_){var O,P,A=s.Context.store.getState().view.scale,I=0,M=0,R=s.Context.store.getState().metadata.book;switch(s.Context.store.getState().userSettings.layout){case p.LayoutMode.SINGLE:var L=R.pages[d].width*A+o.PageView.BORDERS_WIDTH,k=R.pages[d].height*A+o.PageView.BORDERS_WIDTH;O=d,P=d,this.pageViewRects[O]={x:0,y:0,w:L,h:k},I=L,M=k;break;case p.LayoutMode.SIDEBYSIDE:var D=e.getSideBySideLeftPageIndex(),B=0;if(D>=0){var L=R.pages[D].width*A+o.PageView.BORDERS_WIDTH,k=R.pages[D].height*A+o.PageView.BORDERS_WIDTH;O=D,this.pageViewRects[O]={x:0,y:0,w:L,h:k},I=L,M=k,B=L}else O=D+1;if(D++,D<this.pageCount){var L=R.pages[D].width*A+o.PageView.BORDERS_WIDTH,k=R.pages[D].height*A+o.PageView.BORDERS_WIDTH;0==B&&(B=L),P=D,this.pageViewRects[P]={x:B,y:0,w:L,h:k},I=B+L,M=Math.max(M,k)}else P=D-1,I*=2;this.pageViewRects[O].y=Math.floor((M-this.pageViewRects[O].h)/2),this.pageViewRects[P].y=Math.floor((M-this.pageViewRects[P].h)/2);break;case p.LayoutMode.CONTINUOUS:O=0,P=this.pageCount-1;for(var I=this.maxPageWidth*A+o.PageView.BORDERS_WIDTH,U=0,S=0;S<=P;S++){var L=Math.floor(R.pages[S].width*A+o.PageView.BORDERS_WIDTH),k=Math.floor(R.pages[S].height*A+o.PageView.BORDERS_WIDTH);this.pageViewRects[S]={x:Math.floor((I-L)/2),y:U,w:L,h:k},U+=k+w}M=Math.max(0,U-w)}for(var S=P;S>=O;S--){this.pageViews[S].setVisible(!0);var F=this.pageViewRects[S];this.pageViews[S].setBoundsRect(F)}this.appliedPlaylistOpen=g.isPlaylistOpen(s.Context.store.getState()),this.pagesPane.css({width:I+(this.appliedPlaylistOpen?m.AUTO_PLAY_LIST_WIDTH:0)+"px",height:M+"px","font-size":A.toFixed(1)+"em"})}var j=h||v;j&&this.scrollToPage(),!v&&this.isInitialized&&C&&this._onNewPageInCenter&&(b||E)&&this._onNewPageInCenter(this.pageIndexAtScreenZone(y.SCREEN_CENTER));var i=s.Context.pagesScroll.getViewportWidth(),a=s.Context.pagesScroll.getViewportHeight(),u=s.Context.pagesScroll.getTop(),H=this.zonePending||j||h||C&&(l||b||E)||!C&&v;if(t&&H&&(this.zonePending=!0,H=!1),H){var V,W,G=s.Context.store.getState().view.page;switch(s.Context.store.getState().userSettings.layout){case p.LayoutMode.SINGLE:V=G-x,W=G+x;break;case p.LayoutMode.SIDEBYSIDE:var D=e.getSideBySideLeftPageIndex();V=D-T,W=D+1+T;break;case p.LayoutMode.CONTINUOUS:V=G-x,W=G+x,this.isInitialized&&(V=Math.min(V,this.pageIndexAtScreenZone(y.NEAR_TOP)),W=Math.max(W,this.pageIndexAtScreenZone(y.NEAR_BOTTOM)))}if(V=Math.max(V,0),W=Math.min(W,this.pageCount-1),!this.reachedBookEnd&&W==this.pageCount-1){var z;switch(s.Context.store.getState().userSettings.layout){case p.LayoutMode.SINGLE:z=G;break;case p.LayoutMode.SIDEBYSIDE:z=e.getSideBySideLeftPageIndex()+1;break;case p.LayoutMode.CONTINUOUS:z=this.isInitialized?this.pageIndexAtScreenZone(y.SCREEN_BOTTOM):G}z>=this.pageCount-1&&(this.reachedBookEnd=!0,s.Context.externalEventEmitter.emitBookReachedEnd())}var q=[],Y=[];if(void 0==this.appliedFirstPageNear)for(var S=V;S<=W;S++)q.push(S);else{var X=this.appliedFirstPageNear,K=Math.min(V-1,this.appliedLastPageNear);if(K>=X)for(var S=X;S<=K;S++)Y.push(S);if(X=Math.max(W+1,this.appliedFirstPageNear),K=this.appliedLastPageNear,K>=X)for(var S=X;S<=K;S++)Y.push(S);if(X=V,K=Math.min(this.appliedFirstPageNear-1,W),K>=X)for(var S=X;S<=K;S++)q.push(S);if(X=Math.max(this.appliedLastPageNear+1,V),K=W,K>=X)for(var S=X;S<=K;S++)q.push(S)}q.forEach(function(e){n.pageViews[e].setViewportZone(r.NEAR)}),Y.forEach(function(e){n.pageViews[e].setViewportZone(r.FAR)}),this.appliedFirstPageNear=V,this.appliedLastPageNear=W;var Z=this.pageIndexAtScreenZone(y.SCREEN_TOP),$=this.pageIndexAtScreenZone(y.SCREEN_BOTTOM);c.setVisibleAndNearPages({first:Z,last:$},{first:V,last:W});for(var S=Z;S<=$;S++)this.pageViews[S].prepareInScreen()}this.updateAppliedValuesAfterLayout(),this.appliedViewportSize.x=i,this.appliedViewportSize.y=a,this.appliedScrollPos=u},e.prototype.scrollToPage=function(){var e,t=s.Context.store.getState(),n=s.Context.pagesScroll.getViewportHeight(),r=this.pageViewRects[t.view.page];e=t.userSettings.layout==p.LayoutMode.CONTINUOUS?r.y:0;var o=e+r.h,i=s.Context.pagesScroll.getTop();(i<e-n/2||i>o-n/2)&&s.Context.pagesScroll.setTop(e)},e.prototype.updateAppliedValuesAfterLayout=function(){var e=s.Context.store.getState();this.appliedPageIdx!=e.view.page&&(this.appliedPageIdx>=0&&this.appliedPageIdx<this.pageViews.length&&this.pageViews[this.appliedPageIdx].setActive(!1),this.pageViews[s.Context.store.getState().view.page].setActive(!0)),this.appliedPageIdx=e.view.page,this.appliedScale=e.view.scale,this.appliedLayoutMode=e.userSettings.layout},e.prototype.loadAfterPageAppears=function(){this.requestedSearchIndex||(this.requestedSearchIndex=!0,void 0==s.Context.controlSettings.textServer?s.Context.resourceLoader.getJSON(s.Context.resourceLoader.getResourceUrl(a.ResourceType.SEARCH_INDEX,[]),function(e){s.Context.textServer=new i.LocalTextServer(e),f.ready()}):(s.Context.textServer=s.Context.controlSettings.textServer,f.ready()))},e.prototype.pageIndexAtScreenZone=function(e){var t=s.Context.store.getState();if(t.userSettings.layout==p.LayoutMode.SINGLE||t.userSettings.layout==p.LayoutMode.SIDEBYSIDE)return t.view.page;var n,r=s.Context.pagesScroll.getBoundingClientRect().top,o=r,i=r+s.Context.pagesScroll.getViewportHeight();switch(e){case y.SCREEN_CENTER:n=(o+i)/2;break;case y.SCREEN_TOP:n=o;break;case y.SCREEN_BOTTOM:n=i;break;case y.NEAR_TOP:n=o-(i-o)*C;break;case y.NEAR_BOTTOM:n=i+(i-o)*C}for(var a=0,u=this.pageCount-1,c=s.Context.store.getState().view.page,l=-1,h=999999,f=this.pagesPane[0].getBoundingClientRect();a<=u;){var d=this.pageViewRects[c],m=f.top+d.y+d.h-n,g=f.top+d.y-n;if(m>=0&&g<=0)return c;var v=Math.min(Math.abs(g),Math.abs(m));v<h&&(l=c,h=v),g<0?a=c+1:u=c-1,c=Math.max(a,Math.min(u,Math.floor(c-(g+m)/(2*(m-g+w)))))}return l},e.prototype.updateLayout=function(){var e=s.Context.store.getState().userSettings.layout;e!==this.appliedLayoutMode&&(_.forEach(function(t,n){e==n?l.addClassToBody(t):l.removeClassFromBody(t)}),this.isInitialized&&(this.layoutPages(!1),this.updateZoomToFit(),this.layoutPages(!1)))},e.prototype.updatePage=function(){var e=s.Context.store.getState();e.userSettings.layout!=p.LayoutMode.SINGLE&&e.userSettings.layout!=p.LayoutMode.SIDEBYSIDE||this.updateZoomToFit(),this.layoutPages(!1)},e.prototype.updateZoom=function(){var e=s.Context.store.getState().userSettings.zoom;e!==this.appliedZoom&&(e==p.ZOOM_TO_FIT_VALUE?this.appliedZoom!=p.ZOOM_TO_FIT_VALUE&&(this.updateZoomToFit(),this.layoutPages(!1)):this.setScale(e/100),this.appliedZoom=e)},e.prototype.setScale=function(e){if(e!=s.Context.store.getState().view.scale){var t=e/s.Context.store.getState().view.scale;if(c.setScale(e),this.isInitialized){var n,r=s.Context.store.getState().userSettings.layout;r==p.LayoutMode.CONTINUOUS&&(n=s.Context.pagesScroll.getTop()),r==p.LayoutMode.CONTINUOUS&&(this.layoutPages(!0),s.Context.pagesScroll.setTop(n*t)),this.layoutPages(!1)}}},e.prototype.updateScrollPageNumber=function(){if(s.Context.store.getState().userSettings.layout==p.LayoutMode.CONTINUOUS){this.positionPageNumberElement();for(var e=this.pageIndexAtScreenZone(y.SCREEN_TOP),t=this.pageIndexAtScreenZone(y.SCREEN_BOTTOM),n=e;n<=t;n++)this.pageViews[n].prepareInScreen();var r=this.getPageName(this.pageIndexAtScreenZone(y.SCREEN_CENTER));this.scrollPageNumberLabel.innerHTML=r,this.showPageNumber()}},e.prototype.positionPageNumberElement=function(){var e=s.Context.pagesScroll.getTop(),t=s.Context.pagesScroll.getViewportHeight(),n=s.Context.pagesScroll.getScrollHeight(),r=this.scrollPageNumber.outerHeight(),o=(t-r)*e/(n-t);this.scrollPageNumber.css("top",Math.min(t-r,o))},e.updateScrollInStore=function(){h.changeScroll(s.Context.pagesScroll.getLeft(),s.Context.pagesScroll.getTop())},e.prototype.showPageNumber=function(){this.scrollPageNumber.addClass("active").show(),this.debouncedDeactivatePageNumber(),this.debouncedHidePageNumber()},e.prototype.updateZoomToFit=function(){if(e.zoomToFit){var t,n,r=s.Context.pagesScroll.getViewportInnerHeight()-o.PageView.BORDERS_WIDTH,i=Math.max(O,s.Context.pagesScroll.getViewportInnerWidth()-(this.appliedPlaylistOpen?m.AUTO_PLAY_LIST_WIDTH:0)),a=s.Context.store.getState().metadata.book;switch(s.Context.store.getState().userSettings.layout){case p.LayoutMode.SINGLE:i-=2*E+o.PageView.BORDERS_WIDTH;var u=s.Context.store.getState().view.page;n=a.pages[u].height,t=a.pages[u].width;break;case p.LayoutMode.SIDEBYSIDE:i-=2*(E+o.PageView.BORDERS_WIDTH);var c=e.getSideBySideLeftPageIndex();c>=0?c+1<this.pageCount?(n=Math.max(a.pages[c].height,a.pages[c+1].height),t=a.pages[c].width+a.pages[c+1].width):(n=a.pages[c].height,t=2*a.pages[c].width):(n=a.pages[c+1].height,t=2*a.pages[c+1].width);break;case p.LayoutMode.CONTINUOUS:i-=o.PageView.BORDERS_WIDTH,n=1,t=this.maxPageWidth}t<=0||n<=0||this.setScale(Math.min(i/t,r/n))}},Object.defineProperty(e,"zoomToFit",{get:function(){return s.Context.store.getState().userSettings.zoom==p.ZOOM_TO_FIT_VALUE},enumerable:!0,configurable:!0}),e}();t.BookView=P},function(e,t,n){"use strict";var r=n(190),o=n(10),i=n(192),a=n(11),s=n(226),u=n(227),c=n(688),l=n(179),p=function(){function e(e,t){this.pageImageVisibility=i.Visibility.None,this.pageZone=r.PageZone.FAR,this.visible=!1,this.active=!1,this.pageIdx=e,this.pageProperties.placedImgs&&this.pageProperties.placedImgs.length>0&&!this.pageProperties.placedImgs[0].dpis&&(console.error("Missing placed img dpis."),this.pageProperties.placedImgs=[]),this.parent=t}return Object.defineProperty(e.prototype,"pageProperties",{get:function(){return o.Context.store.getState().metadata.book.pages[this.pageIdx]},enumerable:!0,configurable:!0}),e.prototype.getBoundingClientRect=function(){var e=this.parent[0].getBoundingClientRect();return{left:e.left+this.boundsRect.x,top:e.top+this.boundsRect.y,right:e.right+this.boundsRect.x,bottom:e.bottom+this.boundsRect.y,width:this.boundsRect.w,height:this.boundsRect.h}},e.prototype.pagePointToClientCoords=function(e,t){var n=this.getBoundingClientRect();return{x:n.left+e/this.pageProperties.width*n.width,y:n.top+t/this.pageProperties.height*n.height}},e.prototype.pageRectToClientCoords=function(e,t,n,r){var o=this.getBoundingClientRect(),i=o.width/this.pageProperties.width;return{x:o.left+e*i,y:o.top+t*i,w:n*i,h:r*i}},e.prototype.getName=function(){return this.pageProperties.name},e.prototype.getPageIdx=function(){return this.pageIdx},e.prototype.getRootElement=function(){if(!this.mainEl){this.mainEl=l('<div class="pageView"/>'),this.updatePageImage();var e=l('<div class="pageAnnotationsReactContainer"/>');e.appendTo(this.getRootElement()),new u.LayerPageAnnotationsWrapper({page:this.pageIdx,store:o.Context.store},e[0]),e=l('<div class="layerPageReactContainer"/>'),e.appendTo(this.getRootElement()),new u.LayerPageWrapper({page:this.pageIdx,store:o.Context.store},e[0])}return this.mainEl},e.prototype.updatePageImage=function(){!this.pageImage&&this.mainEl&&(this.pageImage=s.createReactProgressiveLoadPageBackground(this.pageIdx,this.pageProperties,this.mainEl[0])),this.pageImage&&(this.pageImage.scale=this.pageRect?this.pageRect.w/this.pageProperties.width:1,this.pageImage.visibility=this.pageImageVisibility,this.pageImage.visibility!=i.Visibility.None&&this.needPageContent())},e.prototype.getScale=function(){return this.pageRect.w>this.pageRect.h?this.pageRect.w/this.pageProperties.width:this.pageRect.h/this.pageProperties.height;
},e.prototype.needPageContent=function(){var e=this;this.requestedPageContent||(this.requestedPageContent=!0,c.getPageContent(this.pageIdx).then(function(){e.updatePageImage(),e.updatePage(!0)}))},e.prototype.prepareInScreen=function(){this.pageImageVisibility==i.Visibility.None&&(this.pageImageVisibility=i.Visibility.Ready),this.updatePageImage()},e.prototype.setActive=function(e){this.active!=e&&(this.active=e,e?this.getRootElement().addClass("activePage"):this.getRootElement().removeClass("activePage"))},e.prototype.setBoundsRect=function(t){this.boundsRect=t,this.pageRect={x:t.x+e.BORDERS_WIDTH/2,y:t.y+e.BORDERS_WIDTH/2,w:t.w-e.BORDERS_WIDTH,h:t.h-e.BORDERS_WIDTH},this.updatePageImage(),this.updateBoundsRect()},e.prototype.setViewportZone=function(e){this.pageZone=e,this.updateVisible(),this.updatePage(!1)},e.prototype.setVisible=function(e){this.visible=e,this.updateVisible()},e.prototype.updateBoundsRect=function(){var e=this;if(this.appliedVisible&&this.boundsRect){this.getRootElement(),this.mainEl.css({left:this.boundsRect.x,top:this.boundsRect.y,width:this.boundsRect.w,height:this.boundsRect.h});var t=this.getScale();this.mainEl.find("[sleft]").each(function(n,r){e.updateElementScale(l(r),t)}),this.updatePage(!1)}},e.prototype.updateElementScale=function(e,t){var n=a.getDevicePixelRatio();t*=n;var r=parseFloat(e.attr("sleft"))*t,o=parseFloat(e.attr("stop"))*t,i=parseFloat(e.attr("swidth"))*t,s=parseFloat(e.attr("sheight"))*t;e.css({left:Math.floor(r)/n,top:Math.floor(o)/n,width:(Math.ceil(r+i)-Math.floor(r))/n,height:(Math.ceil(o+s)-Math.floor(o))/n})},e.prototype.updatePage=function(e){if(!this.boundsRect){if(this.pageZone!=r.PageZone.NEAR)return;this.boundsRect={x:0,y:0,w:1,h:1},this.pageRect={x:0,y:0,w:1,h:1}}var t=this.boundsRect.w,n=this.boundsRect.h;(e||this.appliedPageZone!=this.pageZone||this.appliedWidth!=t||this.appliedHeight!=n)&&(this.pageZone==r.PageZone.NEAR&&(this.pageImageVisibility=i.Visibility.Visible,this.updatePageImage()),(e||this.appliedPageZone!=this.pageZone)&&(this.appliedPageZone=this.pageZone,this.appliedWidth=t,this.appliedHeight=n))},e.prototype.updateVisible=function(){var e=this.visible;this.appliedVisible!=e&&(this.appliedVisible=e,e?(this.getRootElement().appendTo(this.parent),this.updateBoundsRect()):this.mainEl&&this.mainEl.detach())},e}();p.BORDERS_WIDTH=2,t.PageView=p},function(e,t,n){"use strict";function r(e){function t(t,n){return t.reduce(function(t,r){return r>t&&e.onIsImagePreloaded(n[r])?r:t},g)}var n=[];return n[0]=t(e.page.dpis,e.page.urlPerDpi),e.page.placedImgs&&e.page.placedImgs.forEach(function(e,r){n[r+1]=t(e.dpis,e.urlPerDpi)}),n}function o(e,t,n){var r=t;return r<e/d&&n.forEach(function(t){r<e/d?r=Math.max(r,t):t>=e&&(r=Math.min(r,t))}),r}function i(e,t){var n=t.reduce(function(t,n){return n<=e?Math.max(t,n):t},0);return 0==n&&t.reduce(function(t,n){return n>e?Math.min(t,n):t},0),n}function a(e){return f.getDevicePixelRatio()*(e.sourceDpi?e.sourceDpi:m)*e.scale}var s,u=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},c=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},l=n(193),p=n(224),h=n(225),f=n(11),d=1.1,m=96,g=0;!function(e){e[e.None=0]="None",e[e.Ready=1]="Ready",e[e.Visible=2]="Visible"}(s=t.Visibility||(t.Visibility={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isMounted=!1,t}return u(t,e),t.prototype.componentWillMount=function(){this._isMounted=!0,this.initStateFromProps(this.props)},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.componentWillReceiveProps=function(e){this.initStateFromProps(e)},t.prototype.render=function(){var e=this;if(this.props.visibility==s.None)return null;if(this.state.loadedDpis[0]==g)return l.createElement(h.PageThumbBackground,c({},this.props.thumb,{pageWidth:this.props.page.width,pageHeight:this.props.page.height,scale:this.props.scale,viewport:this.props.viewport}));var t=this.props.page.urlPerDpi[this.state.loadedDpis[0]],n=[];return this.props.page.placedImgs&&this.props.page.placedImgs.forEach(function(t,r){var o=e.state.loadedDpis[r+1];o!=g&&n.push({x:t.x,y:t.y,w:t.w,h:t.h,url:t.urlPerDpi[o]})}),l.createElement(p.PageBackground,{baseImageUrl:t,baseImageWidth:this.props.page.width,baseImageHeight:this.props.page.height,placedImages:n,scale:this.props.scale,viewport:this.props.viewport})},t.prototype.initStateFromProps=function(e){if(e.visibility!=s.None){var t=r(e);this.setState({loadedDpis:t}),e.visibility==s.Visible&&this.loadBaseImage(e,t)}},t.prototype.loadBaseImage=function(e,t){var n,r=this;if(n=t[0]!=g?o(a(e),t[0],e.page.dpis):i(e.sourceDpi,e.page.dpis),n>t[0]){var s=e.page.urlPerDpi[n];this.props.onPreloadImage(s).then(function(){r._isMounted&&r.setState(function(t){if(t.loadedDpis[0]>=n)return null;var o=t.loadedDpis.slice();return o[0]=n,r.loadBaseImage(e,o),{loadedDpis:o}})}).catch(function(){})}t[0]!=g&&this.loadPlacedImages(e,t)},t.prototype.loadPlacedImages=function(e,t){var n=this;e.page.placedImgs&&e.page.placedImgs.forEach(function(e,r){n.loadPlacedImage(e,r+1,t)})},t.prototype.loadPlacedImage=function(e,t,n){var r=this,i=n[t],a=o(n[0],i,e.dpis);if(a>i){var s=e.urlPerDpi[a];this.props.onPreloadImage(s).then(function(){r._isMounted&&r.setState(function(n){if(n.loadedDpis[t]>=a)return null;var o=n.loadedDpis.slice();return o[t]=a,r.loadPlacedImage(e,t,o),{loadedDpis:o}})}).catch(function(){})}},t}(l.Component);t.ProgressiveLoadPageBackground=v},function(e,t,n){"use strict";e.exports=n(194)},function(e,t,n){"use strict";var r=n(195),o=n(196),i=n(205),a=n(213),s=n(207),u=n(214),c=n(219),l=n(220),p=n(223),h=s.createElement,f=s.createFactory,d=s.cloneElement,m=r,g=function(e){return e},v={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:p},Component:o.Component,PureComponent:o.PureComponent,createElement:h,cloneElement:d,isValidElement:s.isValidElement,PropTypes:u,createClass:l,createFactory:f,createMixin:g,DOM:a,version:c,__spread:m};e.exports=v},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,a,s=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)o.call(r,c)&&(s[c]=r[c]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(r);for(var l=0;l<a.length;l++)i.call(r,a[l])&&(s[a[l]]=r[a[l]])}}return s}},function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=c,this.updater=n||u}function o(e,t,n){this.props=e,this.context=t,this.refs=c,this.updater=n||u}function i(){}var a=n(197),s=n(195),u=n(198),c=(n(201),n(202));n(203),n(204);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?a("85"):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};i.prototype=r.prototype,o.prototype=new i,o.prototype.constructor=o,s(o.prototype,r.prototype),o.prototype.isPureReactComponent=!0,e.exports={Component:r,PureComponent:o}},function(e,t){"use strict";function n(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(n);throw o.name="Invariant Violation",o.framesToPop=1,o}e.exports=n},function(e,t,n){"use strict";function r(e,t){}var o=(n(199),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){r(e,"forceUpdate")},enqueueReplaceState:function(e,t){r(e,"replaceState")},enqueueSetState:function(e,t){r(e,"setState")}});e.exports=o},function(e,t,n){"use strict";var r=n(200),o=r;e.exports=o},function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";var r=!1;e.exports=r},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u){if(o(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,s,u],p=0;c=new Error(t.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var o=function(e){};e.exports=r},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e){return(""+e).replace(E,"$&/")}function o(e,t){this.func=e,this.context=t,this.count=0}function i(e,t,n){var r=e.func,o=e.context;r.call(o,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=o.getPooled(t,n);v(e,i,r),o.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function u(e,t,n){var o=e.result,i=e.keyPrefix,a=e.func,s=e.context,u=a.call(s,t,e.count++);Array.isArray(u)?c(u,o,n,g.thatReturnsArgument):null!=u&&(m.isValidElement(u)&&(u=m.cloneAndReplaceKey(u,i+(!u.key||t&&t.key===u.key?"":r(u.key)+"/")+n)),o.push(u))}function c(e,t,n,o,i){var a="";null!=n&&(a=r(n)+"/");var c=s.getPooled(t,a,o,i);v(e,u,c),s.release(c)}function l(e,t,n){if(null==e)return e;var r=[];return c(e,r,null,t,n),r}function p(e,t,n){return null}function h(e,t){return v(e,p,null)}function f(e){var t=[];return c(e,t,null,g.thatReturnsArgument),t}var d=n(206),m=n(207),g=n(200),v=n(210),y=d.twoArgumentPooler,b=d.fourArgumentPooler,E=/\/+/g;o.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},d.addPoolingTo(o,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},d.addPoolingTo(s,b);var w={forEach:a,map:l,mapIntoWithKeyPrefixInternal:c,count:h,toArray:f};e.exports=w},[726,197],function(e,t,n){"use strict";function r(e){return void 0!==e.ref}function o(e){return void 0!==e.key}var i=n(195),a=n(208),s=(n(199),n(201),Object.prototype.hasOwnProperty),u=n(209),c={key:!0,ref:!0,__self:!0,__source:!0},l=function(e,t,n,r,o,i,a){var s={$$typeof:u,type:e,key:t,ref:n,props:a,_owner:i};return s};l.createElement=function(e,t,n){var i,u={},p=null,h=null,f=null,d=null;if(null!=t){r(t)&&(h=t.ref),o(t)&&(p=""+t.key),f=void 0===t.__self?null:t.__self,d=void 0===t.__source?null:t.__source;for(i in t)s.call(t,i)&&!c.hasOwnProperty(i)&&(u[i]=t[i])}var m=arguments.length-2;if(1===m)u.children=n;else if(m>1){for(var g=Array(m),v=0;v<m;v++)g[v]=arguments[v+2];u.children=g}if(e&&e.defaultProps){var y=e.defaultProps;for(i in y)void 0===u[i]&&(u[i]=y[i])}return l(e,p,h,f,d,a.current,u)},l.createFactory=function(e){var t=l.createElement.bind(null,e);return t.type=e,t},l.cloneAndReplaceKey=function(e,t){var n=l(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},l.cloneElement=function(e,t,n){var u,p=i({},e.props),h=e.key,f=e.ref,d=e._self,m=e._source,g=e._owner;if(null!=t){r(t)&&(f=t.ref,g=a.current),o(t)&&(h=""+t.key);var v;e.type&&e.type.defaultProps&&(v=e.type.defaultProps);for(u in t)s.call(t,u)&&!c.hasOwnProperty(u)&&(void 0===t[u]&&void 0!==v?p[u]=v[u]:p[u]=t[u])}var y=arguments.length-2;if(1===y)p.children=n;else if(y>1){for(var b=Array(y),E=0;E<y;E++)b[E]=arguments[E+2];p.children=b}return l(e.type,h,f,d,m,g,p)},l.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===u},e.exports=l},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n},function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?c.escape(e.key):t.toString(36)}function o(e,t,n,i){var h=typeof e;if("undefined"!==h&&"boolean"!==h||(e=null),null===e||"string"===h||"number"===h||"object"===h&&e.$$typeof===s)return n(i,e,""===t?l+r(e,0):t),1;var f,d,m=0,g=""===t?l:t+p;if(Array.isArray(e))for(var v=0;v<e.length;v++)f=e[v],d=g+r(f,v),m+=o(f,d,n,i);else{var y=u(e);if(y){var b,E=y.call(e);if(y!==e.entries)for(var w=0;!(b=E.next()).done;)f=b.value,d=g+r(f,w++),m+=o(f,d,n,i);else for(;!(b=E.next()).done;){var x=b.value;x&&(f=x[1],d=g+c.escape(x[0])+p+r(f,0),m+=o(f,d,n,i))}}else if("object"===h){var T="",C=String(e);a("31","[object Object]"===C?"object with keys {"+Object.keys(e).join(", ")+"}":C,T)}}return m}function i(e,t,n){return null==e?0:o(e,"",t,n)}var a=n(197),s=(n(208),n(209)),u=n(211),c=(n(203),n(212)),l=(n(199),"."),p=":";e.exports=i},function(e,t){"use strict";function n(e){var t=e&&(r&&e[r]||e[o]);if("function"==typeof t)return t}var r="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=n},function(e,t){"use strict";function n(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+e).replace(t,function(e){return n[e]});return"$"+r}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+r).replace(t,function(e){return n[e]})}var o={escape:n,unescape:r};e.exports=o},function(e,t,n){"use strict";var r=n(207),o=r.createFactory,i={a:o("a"),abbr:o("abbr"),address:o("address"),area:o("area"),article:o("article"),aside:o("aside"),audio:o("audio"),b:o("b"),base:o("base"),bdi:o("bdi"),bdo:o("bdo"),big:o("big"),blockquote:o("blockquote"),body:o("body"),br:o("br"),button:o("button"),canvas:o("canvas"),caption:o("caption"),cite:o("cite"),code:o("code"),col:o("col"),colgroup:o("colgroup"),data:o("data"),datalist:o("datalist"),dd:o("dd"),del:o("del"),details:o("details"),dfn:o("dfn"),dialog:o("dialog"),div:o("div"),dl:o("dl"),dt:o("dt"),em:o("em"),embed:o("embed"),fieldset:o("fieldset"),figcaption:o("figcaption"),figure:o("figure"),footer:o("footer"),form:o("form"),h1:o("h1"),h2:o("h2"),h3:o("h3"),h4:o("h4"),h5:o("h5"),h6:o("h6"),head:o("head"),header:o("header"),hgroup:o("hgroup"),hr:o("hr"),html:o("html"),i:o("i"),iframe:o("iframe"),img:o("img"),input:o("input"),ins:o("ins"),kbd:o("kbd"),keygen:o("keygen"),label:o("label"),legend:o("legend"),li:o("li"),link:o("link"),main:o("main"),map:o("map"),mark:o("mark"),menu:o("menu"),menuitem:o("menuitem"),meta:o("meta"),meter:o("meter"),nav:o("nav"),noscript:o("noscript"),object:o("object"),ol:o("ol"),optgroup:o("optgroup"),option:o("option"),output:o("output"),p:o("p"),param:o("param"),picture:o("picture"),pre:o("pre"),progress:o("progress"),q:o("q"),rp:o("rp"),rt:o("rt"),ruby:o("ruby"),s:o("s"),samp:o("samp"),script:o("script"),section:o("section"),select:o("select"),small:o("small"),source:o("source"),span:o("span"),strong:o("strong"),style:o("style"),sub:o("sub"),summary:o("summary"),sup:o("sup"),table:o("table"),tbody:o("tbody"),td:o("td"),textarea:o("textarea"),tfoot:o("tfoot"),th:o("th"),thead:o("thead"),time:o("time"),title:o("title"),tr:o("tr"),track:o("track"),u:o("u"),ul:o("ul"),var:o("var"),video:o("video"),wbr:o("wbr"),circle:o("circle"),clipPath:o("clipPath"),defs:o("defs"),ellipse:o("ellipse"),g:o("g"),image:o("image"),line:o("line"),linearGradient:o("linearGradient"),mask:o("mask"),path:o("path"),pattern:o("pattern"),polygon:o("polygon"),polyline:o("polyline"),radialGradient:o("radialGradient"),rect:o("rect"),stop:o("stop"),svg:o("svg"),text:o("text"),tspan:o("tspan")};e.exports=i},function(e,t,n){"use strict";var r=n(207),o=r.isValidElement,i=n(215);e.exports=i(o)},function(e,t,n){"use strict";var r=n(216);e.exports=function(e){var t=!1;return r(e,t)}},function(e,t,n){"use strict";var r=n(200),o=n(203),i=n(199),a=n(217),s=n(218);e.exports=function(e,t){function n(e){var t=e&&(_&&e[_]||e[O]);if("function"==typeof t)return t}function u(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function c(e){this.message=e,this.stack=""}function l(e){function n(n,r,i,s,u,l,p){if(s=s||P,l=l||i,p!==a)if(t)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[i]?n?new c(null===r[i]?"The "+u+" `"+l+"` is marked as required "+("in `"+s+"`, but its value is `null`."):"The "+u+" `"+l+"` is marked as required in "+("`"+s+"`, but its value is `undefined`.")):null:e(r,i,s,u,l)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function p(e){function t(t,n,r,o,i,a){var s=t[n],u=T(s);if(u!==e){var l=C(s);return new c("Invalid "+o+" `"+i+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return l(t)}function h(){return l(r.thatReturnsNull)}function f(e){function t(t,n,r,o,i){if("function"!=typeof e)return new c("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){var u=T(s);return new c("Invalid "+o+" `"+i+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<s.length;l++){var p=e(s,l,r,o,i+"["+l+"]",a);if(p instanceof Error)return p}return null}return l(t)}function d(){function t(t,n,r,o,i){var a=t[n];if(!e(a)){var s=T(a);return new c("Invalid "+o+" `"+i+"` of type "+("`"+s+"` supplied to `"+r+"`, expected a single ReactElement."))}return null}return l(t)}function m(e){function t(t,n,r,o,i){if(!(t[n]instanceof e)){var a=e.name||P,s=S(t[n]);return new c("Invalid "+o+" `"+i+"` of type "+("`"+s+"` supplied to `"+r+"`, expected ")+("instance of `"+a+"`."))}return null}return l(t)}function g(e){function t(t,n,r,o,i){for(var a=t[n],s=0;s<e.length;s++)if(u(a,e[s]))return null;var l=JSON.stringify(e);return new c("Invalid "+o+" `"+i+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+l+"."))}return Array.isArray(e)?l(t):r.thatReturnsNull}function v(e){function t(t,n,r,o,i){if("function"!=typeof e)return new c("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],u=T(s);if("object"!==u)return new c("Invalid "+o+" `"+i+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."));for(var l in s)if(s.hasOwnProperty(l)){var p=e(s,l,r,o,i+"."+l,a);if(p instanceof Error)return p}return null}return l(t)}function y(e){function t(t,n,r,o,i){for(var s=0;s<e.length;s++){var u=e[s];if(null==u(t,n,r,o,i,a))return null}return new c("Invalid "+o+" `"+i+"` supplied to "+("`"+r+"`."))}if(!Array.isArray(e))return r.thatReturnsNull;for(var n=0;n<e.length;n++){var o=e[n];if("function"!=typeof o)return i(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",N(o),n),r.thatReturnsNull}return l(t)}function b(){function e(e,t,n,r,o){return w(e[t])?null:new c("Invalid "+r+" `"+o+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return l(e)}function E(e){function t(t,n,r,o,i){var s=t[n],u=T(s);if("object"!==u)return new c("Invalid "+o+" `"+i+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."));for(var l in e){var p=e[l];if(p){var h=p(s,l,r,o,i+"."+l,a);if(h)return h}}return null}return l(t)}function w(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(w);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!w(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!w(a[1]))return!1}return!0;default:return!1}}function x(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function T(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":x(t,e)?"symbol":t}function C(e){if("undefined"==typeof e||null===e)return""+e;var t=T(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function N(e){var t=C(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function S(e){return e.constructor&&e.constructor.name?e.constructor.name:P}var _="function"==typeof Symbol&&Symbol.iterator,O="@@iterator",P="<<anonymous>>",A={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:h(),arrayOf:f,element:d(),instanceOf:m,node:b(),objectOf:v,oneOf:g,oneOfType:y,shape:E};return c.prototype=Error.prototype,A.checkPropTypes=s,A.PropTypes=A,A}},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r,o){}e.exports=r},function(e,t){"use strict";e.exports="15.6.1"},function(e,t,n){"use strict";var r=n(196),o=r.Component,i=n(207),a=i.isValidElement,s=n(198),u=n(221);e.exports=u(o,a,s)},function(e,t,n){"use strict";function r(e){return e}function o(e,t,n){function o(e,t){var n=y.hasOwnProperty(t)?y[t]:null;x.hasOwnProperty(t)&&u("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&u("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function i(e,n){if(n){u("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),u(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;n.hasOwnProperty(c)&&b.mixins(e,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==c){var s=n[a],l=r.hasOwnProperty(a);if(o(l,a),b.hasOwnProperty(a))b[a](e,s);else{var p=y.hasOwnProperty(a),d="function"==typeof s,m=d&&!p&&!l&&n.autobind!==!1;if(m)i.push(a,s),r[a]=s;else if(l){var g=y[a];u(p&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,a),"DEFINE_MANY_MERGED"===g?r[a]=h(r[a],s):"DEFINE_MANY"===g&&(r[a]=f(r[a],s))}else r[a]=s}}}else;}function l(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var o=n in b;u(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in e;u(!i,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=r}}}function p(e,t){u(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(u(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function h(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return p(o,n),p(o,r),o}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function d(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[r]=d(e,o)}}function g(e){var t=r(function(e,r,o){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=r,this.refs=s,this.updater=o||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;u("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new T,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(i.bind(null,t)),i(t,E),i(t,e),i(t,w),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),u(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var o in y)t.prototype[o]||(t.prototype[o]=null);return t}var v=[],y={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=a({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=a({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=h(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=a({},e.propTypes,t)},statics:function(e,t){l(e,t)},autobind:function(){}},E={componentDidMount:function(){this.__isMounted=!0}},w={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},T=function(){};return a(T.prototype,e.prototype,x),g}var i,a=n(222),s=n(202),u=n(203),c="mixins";i={},e.exports=o},function(e,t){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,s,u=n(e),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var l in r)i.call(r,l)&&(u[l]=r[l]);if(o){s=o(r);for(var p=0;p<s.length;p++)a.call(r,s[p])&&(u[s[p]]=r[s[p]])}}return u}},function(e,t,n){"use strict";function r(e){return i.isValidElement(e)?void 0:o("143"),e}var o=n(197),i=n(207);n(203);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(11),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e={left:this.props.viewport?this.props.viewport.left:0,top:this.props.viewport?this.props.viewport.top:0,width:this.props.viewport?this.props.viewport.width:this.props.baseImageWidth,height:this.props.viewport?this.props.viewport.height:this.props.baseImageHeight},t={position:"absolute",zIndex:0,left:0,top:0,width:e.width*this.props.scale,height:e.height*this.props.scale};t.backgroundImage="url("+this.props.baseImageUrl+")",t.backgroundSize=100*this.props.baseImageWidth/e.width+"%",t.backgroundPosition=100*e.left/(this.props.baseImageWidth-e.width)+"% "+100*e.top/(this.props.baseImageHeight-e.height)+"%";var n=[];if(this.props.placedImages){var r=i.getDevicePixelRatio(),a=this.props.scale*r;this.props.placedImages.forEach(function(t,i){var s=Math.max(e.left,t.x),u=Math.max(e.top,t.y),c={left:s,top:u,width:Math.min(t.x+t.w,e.left+e.width)-s,height:Math.min(t.y+t.h,e.top+e.height)-u};if(c.width>0&&c.height>0){var l={position:"absolute",zIndex:10,margin:0,backgroundSize:100*c.width/t.w+"% "+100*c.height/t.h+"%",backgroundPosition:100*(c.left-t.x)/(t.w-t.x-c.width)+"% "+100*(c.top-t.h)/(t.h-t.y-c.height)+"%",left:Math.floor((c.left-e.left)*a)/r+"px",top:Math.floor((c.top-e.top)*a)/r+"px",width:(Math.ceil((c.left+c.width)*a)-Math.floor(c.left*a))/r+"px",height:(Math.ceil((c.top+c.height)*a)-Math.floor(c.top*a))/r+"px"},p=o.createElement("img",{src:t.url,style:l,key:t.url});n.push(p)}})}return o.createElement("div",{style:t},n)},t}(o.Component);t.PageBackground=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e={left:this.props.viewport?this.props.viewport.left:0,top:this.props.viewport?this.props.viewport.top:0,width:this.props.viewport?this.props.viewport.width:this.props.pageWidth,height:this.props.viewport?this.props.viewport.height:this.props.pageHeight},t={position:"absolute",zIndex:0,left:0,top:0,width:e.width*this.props.scale,height:e.height*this.props.scale},n=this.props.x+e.left*this.props.width/this.props.pageWidth,r=this.props.width*e.width/this.props.pageWidth,i=e.top*this.props.height/this.props.pageHeight,a=this.props.height*e.height/this.props.pageHeight;return t.backgroundImage="url("+this.props.url+")",t.backgroundSize=100*this.props.totalWidth*this.props.pageWidth/(e.width*this.props.width)+"% "+100*this.props.pageHeight/e.height+"%",t.backgroundPosition=(this.props.totalWidth-r<=0?0:100*n/(this.props.totalWidth-r))+"%"+((this.props.height-a<=0?0:100*i/(this.props.height-a))+"%"),o.createElement("div",{style:t})},t}(o.Component);t.PageThumbBackground=i},function(e,t,n){"use strict";function r(e,t,n,r){return new l.ProgressiveLoadPageBackgroundWrapper(o(e,t,r),n)}function o(e,t,n){var r=a.Context.store.getState().metadata.bookVersion,o=0==r.major&&r.minor<5,l={};t.baseImgDpis.forEach(function(t){l[t]=a.Context.resourceLoader.getResourceUrl(s.ResourceType.PAGE_BASE_IMG,[e+1,t])});var d={dpis:t.baseImgDpis,urlPerDpi:l,placedImgs:t.placedImgs.map(function(e){var t={};return e.dpis.forEach(function(n){t[n]=o?a.Context.resourceLoader.getResourceUrl(s.ResourceType.DEPRECATED_PLACED_IMG,[e.id,void 0==e.ext?"jpg":e.ext]):a.Context.resourceLoader.getResourceUrl(s.ResourceType.PLACED_IMG,[e.id,n,void 0==e.ext?"jpg":e.ext])}),{x:e.x,y:e.y,w:e.w,h:e.h,dpis:e.dpis,urlPerDpi:t}}),height:t.height,width:t.width};return{onIsImagePreloaded:function(e){return!!c.ImageCache.inCache(e)&&(i(),!0)},onPreloadImage:function(e){return new h.Promise(function(t){a.Context.resourceLoader.getImage(e,function(){t(),i()})})},page:d,scale:1,sourceDpi:f,thumb:p.getThumbImages(a.Context.store.getState())[e],visibility:u.Visibility.None,viewport:n}}function i(){d||(a.Context.internalEventEmitter.triggerDidLoadBaseImg(),d=!0)}var a=n(10),s=n(8),u=n(192),c=n(181),l=n(227),p=n(634),h=n(182),f=96;t.createReactProgressiveLoadPageBackground=r,t.createProgressiveLoadPageBackgroundProps=o;var d=!1},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=n(193),a=n(228),s=n(192),u=n(366),c=n(598),l=n(609),p=n(612),h=n(662),f=n(663),d=n(664),m=n(675),g=n(683),v=function(){function e(e,t){this.container=t,this.props=e,this.render()}return e.prototype.render=function(){a.render(this.renderComponent(),this.container)},e.prototype.destroy=function(){a.unmountComponentAtNode(this.container)},e}();t.CustomWrapper=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(s.ProgressiveLoadPageBackground,o({},this.props))},Object.defineProperty(t.prototype,"scale",{get:function(){return this.props.scale},set:function(e){e!=this.props.scale&&(this.props.scale=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this.props.visibility},set:function(e){e!=this.props.visibility&&(this.props.visibility=e,this.render())},enumerable:!0,configurable:!0}),t}(v);t.ProgressiveLoadPageBackgroundWrapper=y;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(p.LayerViewport,o({},this.props))},t}(v);t.LayerViewportWrapper=b;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(m.LayerScreenOverlay,o({},this.props))},t}(v);t.LayerScreenOverlayWrapper=E;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(g.LayerNav,o({},this.props))},t}(v);t.LayerNavWrapper=w;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(u.LayerPage,o({},this.props))},t}(v);t.LayerPageWrapper=x;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(d.LayerPageAnnotations,o({},this.props))},t}(v);t.LayerPageAnnotationsWrapper=T;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(c.ToolbarLeftPane,o({},this.props))},t}(v);t.ToolbarLeftPaneWrapper=C;var N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(l.ToolbarSeekBar,o({},this.props))},t}(v);t.ToolbarSeekBarWrapper=N;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(h.ToolbarCenterPane,o({},this.props))},t}(v);t.ToolbarCenterPaneWrapper=S;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderComponent=function(){return i.createElement(f.ToolbarRightPane,o({},this.props))},t}(v);t.ToolbarRightPaneWrapper=_},function(e,t,n){"use strict";e.exports=n(229)},function(e,t,n){"use strict";var r=n(230),o=n(234),i=n(357),a=n(255),s=n(252),u=n(362),c=n(363),l=n(364),p=n(365);n(199);o.inject();var h={findDOMNode:c,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:p};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=l(e)),e?r.getNodeFromInstance(e):null}},Mount:i,Reconciler:a});e.exports=h},function(e,t,n){"use strict";function r(e,t){return 1===e.nodeType&&e.getAttribute(d)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function o(e){for(var t;t=e._renderedComponent;)e=t;return e}function i(e,t){var n=o(e);n._hostNode=t,t[g]=n}function a(e){var t=e._hostNode;t&&(delete t[g],e._hostNode=null)}function s(e,t){if(!(e._flags&m.hasCachedChildNodes)){var n=e._renderedChildren,a=t.firstChild;e:for(var s in n)if(n.hasOwnProperty(s)){var u=n[s],c=o(u)._domID;if(0!==c){for(;null!==a;a=a.nextSibling)if(r(a,c)){i(u,a);continue e}p("32",c)}}e._flags|=m.hasCachedChildNodes}}function u(e){if(e[g])return e[g];for(var t=[];!e[g];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[g]);e=t.pop())n=r,t.length&&s(r,e);return n}function c(e){var t=u(e);return null!=t&&t._hostNode===e?t:null}function l(e){if(void 0===e._hostNode?p("33"):void 0,e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent?void 0:p("34"),e=e._hostParent;for(;t.length;e=t.pop())s(e,e._hostNode);return e._hostNode}var p=n(231),h=n(232),f=n(233),d=(n(203),h.ID_ATTRIBUTE_NAME),m=f,g="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:u,getInstanceFromNode:c,getNodeFromInstance:l,precacheChildNodes:s,precacheNode:i,uncacheNode:a};e.exports=v},197,function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var o=n(231),i=(n(203),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=i,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},u=e.DOMAttributeNames||{},c=e.DOMPropertyNames||{},l=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var p in n){s.properties.hasOwnProperty(p)?o("48",p):void 0;var h=p.toLowerCase(),f=n[p],d={attributeName:h,attributeNamespace:null,propertyName:p,mutationMethod:null,mustUseProperty:r(f,t.MUST_USE_PROPERTY),hasBooleanValue:r(f,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(f,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(f,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(f,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(d.hasBooleanValue+d.hasNumericValue+d.hasOverloadedBooleanValue<=1?void 0:o("50",p),u.hasOwnProperty(p)){var m=u[p];d.attributeName=m}a.hasOwnProperty(p)&&(d.attributeNamespace=a[p]),c.hasOwnProperty(p)&&(d.propertyName=c[p]),l.hasOwnProperty(p)&&(d.mutationMethod=l[p]),s.properties[p]=d}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:i};e.exports=s},function(e,t){"use strict";var n={hasCachedChildNodes:1};e.exports=n},function(e,t,n){"use strict";function r(){T||(T=!0,y.EventEmitter.injectReactEventListener(v),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(h),y.EventPluginUtils.injectTreeTraversal(d),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:x,EnterLeaveEventPlugin:u,ChangeEventPlugin:a,SelectEventPlugin:w,BeforeInputEventPlugin:i}),y.HostComponent.injectGenericComponentClass(p),y.HostComponent.injectTextComponentClass(m),y.DOMProperty.injectDOMPropertyConfig(o),y.DOMProperty.injectDOMPropertyConfig(c),y.DOMProperty.injectDOMPropertyConfig(E),y.EmptyComponent.injectEmptyComponentFactory(function(e){return new f(e)}),y.Updates.injectReconcileTransaction(b),y.Updates.injectBatchingStrategy(g),y.Component.injectEnvironment(l))}var o=n(235),i=n(236),a=n(251),s=n(264),u=n(265),c=n(270),l=n(271),p=n(284),h=n(230),f=n(328),d=n(329),m=n(330),g=n(331),v=n(332),y=n(335),b=n(336),E=n(344),w=n(345),x=n(346),T=!1;e.exports={inject:r}},function(e,t){"use strict";var n={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};e.exports=n},function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function o(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function i(e){switch(e){case"topCompositionStart":return S.compositionStart;case"topCompositionEnd":return S.compositionEnd;case"topCompositionUpdate":return S.compositionUpdate}}function a(e,t){return"topKeyDown"===e&&t.keyCode===b}function s(e,t){switch(e){case"topKeyUp":return y.indexOf(t.keyCode)!==-1;case"topKeyDown":return t.keyCode!==b;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function u(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function c(e,t,n,r){var o,c;if(E?o=i(e):O?s(e,n)&&(o=S.compositionEnd):a(e,n)&&(o=S.compositionStart),!o)return null;T&&(O||o!==S.compositionStart?o===S.compositionEnd&&O&&(c=O.getData()):O=m.getPooled(r));var l=g.getPooled(o,t,n,r);if(c)l.data=c;else{var p=u(n);null!==p&&(l.data=p)}return f.accumulateTwoPhaseDispatches(l),l}function l(e,t){switch(e){case"topCompositionEnd":return u(t);case"topKeyPress":var n=t.which;return n!==C?null:(_=!0,N);case"topTextInput":var r=t.data;return r===N&&_?null:r;default:return null}}function p(e,t){if(O){if("topCompositionEnd"===e||!E&&s(e,t)){var n=O.getData();return m.release(O),O=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!o(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return T?null:t.data;default:return null}}function h(e,t,n,r){var o;if(o=x?l(e,n):p(e,n),!o)return null;var i=v.getPooled(S.beforeInput,t,n,r);return i.data=o,f.accumulateTwoPhaseDispatches(i),i}var f=n(237),d=n(244),m=n(245),g=n(248),v=n(250),y=[9,13,27,32],b=229,E=d.canUseDOM&&"CompositionEvent"in window,w=null;d.canUseDOM&&"documentMode"in document&&(w=document.documentMode);var x=d.canUseDOM&&"TextEvent"in window&&!w&&!r(),T=d.canUseDOM&&(!E||w&&w>8&&w<=11),C=32,N=String.fromCharCode(C),S={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},_=!1,O=null,P={eventTypes:S,extractEvents:function(e,t,n,r){return[c(e,t,n,r),h(e,t,n,r)]}};e.exports=P},function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return v(e,r)}function o(e,t,n){var o=r(e,n,t);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&d.traverseTwoPhase(e._targetInst,o,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?d.getParentInstance(t):null;d.traverseTwoPhase(n,o,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=v(e,r);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}}function u(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function c(e){g(e,i)}function l(e){g(e,a)}function p(e,t,n,r){d.traverseEnterLeave(n,r,s,e,t)}function h(e){g(e,u)}var f=n(238),d=n(240),m=n(242),g=n(243),v=(n(199),f.getListener),y={accumulateTwoPhaseDispatches:c,accumulateTwoPhaseDispatchesSkipTarget:l,accumulateDirectDispatches:h,accumulateEnterLeaveDispatches:p};e.exports=y},function(e,t,n){"use strict";function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function o(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(t));default:return!1}}var i=n(231),a=n(239),s=n(240),u=n(241),c=n(242),l=n(243),p=(n(203),{}),h=null,f=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},d=function(e){return f(e,!0)},m=function(e){return f(e,!1)},g=function(e){return"."+e._rootNodeID},v={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n?i("94",t,typeof n):void 0;var r=g(e),o=p[t]||(p[t]={});o[r]=n;var s=a.registrationNameModules[t];s&&s.didPutListener&&s.didPutListener(e,t,n)},getListener:function(e,t){var n=p[t];if(o(t,e._currentElement.type,e._currentElement.props))return null;var r=g(e);return n&&n[r]},deleteListener:function(e,t){var n=a.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=p[t];if(r){var o=g(e);delete r[o]}},deleteAllListeners:function(e){var t=g(e);for(var n in p)if(p.hasOwnProperty(n)&&p[n][t]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete p[n][t]}},extractEvents:function(e,t,n,r){for(var o,i=a.plugins,s=0;s<i.length;s++){var u=i[s];if(u){var l=u.extractEvents(e,t,n,r);l&&(o=c(o,l))}}return o},enqueueEvents:function(e){e&&(h=c(h,e))},processEventQueue:function(e){var t=h;h=null,e?l(t,d):l(t,m),h?i("95"):void 0,u.rethrowCaughtError()},__purge:function(){p={}},__getListenerBank:function(){return p}};e.exports=v},function(e,t,n){"use strict";function r(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(n>-1?void 0:a("96",e),!c.plugins[n]){t.extractEvents?void 0:a("97",e),c.plugins[n]=t;var r=t.eventTypes;for(var i in r)o(r[i],t,i)?void 0:a("98",i,e)}}}function o(e,t,n){c.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,c.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];i(s,t,n)}return!0}return!!e.registrationName&&(i(e.registrationName,t,n),!0)}function i(e,t,n){c.registrationNameModules[e]?a("100",e):void 0,c.registrationNameModules[e]=t,c.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=n(231),s=(n(203),null),u={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s?a("101"):void 0,s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];u.hasOwnProperty(n)&&u[n]===o||(u[n]?a("102",n):void 0,u[n]=o,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return c.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var o=c.registrationNameModules[n[r]];if(o)return o}}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];c.plugins.length=0;var t=c.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=c.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};e.exports=c},function(e,t,n){"use strict";function r(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function o(e){return"topMouseMove"===e||"topTouchMove"===e}function i(e){return"topMouseDown"===e||"topTouchStart"===e}function a(e,t,n,r){var o=e.type||"unknown-event";e.currentTarget=v.getNodeFromInstance(r),t?m.invokeGuardedCallbackWithCatch(o,n,e):m.invokeGuardedCallback(o,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)a(e,t,n[o],r[o]);else n&&a(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function u(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function c(e){var t=u(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)?d("103"):void 0,e.currentTarget=t?v.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function p(e){return!!e._dispatchListeners}var h,f,d=n(231),m=n(241),g=(n(203),n(199),{injectComponentTree:function(e){h=e},injectTreeTraversal:function(e){f=e}}),v={isEndish:r,isMoveish:o,isStartish:i,executeDirectDispatch:l,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:c,hasDispatches:p,getInstanceFromNode:function(e){return h.getInstanceFromNode(e)},getNodeFromInstance:function(e){return h.getNodeFromInstance(e)},isAncestor:function(e,t){return f.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return f.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return f.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return f.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,o){return f.traverseEnterLeave(e,t,n,r,o)},injection:g};e.exports=v},function(e,t,n){"use strict";function r(e,t,n){try{t(n)}catch(e){null===o&&(o=e)}}var o=null,i={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(o){var e=o;throw o=null,e}}};e.exports=i},function(e,t,n){"use strict";function r(e,t){return null==t?o("30"):void 0,null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var o=n(231);n(203);e.exports=r},function(e,t){"use strict";function n(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}e.exports=n},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var o=n(195),i=n(246),a=n(247);o(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,o=this.getText(),i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=o.slice(e,s),this._fallbackText}}),i.addPoolingTo(r),e.exports=r},[726,231],function(e,t,n){"use strict";function r(){return!i&&o.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var o=n(244),i=null;e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(249),i={data:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var o=this.constructor.Interface;for(var i in o)if(o.hasOwnProperty(i)){var s=o[i];s?this[i]=s(n):"target"===i?this.target=r:this[i]=n[i]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return u?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var o=n(195),i=n(246),a=n(200),s=(n(199),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=u,r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;o(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.fourArgumentPooler)},i.addPoolingTo(r,i.fourArgumentPooler),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(249),i={data:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=S.getPooled(I.change,e,t,n);return r.type="change",x.accumulateTwoPhaseDispatches(r),r}function o(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function i(e){var t=r(R,e,O(e));N.batchedUpdates(a,t)}function a(e){w.enqueueEvents(e),w.processEventQueue(!1)}function s(e,t){M=e,R=t,M.attachEvent("onchange",i)}function u(){M&&(M.detachEvent("onchange",i),M=null,R=null)}function c(e,t){var n=_.updateValueIfChanged(e),r=t.simulated===!0&&D._allowSimulatedPassThrough;if(n||r)return e}function l(e,t){if("topChange"===e)return t}function p(e,t,n){"topFocus"===e?(u(),s(t,n)):"topBlur"===e&&u()}function h(e,t){M=e,R=t,M.attachEvent("onpropertychange",d)}function f(){M&&(M.detachEvent("onpropertychange",d),M=null,R=null)}function d(e){"value"===e.propertyName&&c(R,e)&&i(e)}function m(e,t,n){"topFocus"===e?(f(),h(t,n)):"topBlur"===e&&f()}function g(e,t,n){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return c(R,n)}function v(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function y(e,t,n){if("topClick"===e)return c(t,n)}function b(e,t,n){if("topInput"===e||"topChange"===e)return c(t,n)}function E(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;if(n&&n.controlled&&"number"===t.type){var r=""+t.value;t.getAttribute("value")!==r&&t.setAttribute("value",r)}}}var w=n(238),x=n(237),T=n(244),C=n(230),N=n(252),S=n(249),_=n(260),O=n(261),P=n(262),A=n(263),I={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},M=null,R=null,L=!1;T.canUseDOM&&(L=P("change")&&(!document.documentMode||document.documentMode>8));var k=!1;T.canUseDOM&&(k=P("input")&&(!("documentMode"in document)||document.documentMode>9));var D={eventTypes:I,_allowSimulatedPassThrough:!0,_isInputEventSupported:k,extractEvents:function(e,t,n,i){var a,s,u=t?C.getNodeFromInstance(t):window;if(o(u)?L?a=l:s=p:A(u)?k?a=b:(a=g,s=m):v(u)&&(a=y),a){var c=a(e,t,n);if(c){var h=r(c,n,i);return h}}s&&s(e,u,t),"topBlur"===e&&E(t,u)}};e.exports=D},function(e,t,n){"use strict";function r(){_.ReactReconcileTransaction&&w?void 0:l("123")}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=h.getPooled(),this.reconcileTransaction=_.ReactReconcileTransaction.getPooled(!0)}function i(e,t,n,o,i,a){return r(),w.batchedUpdates(e,t,n,o,i,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==v.length?l("124",t,v.length):void 0,v.sort(a),y++;for(var n=0;n<t;n++){var r=v[n],o=r._pendingCallbacks;r._pendingCallbacks=null;var i;if(d.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),i="React update: "+s.getName(),console.time(i)}if(m.performUpdateIfNecessary(r,e.reconcileTransaction,y),i&&console.timeEnd(i),o)for(var u=0;u<o.length;u++)e.callbackQueue.enqueue(o[u],r.getPublicInstance())}}function u(e){return r(),w.isBatchingUpdates?(v.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=y+1))):void w.batchedUpdates(u,e)}function c(e,t){w.isBatchingUpdates?void 0:l("125"),b.enqueue(e,t),E=!0}var l=n(231),p=n(195),h=n(253),f=n(246),d=n(254),m=n(255),g=n(259),v=(n(203),[]),y=0,b=h.getPooled(),E=!1,w=null,x={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),N()):v.length=0}},T={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[x,T];p(o.prototype,g,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,h.release(this.callbackQueue),
this.callbackQueue=null,_.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return g.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(o);var N=function(){for(;v.length||E;){if(v.length){var e=o.getPooled();e.perform(s,null,e),o.release(e)}if(E){E=!1;var t=b;b=h.getPooled(),t.notifyAll(),h.release(t)}}},S={injectReconcileTransaction:function(e){e?void 0:l("126"),_.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:l("127"),"function"!=typeof e.batchedUpdates?l("128"):void 0,"boolean"!=typeof e.isBatchingUpdates?l("129"):void 0,w=e}},_={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:u,flushBatchedUpdates:N,injection:S,asap:c};e.exports=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(231),i=n(246),a=(n(203),function(){function e(t){r(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,n=this._arg;if(e&&t){e.length!==t.length?o("24"):void 0,this._callbacks=null,this._contexts=null;for(var r=0;r<e.length;r++)e[r].call(t[r],n);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());e.exports=i.addPoolingTo(a)},function(e,t){"use strict";var n={logTopLevelRenders:!1};e.exports=n},function(e,t,n){"use strict";function r(){o.attachRefs(this,this._currentElement)}var o=n(256),i=(n(258),n(199),{mountComponent:function(e,t,n,o,i,a){var s=e.mountComponent(t,n,o,i,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){o.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,i){var a=e._currentElement;if(t!==a||i!==e._context){var s=o.shouldUpdateRefs(a,t);s&&o.detachRefs(e,a),e.receiveComponent(t,n,i),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=i},function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):i.addComponentAsRefTo(t,e,n)}function o(e,t,n){"function"==typeof e?e(null):i.removeComponentAsRefFrom(t,e,n)}var i=n(257),a={};a.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&r(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null,r=null;null!==e&&"object"==typeof e&&(n=e.ref,r=e._owner);var o=null,i=null;return null!==t&&"object"==typeof t&&(o=t.ref,i=t._owner),n!==o||"string"==typeof o&&i!==r},a.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&o(n,e,t._owner)}},e.exports=a},function(e,t,n){"use strict";function r(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var o=n(231),i=(n(203),{addComponentAsRefTo:function(e,t,n){r(n)?void 0:o("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(n)?void 0:o("120");var i=n.getPublicInstance();i&&i.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});e.exports=i},function(e,t,n){"use strict";var r=null;e.exports={debugTool:r}},function(e,t,n){"use strict";var r=n(231),o=(n(203),{}),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,o,i,a,s,u){this.isInTransaction()?r("27"):void 0;var c,l;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),l=e.call(t,n,o,i,a,s,u),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()?void 0:r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,a=t[n],s=this.wrapperInitData[n];try{i=!0,s!==o&&a.close&&a.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};e.exports=i},function(e,t,n){"use strict";function r(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function o(e){return e._wrapperState.valueTracker}function i(e,t){e._wrapperState.valueTracker=t}function a(e){delete e._wrapperState.valueTracker}function s(e){var t;return e&&(t=r(e)?""+e.checked:e.value),t}var u=n(230),c={_getTrackerFromNode:function(e){return o(u.getInstanceFromNode(e))},track:function(e){if(!o(e)){var t=u.getNodeFromInstance(e),n=r(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),c=""+t[n];t.hasOwnProperty(n)||"function"!=typeof s.get||"function"!=typeof s.set||(Object.defineProperty(t,n,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(e){c=""+e,s.set.call(this,e)}}),i(e,{getValue:function(){return c},setValue:function(e){c=""+e},stopTracking:function(){a(e),delete t[n]}}))}},updateValueIfChanged:function(e){if(!e)return!1;var t=o(e);if(!t)return c.track(e),!0;var n=t.getValue(),r=s(u.getNodeFromInstance(e));return r!==n&&(t.setValue(r),!0)},stopTracking:function(e){var t=o(e);t&&t.stopTracking()}};e.exports=c},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function r(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&o&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var o,i=n(244);i.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!r[e.type]:"textarea"===t}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t){"use strict";var n=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];e.exports=n},function(e,t,n){"use strict";var r=n(237),o=n(230),i=n(266),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(e,t,n,s){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var u;if(s.window===s)u=s;else{var c=s.ownerDocument;u=c?c.defaultView||c.parentWindow:window}var l,p;if("topMouseOut"===e){l=t;var h=n.relatedTarget||n.toElement;p=h?o.getClosestInstanceFromNode(h):null}else l=null,p=t;if(l===p)return null;var f=null==l?u:o.getNodeFromInstance(l),d=null==p?u:o.getNodeFromInstance(p),m=i.getPooled(a.mouseLeave,l,n,s);m.type="mouseleave",m.target=f,m.relatedTarget=d;var g=i.getPooled(a.mouseEnter,p,n,s);return g.type="mouseenter",g.target=d,g.relatedTarget=f,r.accumulateEnterLeaveDispatches(m,g,l,p),[m,g]}};e.exports=s},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(267),i=n(268),a=n(269),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};o.augmentClass(r,s),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(249),i=n(261),a={view:function(e){if(e.view)return e.view;var t=i(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};o.augmentClass(r,a),e.exports=r},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=o[e];return!!r&&!!n[r]}function r(e){return n}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,t,n){"use strict";var r=n(232),o=r.injection.MUST_USE_PROPERTY,i=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,c={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,as:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:o|i,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,coords:0,crossOrigin:0,data:0,dateTime:0,default:i,defer:i,dir:0,disabled:i,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:o|i,muted:o|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,playsInline:i,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,referrerPolicy:0,rel:0,required:i,reversed:i,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:o|i,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){return null==t?e.removeAttribute("value"):void("number"!==e.type||e.hasAttribute("value")===!1?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t))}}};e.exports=c},function(e,t,n){"use strict";var r=n(272),o=n(283),i={processChildrenUpdates:o.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};e.exports=i},function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function o(e,t,n){l.insertTreeBefore(e,t,n)}function i(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):m(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],u(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var o=t;;){var i=o.nextSibling;if(m(e,o,r),o===n)break;o=i}}function u(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function c(e,t,n){var r=e.parentNode,o=e.nextSibling;o===t?n&&m(r,document.createTextNode(n),o):n?(d(o,n),u(r,o,t)):u(r,e,t)}var l=n(273),p=n(279),h=(n(230),n(258),n(276)),f=n(275),d=n(277),m=h(function(e,t,n){e.insertBefore(t,n)}),g=p.dangerouslyReplaceNodeWithMarkup,v={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:c,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"INSERT_MARKUP":o(e,s.content,r(e,s.afterNode));break;case"MOVE_EXISTING":i(e,s.fromNode,r(e,s.afterNode));break;case"SET_MARKUP":f(e,s.content);break;case"TEXT_CONTENT":d(e,s.content);break;case"REMOVE_NODE":a(e,s.fromNode)}}}};e.exports=v},function(e,t,n){"use strict";function r(e){if(g){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)v(t,n[r],null);else null!=e.html?p(t,e.html):null!=e.text&&f(t,e.text)}}function o(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function i(e,t){g?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){g?e.html=t:p(e.node,t)}function s(e,t){g?e.text=t:f(e.node,t)}function u(){return this.node.nodeName}function c(e){return{node:e,children:[],html:null,text:null,toString:u}}var l=n(274),p=n(275),h=n(276),f=n(277),d=1,m=11,g="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),v=h(function(e,t,n){t.node.nodeType===m||t.node.nodeType===d&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===l.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});c.insertTreeBefore=v,c.replaceChildWithTree=o,c.queueChild=i,c.queueHTML=a,c.queueText=s,e.exports=c},function(e,t){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=n},function(e,t,n){"use strict";var r,o=n(244),i=n(274),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(276),c=u(function(e,t){if(e.namespaceURI!==i.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(o.canUseDOM){var l=document.createElement("div");l.innerHTML=" ",""===l.innerHTML&&(c=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),l=null}e.exports=c},function(e,t){"use strict";var n=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e};e.exports=n},function(e,t,n){"use strict";var r=n(244),o=n(278),i=n(275),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){return 3===e.nodeType?void(e.nodeValue=t):void i(e,o(t))})),e.exports=a},function(e,t){"use strict";function n(e){var t=""+e,n=o.exec(t);if(!n)return t;var r,i="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(i+=t.substring(s,a)),s=a+1,i+=r}return s!==a?i+t.substring(s,a):i}function r(e){return"boolean"==typeof e||"number"==typeof e?""+e:n(e)}var o=/["'&<>]/;e.exports=r},function(e,t,n){"use strict";var r=n(231),o=n(273),i=n(244),a=n(280),s=n(200),u=(n(203),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(i.canUseDOM?void 0:r("56"),t?void 0:r("57"),"HTML"===e.nodeName?r("58"):void 0,"string"==typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else o.replaceChildWithTree(e,t)}});e.exports=u},function(e,t,n){"use strict";function r(e){var t=e.match(l);return t&&t[1].toLowerCase()}function o(e,t){var n=c;c?void 0:u(!1);var o=r(e),i=o&&s(o);if(i){n.innerHTML=i[1]+e+i[2];for(var l=i[0];l--;)n=n.lastChild}else n.innerHTML=e;var p=n.getElementsByTagName("script");p.length&&(t?void 0:u(!1),a(p).forEach(t));for(var h=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return h}var i=n(244),a=n(281),s=n(282),u=n(203),c=i.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;e.exports=o},function(e,t,n){"use strict";function r(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?a(!1):void 0,"number"!=typeof t?a(!1):void 0,0===t||t-1 in e?void 0:a(!1),"function"==typeof e.callee?a(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function o(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return o(e)?Array.isArray(e)?e.slice():r(e):[e]}var a=n(203);e.exports=i},function(e,t,n){"use strict";function r(e){return a?void 0:i(!1),h.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?h[e]:null}var o=n(244),i=n(203),a=o.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:l,th:l},f=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];f.forEach(function(e){h[e]=p,s[e]=!0}),e.exports=r},function(e,t,n){"use strict";var r=n(272),o=n(230),i={dangerouslyProcessChildrenUpdates:function(e,t){var n=o.getNodeFromInstance(e);r.processUpdates(n,t)}};e.exports=i},function(e,t,n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function o(e,t){t&&(Z[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?g("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?g("60"):void 0,"object"==typeof t.dangerouslySetInnerHTML&&G in t.dangerouslySetInnerHTML?void 0:g("61")),null!=t.style&&"object"!=typeof t.style?g("62",r(e)):void 0)}function i(e,t,n,r){if(!(r instanceof L)){var o=e._hostContainerInfo,i=o._node&&o._node.nodeType===q,s=i?o._node:o._ownerDocument;j(t,s),r.getReactMountReady().enqueue(a,{inst:e,registrationName:t,listener:n})}}function a(){var e=this;C.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;P.postMountWrapper(e)}function u(){var e=this;M.postMountWrapper(e)}function c(){var e=this;A.postMountWrapper(e)}function l(){D.track(this)}function p(){var e=this;e._rootNodeID?void 0:g("63");var t=F(e);switch(t?void 0:g("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[S.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in Y)Y.hasOwnProperty(n)&&e._wrapperState.listeners.push(S.trapBubbledEvent(n,Y[n],t));break;case"source":e._wrapperState.listeners=[S.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[S.trapBubbledEvent("topError","error",t),S.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[S.trapBubbledEvent("topReset","reset",t),S.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[S.trapBubbledEvent("topInvalid","invalid",t)]}}function h(){I.postUpdateWrapper(this)}function f(e){J.call(Q,e)||($.test(e)?void 0:g("65",e),Q[e]=!0)}function d(e,t){return e.indexOf("-")>=0||null!=t.is}function m(e){var t=e.type;f(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var g=n(231),v=n(195),y=n(285),b=n(287),E=n(273),w=n(274),x=n(232),T=n(295),C=n(238),N=n(239),S=n(297),_=n(233),O=n(230),P=n(300),A=n(303),I=n(304),M=n(305),R=(n(258),n(306)),L=n(324),k=(n(200),n(278)),D=(n(203),n(262),n(313),n(260)),B=(n(327),n(199),_),U=C.deleteListener,F=O.getNodeFromInstance,j=S.listenTo,H=N.registrationNameModules,V={string:!0,number:!0},W="style",G="__html",z={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},q=11,Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},X={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},K={listing:!0,pre:!0,textarea:!0},Z=v({menuitem:!0},X),$=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Q={},J={}.hasOwnProperty,ee=1;m.displayName="ReactDOMComponent",m.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=ee++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var i=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(p,this);break;case"input":P.mountWrapper(this,i,t),i=P.getHostProps(this,i),e.getReactMountReady().enqueue(l,this),e.getReactMountReady().enqueue(p,this);break;case"option":A.mountWrapper(this,i,t),i=A.getHostProps(this,i);break;case"select":I.mountWrapper(this,i,t),i=I.getHostProps(this,i),e.getReactMountReady().enqueue(p,this);break;case"textarea":M.mountWrapper(this,i,t),i=M.getHostProps(this,i),e.getReactMountReady().enqueue(l,this),e.getReactMountReady().enqueue(p,this)}o(this,i);var a,h;null!=t?(a=t._namespaceURI,h=t._tag):n._tag&&(a=n._namespaceURI,h=n._tag),(null==a||a===w.svg&&"foreignobject"===h)&&(a=w.html),a===w.html&&("svg"===this._tag?a=w.svg:"math"===this._tag&&(a=w.mathml)),this._namespaceURI=a;var f;if(e.useCreateElement){var d,m=n._ownerDocument;if(a===w.html)if("script"===this._tag){var g=m.createElement("div"),v=this._currentElement.type;g.innerHTML="<"+v+"></"+v+">",d=g.removeChild(g.firstChild)}else d=i.is?m.createElement(this._currentElement.type,i.is):m.createElement(this._currentElement.type);else d=m.createElementNS(a,this._currentElement.type);O.precacheNode(this,d),this._flags|=B.hasCachedChildNodes,this._hostParent||T.setAttributeForRoot(d),this._updateDOMProperties(null,i,e);var b=E(d);this._createInitialChildren(e,i,r,b),f=b}else{var x=this._createOpenTagMarkupAndPutListeners(e,i),C=this._createContentMarkup(e,i,r);f=!C&&X[this._tag]?x+"/>":x+">"+C+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),i.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(u,this),i.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"select":i.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"button":i.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(c,this)}return f},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(null!=o)if(H.hasOwnProperty(r))o&&i(this,r,o,e);else{r===W&&(o&&(o=this._previousStyleCopy=v({},t.style)),o=b.createMarkupForStyles(o,this));var a=null;null!=this._tag&&d(this._tag,t)?z.hasOwnProperty(r)||(a=T.createMarkupForCustomAttribute(r,o)):a=T.createMarkupForProperty(r,o),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+T.createMarkupForRoot()),n+=" "+T.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(r=o.__html);else{var i=V[typeof t.children]?t.children:null,a=null!=i?null:t.children;if(null!=i)r=k(i);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return K[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&E.queueHTML(r,o.__html);else{var i=V[typeof t.children]?t.children:null,a=null!=i?null:t.children;if(null!=i)""!==i&&E.queueText(r,i);else if(null!=a)for(var s=this.mountChildren(a,e,n),u=0;u<s.length;u++)E.queueChild(r,s[u])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var i=t.props,a=this._currentElement.props;switch(this._tag){case"input":i=P.getHostProps(this,i),a=P.getHostProps(this,a);break;case"option":i=A.getHostProps(this,i),a=A.getHostProps(this,a);break;case"select":i=I.getHostProps(this,i),a=I.getHostProps(this,a);break;case"textarea":i=M.getHostProps(this,i),a=M.getHostProps(this,a)}switch(o(this,a),this._updateDOMProperties(i,a,e),this._updateDOMChildren(i,a,e,r),this._tag){case"input":P.updateWrapper(this);break;case"textarea":M.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(h,this)}},_updateDOMProperties:function(e,t,n){var r,o,a;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if(r===W){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(a=a||{},a[o]="");this._previousStyleCopy=null}else H.hasOwnProperty(r)?e[r]&&U(this,r):d(this._tag,e)?z.hasOwnProperty(r)||T.deleteValueForAttribute(F(this),r):(x.properties[r]||x.isCustomAttribute(r))&&T.deleteValueForProperty(F(this),r);for(r in t){var u=t[r],c=r===W?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&u!==c&&(null!=u||null!=c))if(r===W)if(u?u=this._previousStyleCopy=v({},u):this._previousStyleCopy=null,c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(a=a||{},a[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(a=a||{},a[o]=u[o])}else a=u;else if(H.hasOwnProperty(r))u?i(this,r,u,n):c&&U(this,r);else if(d(this._tag,t))z.hasOwnProperty(r)||T.setValueForAttribute(F(this),r,u);else if(x.properties[r]||x.isCustomAttribute(r)){var l=F(this);null!=u?T.setValueForProperty(l,r,u):T.deleteValueForProperty(l,r)}}a&&b.setValueForStyles(F(this),a,this)},_updateDOMChildren:function(e,t,n,r){var o=V[typeof e.children]?e.children:null,i=V[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=o?null:e.children,c=null!=i?null:t.children,l=null!=o||null!=a,p=null!=i||null!=s;null!=u&&null==c?this.updateChildren(null,n,r):l&&!p&&this.updateTextContent(""),null!=i?o!==i&&this.updateTextContent(""+i):null!=s?a!==s&&this.updateMarkup(""+s):null!=c&&this.updateChildren(c,n,r)},getHostNode:function(){return F(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"input":case"textarea":D.stopTracking(this);break;case"html":case"head":case"body":g("66",this._tag)}this.unmountChildren(e),O.uncacheNode(this),C.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return F(this)}},v(m.prototype,m.Mixin,R.Mixin),e.exports=m},function(e,t,n){"use strict";var r=n(230),o=n(286),i={focusDOMComponent:function(){o(r.getNodeFromInstance(this))}};e.exports=i},function(e,t){"use strict";function n(e){try{e.focus()}catch(e){}}e.exports=n},function(e,t,n){"use strict";var r=n(288),o=n(244),i=(n(258),n(289),n(291)),a=n(292),s=n(294),u=(n(199),s(function(e){return a(e)})),c=!1,l="cssFloat";if(o.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(e){c=!0}void 0===document.documentElement.style.cssFloat&&(l="styleFloat")}var h={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var o=0===r.indexOf("--"),a=e[r];null!=a&&(n+=u(r)+":",n+=i(r,a,t,o)+";")}return n||null},setValueForStyles:function(e,t,n){var o=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=0===a.indexOf("--"),u=i(a,t[a],n,s);if("float"!==a&&"cssFloat"!==a||(a=l),s)o.setProperty(a,u);else if(u)o[a]=u;else{var p=c&&r.shorthandPropertyExpansions[a];if(p)for(var h in p)o[h]="";else o[a]=""}}}};e.exports=h},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){o.forEach(function(t){r[n(t,e)]=r[e]})});var i={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:i};e.exports=a},function(e,t,n){"use strict";function r(e){return o(e.replace(i,"ms-"))}var o=n(290),i=/^-ms-/;e.exports=r},function(e,t){"use strict";function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){var o=null==t||"boolean"==typeof t||""===t;if(o)return"";var a=isNaN(t);if(r||a||0===t||i.hasOwnProperty(e)&&i[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var o=n(288),i=(n(199),o.isUnitlessNumber);e.exports=r},function(e,t,n){"use strict";function r(e){return o(e).replace(i,"-ms-")}var o=n(293),i=/^ms-/;e.exports=r},function(e,t){"use strict";function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=n},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t,n){"use strict";function r(e){return!!c.hasOwnProperty(e)||!u.hasOwnProperty(e)&&(s.test(e)?(c[e]=!0,!0):(u[e]=!0,!1))}function o(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var i=n(232),a=(n(230),n(258),n(296)),s=(n(199),new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$")),u={},c={},l={createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(i.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){if(o(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?r+'=""':r+"="+a(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var r=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(r){var a=r.mutationMethod;if(a)a(e,n);else{if(o(r,n))return void this.deleteValueForProperty(e,t);if(r.mustUseProperty)e[r.propertyName]=n;else{var s=r.attributeName,u=r.attributeNamespace;u?e.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(i.isCustomAttribute(t))return void l.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(r(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var o=n.propertyName;n.hasBooleanValue?e[o]=!1:e[o]=""}else e.removeAttribute(n.attributeName)}else i.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=l},function(e,t,n){"use strict";function r(e){return'"'+o(e)+'"'}var o=n(278);e.exports=r},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=f++,p[e[m]]={}),p[e[m]]}var o,i=n(195),a=n(239),s=n(298),u=n(268),c=n(299),l=n(262),p={},h=!1,f=0,d={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),g=i({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=r(n),i=a.registrationNameDependencies[e],s=0;s<i.length;s++){var u=i[s];o.hasOwnProperty(u)&&o[u]||("topWheel"===u?l("wheel")?g.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):l("mousewheel")?g.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):g.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?l("scroll",!0)?g.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):g.ReactEventListener.trapBubbledEvent("topScroll","scroll",g.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(l("focus",!0)?(g.ReactEventListener.trapCapturedEvent("topFocus","focus",n),g.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):l("focusin")&&(g.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),g.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),o.topBlur=!0,o.topFocus=!0):d.hasOwnProperty(u)&&g.ReactEventListener.trapBubbledEvent(u,d[u],n),o[u]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===o&&(o=g.supportsEventPageXY()),!o&&!h){var e=u.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),h=!0}}});e.exports=g},function(e,t,n){"use strict";function r(e){o.enqueueEvents(e),o.processEventQueue(!1)}var o=n(238),i={handleTopLevel:function(e,t,n,i){var a=o.extractEvents(e,t,n,i);r(a)}};e.exports=i},function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,
n["O"+e]="o"+t.toLowerCase(),n}function o(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in u)return s[e]=t[n];return""}var i=n(244),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};i.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),e.exports=o},function(e,t,n){"use strict";function r(){this._rootNodeID&&h.updateWrapper(this)}function o(e){var t="checkbox"===e.type||"radio"===e.type;return t?null!=e.checked:null!=e.value}function i(e){var t=this._currentElement.props,n=c.executeOnChange(t,e);p.asap(r,this);var o=t.name;if("radio"===t.type&&null!=o){for(var i=l.getNodeFromInstance(this),s=i;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),h=0;h<u.length;h++){var f=u[h];if(f!==i&&f.form===i.form){var d=l.getInstanceFromNode(f);d?void 0:a("90"),p.asap(r,d)}}}return n}var a=n(231),s=n(195),u=n(295),c=n(301),l=n(230),p=n(252),h=(n(203),n(199),{getHostProps:function(e,t){var n=c.getValue(t),r=c.getChecked(t),o=s({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return o},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:i.bind(e),controlled:o(t)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&u.setValueForProperty(l.getNodeFromInstance(e),"checked",n||!1);var r=l.getNodeFromInstance(e),o=c.getValue(t);if(null!=o)if(0===o&&""===r.value)r.value="0";else if("number"===t.type){var i=parseFloat(r.value,10)||0;(o!=i||o==i&&r.value!=o)&&(r.value=""+o)}else r.value!==""+o&&(r.value=""+o);else null==t.value&&null!=t.defaultValue&&r.defaultValue!==""+t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=l.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});e.exports=h},function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink?s("87"):void 0}function o(e){r(e),null!=e.value||null!=e.onChange?s("88"):void 0}function i(e){r(e),null!=e.checked||null!=e.onChange?s("89"):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(231),u=n(302),c=n(215),l=n(194),p=c(l.isValidElement),h=(n(203),n(199),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),f={value:function(e,t,n){return!e[t]||h[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:p.func},d={},m={checkPropTypes:function(e,t,n){for(var r in f){if(f.hasOwnProperty(r))var o=f[r](t,r,e,"prop",null,u);if(o instanceof Error&&!(o.message in d)){d[o.message]=!0;a(n)}}},getValue:function(e){return e.valueLink?(o(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(i(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(o(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(i(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=m},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){"use strict";function r(e){var t="";return i.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:u||(u=!0))}),t}var o=n(195),i=n(194),a=n(230),s=n(304),u=(n(199),!1),c={mountWrapper:function(e,t,n){var o=null;if(null!=n){var i=n;"optgroup"===i._tag&&(i=i._hostParent),null!=i&&"select"===i._tag&&(o=s.getSelectValueContext(i))}var a=null;if(null!=o){var u;if(u=null!=t.value?t.value+"":r(t.children),a=!1,Array.isArray(o)){for(var c=0;c<o.length;c++)if(""+o[c]===u){a=!0;break}}else a=""+o===u}e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=a.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getHostProps:function(e,t){var n=o({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var i=r(t.children);return i&&(n.children=i),n}};e.exports=c},function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=s.getValue(e);null!=t&&o(this,Boolean(e.multiple),t)}}function o(e,t,n){var r,o,i=u.getNodeFromInstance(e).options;if(t){for(r={},o=0;o<n.length;o++)r[""+n[o]]=!0;for(o=0;o<i.length;o++){var a=r.hasOwnProperty(i[o].value);i[o].selected!==a&&(i[o].selected=a)}}else{for(r=""+n,o=0;o<i.length;o++)if(i[o].value===r)return void(i[o].selected=!0);i.length&&(i[0].selected=!0)}}function i(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(r,this),n}var a=n(195),s=n(301),u=n(230),c=n(252),l=(n(199),!1),p={getHostProps:function(e,t){return a({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=s.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:i.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||l||(l=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=s.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,o(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?o(e,Boolean(t.multiple),t.defaultValue):o(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=p},function(e,t,n){"use strict";function r(){this._rootNodeID&&l.updateWrapper(this)}function o(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return c.asap(r,this),n}var i=n(231),a=n(195),s=n(301),u=n(230),c=n(252),l=(n(203),n(199),{getHostProps:function(e,t){null!=t.dangerouslySetInnerHTML?i("91"):void 0;var n=a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,t){var n=s.getValue(t),r=n;if(null==n){var a=t.defaultValue,u=t.children;null!=u&&(null!=a?i("92"):void 0,Array.isArray(u)&&(u.length<=1?void 0:i("93"),u=u[0]),a=""+u),null==a&&(a=""),r=a}e._wrapperState={initialValue:""+r,listeners:null,onChange:o.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e),r=s.getValue(t);if(null!=r){var o=""+r;o!==n.value&&(n.value=o),null==t.defaultValue&&(n.defaultValue=o)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=u.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}});e.exports=l},function(e,t,n){"use strict";function r(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function o(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:h.getHostNode(e),toIndex:n,afterNode:t}}function i(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(e,t){return t&&(e=e||[],e.push(t)),e}function c(e,t){p.processChildrenUpdates(e,t)}var l=n(231),p=n(307),h=(n(308),n(258),n(208),n(255)),f=n(309),d=(n(200),n(323)),m=(n(203),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return f.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,o,i){var a,s=0;return a=d(t,s),f.updateChildren(e,a,n,r,o,this,this._hostContainerInfo,i,s),a},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var o=[],i=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=0,c=h.mountComponent(s,t,this,this._hostContainerInfo,n,u);s._mountIndex=i++,o.push(c)}return o},updateTextContent:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&l("118");var r=[s(e)];c(this,r)},updateMarkup:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&l("118");var r=[a(e)];c(this,r)},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,o={},i=[],a=this._reconcilerUpdateChildren(r,e,i,o,t,n);if(a||r){var s,l=null,p=0,f=0,d=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var g=r&&r[s],v=a[s];g===v?(l=u(l,this.moveChild(g,m,p,f)),f=Math.max(g._mountIndex,f),g._mountIndex=p):(g&&(f=Math.max(g._mountIndex,f)),l=u(l,this._mountChildAtIndex(v,i[d],m,p,t,n)),d++),p++,m=h.getHostNode(v)}for(s in o)o.hasOwnProperty(s)&&(l=u(l,this._unmountChild(r[s],o[s])));l&&c(this,l),this._renderedChildren=a}},unmountChildren:function(e){var t=this._renderedChildren;f.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return o(e,t,n)},createChild:function(e,t,n){return r(n,t,e._mountIndex)},removeChild:function(e,t){return i(e,t)},_mountChildAtIndex:function(e,t,n,r,o,i){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});e.exports=m},function(e,t,n){"use strict";var r=n(231),o=(n(203),!1),i={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){o?r("104"):void 0,i.replaceNodeWithMarkup=e.replaceNodeWithMarkup,i.processChildrenUpdates=e.processChildrenUpdates,o=!0}}};e.exports=i},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){var o=void 0===e[n];null!=t&&o&&(e[n]=i(t,!0))}var o=n(255),i=n(310),a=(n(318),n(314)),s=n(319),u=(n(199),{instantiateChildren:function(e,t,n,o){if(null==e)return null;var i={};return s(e,r,i),i},updateChildren:function(e,t,n,r,s,u,c,l,p){if(t||e){var h,f;for(h in t)if(t.hasOwnProperty(h)){f=e&&e[h];var d=f&&f._currentElement,m=t[h];if(null!=f&&a(d,m))o.receiveComponent(f,m,s,l),t[h]=f;else{f&&(r[h]=o.getHostNode(f),o.unmountComponent(f,!1));var g=i(m,!0);t[h]=g;var v=o.mountComponent(g,s,u,c,l,p);n.push(v)}}for(h in e)!e.hasOwnProperty(h)||t&&t.hasOwnProperty(h)||(f=e[h],r[h]=o.getHostNode(f),o.unmountComponent(f,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];o.unmountComponent(r,t)}}});e.exports=u}).call(t,n(183))},function(e,t,n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var n;if(null===e||e===!1)n=c.create(i);else if("object"==typeof e){var s=e,u=s.type;if("function"!=typeof u&&"string"!=typeof u){var h="";h+=r(s._owner),a("130",null==u?u:typeof u,h)}"string"==typeof s.type?n=l.createInternalComponent(s):o(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new p(s)}else"string"==typeof e||"number"==typeof e?n=l.createInstanceForText(e):a("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var a=n(231),s=n(195),u=n(311),c=n(315),l=n(316),p=(n(317),n(203),n(199),function(e){this.construct(e)});s(p.prototype,u,{_instantiateReactComponent:i}),e.exports=i},function(e,t,n){"use strict";function r(e){}function o(e,t){}function i(e){return!(!e.prototype||!e.prototype.isReactComponent)}function a(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var s=n(231),u=n(195),c=n(194),l=n(307),p=n(208),h=n(241),f=n(308),d=(n(258),n(312)),m=n(255),g=n(202),v=(n(203),n(313)),y=n(314),b=(n(199),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var e=f.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return o(e,t),t};var E=1,w={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,u){this._context=u,this._mountOrder=E++,this._hostParent=t,this._hostContainerInfo=n;var l,p=this._currentElement.props,h=this._processContext(u),d=this._currentElement.type,m=e.getUpdateQueue(),v=i(d),y=this._constructComponent(v,p,h,m);v||null!=y&&null!=y.render?a(d)?this._compositeType=b.PureClass:this._compositeType=b.ImpureClass:(l=y,o(d,l),null===y||y===!1||c.isValidElement(y)?void 0:s("105",d.displayName||d.name||"Component"),y=new r(d),this._compositeType=b.StatelessFunctional);y.props=p,y.context=h,y.refs=g,y.updater=m,this._instance=y,f.set(y,this);var w=y.state;void 0===w&&(y.state=w=null),"object"!=typeof w||Array.isArray(w)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var x;return x=y.unstable_handleError?this.performInitialMountWithErrorHandling(l,t,n,e,u):this.performInitialMount(l,t,n,e,u),y.componentDidMount&&e.getReactMountReady().enqueue(y.componentDidMount,y),x},_constructComponent:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)},_constructComponentWithoutOwner:function(e,t,n,r){var o=this._currentElement.type;return e?new o(t,n,r):o(t,n,r)},performInitialMountWithErrorHandling:function(e,t,n,r,o){var i,a=r.checkpoint();try{i=this.performInitialMount(e,t,n,r,o)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),i=this.performInitialMount(e,t,n,r,o)}return i},performInitialMount:function(e,t,n,r,o){var i=this._instance,a=0;i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===e&&(e=this._renderValidatedComponent());var s=d.getType(e);this._renderedNodeType=s;var u=this._instantiateReactComponent(e,s!==d.EMPTY);this._renderedComponent=u;var c=m.mountComponent(u,r,t,n,this._processChildContext(o),a);return c},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";h.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,f.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return g;var r={};for(var o in n)r[o]=e[o];return r},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(t=r.getChildContext()),t){"object"!=typeof n.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var o in t)o in n.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",o);return u({},e,t)}return e},_checkContextTypes:function(e,t,n){},receiveComponent:function(e,t,n){var r=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(t,r,e,o,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,r,o){var i=this._instance;null==i?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,u=!1;this._context===o?a=i.context:(a=this._processContext(o),u=!0);var c=t.props,l=n.props;t!==n&&(u=!0),u&&i.componentWillReceiveProps&&i.componentWillReceiveProps(l,a);var p=this._processPendingState(l,a),h=!0;this._pendingForceUpdate||(i.shouldComponentUpdate?h=i.shouldComponentUpdate(l,p,a):this._compositeType===b.PureClass&&(h=!v(c,l)||!v(i.state,p))),this._updateBatchNumber=null,h?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,l,p,a,e,o)):(this._currentElement=n,this._context=o,i.props=l,i.state=p,i.context=a)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(o&&1===r.length)return r[0];for(var i=u({},o?r[0]:n.state),a=o?1:0;a<r.length;a++){var s=r[a];u(i,"function"==typeof s?s.call(n,i,e,t):s)}return i},_performComponentUpdate:function(e,t,n,r,o,i){var a,s,u,c=this._instance,l=Boolean(c.componentDidUpdate);l&&(a=c.props,s=c.state,u=c.context),c.componentWillUpdate&&c.componentWillUpdate(t,n,r),this._currentElement=e,this._context=i,c.props=t,c.state=n,c.context=r,this._updateRenderedComponent(o,i),l&&o.getReactMountReady().enqueue(c.componentDidUpdate.bind(c,a,s,u),c)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,o=this._renderValidatedComponent(),i=0;if(y(r,o))m.receiveComponent(n,o,e,this._processChildContext(t));else{var a=m.getHostNode(n);m.unmountComponent(n,!1);var s=d.getType(o);this._renderedNodeType=s;var u=this._instantiateReactComponent(o,s!==d.EMPTY);this._renderedComponent=u;var c=m.mountComponent(u,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),i);this._replaceNodeWithMarkup(a,c,n)}},_replaceNodeWithMarkup:function(e,t,n){l.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e,t=this._instance;return e=t.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==b.StatelessFunctional){p.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{p.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||e===!1||c.isValidElement(e)?void 0:s("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?s("110"):void 0;var r=t.getPublicInstance(),o=n.refs===g?n.refs={}:n.refs;o[e]=r},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===b.StatelessFunctional?null:e},_instantiateReactComponent:null};e.exports=w},function(e,t,n){"use strict";var r=n(231),o=n(194),i=(n(203),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||e===!1?i.EMPTY:o.isValidElement(e)?"function"==typeof e.type?i.COMPOSITE:i.HOST:void r("26",e)}});e.exports=i},function(e,t){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function r(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!o.call(t,r[a])||!n(e[r[a]],t[r[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=r},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,r=null===t||t===!1;if(n||r)return n===r;var o=typeof e,i=typeof t;return"string"===o||"number"===o?"string"===i||"number"===i:"object"===i&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t){"use strict";var n,r={injectEmptyComponentFactory:function(e){n=e}},o={create:function(e){return n(e)}};o.injection=r,e.exports=o},function(e,t,n){"use strict";function r(e){return s?void 0:a("111",e.type),new s(e)}function o(e){return new u(e)}function i(e){return e instanceof u}var a=n(231),s=(n(203),null),u=null,c={injectGenericComponentClass:function(e){s=e},injectTextComponentClass:function(e){u=e}},l={createInternalComponent:r,createInstanceForText:o,isTextComponent:i,injection:c};e.exports=l},function(e,t){"use strict";function n(){return r++}var r=1;e.exports=n},212,function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?c.escape(e.key):t.toString(36)}function o(e,t,n,i){var h=typeof e;if("undefined"!==h&&"boolean"!==h||(e=null),null===e||"string"===h||"number"===h||"object"===h&&e.$$typeof===s)return n(i,e,""===t?l+r(e,0):t),1;var f,d,m=0,g=""===t?l:t+p;if(Array.isArray(e))for(var v=0;v<e.length;v++)f=e[v],d=g+r(f,v),m+=o(f,d,n,i);else{var y=u(e);if(y){var b,E=y.call(e);if(y!==e.entries)for(var w=0;!(b=E.next()).done;)f=b.value,d=g+r(f,w++),m+=o(f,d,n,i);else for(;!(b=E.next()).done;){var x=b.value;x&&(f=x[1],d=g+c.escape(x[0])+p+r(f,0),m+=o(f,d,n,i))}}else if("object"===h){var T="",C=String(e);a("31","[object Object]"===C?"object with keys {"+Object.keys(e).join(", ")+"}":C,T)}}return m}function i(e,t,n){return null==e?0:o(e,"",t,n)}var a=n(231),s=(n(208),n(320)),u=n(321),c=(n(203),n(318)),l=(n(199),"."),p=":";e.exports=i},209,211,function(e,t,n){"use strict";function r(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var o=t.call(e);return r.test(o)}catch(e){return!1}}function o(e){var t=c(e);if(t){var n=t.childIDs;l(e),n.forEach(o)}}function i(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function a(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function s(e){var t,n=N.getDisplayName(e),r=N.getElement(e),o=N.getOwnerID(e);return o&&(t=N.getDisplayName(o)),i(n,r&&r._source,t)}var u,c,l,p,h,f,d,m=n(197),g=n(208),v=(n(203),n(199),"function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys));if(v){var y=new Map,b=new Set;u=function(e,t){y.set(e,t)},c=function(e){return y.get(e)},l=function(e){y.delete(e)},p=function(){return Array.from(y.keys())},h=function(e){b.add(e)},f=function(e){b.delete(e)},d=function(){return Array.from(b.keys())}}else{var E={},w={},x=function(e){return"."+e},T=function(e){return parseInt(e.substr(1),10)};u=function(e,t){var n=x(e);E[n]=t},c=function(e){var t=x(e);return E[t]},l=function(e){var t=x(e);delete E[t]},p=function(){return Object.keys(E).map(T)},h=function(e){var t=x(e);w[t]=!0},f=function(e){var t=x(e);delete w[t]},d=function(){return Object.keys(w).map(T)}}var C=[],N={onSetChildren:function(e,t){var n=c(e);n?void 0:m("144"),n.childIDs=t;for(var r=0;r<t.length;r++){var o=t[r],i=c(o);i?void 0:m("140"),null==i.childIDs&&"object"==typeof i.element&&null!=i.element?m("141"):void 0,i.isMounted?void 0:m("71"),null==i.parentID&&(i.parentID=e),i.parentID!==e?m("142",o,i.parentID,e):void 0}},onBeforeMountComponent:function(e,t,n){var r={element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};u(e,r)},onBeforeUpdateComponent:function(e,t){var n=c(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=c(e);t?void 0:m("144"),t.isMounted=!0;var n=0===t.parentID;n&&h(e)},onUpdateComponent:function(e){var t=c(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=c(e);if(t){t.isMounted=!1;var n=0===t.parentID;n&&f(e)}C.push(e)},purgeUnmountedComponents:function(){if(!N._preventPurging){for(var e=0;e<C.length;e++){var t=C[e];o(t)}C.length=0}},isMounted:function(e){var t=c(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=a(e),r=e._owner;t+=i(n,e._source,r&&r.getName())}var o=g.current,s=o&&o._debugID;return t+=N.getStackAddendumByID(s)},getStackAddendumByID:function(e){for(var t="";e;)t+=s(e),e=N.getParentID(e);return t},getChildIDs:function(e){var t=c(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=N.getElement(e);return t?a(t):null},getElement:function(e){var t=c(e);return t?t.element:null},getOwnerID:function(e){var t=N.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=c(e);return t?t.parentID:null},getSource:function(e){var t=c(e),n=t?t.element:null,r=null!=n?n._source:null;return r},getText:function(e){var t=N.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=c(e);return t?t.updateCount:0},getRootIDs:d,getRegisteredIDs:p,pushNonStandardWarningStack:function(e,t){if("function"==typeof console.reactStack){var n=[],r=g.current,o=r&&r._debugID;try{for(e&&n.push({name:o?N.getDisplayName(o):null,fileName:t?t.fileName:null,lineNumber:t?t.lineNumber:null});o;){var i=N.getElement(o),a=N.getParentID(o),s=N.getOwnerID(o),u=s?N.getDisplayName(s):null,c=i&&i._source;n.push({name:u,fileName:c?c.fileName:null,lineNumber:c?c.lineNumber:null}),o=a}}catch(e){}console.reactStack(n)}},popNonStandardWarningStack:function(){"function"==typeof console.reactStackEnd&&console.reactStackEnd()}};e.exports=N},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){if(e&&"object"==typeof e){var o=e,i=void 0===o[n];i&&null!=t&&(o[n]=t)}}function o(e,t){if(null==e)return e;var n={};return i(e,r,n),n}var i=(n(318),n(319));n(199);e.exports=o}).call(t,n(183))},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var o=n(195),i=n(246),a=n(259),s=(n(258),n(325)),u=[],c={enqueue:function(){}},l={getTransactionWrappers:function(){return u},getReactMountReady:function(){return c},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};o(r.prototype,a,l),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){}var i=n(326),a=(n(199),function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&i.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()?i.enqueueForceUpdate(e):o(e,"forceUpdate")},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()?i.enqueueReplaceState(e,t):o(e,"replaceState")},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()?i.enqueueSetState(e,t):o(e,"setState")},e}());e.exports=a},function(e,t,n){"use strict";function r(e){u.enqueueUpdate(e)}function o(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function i(e,t){var n=s.get(e);if(!n){return null}return n}var a=n(231),s=(n(208),n(308)),u=(n(258),n(252)),c=(n(203),n(199),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){c.validateCallback(t,n);var o=i(e);return o?(o._pendingCallbacks?o._pendingCallbacks.push(t):o._pendingCallbacks=[t],void r(o)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t,n){var o=i(e,"replaceState");o&&(o._pendingStateQueue=[t],o._pendingReplaceState=!0,void 0!==n&&null!==n&&(c.validateCallback(n,"replaceState"),o._pendingCallbacks?o._pendingCallbacks.push(n):o._pendingCallbacks=[n]),r(o))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){var o=n._pendingStateQueue||(n._pendingStateQueue=[]);o.push(t),r(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!=typeof e?a("122",t,o(e)):void 0}});e.exports=c},function(e,t,n){"use strict";var r=(n(195),n(200)),o=(n(199),r);e.exports=o},function(e,t,n){"use strict";var r=n(195),o=n(273),i=n(230),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var u=n._ownerDocument,c=u.createComment(s);return i.precacheNode(this,c),o(c)}return e.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),e.exports=a},function(e,t,n){"use strict";function r(e,t){"_hostNode"in e?void 0:u("33"),"_hostNode"in t?void 0:u("33");for(var n=0,r=e;r;r=r._hostParent)n++;for(var o=0,i=t;i;i=i._hostParent)o++;for(;n-o>0;)e=e._hostParent,n--;for(;o-n>0;)t=t._hostParent,o--;for(var a=n;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function o(e,t){"_hostNode"in e?void 0:u("35"),"_hostNode"in t?void 0:u("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function i(e){return"_hostNode"in e?void 0:u("36"),e._hostParent}function a(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var o;for(o=r.length;o-- >0;)t(r[o],"captured",n);for(o=0;o<r.length;o++)t(r[o],"bubbled",n)}function s(e,t,n,o,i){for(var a=e&&t?r(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var u=[];t&&t!==a;)u.push(t),t=t._hostParent;var c;for(c=0;c<s.length;c++)n(s[c],"bubbled",o);
for(c=u.length;c-- >0;)n(u[c],"captured",i)}var u=n(231);n(203);e.exports={isAncestor:o,getLowestCommonAncestor:r,getParentInstance:i,traverseTwoPhase:a,traverseEnterLeave:s}},function(e,t,n){"use strict";var r=n(231),o=n(195),i=n(272),a=n(273),s=n(230),u=n(278),c=(n(203),n(327),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});o(c.prototype,{mountComponent:function(e,t,n,r){var o=n._idCounter++,i=" react-text: "+o+" ",c=" /react-text ";if(this._domID=o,this._hostParent=t,e.useCreateElement){var l=n._ownerDocument,p=l.createComment(i),h=l.createComment(c),f=a(l.createDocumentFragment());return a.queueChild(f,a(p)),this._stringText&&a.queueChild(f,a(l.createTextNode(this._stringText))),a.queueChild(f,a(h)),s.precacheNode(this,p),this._closingComment=h,f}var d=u(this._stringText);return e.renderToStaticMarkup?d:"<!--"+i+"-->"+d+"<!--"+c+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();i.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n?r("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),e.exports=c},function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var o=n(195),i=n(252),a=n(259),s=n(200),u={initialize:s,close:function(){h.isBatchingUpdates=!1}},c={initialize:s,close:i.flushBatchedUpdates.bind(i)},l=[c,u];o(r.prototype,a,{getTransactionWrappers:function(){return l}});var p=new r,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,o,i){var a=h.isBatchingUpdates;return h.isBatchingUpdates=!0,a?e(t,n,r,o,i):p.perform(e,null,t,n,r,o,i)}};e.exports=h},function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=p.getNodeFromInstance(e),n=t.parentNode;return p.getClosestInstanceFromNode(n)}function o(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){var t=f(e.nativeEvent),n=p.getClosestInstanceFromNode(t),o=n;do e.ancestors.push(o),o=o&&r(o);while(o);for(var i=0;i<e.ancestors.length;i++)n=e.ancestors[i],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,f(e.nativeEvent))}function a(e){var t=d(window);e(t)}var s=n(195),u=n(333),c=n(244),l=n(246),p=n(230),h=n(252),f=n(261),d=n(334);s(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(o,l.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?u.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?u.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=o.getPooled(e,t);try{h.batchedUpdates(i,n)}finally{o.release(n)}}}};e.exports=m},function(e,t,n){"use strict";var r=n(200),o={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=o},function(e,t){"use strict";function n(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t,n){"use strict";var r=n(232),o=n(238),i=n(240),a=n(307),s=n(315),u=n(297),c=n(316),l=n(252),p={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:o.injection,EventPluginUtils:i.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:l.injection};e.exports=p},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=e}var o=n(195),i=n(253),a=n(246),s=n(297),u=n(337),c=(n(258),n(259)),l=n(326),p={initialize:u.getSelectionInformation,close:u.restoreSelection},h={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},f={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d=[p,h,f],m={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return l},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};o(r.prototype,c,m),a.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e){return i(document.documentElement,e)}var o=n(338),i=n(340),a=n(286),s=n(343),u={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,o=e.selectionRange;t!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,o),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=o.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if(void 0===r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r-n),i.select()}else o.setOffsets(e,t)}};e.exports=u},function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function o(e){var t=document.selection,n=t.createRange(),r=n.text.length,o=n.duplicate();o.moveToElementText(e),o.setEndPoint("EndToStart",n);var i=o.text.length,a=i+r;return{start:i,end:a}}function i(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,i=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var u=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=u?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(e),l.setEnd(s.startContainer,s.startOffset);var p=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=p?0:l.toString().length,f=h+c,d=document.createRange();d.setStart(n,o),d.setEnd(i,a);var m=d.collapsed;return{start:m?f:h,end:m?h:f}}function a(e,t){var n,r,o=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),o.moveToElementText(e),o.moveStart("character",n),o.setEndPoint("EndToStart",o),o.moveEnd("character",r-n),o.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,o=Math.min(t.start,r),i=void 0===t.end?o:Math.min(t.end,r);if(!n.extend&&o>i){var a=i;i=o,o=a}var s=c(e,o),u=c(e,i);if(s&&u){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(p),n.extend(u.node,u.offset)):(p.setEnd(u.node,u.offset),n.addRange(p))}}}var u=n(244),c=n(339),l=n(247),p=u.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:p?o:i,setOffsets:p?a:s};e.exports=h},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function o(e,t){for(var o=n(e),i=0,a=0;o;){if(3===o.nodeType){if(a=i+o.textContent.length,i<=t&&a>=t)return{node:o,offset:t-i};i=a}o=n(r(o))}}e.exports=o},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!o(e)&&(o(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var o=n(341);e.exports=r},function(e,t,n){"use strict";function r(e){return o(e)&&3==e.nodeType}var o=n(342);e.exports=r},function(e,t){"use strict";function n(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t){"use strict";function n(e){if(e=e||("undefined"!=typeof document?document:void 0),"undefined"==typeof e)return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=n},function(e,t){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},o={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(e){o.Properties[e]=0,r[e]&&(o.DOMAttributeNames[e]=r[e])}),e.exports=o},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function o(e,t){if(y||null==m||m!==l())return null;var n=r(m);if(!v||!h(v,n)){v=n;var o=c.getPooled(d.select,g,e,t);return o.type="select",o.target=m,i.accumulateTwoPhaseDispatches(o),o}return null}var i=n(237),a=n(244),s=n(230),u=n(337),c=n(249),l=n(343),p=n(263),h=n(313),f=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,d={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,g=null,v=null,y=!1,b=!1,E={eventTypes:d,extractEvents:function(e,t,n,r){if(!b)return null;var i=t?s.getNodeFromInstance(t):window;switch(e){case"topFocus":(p(i)||"true"===i.contentEditable)&&(m=i,g=t,v=null);break;case"topBlur":m=null,g=null,v=null;break;case"topMouseDown":y=!0;break;case"topContextMenu":case"topMouseUp":return y=!1,o(n,r);case"topSelectionChange":if(f)break;case"topKeyDown":case"topKeyUp":return o(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(b=!0)}};e.exports=E},function(e,t,n){"use strict";function r(e){return"."+e._rootNodeID}function o(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var i=n(231),a=n(333),s=n(237),u=n(230),c=n(347),l=n(348),p=n(249),h=n(349),f=n(350),d=n(266),m=n(353),g=n(354),v=n(355),y=n(267),b=n(356),E=n(200),w=n(351),x=(n(203),{}),T={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,o={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};x[e]=o,T[r]=o});var C={},N={eventTypes:x,extractEvents:function(e,t,n,r){var o=T[e];if(!o)return null;var a;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":a=p;break;case"topKeyPress":if(0===w(n))return null;case"topKeyDown":case"topKeyUp":a=f;break;case"topBlur":case"topFocus":a=h;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=d;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=g;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=c;break;case"topTransitionEnd":a=v;break;case"topScroll":a=y;break;case"topWheel":a=b;break;case"topCopy":case"topCut":case"topPaste":a=l}a?void 0:i("86",e);var u=a.getPooled(o,t,n,r);return s.accumulateTwoPhaseDispatches(u),u},didPutListener:function(e,t,n){if("onClick"===t&&!o(e._tag)){var i=r(e),s=u.getNodeFromInstance(e);C[i]||(C[i]=a.listen(s,"click",E))}},willDeleteListener:function(e,t){if("onClick"===t&&!o(e._tag)){var n=r(e);C[n].remove(),delete C[n]}}};e.exports=N},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(249),i={animationName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(249),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(267),i={relatedTarget:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(267),i=n(351),a=n(352),s=n(269),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?i(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?i(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};o.augmentClass(r,u),e.exports=r},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t,n){"use strict";function r(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=o(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var o=n(351),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(266),i={dataTransfer:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(267),i=n(269),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};o.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(249),i={propertyName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(266),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function o(e){return e?e.nodeType===L?e.documentElement:e.firstChild:null}function i(e){return e.getAttribute&&e.getAttribute(I)||""}function a(e,t,n,r,o){var i;if(w.logTopLevelRenders){var a=e._currentElement.props.child,s=a.type;i="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(i)}var u=C.mountComponent(e,n,null,b(e,t),o,0);i&&console.timeEnd(i),e._renderedComponent._topLevelWrapper=e,F._mountImageIntoNode(u,t,e,r,n)}function s(e,t,n,r){var o=S.ReactReconcileTransaction.getPooled(!n&&E.useCreateElement);o.perform(a,null,e,t,o,n,r),S.ReactReconcileTransaction.release(o)}function u(e,t,n){for(C.unmountComponent(e,n),t.nodeType===L&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function c(e){var t=o(e);if(t){var n=y.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function l(e){return!(!e||e.nodeType!==R&&e.nodeType!==L&&e.nodeType!==k)}function p(e){var t=o(e),n=t&&y.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function h(e){var t=p(e);return t?t._hostContainerInfo._topLevelWrapper:null}var f=n(231),d=n(273),m=n(232),g=n(194),v=n(297),y=(n(208),n(230)),b=n(358),E=n(359),w=n(254),x=n(308),T=(n(258),n(360)),C=n(255),N=n(326),S=n(252),_=n(202),O=n(310),P=(n(203),n(275)),A=n(314),I=(n(199),m.ID_ATTRIBUTE_NAME),M=m.ROOT_ATTRIBUTE_NAME,R=1,L=9,k=11,D={},B=1,U=function(){this.rootID=B++};U.prototype.isReactComponent={},U.prototype.render=function(){return this.props.child},U.isReactTopLevelWrapper=!0;var F={TopLevelWrapper:U,_instancesByReactRootID:D,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,o){return F.scrollMonitor(r,function(){N.enqueueElementInternal(e,t,n),o&&N.enqueueCallbackInternal(e,o)}),e},_renderNewRootComponent:function(e,t,n,r){l(t)?void 0:f("37"),v.ensureScrollValueMonitoring();var o=O(e,!1);S.batchedUpdates(s,o,t,n,r);var i=o._instance.rootID;return D[i]=o,o},renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&x.has(e)?void 0:f("38"),F._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){N.validateCallback(r,"ReactDOM.render"),g.isValidElement(t)?void 0:f("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=g.createElement(U,{child:t});if(e){var u=x.get(e);a=u._processChildContext(u._context)}else a=_;var l=h(n);if(l){var p=l._currentElement,d=p.props.child;if(A(d,t)){var m=l._renderedComponent.getPublicInstance(),v=r&&function(){r.call(m)};return F._updateRootComponent(l,s,a,n,v),m}F.unmountComponentAtNode(n)}var y=o(n),b=y&&!!i(y),E=c(n),w=b&&!l&&!E,T=F._renderNewRootComponent(s,n,w,a)._renderedComponent.getPublicInstance();return r&&r.call(T),T},render:function(e,t,n){return F._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){l(e)?void 0:f("40");var t=h(e);if(!t){c(e),1===e.nodeType&&e.hasAttribute(M);return!1}return delete D[t._instance.rootID],S.batchedUpdates(u,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,i,a){if(l(t)?void 0:f("41"),i){var s=o(t);if(T.canReuseMarkup(e,s))return void y.precacheNode(n,s);var u=s.getAttribute(T.CHECKSUM_ATTR_NAME);s.removeAttribute(T.CHECKSUM_ATTR_NAME);var c=s.outerHTML;s.setAttribute(T.CHECKSUM_ATTR_NAME,u);var p=e,h=r(p,c),m=" (client) "+p.substring(h-20,h+20)+"\n (server) "+c.substring(h-20,h+20);t.nodeType===L?f("42",m):void 0}if(t.nodeType===L?f("43"):void 0,a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);d.insertTreeBefore(t,e,null)}else P(t,e),y.precacheNode(n,t.firstChild)}};e.exports=F},function(e,t,n){"use strict";function r(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===o?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var o=(n(327),9);e.exports=r},function(e,t){"use strict";var n={useCreateElement:!0,useFiber:!1};e.exports=n},function(e,t,n){"use strict";var r=n(361),o=/\/?>/,i=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return i.test(e)?e:e.replace(o," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var o=r(e);return o===n}};e.exports=a},function(e,t){"use strict";function n(e){for(var t=1,n=0,o=0,i=e.length,a=i&-4;o<a;){for(var s=Math.min(o+4096,a);o<s;o+=4)n+=(t+=e.charCodeAt(o))+(t+=e.charCodeAt(o+1))+(t+=e.charCodeAt(o+2))+(t+=e.charCodeAt(o+3));t%=r,n%=r}for(;o<i;o++)n+=t+=e.charCodeAt(o);return t%=r,n%=r,t|n<<16}var r=65521;e.exports=n},219,function(e,t,n){"use strict";function r(e){if(null==e)return null;if(1===e.nodeType)return e;var t=a.get(e);return t?(t=s(t),t?i.getNodeFromInstance(t):null):void("function"==typeof e.render?o("44"):o("45",Object.keys(e)))}var o=n(231),i=(n(208),n(230)),a=n(308),s=n(364);n(203),n(199);e.exports=r},function(e,t,n){"use strict";function r(e){for(var t;(t=e._renderedNodeType)===o.COMPOSITE;)e=e._renderedComponent;return t===o.HOST?e._renderedComponent:t===o.EMPTY?null:void 0}var o=n(312);e.exports=r},function(e,t,n){"use strict";var r=n(357);e.exports=r.renderSubtreeIntoContainer},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(387),s=n(390),u=n(391),c=n(405),l=n(407),p=n(409),h=n(454),f=n(455),d=n(461),m=n(463),g=n(572),v=n(574),y=n(575),b=n(576),E=n(577),w=n(578),x=n(579),T=n(580),C=n(581),N=n(427),S=n(597),_=(I={},I[s.ControlType.FIGURE]=T.PageControlFigure,I[s.ControlType.FIGUREPOPUP]=u.PageControlFigurePopup,I[s.ControlType.FLASHCARDS]=c.PageControlFlashcards,I[s.ControlType.FORMANSWERBUTTON]=h.PageControlFormAnswerButton,I[s.ControlType.FORMCHECKBOX]=f.PageControlFormCheckbox,I[s.ControlType.FORMCOMBOBOX]=d.PageControlFormCombobox,I[s.ControlType.FORMEDITBOX]=m.PageControlFormEditbox,I[s.ControlType.FORMGRADEBUTTONS]=g.PageControlFormGradeButtons,I[s.ControlType.FORMSOLUTIONEXCHANGE]=null,I[s.ControlType.FORMTEXTBOX]=v.PageControlFormTextbox,I[s.ControlType.HOTSPOT]=l.PageControlHotspot,I[s.ControlType.IMAGEGALLERYBUTTON]=y.PageControlImageGalleryButton,I[s.ControlType.INTERACTIVITYPOPUP]=b.PageControlInteractivityPopup,I[s.ControlType.QUESTIONBUTTONS]=E.PageControlQuestionButtons,I[s.ControlType.QUESTIONOPTIONRADIO]=x.PageControlQuestionOptionRadio,I[s.ControlType.QUESTIONOPTIONHOTSPOT]=w.PageControlQuestionOptionHotspot,I[s.ControlType.VIDEO]=p.PageControlVideo,I),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=null;if(null!=this.props.mouseCoverAnnotationTool){var t={zIndex:a.ZINDEX_MOUSE_COVER_LAYER,cursor:N.ANNOTATION_TOOLS[this.props.mouseCoverAnnotationTool].cursor};e=o.createElement("div",{className:"selMDetect",style:t})}var n=this.props.page!=this.props.view.page?null:o.createElement(C.PageLecture,{store:this.props.store,page:this.props.page});return o.createElement("div",{style:{width:"100%",height:"100%"}},e,this.renderControls(),n)},t.prototype.renderControls=function(){var e=this;if(this.props.pageMeta&&this.props.pageMeta.multimedia){var t=[];return this.props.pageMeta.multimedia.forEach(function(n){var r=_[n.type];r&&t.push(o.createElement(r,{control:n,key:n.name,store:e.props.store}))}),t}return null},t}(o.Component);t.Component=O;var P=function(e,t){return{mouseCoverAnnotationTool:e.view.pageMouseCover==t.page?S.getSelectedAnnotationTool(e):null,pageMeta:e.metadata.book&&e.metadata.pages?e.metadata.pages[t.page]:null,view:e.view}},A=i.connect(P)(O);t.LayerPage=A;var I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var o=n(368),i=r(o),a=n(371),s=r(a);t.Provider=i.default,t.connect=s.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.default=void 0;var s=n(193),u=n(369),c=r(u),l=n(370),p=(r(l),function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n,r));return a.store=n.store,a}return a(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return s.Children.only(e)},t}(s.Component));t.default=p,p.propTypes={store:c.default.isRequired,children:s.PropTypes.element.isRequired},p.childContextTypes={store:c.default.isRequired}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(193);t.default=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired
})},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function u(e,t){try{return e.apply(t)}catch(e){return _.value=e,_}}function c(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],c=Boolean(e),h=e||C,d=void 0;d="function"==typeof t?t:t?(0,v.default)(t):N;var g=n||S,y=r.pure,b=void 0===y||y,E=r.withRef,x=void 0!==E&&E,P=b&&g!==S,A=O++;return function(e){function t(e,t,n){var r=g(e,t,n);return r}var n="Connect("+s(e)+")",r=function(r){function s(e,t){o(this,s);var a=i(this,r.call(this,e,t));a.version=A,a.store=e.store||t.store,(0,T.default)(a.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var u=a.store.getState();return a.state={storeState:u},a.clearCache(),a}return a(s,r),s.prototype.shouldComponentUpdate=function(){return!b||this.haveOwnPropsChanged||this.hasStoreStateChanged},s.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},s.prototype.configureFinalMapState=function(e,t){var n=h(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:h,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},s.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},s.prototype.configureFinalMapDispatch=function(e,t){var n=d(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:d,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},s.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,m.default)(e,this.stateProps))&&(this.stateProps=e,!0)},s.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,m.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},s.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&P&&(0,m.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},s.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},s.prototype.trySubscribe=function(){c&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},s.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},s.prototype.componentDidMount=function(){this.trySubscribe()},s.prototype.componentWillReceiveProps=function(e){b&&(0,m.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},s.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},s.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},s.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!b||t!==e){if(b&&!this.doStatePropsDependOnOwnProps){var n=u(this.updateStatePropsIfNeeded,this);if(!n)return;n===_&&(this.statePropsPrecalculationError=_.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},s.prototype.getWrappedInstance=function(){return(0,T.default)(x,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},s.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,o=this.statePropsPrecalculationError,i=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,o)throw o;var a=!0,s=!0;b&&i&&(a=n||t&&this.doStatePropsDependOnOwnProps,s=t&&this.doDispatchPropsDependOnOwnProps);var u=!1,c=!1;r?u=!0:a&&(u=this.updateStatePropsIfNeeded()),s&&(c=this.updateDispatchPropsIfNeeded());var h=!0;return h=!!(u||c||t)&&this.updateMergedPropsIfNeeded(),!h&&i?i:(x?this.renderedElement=(0,p.createElement)(e,l({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,p.createElement)(e,this.mergedProps),this.renderedElement)},s}(p.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:f.default},r.propTypes={store:f.default},(0,w.default)(r,e)}}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t.default=c;var p=n(193),h=n(369),f=r(h),d=n(372),m=r(d),g=n(373),v=r(g),y=n(370),b=(r(y),n(376)),E=(r(b),n(385)),w=r(E),x=n(386),T=r(x),C=function(e){return{}},N=function(e){return{dispatch:e}},S=function(e,t,n){return l({},n,e,t)},_={value:null},O=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,i=0;i<n.length;i++)if(!o.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;return!0}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return function(t){return(0,o.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=r;var o=n(374)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var o=n(375),i=r(o),a=n(380),s=r(a),u=n(382),c=r(u),l=n(383),p=r(l),h=n(384),f=r(h),d=n(381);r(d);t.createStore=i.default,t.combineReducers=s.default,t.bindActionCreators=c.default,t.applyMiddleware=p.default,t.compose=f.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){function r(){v===g&&(v=g.slice())}function i(){return m}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),v.push(e),function(){if(t){t=!1,r();var n=v.indexOf(e);v.splice(n,1)}}}function l(e){if(!(0,a.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error("Reducers may not dispatch actions.");try{y=!0,m=d(m,e)}finally{y=!1}for(var t=g=v,n=0;n<t.length;n++)t[n]();return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");d=e,l({type:c.INIT})}function h(){var e,t=s;return e={subscribe:function(e){function n(){e.next&&e.next(i())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[u.default]=function(){return this},e}var f;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(o)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var d=e,m=t,g=[],v=g,y=!1;return l({type:c.INIT}),f={dispatch:l,subscribe:s,getState:i,replaceReducer:p},f[u.default]=h,f}t.__esModule=!0,t.ActionTypes=void 0,t.default=o;var i=n(376),a=r(i),s=n(377),u=r(s),c=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){function r(e){if(!i(e)||h.call(e)!=a)return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==p}var o=n(89),i=n(77),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,p=c.call(Object),h=u.toString;e.exports=r},function(e,t,n){e.exports=n(378)},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(379),s=o(a);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:r;var u=(0,s.default)(i);t.default=u}).call(t,function(){return this}(),n(97)(e))},function(e,t){"use strict";function n(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function i(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:o}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}var s,u=Object.keys(n);try{i(n)}catch(e){s=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(s)throw s;for(var r=!1,i={},a=0;a<u.length;a++){var c=u[a],l=n[c],p=e[c],h=l(p,t);if("undefined"==typeof h){var f=o(c,t);throw new Error(f)}i[c]=h,r=r||h!==p}return r?i:e}}t.__esModule=!0,t.default=a;var s=n(375),u=n(376),c=(r(u),n(381));r(c)},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),o={},i=0;i<r.length;i++){var a=r[i],s=e[a];"function"==typeof s&&(o[a]=n(s,t))}return o}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,o){var a=e(n,r,o),u=a.dispatch,c=[],l={getState:a.getState,dispatch:function(e){return u(e)}};return c=t.map(function(e){return e(l)}),u=s.default.apply(void 0,c)(a.dispatch),i({},a,{dispatch:u})}}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var a=n(384),s=r(a)},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1],o=t.slice(0,-1);return function(){return o.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}t.__esModule=!0,t.default=n},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,i){if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);o&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(n[a[s]]||r[a[s]]||i&&i[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){}}return e}},function(e,t,n){"use strict";var r=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;u=new Error(t.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){"use strict";var r=n(388);t.CONTROL_VERSION=(r.VERSION.package||"Unknown")+" - "+(r.VERSION.build||"Dev"),t.MENU_SEEK_HEIGHT=10,t.MENU_HEIGHT=50,t.TOOLBAR_HEIGHT=t.MENU_HEIGHT+t.MENU_SEEK_HEIGHT,t.TOOLBAR_HEIGHT_COLLAPSED=2*t.MENU_HEIGHT+t.MENU_SEEK_HEIGHT,t.MENU_COLLAPSED_MAXWIDTH=640,t.ZINDEX_INPLACE_VIDEO=110,t.ZINDEX_VIDEO_THUMB=100,t.ZINDEX_FORM_BUTTON=80,t.ZINDEX_QUESTION_BUTTONS=80,t.ZINDEX_FIGURE_POPUP_BUTTON=70,t.ZINDEX_MOUSE_COVER_LAYER=1e3,t.ZINDEX_ANNOTATIONS_LAYER=60,t.ZINDEX_ONGOING_HIGHLIGHT=10,t.ZINDEX_FOUND_WORD=10,t.ZINDEX_HIGHLIGHT=20,t.ZINDEX_ANNOTATIONS=30,t.ZINDEX_NOTE=40,t.ZINDEX_BOOKMARK=100,t.FAKE_BACKGROUND_CLASS="fakeBackground",t.THROTTLE_DOM_EVENTS=30,t.DEBOUNCE_RESIZE_EVENT=100,t.THROTTLE_MEDIA_STATUS_UPDATE=100,t.DEBOUNCE_DEACTIVATE_PAGENUMBER=1e3,t.DEBOUNCE_HIDE_PAGENUMBER=t.DEBOUNCE_DEACTIVATE_PAGENUMBER+900,t.THROTTLE_ANNOTATION_CHANGE_EVENT=250,t.COLOR_HIGHLIGHT="rgba(255, 210, 0, .4)",t.COLOR_NOTE="rgba(223, 122, 28, .4)",t.COLOR_ONGOING_HIGHLIGHT="rgba(147, 149, 152, .4)",t.COLOR_FOUND_WORD="rgba(255, 255, 0, 0.5)",t.MAX_SEARCH_RESULTS=5},function(e,t,n){"use strict";t.VERSION=n(389)},function(e,t){e.exports={package:"1.0.115",build:"Build#unknown:653bf42(2019-10-28T11:08:03.276Z)",hash:"653bf42"}},function(e,t){"use strict";function n(e,t){var n=null;if(e&&t)for(var r=e.length-1;r>=0;r--)if(e[r].lang==t){n=e[r].srt;break}return n}var r;!function(e){e[e.FIGURE=0]="FIGURE",e[e.FORMANSWERBUTTON=1]="FORMANSWERBUTTON",e[e.FORMCHECKBOX=2]="FORMCHECKBOX",e[e.FORMEDITBOX=3]="FORMEDITBOX",e[e.FORMGRADEBUTTONS=4]="FORMGRADEBUTTONS",e[e.FORMTEXTBOX=5]="FORMTEXTBOX",e[e.QUESTIONBUTTONS=6]="QUESTIONBUTTONS",e[e.QUESTIONOPTIONHOTSPOT=7]="QUESTIONOPTIONHOTSPOT",e[e.QUESTIONOPTIONRADIO=8]="QUESTIONOPTIONRADIO",e[e.VIDEO=9]="VIDEO",e[e.INTERACTIVITYPOPUP=10]="INTERACTIVITYPOPUP",e[e.IMAGEGALLERYBUTTON=11]="IMAGEGALLERYBUTTON",e[e.FORMCOMBOBOX=12]="FORMCOMBOBOX",e[e.FLASHCARDS=13]="FLASHCARDS",e[e.HOTSPOT=14]="HOTSPOT",e[e.FIGUREPOPUP=15]="FIGUREPOPUP",e[e.FORMSOLUTIONEXCHANGE=16]="FORMSOLUTIONEXCHANGE"}(r=t.ControlType||(t.ControlType={})),t.CONTROLTYPES_WO_WIDTH=[r.FORMANSWERBUTTON,r.FORMGRADEBUTTONS,r.QUESTIONBUTTONS,r.QUESTIONOPTIONRADIO],t.CONTROLTYPES_WO_HEIGHT=[r.FORMANSWERBUTTON,r.FORMGRADEBUTTONS,r.QUESTIONBUTTONS,r.QUESTIONOPTIONRADIO,r.FORMCHECKBOX],t.findSubtitleWithLanguage=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(392),s=n(401),u=n(10),c=n(8),l=n(402),p=n(387),h=n(403),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.control.rollOver?(t.lockedRollOver=!t.lockedRollOver,t.lockedRollOver?a.openWindow(t.props.control.name):a.closeWindow(t.props.control.name)):t.props.active?a.closeWindow(t.props.control.name):a.openWindow(t.props.control.name)},t.handleImageSrc=function(e){return u.Context.resourceLoader.getResourceUrl(c.ResourceType.IMAGE,[e,t.props.book.images[e].ext])},t.handleMouseEnter=function(){t.props.control.rollOver&&(t.mouseOver=!0,t.props.active||a.openWindow(t.props.control.name))},t.handleMouseLeave=function(){t.props.control.rollOver&&(t.mouseOver=!1,setTimeout(function(){!t.props.active||t.lockedRollOver||t.props.mouseOverPopup||a.closeWindow(t.props.control.name)},0))},t}return r(t,e),t.prototype.componentWillReceiveProps=function(e){!e.control.rollOver||this.lockedRollOver||!this.props.mouseOverPopup||e.mouseOverPopup||this.mouseOver||a.closeWindow(e.control.name)},t.prototype.render=function(){var e=h.calcControlBaseStyle(this.props.control,this.props.zoom,p.ZINDEX_FIGURE_POPUP_BUTTON),t=s("figurePopup");return o.createElement(l.PageImageButton,{active:this.props.active,className:t,style:e,fakeBackground:!0,title:this.props.control.title,thumbNormalImgId:this.props.control.thumbNormalImgId,thumbHotImgId:this.props.control.thumbHotImgId,thumbActiveImgId:this.props.control.thumbActiveImgId,onClick:this.handleClick,onImageSrc:this.handleImageSrc,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave})},t}(o.Component);t.Component=f;var d=function(e,t){return{active:!!e.popupWindows[t.control.name],book:e.metadata.book,mouseOverPopup:e.popupWindows[t.control.name]&&e.popupWindows[t.control.name].isMouseOver,zoom:e.view.scale}},m=i.connect(d)(f);t.PageControlFigurePopup=m},function(e,t,n){"use strict";function r(e,t){function n(t){var n=e[r];return n?(n=g._assign({},n,t),g._assign({},e,(o={},o[r]=n,o))):e;var o}void 0===e&&(e=v);var r=t.payload?t.payload.controlName:null;switch(t.type){case b:var o=h({},e);return delete o[r],o;case y:if(e[r])return e;var i=0;for(var a in e)i=Math.max(i,e[a].zIndex);var s={zIndex:i+1};return g._assign({},e,(l={},l[r]=s,l));case E:if(e[r]){var i=0;for(var u in e)i=Math.max(i,e[u].zIndex);if(i>e[r].zIndex)return n({zIndex:i+1})}return e;case w:var c=t.payload;return n({bounds:c.bounds});case x:var c=t.payload;return n({isMouseOver:c.isMouseOver});case T:return n({maximized:!0});case C:return n({maximized:!1});default:return e}var l}function o(e){var t={controlName:e};return f.dispatchAction(y,t)}function i(e){var t={controlName:e};return f.dispatchAction(b,t)}function a(e){var t={controlName:e};return f.dispatchAction(E,t)}function s(e,t){var n={controlName:e,bounds:t};return f.dispatchAction(w,n)}function u(e,t){var n={controlName:e,isMouseOver:t};return f.dispatchAction(x,n)}function c(e){var t={controlName:e};return f.dispatchAction(T,t)}function l(e){var t={controlName:e};return f.dispatchAction(C,t)}function p(e,t){for(var n in f.getState().popupWindows){var r=m.getControlMapping(d.Context.store.getState()).findPageIndexByControlName(n);(r<e||r>t)&&i(n)}}var h=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},f=n(15),d=n(10),m=n(393),g=n(16),v={},y="popupWindow/SHOW_WINDOW",b="popupWindow/CLOSE_WINDOW",E="popupWindow/BRING_TO_FRONT",w="popupWindow/SET_BOUNDS",x="popupWindow/SET_MOUSE_OVER",T="popupWindow/MAXIMIZE",C="popupWindow/RESTORE";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.openWindow=o,t.closeWindow=i,t.bringToFront=a,t.setBounds=s,t.setMouseOver=u,t.maximize=c,t.restore=l,t.closeIfOutsidePages=p},function(e,t,n){"use strict";function r(e,t,n){e[t]=e[t]||[],e[t].push(n)}var o=n(390),i=n(394),a=n(188),s=n(395);t.getControlMapping=i.createSelector(function(e){return e.metadata.pages},s.getComputedPageMetadataByIndex,function(e,t){return new u(e,t)});var u=function(){function e(e,t){var n=this;this.overlayNoteIdToQuestionButtonsControlName={},this.overlayNoteIdToLecturePageIndex={},this.videoIdToControlName={},this.controlNameToPageIndex={},this.controlNameToControl={},this.controlNameToOverlayNoteId={},this.controlNameToVideoId={},this.questionNameAndOptionIndexToQuestionOptionRadioControl={},this.solutionExchanges=[],e.forEach(function(e,r){e.multimedia&&(e.multimedia.forEach(function(e){n.controlNameToPageIndex[e.name]&&console.warn('Multiple controls with name "'+e.name+'" exist.'),n.controlNameToPageIndex[e.name]=r,n.controlNameToControl[e.name]=e,e.type===o.ControlType.VIDEO&&e.name&&null!=e.videoId&&(n.mapVideoIdToControlName(e.videoId,e.name),n.controlNameToVideoId[e.name]=e.videoId),e.type==o.ControlType.QUESTIONBUTTONS&&e.name&&null!=e.overlayNoteId&&(n.mapOverlayNoteIdToQuestionButtonsControlName(e.overlayNoteId,e.name),n.controlNameToOverlayNoteId[e.name]=e.overlayNoteId),e.type==o.ControlType.QUESTIONOPTIONRADIO&&(n.questionNameAndOptionIndexToQuestionOptionRadioControl[n.questionNameAndOptionIndexToKey(e.questionName,e.optionIndex)]=e)}),e.multimedia.forEach(function(e){var t=[];if(e.type==o.ControlType.FORMSOLUTIONEXCHANGE&&e.inputGroups){var r=[];e.inputGroups&&e.inputGroups.groups&&e.inputGroups.groups.forEach(function(i){i.controlNames.forEach(function(i){var a=void 0;if(t.indexOf(i)!==-1)a="Name duplicated";else{var s=n.controlNameToControl[i];s?s.type===o.ControlType.FORMEDITBOX&&s.readOnly?a="Editbox in read-only":s.type!==o.ControlType.FORMEDITBOX&&s.type!==o.ControlType.FORMCOMBOBOX&&(a="Not an editbox or combobox"):a="Not found"}void 0===a?(t.push(i),r.push(i)):console.warn('Form solution exchange "'+e.name+'" has error in control "'+i+'": '+a+".")})}),r.length>0&&n.solutionExchanges.push({fullMatch:!!e.fullMatch,inputGroups:e.inputGroups})}})),(t[r].hasPageLectureWithAudio||t[r].hasPageLectureWithNotes)&&(n.mapOverlayNoteIdToLecturePageIndex(t[r].lectures[0].overlayNote.id,r),n.controlNameToOverlayNoteId[a.pageLectureControlName(r)]=t[r].lectures[0].overlayNote.id),n.controlNameToPageIndex[a.pageLectureControlName(r)]=r})}return e.prototype.findQuestionButtonsControlNameByOverlayNoteId=function(e){return this.overlayNoteIdToQuestionButtonsControlName[e]},e.prototype.findLecturePageIndexByOverlayNoteId=function(e){return this.overlayNoteIdToLecturePageIndex[e]},e.prototype.findControlNameByVideoId=function(e){return this.videoIdToControlName[e]},e.prototype.findPageIndexByControlName=function(e){return this.controlNameToPageIndex[e]},e.prototype.findControlByControlName=function(e){return this.controlNameToControl[e]},e.prototype.findQuestionOptionRadioControlByQuestionNameAndOptionIndex=function(e,t){return this.questionNameAndOptionIndexToQuestionOptionRadioControl[this.questionNameAndOptionIndexToKey(e,t)]},e.prototype.findOverlayNoteIdByControlName=function(e){return this.controlNameToOverlayNoteId[e]},e.prototype.findVideoIdByControlName=function(e){return this.controlNameToVideoId[e]},e.prototype.getSolutionExchanges=function(){return this.solutionExchanges},e.prototype.mapOverlayNoteIdToLecturePageIndex=function(e,t){r(this.overlayNoteIdToLecturePageIndex,e,t)},e.prototype.mapOverlayNoteIdToQuestionButtonsControlName=function(e,t){r(this.overlayNoteIdToQuestionButtonsControlName,e,t)},e.prototype.mapVideoIdToControlName=function(e,t){this.videoIdToControlName[e]=this.videoIdToControlName[e]||[],this.videoIdToControlName[e].push(t)},e.prototype.questionNameAndOptionIndexToKey=function(e,t){return e+"#"+t},e}();t.ControlMapping=u},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return e===t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,o=null;return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null!==n&&n.length===i.length&&i.every(function(e,r){return t(e,n[r])})||(o=e.apply(void 0,i)),n=i,o}}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];var s=0,u=o.pop(),c=i(o),l=e.apply(void 0,[function(){return s++,u.apply(void 0,arguments)}].concat(r)),p=function(e,t){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var a=c.map(function(n){return n.apply(void 0,[e,t].concat(o))});return l.apply(void 0,n(a))};return p.resultFunc=u,p.recomputations=function(){return s},p.resetRecomputations=function(){return s=0},p}}function s(e){var t=arguments.length<=1||void 0===arguments[1]?u:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=a,t.createStructuredSelector=s;var u=t.createSelector=a(o)},function(e,t,n){"use strict";function r(e){var t=[];return e.forEach(function(e){e.type==i.ControlType.QUESTIONBUTTONS&&e.overlayNoteId&&t.push({y:e.y,overlayNoteId:e.overlayNoteId})}),t}var o=n(394),i=n(390),a=n(396);t.getComputedPageMetadataByIndex=o.createSelector(function(e){return e.metadata.pages},function(e){var t=[];return e.forEach(function(e,n){var o={wordPlacement:new a.WordPlacement(e.placements),lectures:[],lectureIndexByOverlayNoteId:{},hasPageLectureWithAudio:!1,hasPageLectureWithNotes:!1};if(t[n]=o,e.overlayNotes){if(e.overlayNoteId)for(var i=0;i<e.overlayNotes.length;i++)if(e.overlayNotes[i].id==e.overlayNoteId){o.hasPageLectureWithAudio=null!=e.overlayNotes[i].audioId,o.hasPageLectureWithNotes=e.overlayNotes[i].notes&&e.overlayNotes[i].notes.length>0,o.lectures.push({overlayNote:e.overlayNotes[i],caption:"Page"});break}if(e.overlayNotes&&e.multimedia){var s=r(e.multimedia);s.sort(function(e,t){return e.y-t.y}),s.forEach(function(t,n){var r=null;e.overlayNotes.forEach(function(e){e.id==t.overlayNoteId&&(r=e)}),o.lectures.push({overlayNote:r,caption:"Question #"+(n+1)})})}}o.lectures.forEach(function(e,t){null!=e.overlayNote.id&&(o.lectureIndexByOverlayNoteId[e.overlayNote.id]=t)})}),t});(function(){function e(){}return e})()},function(e,t,n){"use strict";n(397);var r=n(397),o=function(){function e(e){this.placements=e,this.count=Math.floor(e.length/4)}return e.prototype.addRangeBoundsDifference=function(e,t){if(!(e.lastLineIdx<e.firstLineIdx)){var n=this.calcWordRangeBounds(e);if(n)for(var r=e.firstLineIdx;r<=e.lastLineIdx;r++){var o=n[r-e.firstLineIdx];o&&(t.showLineIdxs.push(r),t.showRects.push(o))}}},e.prototype.calcWordRangeBetweenPoints=function(t,n,r,o){if(!this.isRtreeReady())return null;var i=null,a=null;if(n>o){var s=n;n=o,o=s,s=t,t=r,r=s}var u;if(t<=r){var c={x:t,y:n,w:r-t,h:o-n};u=this.rtree.search(c),u&&u.length>0&&(i=Math.min.apply(Math,u),a=Math.max.apply(Math,u))}else{var c={x:t,y:n,w:e.MAX_PAGE_SIZE,h:o-n};u=this.rtree.search(c),u&&u.length>0?i=Math.min.apply(Math,u):(c={x:0,y:0,w:t,h:n},u=this.rtree.search(c),u&&u.length>0&&(i=Math.max.apply(Math,u))),null!=i&&(c={x:0,y:n,w:r,h:o-n},u=this.rtree.search(c),u&&u.length>0?a=Math.max.apply(Math,u):(c={x:r,y:o,w:e.MAX_PAGE_SIZE,h:e.MAX_PAGE_SIZE},u=this.rtree.search(c),u&&u.length>0&&(a=Math.min.apply(Math,u))))}return null!=i&&null!=a?{firstLineIdx:this.wordLineIdxs[i],firstWordIdx:i,lastLineIdx:this.wordLineIdxs[a],lastWordIdx:a}:null},e.prototype.calcWordRangeBounds=function(e){var t=[];t.length=e.lastLineIdx-e.firstLineIdx+1;for(var n=e.firstWordIdx;this.wordLineIdxs[n]<e.firstLineIdx;)n++;for(var r=this.wordLineIdxs[n];r<=e.lastLineIdx&&n<=e.lastWordIdx;){for(var o=this.getWordBounds(n),i=o.x,a=o.y,s=o.x+o.w,u=o.y+o.h;n<e.lastWordIdx&&this.wordLineIdxs[n+1]==r;){n++;var c=this.getWordBounds(n);i=Math.min(i,c.x),a=Math.min(a,c.y),s=Math.max(s,c.x+c.w),u=Math.max(u,c.y+c.h)}for(;n<e.lastWordIdx&&this.wordLineIdxs[n+1]==r;)n++;t[r-e.firstLineIdx]={x:i,y:a,w:s-i,h:u-a},r++,n++}return t},e.prototype.calcWordRangeBoundsDifference=function(e,t){var n={hideLineIdxs:[],showLineIdxs:[],showRects:[]};if(e)if(t){for(var r=Math.min(t.firstLineIdx-1,e.lastLineIdx);r>=e.firstLineIdx;r--)n.hideLineIdxs.push(r);for(var r=Math.max(t.lastLineIdx+1,e.firstLineIdx);r<=e.lastLineIdx;r++)n.hideLineIdxs.push(r)}else for(var r=e.firstLineIdx;r<=e.lastLineIdx;r++)n.hideLineIdxs.push(r);if(t)if(e){var o=Math.min(t.lastLineIdx,e.firstLineIdx);t.firstWordIdx!=e.firstWordIdx&&(this.addRangeBoundsDifference({firstLineIdx:t.firstLineIdx,firstWordIdx:t.firstWordIdx,lastLineIdx:o,lastWordIdx:t.lastWordIdx},n),o++),t.lastWordIdx!=e.lastWordIdx&&this.addRangeBoundsDifference({firstLineIdx:Math.max(o,Math.max(t.firstLineIdx,e.lastLineIdx)),firstWordIdx:t.firstWordIdx,lastLineIdx:t.lastLineIdx,lastWordIdx:t.lastWordIdx},n)}else this.addRangeBoundsDifference(t,n);return n},e.prototype.calcWordsBounds=function(e,t){return this.isRtreeReady()?this.calcWordRangeBounds({firstLineIdx:this.wordLineIdxs[e],firstWordIdx:e,lastLineIdx:this.wordLineIdxs[t],lastWordIdx:t}):null},e.prototype.getCount=function(){return this.count},e.prototype.getWordBounds=function(e){return e*=4,{x:this.placements[e],y:this.placements[e+1],w:this.placements[e+2],h:this.placements[e+3]}},e.prototype.isRtreeReady=function(){if(void 0==this.rtree){this.rtree=r(),this.wordLineIdxs=[],this.wordLineIdxs.length=this.count;for(var e=-1,t=-1,n=void 0,o=0;o<this.count;o++){var i=this.getWordBounds(o);this.rtree.insert(i,o),n=i.y+i.h,n!=t&&(e++,t=n),this.wordLineIdxs[o]=e}}return!0},e}();o.MAX_PAGE_SIZE=99999,t.WordPlacement=o},function(e,t,n){"use strict";var r=n(398),o=n(400);r.prototype.bbox=o.bbox,r.prototype.geoJSON=o.geoJSON,r.Rectangle=n(399),e.exports=r},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);var t=3,n=6;isNaN(e)||(t=Math.floor(e/2),n=e);var i={x:0,y:0,w:0,h:0,id:"root",nodes:[]};this.root=i;var a=function(e){for(var t,n=e.slice(),r=[];n.length;)t=n.pop(),t.nodes?n=n.concat(t.nodes):t.leaf&&r.push(t);return r},s=function(e,n,r){var i,s,u,c=[],l=[],p=[],h=1;if(!e||!o.overlapRectangle(e,r))return p;var m={x:e.x,y:e.y,w:e.w,h:e.h,target:n};for(l.push(r.nodes.length),c.push(r);c.length>0;){if(i=c.pop(),s=l.pop()-1,"target"in m)for(;s>=0;){if(u=i.nodes[s],o.overlapRectangle(m,u)){if(m.target&&"leaf"in u&&u.leaf===m.target||!m.target&&("leaf"in u||o.containsRectangle(u,m))){p="nodes"in u?a(i.nodes.splice(s,1)):i.nodes.splice(s,1),o.makeMBR(i.nodes,i),delete m.target;break}"nodes"in u&&(h++,l.push(s),c.push(i),i=u,s=u.nodes.length)}s--}else if("nodes"in m){i.nodes.splice(s+1,1),i.nodes.length>0&&o.makeMBR(i.nodes,i);for(var g=0;g<m.nodes.length;g++)d(m.nodes[g],i);m.nodes=[],0===c.length&&i.nodes.length<=1?(m.nodes=f(i,!0,m.nodes,i),i.nodes=[],c.push(i),l.push(1)):c.length>0&&i.nodes.length<t?(m.nodes=f(i,!0,m.nodes,i),i.nodes=[]):delete m.nodes}else o.makeMBR(i.nodes,i);
h-=1}return p},u=function(e,t){var n,r=-1,i=[],a=!0;i.push(t);for(var s=t.nodes;a||r!==-1;){a?a=!1:(i.push(s[r]),s=s[r].nodes,r=-1);for(var u=s.length-1;u>=0;u--){var c=s[u];if("leaf"in c){r=-1;break}var l=o.squarifiedRatio(c.w,c.h,c.nodes.length+1),p=Math.max(c.x+c.w,e.x+e.w)-Math.min(c.x,e.x),h=Math.max(c.y+c.h,e.y+e.h)-Math.min(c.y,e.y),f=o.squarifiedRatio(p,h,c.nodes.length+2);(r<0||Math.abs(f-l)<n)&&(n=Math.abs(f-l),r=u)}}return i},c=function(e){for(var t=p(e);e.length>0;)l(e,t[0],t[1]);return t},l=function(e,n,r){for(var i,a,s,u=o.squarifiedRatio(n.w,n.h,n.nodes.length+1),c=o.squarifiedRatio(r.w,r.h,r.nodes.length+1),l=e.length-1;l>=0;l--){var p=e[l],h={};h.x=Math.min(n.x,p.x),h.y=Math.min(n.y,p.y),h.w=Math.max(n.x+n.w,p.x+p.w)-h.x,h.h=Math.max(n.y+n.h,p.y+p.h)-h.y;var f=Math.abs(o.squarifiedRatio(h.w,h.h,n.nodes.length+2)-u),d={};d.x=Math.min(r.x,p.x),d.y=Math.min(r.y,p.y),d.w=Math.max(r.x+r.w,p.x+p.w)-d.x,d.h=Math.max(r.y+r.h,p.y+p.h)-d.y;var m=Math.abs(o.squarifiedRatio(d.w,d.h,r.nodes.length+2)-c);(!a||!i||Math.abs(m-f)<i)&&(a=l,i=Math.abs(m-f),s=m<f?r:n)}var g=e.splice(a,1)[0];n.nodes.length+e.length+1<=t?(n.nodes.push(g),o.expandRectangle(n,g)):r.nodes.length+e.length+1<=t?(r.nodes.push(g),o.expandRectangle(r,g)):(s.nodes.push(g),o.expandRectangle(s,g))},p=function(e){for(var t,n,r=e.length-1,o=0,i=e.length-1,a=0,s=e.length-2;s>=0;s--){var u=e[s];u.x>e[o].x?o=s:u.x+u.w<e[r].x+e[r].w&&(r=s),u.y>e[a].y?a=s:u.y+u.h<e[i].y+e[i].h&&(i=s)}var c=Math.abs(e[r].x+e[r].w-e[o].x),l=Math.abs(e[i].y+e[i].h-e[a].y);return c>l?r>o?(t=e.splice(r,1)[0],n=e.splice(o,1)[0]):(n=e.splice(o,1)[0],t=e.splice(r,1)[0]):i>a?(t=e.splice(i,1)[0],n=e.splice(a,1)[0]):(n=e.splice(a,1)[0],t=e.splice(i,1)[0]),[{x:t.x,y:t.y,w:t.w,h:t.h,nodes:[t]},{x:n.x,y:n.y,w:n.w,h:n.h,nodes:[n]}]},h=function(e,t){return e.nodes=t.nodes,e.x=t.x,e.y=t.y,e.w=t.w,e.h=t.h,e},f=function(e,t,n,r){var i=[];if(!o.overlapRectangle(e,r))return n;for(i.push(r.nodes);i.length>0;)for(var a=i.pop(),s=a.length-1;s>=0;s--){var u=a[s];o.overlapRectangle(e,u)&&("nodes"in u?i.push(u.nodes):"leaf"in u&&(t?n.push(u):n.push(u.leaf)))}return n},d=function(e,t){var r;if(0===t.nodes.length)return t.x=e.x,t.y=e.y,t.w=e.w,t.h=e.h,void t.nodes.push(e);for(var i,a=u(e,t),s=e;a.length>0;){if(r&&"nodes"in r&&0===r.nodes.length){i=r,r=a.pop();for(var l=0;l<r.nodes.length;l++)if(r.nodes[l]===i||0===r.nodes[l].nodes.length){r.nodes.splice(l,1);break}}else r=a.pop();if("leaf"in s||"nodes"in s||Array.isArray(s)){if(Array.isArray(s)){for(var p=0;p<s.length;p++)o.expandRectangle(r,s[p]);r.nodes=r.nodes.concat(s)}else o.expandRectangle(r,s),r.nodes.push(s);if(r.nodes.length<=n)s={x:r.x,y:r.y,w:r.w,h:r.h};else{var h=c(r.nodes);s=h,a.length<1&&(r.nodes.push(h[0]),a.push(r),s=h[1])}}else o.expandRectangle(r,s),s={x:r.x,y:r.y,w:r.w,h:r.h}}};this.insertSubtree=d,this.getTree=function(){return i},this.setTree=function(e,t){return t||(t=i),h(t,e)},this.search=function(e,t,n){return n=n||[],f(e,t,n,i)};var m=function(e){for(var t,n=1,r=[];n>0;)t=s(e,!1,i),n=t.length,r=r.concat(t);return r},g=function(e,t){var n=s(e,t,i);return n};this.remove=function(e,t){return t&&"function"!=typeof t?g(e,t):m(e,t)},this.insert=function(e,t){var n=d({x:e.x,y:e.y,w:e.w,h:e.h,leaf:t},i);return n}}var o=n(399);r.prototype.toJSON=function(e){return JSON.stringify(this.root,!1,e)},r.fromJSON=function(e){var t=new r;return t.setTree(JSON.parse(e)),t},e.exports=r,"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"object"==typeof e&&"[object Array]"==={}.toString.call(e)})},function(e,t){"use strict";function n(e,t,r,o){if(!(this instanceof n))return new n(e,t,r,o);var i,a,s;e.x?(r=e.w,o=e.h,t=e.y,0!==e.w&&!e.w&&e.x2?(r=e.x2-e.x,o=e.y2-e.y):(r=e.w,o=e.h),e=e.x,i=e+r,a=t+o,s=!(o+r)):(i=e+r,a=t+o,s=!(o+r)),this.x1=this.x=function(){return e},this.y1=this.y=function(){return t},this.x2=function(){return i},this.y2=function(){return a},this.w=function(){return r},this.h=function(){return o},this.p=function(){return s},this.overlap=function(n){return s||n.p()?e<=n.x2()&&i>=n.x()&&t<=n.y2()&&a>=n.y():e<n.x2()&&i>n.x()&&t<n.y2()&&a>n.y()},this.expand=function(n){var s,u,c=n.x(),l=n.y(),p=n.x2(),h=n.y2();return s=e>c?c:e,u=t>l?l:t,r=i>p?i-s:p-s,o=a>h?a-u:h-u,e=s,t=u,this}}n.overlapRectangle=function(e,t){return 0===e.h&&0===e.w||0===t.h&&0===t.w?e.x<=t.x+t.w&&e.x+e.w>=t.x&&e.y<=t.y+t.h&&e.y+e.h>=t.y:e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.y+e.h>t.y},n.containsRectangle=function(e,t){return e.x+e.w<=t.x+t.w&&e.x>=t.x&&e.y+e.h<=t.y+t.h&&e.y>=t.y},n.expandRectangle=function(e,t){var n,r,o=e.x+e.w,i=t.x+t.w,a=e.y+e.h,s=t.y+t.h;return n=e.x>t.x?t.x:e.x,r=e.y>t.y?t.y:e.y,o>i?e.w=o-n:e.w=i-n,a>s?e.h=a-r:e.h=s-r,e.x=n,e.y=r,e},n.makeMBR=function(e,t){if(!e.length)return{x:0,y:0,w:0,h:0};t=t||{},t.x=e[0].x,t.y=e[0].y,t.w=e[0].w,t.h=e[0].h;for(var r=1,o=e.length;r<o;r++)n.expandRectangle(t,e[r]);return t},n.squarifiedRatio=function(e,t,n){var r=(e+t)/2,o=e*t,i=o/(r*r);return o*n/i},e.exports=n},function(e,t,n){"use strict";var r=n(399),o=function(e,t){if(t&&t.bbox)return{leaf:t,x:t.bbox[0],y:t.bbox[1],w:t.bbox[2]-t.bbox[0],h:t.bbox[3]-t.bbox[1]};for(var n=e.length,r=0,o=new Array(n);r<n;)o[r]=[e[r][0],e[r][1]],r++;var i=o[0];n=o.length,r=1;for(var a={min:[].concat(i),max:[].concat(i)};r<n;)o[r][0]<a.min[0]?a.min[0]=o[r][0]:o[r][0]>a.max[0]&&(a.max[0]=o[r][0]),o[r][1]<a.min[1]?a.min[1]=o[r][1]:o[r][1]>a.max[1]&&(a.max[1]=o[r][1]),r++;var s={x:a.min[0],y:a.min[1],w:a.max[0]-a.min[0],h:a.max[1]-a.min[1]};return t&&(s.leaf=t),s},i={};i.point=function(e,t){return t.insertSubtree({x:e.geometry.coordinates[0],y:e.geometry.coordinates[1],w:0,h:0,leaf:e},t.root)},i.multiPointLineString=function(e,t){return t.insertSubtree(o(e.geometry.coordinates,e),t.root)},i.multiLineStringPolygon=function(e,t){return t.insertSubtree(o(Array.prototype.concat.apply([],e.geometry.coordinates),e),t.root)},i.multiPolygon=function(e,t){return t.insertSubtree(o(Array.prototype.concat.apply([],Array.prototype.concat.apply([],e.geometry.coordinates)),e),t.root)},i.makeRec=function(e){return r(e.x,e.y,e.w,e.h)},i.geometryCollection=function(e,t){if(e.bbox)return t.insertSubtree({leaf:e,x:e.bbox[0],y:e.bbox[1],w:e.bbox[2]-e.bbox[0],h:e.bbox[3]-e.bbox[1]},t.root);for(var n,r=e.geometry.geometries,a=0,s=r.length,u=[];a<s;){switch(n=r[a],n.type){case"Point":u.push(i.makeRec({x:n.coordinates[0],y:n.coordinates[1],w:0,h:0}));break;case"MultiPoint":u.push(i.makeRec(o(n.coordinates)));break;case"LineString":u.push(i.makeRec(o(n.coordinates)));break;case"MultiLineString":u.push(i.makeRec(o(Array.prototype.concat.apply([],n.coordinates))));break;case"Polygon":u.push(i.makeRec(o(Array.prototype.concat.apply([],n.coordinates))));break;case"MultiPolygon":u.push(i.makeRec(o(Array.prototype.concat.apply([],Array.prototype.concat.apply([],n.coordinates)))));break;case"GeometryCollection":r=r.concat(n.geometries),s=r.length}a++}var c=u[0];for(a=1,s=u.length;a<s;)c.expand(u[a]),a++;return t.insertSubtree({leaf:e,x:c.x(),y:c.y(),h:c.h(),w:c.w()},t.root)},t.geoJSON=function(e){var t,n,r=this;if(Array.isArray(e))t=e.slice();else if(e.features&&Array.isArray(e.features))t=e.features.slice();else{if(!(e instanceof Object))throw"this isn't what we're looking for";t=[e]}for(var o=t.length,a=0;a<o;){if(n=t[a],"Feature"===n.type)switch(n.geometry.type){case"Point":i.point(n,r);break;case"MultiPoint":i.multiPointLineString(n,r);break;case"LineString":i.multiPointLineString(n,r);break;case"MultiLineString":i.multiLineStringPolygon(n,r);break;case"Polygon":i.multiLineStringPolygon(n,r);break;case"MultiPolygon":i.multiPolygon(n,r);break;case"GeometryCollection":i.geometryCollection(n,r)}a++}},t.bbox=function(){var e,t,n,r;switch(arguments.length){case 1:e=arguments[0][0][0],t=arguments[0][0][1],n=arguments[0][1][0],r=arguments[0][1][1];break;case 2:e=arguments[0][0],t=arguments[0][1],n=arguments[1][0],r=arguments[1][1];break;case 4:e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3]}return this.search({x:e,y:t,w:n-e,h:r-t})}},function(e,t,n){var r,o;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(r=[],o=function(){return n}.apply(t,r),!(void 0!==o&&(e.exports=o)))}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=n(387),s=n(403),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.stopPropagation(),t.props.onClick()},t}return r(t,e),t.prototype.render=function(){var e=[],t=[];return this.props.thumbNormalImgId?(e.push("imageButton"),t.push(this.createButtonImage(this.props.thumbNormalImgId,"imageButton__image")),this.props.thumbHotImgId&&(t.push(this.createButtonImage(this.props.thumbHotImgId,"imageButton__image-hot")),e.push("imageButton--hot")),this.props.thumbActiveImgId&&(t.push(this.createButtonImage(this.props.thumbActiveImgId,"imageButton__image-active")),e.push("imageButton--active"))):(e.push("see-through"),this.props.fakeBackground&&(e.push(a.FAKE_BACKGROUND_CLASS),t.push(this.props.fakeBackground?s.fakeBackground():null))),this.props.active&&e.push(["active"]),o.createElement("div",{className:i(this.props.className,e),style:this.props.style,title:this.props.title,onClick:this.handleClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},t,this.props.children)},t.prototype.createButtonImage=function(e,t){return o.createElement("img",{src:this.props.onImageSrc(e),key:"img"+(t+e),className:t})},t}(o.Component);t.PageImageButton=u},function(e,t,n){"use strict";function r(){return f.isIeBrowser()&&9===f.getIeBrowserVersion()?h.createElement("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}):null}function o(e,t,n,r){var o=d.calcControlBoundingPageRect(e,t,r);return{left:o.left,top:o.top,width:null==o.right?null:o.right-o.left,height:null==o.bottom?null:o.bottom-o.top,position:"absolute",pointerEvents:"all",zIndex:n}}function i(e,t,n){var r=(d.calcControlBoundingPageRect(e,t,null),o(e,t,n));return r.width=e.width+"px",r.height=e.height+"px",r.transformOrigin="left top 0",r.transform="scale("+t+")",r}function a(){if(void 0===g){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;e.parentNode.removeChild(e),g=t-r}return g}function s(e){return e.scrollWidth>e.clientWidth}function u(e){return e.scrollHeight>e.clientHeight}function c(e){var t=m(e),n=t.val();t.val(""),e.focus(),t.val(n),e.scrollTop=e.scrollHeight}function l(e){document.body.classList?document.body.classList.add(e):document.body.className+=" "+e}function p(e){document.body.classList?document.body.classList.remove(e):document.body.className=document.body.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}var h=n(193),f=n(11),d=n(404),m=n(179);t.fakeBackground=r,t.calcControlBaseStyle=o,t.calcTransformedControlBaseStyle=i;var g;t.getScrollbarWidth=a,t.hasHorizontalScrollbar=s,t.hasVerticalScrollbar=u,t.placeCaretAtEndAndScroll=c,t.addClassToBody=l,t.removeClassFromBody=p},function(e,t,n){"use strict";function r(e,t,n){var r=Math.max(n.minWidth,n.viewport.width),o=Math.max(n.minHeight,n.viewport.height);return t=s._clone(t),(t.left!=e.left&&t.right!=e.right||t.left==e.left&&t.right==e.right)&&(t.left<0?(t.right+=-t.left,t.left=0):t.right>r&&(t.left-=t.right-r,t.right=r)),(t.top!=e.top&&t.bottom!=e.bottom||t.top==e.top&&t.bottom==e.bottom)&&(t.top<0?(t.bottom+=-t.top,t.top=0):t.bottom>o&&(t.top-=t.bottom-o,t.bottom=o)),e.left<t.left&&e.right==t.right&&t.right-t.left<n.minWidth&&(t.left=Math.max(e.left,t.right-n.minWidth)),e.top<t.top&&e.bottom==t.bottom&&t.bottom-t.top<n.minHeight&&(t.top=Math.max(e.top,t.bottom-n.minHeight)),t.left=Math.floor(Math.max(0,Math.min(r-n.minWidth,t.left))),t.top=Math.floor(Math.max(0,Math.min(o-n.minHeight,t.top))),t.right=Math.floor(Math.min(Math.min(r,t.left+n.maxWidth),Math.max(t.left+n.minWidth,t.right))),t.bottom=Math.floor(Math.min(Math.min(o,t.top+n.maxHeight),Math.max(t.top+n.minHeight,t.bottom))),t}function o(e,t,n){t=t||1;var r=e.x*t,o=e.y*t,s=null,u=null;return a.CONTROLTYPES_WO_WIDTH.indexOf(e.type)===-1&&(s=r+e.width*t,u=o+i(e,n)*t),{left:r,top:o,right:s,bottom:u}}function i(e,t){return a.CONTROLTYPES_WO_HEIGHT.indexOf(e.type)===-1?e.height:t?e.width*t:e.width}var a=n(390),s=n(16);t.calcConstrainedBoundsChange=r,t.calcControlBoundingPageRect=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(387),s=n(403),u=n(402),c=n(10),l=n(8),p=n(406),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleImageSrc=function(e){return c.Context.resourceLoader.getResourceUrl(l.ResourceType.IMAGE,[e,t.props.book.images[e].ext])},t.handleClick=function(){c.Context.internalEventEmitter.triggerNeedStopAudioVideo(),p.openFlashcards(t.props.control.flashcardSetId)},t}return r(t,e),t.prototype.render=function(){var e=s.calcControlBaseStyle(this.props.control,this.props.zoom,a.ZINDEX_FIGURE_POPUP_BUTTON);return o.createElement(u.PageImageButton,{active:!1,className:"galleryBtn",style:e,title:this.props.control.title,thumbNormalImgId:this.props.control.thumbNormalImgId,thumbHotImgId:this.props.control.thumbHotImgId,thumbActiveImgId:this.props.control.thumbActiveImgId,onClick:this.handleClick,onImageSrc:this.handleImageSrc})},t}(o.Component);t.Component=h;var f=function(e,t){return{book:e.metadata.book,zoom:e.view.scale}},d=i.connect(f)(h);t.PageControlFlashcards=d},function(e,t,n){"use strict";function r(e,t){void 0===e&&(e=p);var n=null;switch(t.type){case h:n={interactivityPopup:t.payload};break;case f:n={flashcards:t.payload};break;case d:n={gallery:t.payload};break;case m:n=p;break;default:return e}return l._assign({},e,n)}function o(e,t){c.Context.internalEventEmitter.triggerNeedStopAudioVideo();var n={url:e,title:t};u.dispatchAction(h,n)}function i(e){c.Context.internalEventEmitter.triggerNeedStopAudioVideo();var t={flashcardSetId:e};u.dispatchAction(f,t)}function a(e){c.Context.internalEventEmitter.triggerNeedStopAudioVideo();var t={initialId:e};u.dispatchAction(d,t)}function s(){u.dispatchAction(m)}var u=n(15),c=n(10),l=n(16),p={interactivityPopup:null,flashcards:null,gallery:null},h="screenOverlay/OPEN_INTERACTIVITY",f="screenOverlay/OPEN_FLASHCARDS",d="screenOverlay/OPEN_GALLERY",m="screenOverlay/CLOSE";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.openInteractivity=o,t.openFlashcards=i,t.openGallery=a,t.close=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(387),s=n(403),u=n(402),c=n(10),l=n(8),p=n(408),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleImageSrc=function(e){return c.Context.resourceLoader.getResourceUrl(l.ResourceType.IMAGE,[e,t.props.book.images[e].ext])},t.handleClick=function(){c.Context.internalEventEmitter.triggerNeedStopAudioVideo(),p.HotspotUri.openUri(t.props.control.uri||t.props.control.url,c.Context.gotoPage)},t}return r(t,e),t.prototype.render=function(){var e=s.calcControlBaseStyle(this.props.control,this.props.zoom,a.ZINDEX_FIGURE_POPUP_BUTTON);return o.createElement(u.PageImageButton,{active:!1,className:"galleryBtn",style:e,title:this.props.control.title,thumbNormalImgId:this.props.control.thumbNormalImgId,thumbHotImgId:this.props.control.thumbHotImgId,thumbActiveImgId:this.props.control.thumbActiveImgId,onClick:this.handleClick,onImageSrc:this.handleImageSrc})},t}(o.Component);t.Component=h;var f=function(e,t){return{book:e.metadata.book,zoom:e.view.scale}},d=i.connect(f)(h);t.PageControlHotspot=d},function(e,t,n){"use strict";var r=n(10),o=function(){function e(){}return e.buildBookPageUri=function(t,n){return e.BOOK_PAGE_PROTOCOL+":"+(t?"//"+encodeURIComponent(t):"")+"/"+n},e.isBookPageUri=function(t){return e.BOOK_PAGE_REGEX.test(t)},e.parseBookPageUri=function(t){var n=e.BOOK_PAGE_REGEX.exec(t);return null==n?null:{book:void 0==n[1]?void 0:parseInt(n[1],10),page:parseInt(n[2])}},e.openUri=function(t,n){if(e.isBookPageUri(t)){var o=e.parseBookPageUri(t);null==o||(o.book?r.Context.controlSettings.gotoBookPage&&r.Context.controlSettings.gotoBookPage(o.book,o.page-1):n(o.page-1))}else r.Context.controlSettings.open&&r.Context.controlSettings.open(t)},e.addClickHandlerToAnchorElements=function(t,n){var r=Array.prototype.slice.call(t.getElementsByTagName("a"));r.forEach(function(t){var r=t.href;r&&(t.removeAttribute("href"),t.addEventListener("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),e.openUri(r,n)}))})},e}();o.BOOK_PAGE_PROTOCOL="bookpage",o.BOOK_PAGE_REGEX=/^bookpage:(?:\/\/([0-9]+))?\/([0-9]+)$/,t.HotspotUri=o},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(367),s=n(10),u=n(8),c=n(410),l=n(392),p=n(402),h=n(401),f=n(403),d=n(414),m=n(387),g=n(453),v=n(448),y=n(16);!function(e){e[e.Ready=0]="Ready",e[e.OpenInPlace=1]="OpenInPlace",e[e.OpenOutside=2]="OpenOutside"}(r=t.ViewMode||(t.ViewMode={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleOpenClick=function(){t.canStartPlaying&&(t.props.control.inPlace?l.closeWindow(t.props.control.name):l.openWindow(t.props.control.name),c.open(t.props.control.name,!0))},t.handleImageSrc=function(e){return s.Context.resourceLoader.getResourceUrl(u.ResourceType.IMAGE,[e,s.Context.store.getState().metadata.book.images[e].ext])},t}return o(t,e),t.prototype.render=function(){var e=s.Context.resourceLoader.getResourceUrl(u.ResourceType.VIDEO_THUMB,[this.props.control.videoId,this.props.control.width]),t=s.Context.store.getState().metadata.book.videos[this.props.control.videoId],n=f.calcControlBaseStyle(this.props.control,this.props.zoom,m.ZINDEX_VIDEO_THUMB,t.height/t.width),o=null;this.props.viewMode==r.OpenInPlace&&(o=i.createElement(d.VideoControl,{controlName:this.props.control.name,autoPlay:this.props.autoPlay,initialTime:this.props.initialTime,mode:this.props.control.inPlace?d.Mode.InPlace:d.Mode.PausedInPlace,width:n.width,height:n.height,store:this.props.store}));var a={backgroundImage:this.props.control.thumbNormalImgId?null:"url("+e+")",cursor:this.canStartPlaying?void 0:"default"};y._assign(n,a);var c=h({videoThumb:this.canStartPlaying,"box box--shadow":!this.props.control.thumbNormalImgId}),l=null;return this.canStartPlaying&&!this.props.control.thumbNormalImgId&&(l=i.createElement(v.PlayIcon,null)),i.createElement(p.PageImageButton,{active:this.props.viewMode!=r.Ready,className:c,style:n,title:this.props.control.title,thumbNormalImgId:this.props.control.thumbNormalImgId,thumbHotImgId:this.props.control.thumbHotImgId,thumbActiveImgId:this.props.control.thumbActiveImgId,onClick:this.handleOpenClick,onImageSrc:this.handleImageSrc},l,o)},Object.defineProperty(t.prototype,"canStartPlaying",{get:function(){return this.props.viewMode==r.Ready},enumerable:!0,configurable:!0}),t}(i.Component);t.Component=b;var E=function(e,t){return{autoPlay:e.mediaOpen&&e.mediaOpen.autoPlay,initialTime:t.control?g.getVideoControlInitialTime(t.control.name)(e):0,viewMode:e.mediaOpen&&e.mediaOpen.controlName==t.control.name?e.popupWindows[e.mediaOpen.controlName]?r.OpenOutside:r.OpenInPlace:r.Ready,zoom:e.view.scale}},w=a.connect(E)(b);t.PageControlVideo=w},function(e,t,n){"use strict";function r(e,t){switch(void 0===e&&(e=y),t.type){case b:var n={controlName:null,autoPlay:!1};return v._assign({},e,n);case w:var n=t.payload;return v._assign({},e,n);case E:var r=t.payload,n={gotoPlaylistItem:null,controlName:r.controlName,autoPlay:r.autoPlay};return v._assign({},e,n);default:return e}}function o(e){p.Context.store.dispatch(function(t){t({type:w,payload:{gotoPlaylistItem:e}})})}function i(e,t,n){p.Context.store.dispatch(function(r,o){var i=o();n&&(null!=m.getControlMapping(i).findVideoIdByControlName(e)&&d.setTime(e,0),null!=m.getControlMapping(i).findOverlayNoteIdByControlName(e)&&f.setTime(e,0)),r({type:E,payload:{controlName:e,autoPlay:t}})})}function a(e){p.Context.store.dispatch(function(t,n){e&&e!=n().mediaOpen.controlName||(h.reset(),t({type:b,payload:{controlName:e}}))})}function s(e,t){var n=l.getState(),r=n.mediaOpen.controlName;if(r){var o=m.getControlMapping(n).findPageIndexByControlName(r);(o<e||o>t)&&c(n)}}function u(e){var t=l.getState(),n=t.mediaOpen.controlName;if(n){var r=g.parsePageLectureControlName(n);if(null!=r){var o=m.getControlMapping(t).findPageIndexByControlName(n);e!=o&&c(t)}}}function c(e){null!=e.mediaOpen.gotoPlaylistItem,a()}var l=n(15),p=n(10),h=n(411),f=n(412),d=n(413),m=n(393),g=n(188),v=n(16),y={},b="mediaOpen/CLOSE",E="mediaOpen/OPEN",w="mediaOpen/GOTO_PLAYLISTITEM";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.gotoPlaylistItem=o,t.open=i,t.close=a,t.closeIfOutsideVisiblePages=s,t.closeIfOutsidePage=u},function(e,t,n){"use strict";function r(e,t){switch(void 0===e&&(e=u),t.type){case c:return s._clone(t.payload);case l:return u;default:return e}}function o(e){a.dispatchAction(c,e)}function i(){a.dispatchAction(l)}var a=n(15),s=n(16),u={playing:!1,currentTime:0,percentageBuffered:100,closedCaption:""},c="mediaStatus/SET",l="mediaStatus/RESET";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.set=o,t.reset=i},function(e,t,n){"use strict";function r(e,t){switch(void 0===e&&(e=c),t.type){case u:return o(e,t.payload.controlName,{initialTime:t.payload.time});default:return e}}function o(e,t,n){var r=e[t]?s._assign({},e[t],n):n,o=(i={},i[t]=r,i);return s._assign({},e,o);var i}function i(e,t){var n={controlName:e,time:t};return a.dispatchAction(u,n)}var a=n(15),s=n(16),u="lectures/SET_TIME",c={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.setTime=i},function(e,t,n){"use strict";function r(e,t){switch(void 0===e&&(e=s),t.type){case u:return a._assign({},e,(n={},n[t.payload.controlName]={initialTime:t.payload.time},n));default:return e}var n}function o(e,t){return i.dispatchAction(u,{controlName:e,time:t})}var i=n(15),a=n(16),s={},u="videos/SET_TIME";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.setTime=o},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(390),s=n(415),u=n(10),c=n(8),l=n(413),p=n(410),h=n(411),f=n(425),d=n(392),m=n(444),g=n(445),v=n(446),y=n(449),b=n(450),E=n(451),w=n(367),x=n(452),T=n(393),C=n(387),N=n(16);!function(e){e[e.InPlace=0]="InPlace",e[e.InPlaceExpanded=1]="InPlaceExpanded",e[e.PausedInPlace=2]="PausedInPlace",e[e.Expanded=3]="Expanded"}(r=t.Mode||(t.Mode={}));var S=function(e){function t(t){var n=e.call(this,t)||this;return n.mediaStatus={playing:!1,percentageBuffered:0,closedCaption:"",currentTime:0},n.pending={},n.handleRef=function(e){null!=n.ref&&(u.Context.internalEventEmitter.unbindNeedMediaPlay(n.handleNeedMediaPlay),u.Context.internalEventEmitter.unbindNeedMediaPause(n.handleNeedMediaPause),u.Context.internalEventEmitter.unbindNeedMediaSeek(n.handleNeedMediaSeek)),n.ref=e,null!=n.ref&&(u.Context.internalEventEmitter.bindNeedMediaPlay(n.handleNeedMediaPlay),u.Context.internalEventEmitter.bindNeedMediaPause(n.handleNeedMediaPause),u.Context.internalEventEmitter.bindNeedMediaSeek(n.handleNeedMediaSeek)),n.applyPendingValues()},n.handleNeedMediaPlay=function(){n.pending.play=!0,n.applyPendingValues()},n.handleNeedMediaPause=function(){n.pending.play=!1,n.applyPendingValues()},n.handleNeedMediaSeek=function(e){n.pending.seek=e,n.applyPendingValues()},n.handleCollapseClick=function(){l.setTime(n.props.controlName,n.mediaStatus.currentTime),p.open(n.props.controlName,n.mediaStatus.playing),d.closeWindow(n.props.controlName)},n.handleExpandClick=function(){n.expand()},n.handleCloseClick=function(){n.close()},n.handleEnded=function(){m.setVideoDone(n.control.name),f.nextIfActive()},n.handleProgress=function(e){if(null!=n.ref){var t=e.target;n.mediaStatus.percentageBuffered=t.buffered.length&&t.buffered.end(t.buffered.length-1)/t.duration*100,n.updateMediaStatus()}},n.handleTimeUpdate=function(e){if(null!=n.ref){var t=e.target;n.mediaStatus.currentTime=t.currentTime;var r=n.subtitleReader?n.subtitleReader.getUpdate(n.mediaStatus.currentTime):null;null!=r&&(n.mediaStatus.closedCaption=r),n.updateMediaStatus()}},n.handlePlayingChange=function(e){n.mediaStatus.playing=e,n.updateMediaStatus(),n.props.mode==r.PausedInPlace&&e&&n.expand()},n.handleLoadedMetadata=function(){n.applyPendingValues()},n.close=function(){n.triggeringEventStopAudioVideo||(l.setTime(n.props.controlName,0),p.close())},n.expand=function(){l.setTime(n.props.controlName,n.mediaStatus.currentTime),d.openWindow(n.props.controlName),p.open(n.props.controlName,n.mediaStatus.playing)},n.updateMediaStatus=N._throttle(function(){h.set(n.mediaStatus)},C.THROTTLE_MEDIA_STATUS_UPDATE),0!=n.props.initialTime&&(n.pending.seek=n.props.initialTime),n.initSubtitles(t),n.pending.rate=t.playSpeed,n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){e.controlName!=this.props.controlName&&(this.mediaStatus.currentTime=0,this.mediaStatus.playing=!1,this.mediaStatus.percentageBuffered=0,0!=this.props.initialTime&&(this.pending.seek=this.props.initialTime)),e.controlName==this.props.controlName&&e.subtitleLanguage==this.props.subtitleLanguage||this.initSubtitles(e),e.controlName==this.props.controlName&&e.autoPlay==this.props.autoPlay||(this.pending.play=e.autoPlay),this.pending.rate=e.playSpeed,this.applyPendingValues(),this.updateMediaStatus()},t.prototype.componentDidMount=function(){u.Context.internalEventEmitter.bindNeedStopAudioVideo(this.close)},t.prototype.componentWillUnmount=function(){u.Context.internalEventEmitter.unbindNeedStopAudioVideo(this.close)},t.prototype.componentDidUpdate=function(e){e.controlName!=this.props.controlName&&this.ref&&this.ref.load()},t.prototype.render=function(){var e=this.control,t=u.Context.resourceLoader.getResourceUrl(c.ResourceType.VIDEO_MP4,[e.videoId]),n=u.Context.resourceLoader.getResourceUrl(c.ResourceType.VIDEO_THUMB,[e.videoId,e.width]),o=this.props.book.videos[e.videoId],a=null;if(e.inPlace||this.props.mode==r.PausedInPlace)a={position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px"};else{var l=void 0,p=void 0;o.width/o.height>=this.props.width/this.props.height?(l=this.props.width,p=this.props.width*o.height/o.width):(l=this.props.height*o.width/o.height,p=this.props.height),a={position:"absolute",left:(this.props.width-l)/2,top:(this.props.height-p)/2,width:l,height:p}}var h={width:"100%",height:"100%"},f=[];return this.props.mode==r.InPlaceExpanded&&f.push(i.createElement(y.Collapse,{key:"collapse",onClick:this.handleCollapseClick})),this.props.mode!=r.InPlace&&this.props.mode!=r.PausedInPlace||(f.push(i.createElement(b.Expand,{key:"expand",onClick:this.handleExpandClick})),f.push(i.createElement(E.Close,{key:"close",onClick:this.handleCloseClick}))),i.createElement("div",{style:a},i.createElement(s.Video,{style:h,controls:!0,ref:this.handleRef,poster:n,autoPlay:this.props.autoPlay,onEnded:this.handleEnded,onPlayingChange:this.handlePlayingChange,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onLoadedMetadata:this.handleLoadedMetadata},i.createElement("source",{src:t}),i.createElement(v.Overlay,null),i.createElement(g.Controls,null,f)))},Object.defineProperty(t.prototype,"control",{get:function(){return T.getControlMapping(u.Context.store.getState()).findControlByControlName(this.props.controlName)},enumerable:!0,configurable:!0}),t.prototype.initSubtitles=function(e){var t=this.findSelectedSrt(e);this.subtitleReader=t?new x.SubtitleReader(t):null,this.mediaStatus.closedCaption=""},t.prototype.findSelectedSrt=function(e){var t=T.getControlMapping(u.Context.store.getState()).findControlByControlName(e.controlName),n=this.props.book.videos[t.videoId];return a.findSubtitleWithLanguage(n.subs,e.subtitleLanguage)},t.prototype.applyPendingValues=function(){if(this.pending&&this.ref&&this.ref.getReadyState()>=HTMLMediaElement.HAVE_METADATA){if(null!=this.pending.rate&&this.ref.setRate(this.pending.rate),null!=this.pending.seek&&this.ref.seek(this.pending.seek),null!=this.pending.play)if(this.pending.play){this.triggeringEventStopAudioVideo=!0;try{u.Context.internalEventEmitter.triggerNeedStopAudioVideo()}finally{this.triggeringEventStopAudioVideo=!1}this.ref.play()}else this.ref.pause();this.pending={}}},t}(i.Component);t.Component=S;var _=function(e,t){return{book:e.metadata.book,playSpeed:e.userSettings.playSpeed,subtitleLanguage:e.userSettings.subtitleLanguage}},O=w.connect(_)(S);t.VideoControl=O},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=n(193),a=n(416),s=n(387),u=n(16),c=n(11),l=n(10);n(417);var p=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],h="source",f=function(e){function t(t){var n=e.call(this,t)||this;return n.togglePlay=function(){n.state.paused?(l.Context.internalEventEmitter.triggerNeedMediaPause(),n.play()):n.pause()},n.toggleMute=function(){n.state.muted?n.unmute():n.mute()},n.load=function(){n.videoEl.load()},n.fullscreen=function(){n.videoEl.requestFullscreen?n.videoEl.requestFullscreen():n.videoEl.msRequestFullscreen?n.videoEl.msRequestFullscreen():n.videoEl.mozRequestFullScreen?n.videoEl.mozRequestFullScreen():n.videoEl.webkitRequestFullscreen&&n.videoEl.webkitRequestFullscreen()},n.play=function(){n.videoEl.play()},n.pause=function(){n.videoEl.pause()},n.unmute=function(){n.videoEl.muted=!1},n.mute=function(){n.videoEl.muted=!0},n.seek=function(e){if(c.isIOSDevice()&&0===n.videoEl.currentTime)var t=0,r=setInterval(function(){0!=n.videoEl.seekable.length&&(n.videoEl.currentTime=e,clearInterval(r)),5===++t&&clearInterval(r)},100);else n.videoEl.currentTime=e},n.setVolume=function(e){n.videoEl.volume=e},n.setRate=function(e){n.videoEl.playbackRate=e},n.getReadyState=function(){return n.videoEl.readyState},n.updateStateFromVideo=u._throttle(function(){n.videoEl&&(n.setState({duration:n.videoEl.duration,currentTime:n.videoEl.currentTime,buffered:n.videoEl.buffered,paused:n.videoEl.paused,muted:n.videoEl.muted,volume:n.videoEl.volume,rate:n.videoEl.playbackRate,readyState:n.videoEl.readyState,percentageBuffered:n.videoEl.buffered.length&&n.videoEl.buffered.end(n.videoEl.buffered.length-1)/n.videoEl.duration*100,percentagePlayed:n.videoEl.currentTime/n.videoEl.duration*100,error:n.videoEl.networkState===n.videoEl.NETWORK_NO_SOURCE,loading:n.videoEl.readyState>n.videoEl.HAVE_METADATA&&n.videoEl.readyState<n.videoEl.HAVE_ENOUGH_DATA}),n.props.onPlayingChange&&n.props.onPlayingChange(!n.videoEl.paused))},s.THROTTLE_MEDIA_STATUS_UPDATE),n.onFocus=function(){n.setState({focused:!0})},n.onBlur=function(){n.setState({focused:!1})},n.state={networkState:0,paused:!n.props.autoPlay,muted:!!n.props.muted,volume:1,rate:1,error:!1,loading:!1},n}return r(t,e),t.prototype.componentWillMount=function(){var e=this;this.mediaEventProps=p.reduce(function(t,n){return t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n in e.props&&"function"==typeof e.props[n]&&(o=e.props)[n].apply(o,t),e.updateStateFromVideo();var o},t},{})},t.prototype.componentDidMount=function(){this.videoEl.children[this.videoEl.children.length-1].addEventListener("error",this.updateStateFromVideo)},t.prototype.componentWillUnmount=function(){this.videoEl.children[this.videoEl.children.length-1].removeEventListener("error",this.updateStateFromVideo)},t.prototype.renderControls=function(){var e=u._assign({togglePlay:this.togglePlay,toggleMute:this.toggleMute,play:this.play,pause:this.pause,mute:this.mute,unmute:this.unmute,seek:this.seek,fullscreen:this.fullscreen,setVolume:this.setVolume,setRate:this.setRate},this.state,{copyKeys:this.props.copyKeys}),t=i.Children.map(this.props.children,function(t){if(t&&t.type!==h)return i.cloneElement(t,e)});return t},t.prototype.renderSources=function(){return i.Children.map(this.props.children,function(e){if(e&&e.type===h)return e})},t.prototype.getVideoClassName=function(){var e="videop";return e+=this.state.error?" video--error":this.state.loading?" video--loading":this.state.paused?" video--paused":" video--playing",this.state.focused&&(e+=" video--focused"),e},t.prototype.render=function(){var e=this,t=this.props;return this.props.controls&&(t=u._assign({},this.props),delete t.controls),delete t.onPlayingChange,delete t.copyKeys,i.createElement("div",{className:this.getVideoClassName(),tabIndex:0,style:this.props.style,onFocus:this.onFocus,onBlur:this.onBlur},i.createElement("video",o({},t,{className:"video__el",ref:function(t){e.videoEl=t}},this.mediaEventProps),this.renderSources()),this.props.controls?this.renderControls():null)},t}(i.Component);f.defaultProps={copyKeys:a.DEFAULT_COPY_KEYS},t.Video=f},function(e,t){"use strict";t.DEFAULT_COPY_KEYS={sourceError:"Video cannot be played in this browser.",play:"Play video",pause:"Pause video",mute:"Mute video",unmute:"Unmute video",fullscreen:"View video fullscreen",seek:"Seek video",expand:"Expand video",collapse:"Collapse video",close:"Close video",speed:"Play speed",subtitle:"Subtitle language"}},function(e,t){},,,,,,,,function(e,t,n){"use strict";function r(e,t){void 0===e&&(e=L);var n=null;switch(t.type){case k:n={annotationColor:t.payload};break;case D:n={annotationTool:t.payload};break;case B:n={autoPlayActive:!0};break;case U:n={autoPlayActive:!1};break;case F:n={lectureNotesOn:!0};break;case j:n={lectureNotesOn:!1};break;case H:n={layout:t.payload};break;case V:n={playlistOpen:!0};break;case W:n={playlistOpen:!1};break;case G:n={playSpeed:t.payload};break;case z:n={subtitleLanguage:t.payload};break;case q:n={zoom:t.payload};break;default:return e}return N._assign({},e,n)}function o(e){return"number"!=typeof e||e<0||e>=t.ANNOTATION_COLOR_VALUES.length?void console.warn("Invalid annotation color '"+e+"'"):(g(e),void E.Context.store.dispatch(function(t,n){e!==n().userSettings.annotationColor&&(t({type:k,payload:e}),S.saveUserSettings()||E.Context.userStorage.saveAnnotationColor(e))}))}function i(e){E.Context.store.dispatch(function(t,n){e!==n().userSettings.annotationTool&&t({type:D,payload:e})})}function a(){E.Context.store.dispatch(function(e,t){var n=t();if(_.isAutoPlayActive(n)){var r=O.getPlaylistNextIndex(n);null!=r&&P.gotoPlaylistItem(r)}})}function s(){E.Context.store.dispatch(function(e,t){t().userSettings.autoPlayActive||(e({type:B}),S.saveUserSettings())})}function u(){E.Context.store.dispatch(function(e,t){t().userSettings.autoPlayActive&&(e({type:U}),S.saveUserSettings())})}function c(){E.Context.store.dispatch(function(e,t){t().userSettings.lectureNotesOn||(e({type:F}),S.saveUserSettings())})}function l(){E.Context.store.dispatch(function(e,t){t().userSettings.lectureNotesOn&&(e({type:j}),S.saveUserSettings())})}function p(e){E.Context.store.dispatch(function(t,n){return e!==R.CONTINUOUS&&e!==R.SIDEBYSIDE&&e!==R.SINGLE?void console.warn("Invalid layout mode '"+e+"'"):void(e!==n().userSettings.layout&&(t({type:H,payload:e}),S.saveUserSettings()||E.Context.userStorage.saveLayoutMode(e)))})}function h(){A.closeMenu(),E.Context.store.dispatch(function(e,t){t().userSettings.playlistOpen||(e({type:V}),S.saveUserSettings())})}function f(){E.Context.store.dispatch(function(e,t){t().userSettings.playlistOpen&&(e({type:W}),S.saveUserSettings())})}function d(e){return"number"!=typeof e||t.PLAY_SPEEDS.indexOf(e)==-1?void console.warn("Invalid speed '"+e+"'"):void E.Context.store.dispatch(function(t,n){n().userSettings.playSpeed!=e&&(t({type:G,payload:e}),S.saveUserSettings())})}function m(e){E.Context.store.dispatch(function(n,r){return t.LANG_VALUES.indexOf(e)==-1?void console.warn("Invalid language '"+e+"'"):void(r().userSettings.subtitleLanguage!=e&&(n({type:z,payload:e}),S.saveUserSettings()||E.Context.userStorage.saveLanguage(e)))})}function g(e){var t=w.getState(),n=T.getSelectedVisualAnnotation(t);if(n)switch(t.selection.visualAnnotation.tool){case b.AnnotationTool.ELLIPSE:x.editEllipseColor(t.selection.visualAnnotation.page,n.id,e);break;case b.AnnotationTool.RECTANGLE:x.editRectangleColor(t.selection.visualAnnotation.page,n.id,e);break;case b.AnnotationTool.TEXT:x.editTextColor(t.selection.visualAnnotation.page,n.id,e);break;default:console.error("Annotation of type "+t.selection.visualAnnotation.tool+" not supported")}}function v(e){return"number"!=typeof e?void console.warn("Invalid zoom '"+e+"'"):void E.Context.store.dispatch(function(n,r){e!=t.ZOOM_TO_FIT_VALUE&&(e=Math.max(Math.min(e,M),I)),r().userSettings.zoom!=e&&(n({type:q,payload:e}),S.saveUserSettings()||E.Context.userStorage.saveZoom(e))})}function y(e){E.Context.store.dispatch(function(t,n){var r=n();v(r.view.scale*e*100)})}var b=n(426),E=n(10),w=n(15),x=n(427),T=n(429),C=n(431),N=n(16),S=n(432),_=n(433),O=n(435),P=n(410),A=n(440);t.SUBTITLE_LANGUAGES=["eng","chi"],t.SUBTITLE_LANGUAGE_TITLES={eng:"English",chi:"Chinese"},t.SUBTITLE_LANGUAGE_TITLE_OFF="Off",t.SUBTITLE_LANGUAGE_OFF="",t.LANG_VALUES=[t.SUBTITLE_LANGUAGE_OFF,t.SUBTITLE_LANGUAGES[0],t.SUBTITLE_LANGUAGES[1]],t.PLAY_SPEEDS=[.75,1,1.25,1.5,1.75,2],t.PLAY_SPEED_TITLES={.75:"0.75x",1:"Normal",1.25:"1.25x",1.5:"1.5x",1.75:"1.75x",2:"2.0x"};var I=33,M=300;t.ZOOM_TO_FIT_VALUE=-1,t.ZOOM_ACTUAL_SIZE_VALUE=100;var R;!function(e){e[e.SINGLE=0]="SINGLE",e[e.SIDEBYSIDE=1]="SIDEBYSIDE",e[e.CONTINUOUS=2]="CONTINUOUS"}(R=t.LayoutMode||(t.LayoutMode={})),t.LAYOUT_MODES=[R.SINGLE,R.SIDEBYSIDE,R.CONTINUOUS],t.LAYOUT_MODE_DETAILS=(Y={},Y[R.SINGLE]={iconType:C.IconType.LAYOUT_SINGLE,title:"Single Page"},Y[R.SIDEBYSIDE]={iconType:C.IconType.LAYOUT_SIDE_BY_SIDE,title:"Side-By-Side"},Y[R.CONTINUOUS]={iconType:C.IconType.LAYOUT_CONTINUOUS,title:"Continuous"},Y),t.ANNOTATION_COLOR_VALUES=["#0F0","#FF0","#0FF","#F0F","#00F"];var L={annotationTool:b.AnnotationTool.HIGHLIGHT,annotationColor:b.AnnotationColor.BLUE,autoPlayActive:!0,layout:R.CONTINUOUS,lectureNotesOn:!1,playlistOpen:!0,playSpeed:1,zoom:t.ZOOM_TO_FIT_VALUE},k="userSettings/ANNOTATION_COLOR",D="userSettings/ANNOTATION_TOOL",B="userSettings/ACTIVATE_AUTOPLAY",U="userSettings/DEACTIVATE_AUTOPLAY",F="userSettings/ENABLE_LECTURE_NOTES",j="userSettings/DISABLE_LECTURE_NOTES",H="userSettings/LAYOUT",V="userSettings/OPEN_PLAYLIST",W="userSettings/CLOSE_PLAYLIST",G="userSettings/PLAY_SPEED",z="userSettings/SUBTITLE_LANGUAGE",q="userSettings/ZOOM";Object.defineProperty(t,"__esModule",{
value:!0}),t.default=r,t.setAnnotationColor=o,t.setAnnotationTool=i,t.nextIfActive=a,t.activateAutoPlay=s,t.deactivateAutoPlay=u,t.enableLectureNotes=c,t.disableLectureNotes=l,t.setLayout=p,t.openPlaylist=h,t.closePlaylist=f,t.setPlaySpeed=d,t.setSubtitleLanguage=m,t.setZoom=v,t.zoomBy=y;var Y},function(e,t){"use strict";var n;!function(e){e[e.REGULAR=0]="REGULAR",e[e.GRADE=1]="GRADE",e[e.SOLUTION=2]="SOLUTION"}(n=t.FormMode||(t.FormMode={}));var r;!function(e){e[e.Annotations=0]="Annotations",e[e.AnnotationColor=1]="AnnotationColor",e[e.BookNotes=2]="BookNotes",e[e.Marks=3]="Marks",e[e.Navigation=4]="Navigation",e[e.PlaySpeed=5]="PlaySpeed",e[e.Print=6]="Print",e[e.Search=7]="Search",e[e.PlaySettings=8]="PlaySettings",e[e.SubtitleLanguage=9]="SubtitleLanguage",e[e.Thumbnails=10]="Thumbnails",e[e.ZoomLayout=11]="ZoomLayout"}(r=t.MenuType||(t.MenuType={}));var o;!function(e){e[e.GREEN=0]="GREEN",e[e.YELLOW=1]="YELLOW",e[e.CYAN=2]="CYAN",e[e.PURPLE=3]="PURPLE",e[e.BLUE=4]="BLUE"}(o=t.AnnotationColor||(t.AnnotationColor={}));var i;!function(e){e[e.HIGHLIGHT=0]="HIGHLIGHT",e[e.ELLIPSE=1]="ELLIPSE",e[e.TEXT=2]="TEXT",e[e.RECTANGLE=3]="RECTANGLE"}(i=t.AnnotationTool||(t.AnnotationTool={}))},function(e,t,n){"use strict";function r(e,t){function n(e){var t=g(e.pageIdx);return t.bookmarked=e.value,b(t,e.pageIdx)}function r(e){var t=g(e.pageIdx);return E(e.pageIdx,e.firstWordIdx,e.lastWordIdx,null,t.highlights),b(t,e.pageIdx)}function o(e){var t=g(e.pageIdx);return w(e.pageIdx,e.firstWordIdx,e.lastWordIdx,t.highlights),b(t,e.pageIdx)}function i(e){var t=g(e.pageIdx);return t.highlights=e.value,b(t,e.pageIdx)}function a(e){var t=g(e.pageIdx);return E(e.pageIdx,e.firstWordIdx,e.lastWordIdx,e.note,t.notes),b(t,e.pageIdx)}function s(e){var t=g(e.pageIdx);return w(e.pageIdx,e.firstWordIdx,e.lastWordIdx,t.notes),b(t,e.pageIdx)}function u(e){var t=g(e.pageIdx);return t.notes=e.value,b(t,e.pageIdx)}function c(e){return v(e.pageIdx,e.value,function(e){return e.ellipseAnnotations},function(e,t){e.ellipseAnnotations=t})}function l(e){return y(e.pageIdx,e.value,function(e){return e.ellipseAnnotations},function(e,t){e.ellipseAnnotations=t})}function p(e){return v(e.pageIdx,e.value,function(e){return e.rectangleAnnotations},function(e,t){e.rectangleAnnotations=t})}function h(e){return y(e.pageIdx,e.value,function(e){return e.rectangleAnnotations},function(e,t){e.rectangleAnnotations=t})}function f(e){return v(e.pageIdx,e.value,function(e){return e.textAnnotations},function(e,t){e.textAnnotations=t})}function d(e){return y(e.pageIdx,e.value,function(e){return e.textAnnotations},function(e,t){e.textAnnotations=t})}function m(t){var n={bookNotes:t};return D._assign({},e,n)}function g(t){var n={bookmarked:!1,highlights:[],notes:[],ellipseAnnotations:[],rectangleAnnotations:[],textAnnotations:[]};return D._assign(n,e.pages[t]),n}function v(e,t,n,r){var o=g(e),i=n(o),a=i?i.slice(0):[],s=S(t.id,a);return null==s?a.push(t):a[s]=t,r(o,a),b(o,e)}function y(e,t,n,r){var o=g(e),i=N(t,n(o));return r(o,i),b(o,e)}function b(t,n){var r=e.pages.slice();r[n]=t;var o={pages:r};return D._assign({},e,o)}function E(e,t,n,r,o){if(M.isValidPageWordIndexes(e,t,n)){var i=x(o,t,n,!1);if(i.length>0)for(var a=i.length-1;a>=0;a--){var s=i[a];t=Math.min(t,o[s].fw),n=Math.max(n,o[s].lw),o.splice(s,1)}o.push({fw:t,lw:n,note:r})}}function w(e,t,n,r){if(r)for(var o=r.length-1;o>=0;o--)r[o].fw==t&&r[o].lw==n&&r.splice(o,1)}function x(e,t,n,r){var o=[];return e&&e.forEach(function(e,i){(r&&t>=e.fw&&n<=e.lw||!r&&n>=e.fw&&t<=e.lw)&&o.push(i)}),o}switch(void 0===e&&(e=B),t.type){case U:return n(t.payload);case F:return r(t.payload);case j:return o(t.payload);case H:return i(t.payload);case V:return a(t.payload);case W:return s(t.payload);case G:return u(t.payload);case z:return c(t.payload);case q:return l(t.payload);case Y:return p(t.payload);case X:return h(t.payload);case K:return f(t.payload);case Z:return d(t.payload);case $:return m(t.payload);default:return e}}function o(e,t){t=!!t,A.Context.store.dispatch(function(n,r){var o=r().annotations.pages[e];if(t!=(!!o&&o.bookmarked)){A.Context.userStorage.savePageBookmarked(e,t);var i={pageIdx:e,value:t};n({type:U,payload:i})}})}function i(e,t,n){var r={pageIdx:e,firstWordIdx:t,lastWordIdx:n};I.dispatchAction(F,r),u(e)}function a(e,t,n){var r={pageIdx:e,firstWordIdx:t,lastWordIdx:n};I.dispatchAction(j,r),u(e)}function s(e,t){A.Context.store.dispatch(function(n,r){var o=r().annotations.pages[e];if(t!=(o?o.highlights:null)){var i={pageIdx:e,value:t};n({type:H,payload:i}),u(e)}})}function u(e){var t=A.Context.store.getState().annotations.pages[e];t&&A.Context.userStorage.savePageHighlights(e,t.highlights)}function c(e,t,n,r){var o={pageIdx:e,firstWordIdx:t,lastWordIdx:n,note:r};I.dispatchAction(V,o),h(e)}function l(e,t,n){var r={pageIdx:e,firstWordIdx:t,lastWordIdx:n};I.dispatchAction(W,r),h(e)}function p(e,t){A.Context.store.dispatch(function(n,r){var o=r().annotations.pages[e];if(t!=(o?o.notes:null)){var i={pageIdx:e,value:t};n({type:G,payload:i}),h(e)}})}function h(e){var t=A.Context.store.getState().annotations.pages[e];t&&A.Context.userStorage.savePageNotes(e,t.notes)}function f(e,t,n,r,o,i,a){A.Context.store.dispatch(function(s,u){A.Context.userStorage.saveEllipseAnnotation(e,t,n,r,o,i,a);var c={pageIdx:e,value:{id:t,x:n,y:r,w:o,h:i,c:a}};s({type:z,payload:c}),O(s,u)})}function d(e,t){A.Context.store.dispatch(function(n,r){A.Context.userStorage.deleteEllipseAnnotation(e,t);var o={pageIdx:e,value:t};n({type:q,payload:o})})}function m(e,t,n){var r=I.getState().annotations.pages[e];if(r){var o=_(t,r.ellipseAnnotations);o&&f(e,o.id,o.x,o.y,o.w,o.h,n)}}function g(e,t,n,r,o,i,a){A.Context.store.dispatch(function(s,u){A.Context.userStorage.saveRectangleAnnotation(e,t,n,r,o,i,a);var c={pageIdx:e,value:{id:t,x:n,y:r,w:o,h:i,c:a}};s({type:Y,payload:c})})}function v(e,t){A.Context.store.dispatch(function(n,r){A.Context.userStorage.deleteRectangleAnnotation(e,t);var o={pageIdx:e,value:t};n({type:X,payload:o}),O(n,r)})}function y(e,t,n){var r=I.getState().annotations.pages[e];if(r){var o=_(t,r.rectangleAnnotations);o&&g(e,o.id,o.x,o.y,o.w,o.h,n)}}function b(e,t,n,r,o,i,a,s){A.Context.store.dispatch(function(u,c){A.Context.userStorage.saveTextAnnotation(e,t,n,r,o,i,a,s);var l={pageIdx:e,value:{id:t,x:n,y:r,w:o,h:i,c:a,t:s}};u({type:K,payload:l})})}function E(e,t){A.Context.store.dispatch(function(n,r){A.Context.userStorage.deleteTextAnnotation(e,t);var o={pageIdx:e,value:t};n({type:Z,payload:o}),O(n,r)})}function w(e,t,n){var r=I.getState().annotations.pages[e];if(r){var o=_(t,r.textAnnotations);o&&b(e,o.id,o.x,o.y,o.w,o.h,n,o.t)}}function x(e,t,n){var r=I.getState().annotations.pages[e];if(r){var o=_(t,r.textAnnotations);o&&b(e,o.id,o.x,o.y,o.w,o.h,o.c,n)}}function T(e){A.Context.store.dispatch(function(t,n){null==e&&(e=""),e!=n().annotations.bookNotes&&(A.Context.userStorage.saveBookNotes(e),t({type:$,payload:e}))})}function C(e,t,n){var r=t==P.AnnotationTool.ELLIPSE?e.ellipseAnnotations:t==P.AnnotationTool.RECTANGLE?e.rectangleAnnotations:e.textAnnotations;return _(n,r)}function N(e,t){if(null==t)return[];for(var n=t.length-1;n>=0;n--)if(t[n].id==e)return t.slice(0,n).concat(t.slice(n+1));return D._clone(t)}function S(e,t){if(null!=t)for(var n=t.length-1;n>=0;n--)if(t[n].id==e)return n;return null}function _(e,t){var n=S(e,t);return null==n?null:t[n]}function O(e,t){var n=t();n.selection.visualAnnotation&&null==R.getSelectedVisualAnnotation(n)&&L.unselectAnnotation()}var P=n(426),A=n(10),I=n(15),M=n(428),R=n(429),L=n(430),k=n(431),D=n(16);t.ANNOTATION_TOOLS=(Q={},Q[P.AnnotationTool.HIGHLIGHT]={title:"Highlight & Notes",icon:k.IconType.MARKER,cursor:"default"},Q[P.AnnotationTool.ELLIPSE]={title:"Ellipse",icon:k.IconType.ELLIPSE,cursor:"crosshair"},Q[P.AnnotationTool.RECTANGLE]={title:"Rectangle",icon:k.IconType.RECTANGLE,cursor:"crosshair"},Q[P.AnnotationTool.TEXT]={title:"Text",icon:k.IconType.TYPE,cursor:"crosshair"},Q),t.ANNOTATION_COLORS=(J={},J[P.AnnotationColor.GREEN]={title:"Green",color:"#0f0"},J[P.AnnotationColor.YELLOW]={title:"Yellow",color:"#ff0"},J[P.AnnotationColor.CYAN]={title:"Cyan",color:"#0ff"},J[P.AnnotationColor.PURPLE]={title:"Purple",color:"#f0f"},J[P.AnnotationColor.BLUE]={title:"Blue",color:"#00f"},J);var B={bookNotes:"",pages:[]},U="annotations/SET_BOOKMARK",F="annotations/ADD_HIGHLIGHT",j="annotations/DELETE_HIGHLIGHT",H="annotations/SET_HIGHLIGHTS",V="annotations/ADD_NOTE",W="annotations/DELETE_NOTE",G="annotations/SET_NOTES",z="annotations/ADD_ELLIPSE",q="annotations/DELETE_ELLIPSE",Y="annotations/ADD_RECTANGLE",X="annotations/DELETE_RECTANGLE",K="annotations/ADD_TEXT",Z="annotations/DELETE_TEXT",$="annotations/BOOK_NOTES";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.setBookmarked=o,t.addHighlight=i,t.deleteHighlight=a,t.setHighlights=s,t.addNote=c,t.deleteNote=l,t.setNotes=p,t.addEllipse=f,t.deleteEllipse=d,t.editEllipseColor=m,t.addRectangle=g,t.deleteRectangle=v,t.editRectangleColor=y,t.addText=b,t.deleteText=E,t.editTextColor=w,t.editTextValue=x,t.setBookNotes=T,t.getVisualAnnotationByToolAndId=C;var Q,J},function(e,t,n){"use strict";function r(e){return"number"==typeof e&&e>=0&&e<s}function o(e,t,n){var r=a.getComputedPageMetadataByIndex(i.getState())[e].wordPlacement;return t>=0&&n<r.getCount()&&t<=n}var i=n(15),a=n(395),s=1e4;t.isValidPageNumber=r,t.isValidPageWordIndexes=o},function(e,t,n){"use strict";var r=n(394),o=n(427);t.getSelectedVisualAnnotation=r.createSelector(function(e){return e.annotations.pages},function(e){return e.selection.visualAnnotation},function(e,t){return null!=t&&e[t.page]?o.getVisualAnnotationByToolAndId(e[t.page],t.tool,t.id):null})},function(e,t,n){"use strict";function r(e,t){void 0===e&&(e=y);var n=null;switch(t.type){case b:n={visualAnnotation:t.payload,words:null};break;case E:n={visualAnnotation:null,editing:!1};break;case w:n={words:t.payload,visualAnnotation:null,editing:!1};break;case x:n={words:null};break;case T:n=t.payload;break;default:return e}return v._assign({},e,n)}function o(e,t,n){var r={page:e,tool:t,id:n};return h.dispatchAction(b,r)}function i(){return h.dispatchAction(E)}function a(e,t,n){if(d.isValidPageWordIndexes(e,t,n)){var r={page:e,first:t,last:n};return h.dispatchAction(w,r)}}function s(){return h.dispatchAction(x)}function u(){var e={editing:!0};return h.dispatchAction(T,e)}function c(){var e={editing:!1};return h.dispatchAction(T,e)}function l(e,t){var n=h.getState(),r=n.selection.visualAnnotation;r&&(r.page<e||r.page>t)&&i();var o=n.selection.words;o&&(o.page<e||o.page>t)&&s()}function p(){var e=h.getState(),t=m.getSelectedVisualAnnotation(e);if(t)switch(e.selection.visualAnnotation.tool){case f.AnnotationTool.ELLIPSE:g.deleteEllipse(e.selection.visualAnnotation.page,t.id);break;case f.AnnotationTool.RECTANGLE:g.deleteRectangle(e.selection.visualAnnotation.page,t.id);break;case f.AnnotationTool.TEXT:g.deleteText(e.selection.visualAnnotation.page,t.id);break;default:console.error("Annotation of type "+e.selection.visualAnnotation.tool+" not supported")}i()}var h=n(15),f=n(426),d=n(428),m=n(429),g=n(427),v=n(16),y={},b="selection/SELECT_ANNOTATION",E="selection/UNSELECT_ANNOTATION",w="selection/SELECT_WORDS",x="selection/UNSELECT_WORDS",T="selection/SET_EDITING";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.selectAnnotation=o,t.unselectAnnotation=i,t.selectWords=a,t.unselectWords=s,t.startEditing=u,t.stopEditing=c,t.unselectIfOutsideNearPages=l,t.deleteSelectedAnnotation=p},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(401);!function(e){e[e.PREVIOUS=0]="PREVIOUS",e[e.NEXT=1]="NEXT",e[e.CONFIG=2]="CONFIG",e[e.PLAY=3]="PLAY",e[e.PAUSE=4]="PAUSE",e[e.BOOKMARK=5]="BOOKMARK",e[e.FIRST=6]="FIRST",e[e.LAST=7]="LAST",e[e.CLOSE=8]="CLOSE",e[e.ARROW_LEFT=9]="ARROW_LEFT",e[e.ARROW_RIGHT=10]="ARROW_RIGHT",e[e.ARROW_LEFT3=11]="ARROW_LEFT3",e[e.ARROW_RIGHT3=12]="ARROW_RIGHT3",e[e.MARKER=13]="MARKER",e[e.ELLIPSE=14]="ELLIPSE",e[e.RECTANGLE=15]="RECTANGLE",e[e.TYPE=16]="TYPE",e[e.DELETE=17]="DELETE",e[e.ANNOTATIONS=18]="ANNOTATIONS",e[e.SEARCH=19]="SEARCH",e[e.ANNOTSPRINT=20]="ANNOTSPRINT",e[e.LAYOUT=21]="LAYOUT",e[e.LAYOUT_SINGLE=22]="LAYOUT_SINGLE",e[e.LAYOUT_SIDE_BY_SIDE=23]="LAYOUT_SIDE_BY_SIDE",e[e.LAYOUT_CONTINUOUS=24]="LAYOUT_CONTINUOUS",e[e.ZOOM_IN=25]="ZOOM_IN",e[e.ZOOM_OUT=26]="ZOOM_OUT",e[e.ZOOM_TO_FIT=27]="ZOOM_TO_FIT",e[e.ZOOM_ONE_TO_ONE=28]="ZOOM_ONE_TO_ONE",e[e.ARROW_DOWN=29]="ARROW_DOWN",e[e.ARROW_UP=30]="ARROW_UP",e[e.PLAY_SPEED=31]="PLAY_SPEED",e[e.CAPTIONS=32]="CAPTIONS",e[e.EXPAND=33]="EXPAND",e[e.COLLAPSE=34]="COLLAPSE",e[e.MENU=35]="MENU",e[e.THUMBNAILS=36]="THUMBNAILS",e[e.PRINT=37]="PRINT",e[e.NOTES=38]="NOTES",e[e.TOOLS=39]="TOOLS",e[e.SETTINGS=40]="SETTINGS",e[e.TOC=41]="TOC",e[e.CHECKMARK=42]="CHECKMARK",e[e.PLUS=43]="PLUS",e[e.MINUS=44]="MINUS",e[e.MENU_OPEN=45]="MENU_OPEN",e[e.REWIND10=46]="REWIND10",e[e.NOTEBOOK=47]="NOTEBOOK",e[e.INFO=48]="INFO",e[e.MAXIMIZE=49]="MAXIMIZE",e[e.RESTORE=50]="RESTORE"}(r=t.IconType||(t.IconType={})),t.ICONS_DATA=(u={},u[r.PREVIOUS]={icon:"previous",title:"Previous"},u[r.NEXT]={icon:"next",title:"Next"},u[r.CONFIG]={icon:"cog",title:"Options"},u[r.PLAY]={icon:"play",title:"Play"},u[r.PAUSE]={icon:"pause",title:"Pause"},u[r.BOOKMARK]={icon:"bookmark",title:"Bookmark"},u[r.FIRST]={icon:"first",title:"First Page"},u[r.LAST]={icon:"last",title:"Last Page"},u[r.CLOSE]={icon:"close",title:"Close"},u[r.ARROW_LEFT]={icon:"arrow-left",title:"Previous"},u[r.ARROW_RIGHT]={icon:"arrow-right",title:"Next"},u[r.ARROW_LEFT3]={icon:"arrow-left3",title:"Previous"},u[r.ARROW_RIGHT3]={icon:"arrow-right3",title:"Next"},u[r.MARKER]={icon:"marker",title:"Highlight & Notes"},u[r.ELLIPSE]={icon:"ellipse",title:"Ellipse"},u[r.RECTANGLE]={icon:"rectangle",title:"Rectangle"},u[r.TYPE]={icon:"type",title:"Text"},u[r.DELETE]={icon:"close",title:"Delete Annotation"},u[r.ANNOTATIONS]={icon:"file2",title:"Show Annotations"},u[r.SEARCH]={icon:"search",title:"Search"},u[r.ANNOTSPRINT]={icon:"list",title:"Annotations and Print"},u[r.LAYOUT]={icon:"font-size",title:"Layout and Zoom"},u[r.LAYOUT_SINGLE]={icon:"layout-single",title:"Single"},u[r.LAYOUT_SIDE_BY_SIDE]={icon:"layout-sidebyside",title:"Side-By-Side"},u[r.LAYOUT_CONTINUOUS]={icon:"layout-continuous2",title:"Continuous"},u[r.ZOOM_IN]={icon:"zoomin",title:"Zoom In"},u[r.ZOOM_OUT]={icon:"zoomout",title:"Zoom Out"},u[r.ZOOM_TO_FIT]={icon:"fit",title:"Zoom to Fit"},u[r.ZOOM_ONE_TO_ONE]={icon:"onetoone",title:"Actual Size"},u[r.ARROW_DOWN]={icon:"arrow-down3",title:"Minimize"},u[r.ARROW_UP]={icon:"arrow-up3",title:"Maximize"},u[r.PLAY_SPEED]={icon:"meter-slow",title:"Play Speed"},u[r.CAPTIONS]={icon:"bubble",title:"Captions"},u[r.EXPAND]={icon:"expand",title:"Expand"},u[r.COLLAPSE]={icon:"contract",title:"Contract"},u[r.MENU]={icon:"menu",title:"Layout and Zoom"},u[r.THUMBNAILS]={icon:"grid",title:"Thumbnails"},u[r.PRINT]={icon:"print",title:"Print"},u[r.NOTES]={icon:"comment-o",title:"Book Notes"},u[r.TOOLS]={icon:"tools",title:"Tools"},u[r.SETTINGS]={icon:"settings",title:"PlaySettings"},u[r.TOC]={icon:"toc",title:"Table of Contents"},u[r.CHECKMARK]={icon:"checkmark",title:"Checked"},u[r.PLUS]={icon:"plus",title:"Zoom In"},u[r.MINUS]={icon:"minus",title:"Zoom Out"},u[r.MENU_OPEN]={icon:"menu-open",title:"Open Menu"},u[r.REWIND10]={icon:"rewind-10",title:"Rewind 10 secs"},u[r.NOTEBOOK]={icon:"note-book",title:"Notes"},u[r.INFO]={icon:"info",title:"Info"},u[r.MAXIMIZE]={icon:"enlarge4",title:"Maximize"},u[r.RESTORE]={icon:"shrink4",title:"Restore"},u);var s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),n.prototype.render=function(){var e=a("icon-"+t.ICONS_DATA[this.props.type].icon,this.props.otherClassName);return i.createElement("span",{className:e,title:t.ICONS_DATA[this.props.type].title,onClick:this.props.onClick})},n}(i.Component);t.Icon=s;var u},function(e,t,n){"use strict";function r(e){s=e}function o(){if(s)return!0;if(a.Context.controlSettings.saveUserSettings){var e=i.getState(),t={annotationColor:e.userSettings.annotationColor,enableAutoPlay:e.userSettings.autoPlayActive,language:e.userSettings.subtitleLanguage,layout:e.userSettings.layout,lectureNotesOn:e.userSettings.lectureNotesOn,playSpeed:e.userSettings.playSpeed,showPlaylist:e.userSettings.playlistOpen,zoom:e.userSettings.zoom};return a.Context.controlSettings.saveUserSettings(t),!0}return!1}var i=n(15),a=n(10),s=!1;t.disableUserSettingsPersistence=r,t.saveUserSettings=o},function(e,t,n){"use strict";var r=n(394),o=n(10),i=n(434);t.isAutoPlayActive=r.createSelector(function(e){return i.getPlaylistTotalTime(e)>0},function(e){return e.userSettings.autoPlayActive},function(e,t){return o.Context.controlSettings.enablePlaylist&&e&&t})},function(e,t,n){"use strict";var r=n(394);t.getPlaylistTotalTime=r.createSelector(function(e){return e.metadata.book&&e.metadata.book.playlist?e.metadata.book.playlist:[]},function(e){return e.reduce(function(e,t){return e+Math.floor(t.duration)},0)})},function(e,t,n){"use strict";var r=n(394),o=n(436);t.getPlaylistNextIndex=r.createSelector(o.getOpenMediaPlaylistIndex,function(e){return e.metadata.book.playlist},function(e,t){return null==t||0==t.length||null==e||e>=t.length-1?null:e+1})},function(e,t,n){"use strict";var r=n(394),o=n(187),i=n(437);t.getOpenMediaPlaylistIndex=r.createSelector(i.getOpenMediaControlName,function(e){return e.metadata.book?e.metadata.book.playlist:null},function(e,t){if(null==e||null==t)return null;for(var n=t.length-1;n>=0;n--)if(o.controlNameOfPlaylistItem(t[n])==e)return n;return null})},function(e,t,n){"use strict";var r=n(394),o=n(188),i=n(438),a=n(439);t.getOpenMediaControlName=r.createSelector(function(e){return e.mediaOpen.controlName},function(e){return e.view.page},i.getPageLectureWithAudio,a.getPageLectureWithNotes,function(e,t,n,r){return null==e?n||r?o.pageLectureControlName(t):null:e})},function(e,t,n){"use strict";var r=n(394),o=n(395);t.getPageLectureWithAudio=r.createSelector(o.getComputedPageMetadataByIndex,function(e){return e.view.page},function(e,t){if(null!=t){var n=e[t];return null!=n&&n.hasPageLectureWithAudio}return null})},function(e,t,n){"use strict";var r=n(394),o=n(395);t.getPageLectureWithNotes=r.createSelector(o.getComputedPageMetadataByIndex,function(e){return e.view.page},function(e,t){if(null!=t){var n=e[t];return null!=n&&n.hasPageLectureWithNotes}return null})},function(e,t,n){"use strict";function r(e,t){void 0===e&&(e=h);var n=null;switch(t.type){case f:n=t.payload;break;case d:n={menuOpen:null};break;case m:n={menuButtonClientPosition:t.payload};break;default:return e}return p._assign({},e,n)}function o(e){s.dispatchAction(f,{menuOpen:e})}function i(e){l.Context.store.dispatch(function(t,n){var r=n().toolbar.menuOpen;if(null==e||r==e)switch(t({type:d}),r){case u.MenuType.Search:c.clearHighlight()}})}function a(e,t){s.dispatchAction(m,{left:e,right:t})}var s=n(15),u=n(426),c=n(441),l=n(10),p=n(16),h={},f="toolbar/OPEN_MENU",d="toolbar/CLOSE_MENU",m="toolbar/SET_MENUBUTTON_CLIENT_POS";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.openMenu=o,t.closeMenu=i,t.setMenuButtonClientPosition=a},function(e,t,n){"use strict";function r(e,t){void 0===e&&(e=g);var n;switch(t.type){case v:n={textServerReady:!0};break;case y:var r=t.payload;n={initialPage:r.initialPage,results:null,resultsHighlight:null,searchText:null,isRequesting:!0};break;case b:n={isRequesting:!0};break;case E:var r=t.payload;null!=e.searchText&&e.searchText!=r.searchText&&console.warn("Search results different from expected"),n={hasMoreBackward:r.hasMoreBackward,hasMoreForward:r.hasMoreForward,searchText:r.searchText,isRequesting:!1},e.results?e.results.length>0&&r.results.length>0&&e.results[0].pageIdx<r.results[0].pageIdx?n.results=e.results.slice().concat(r.results):n.results=r.results.concat(e.results.slice()):n.results=r.results;break;case w:n={initialPage:null,searchText:null,results:null,resultsHighlight:null,isRequesting:!1};break;case x:n={resultsHighlight:null};break;case T:var r=t.payload;n={resultsHighlight:r};break;default:return e}return m._assign({},e,n)}function o(){f.dispatchAction(v)}function i(e,t){p.Context.store.dispatch(function(n,r){var o=r();if(o.search.textServerReady&&!o.search.isRequesting){var i={initialPage:t};n({type:y,payload:i}),C++,p.Context.textServer.searchText(e,t,!0,!0,h.MAX_SEARCH_RESULTS,N(C),S(C))}})}function a(e,t,n){p.Context.store.dispatch(function(r,o){var i=o();if(i.search.textServerReady&&!i.search.isRequesting){var a={initialPage:e};r({type:y,payload:a}),C++,p.Context.textServer.searchSelection(e,t,n,h.MAX_SEARCH_RESULTS,N(C),S(C))}})}function s(e){p.Context.store.dispatch(function(t,n){var r=n();if(r.search.textServerReady&&!r.search.isRequesting&&r.search.results&&(e&&r.search.hasMoreBackward||!e&&r.search.hasMoreForward)){t({type:b});var o=r.search.results.reduce(function(t,n){return e?Math.min(t,n.pageIdx):Math.max(t,n.pageIdx)},r.search.initialPage);o+=e?-1:1,C++,p.Context.textServer.searchText(r.search.searchText,o,e,!e,h.MAX_SEARCH_RESULTS,N(C),S(C))}})}function u(){f.dispatchAction(x)}function c(){f.dispatchAction(w)}function l(e,t){p.Context.store.dispatch(function(n,r){var o=r();if(o.search.results){var i={page:e,positions:t};n({type:T,payload:i}),d.setPage(e)}})}var p=n(10),h=n(387),f=n(15),d=n(442),m=n(16),g={},v="search/READY",y="search/SEARCH_TEXT_START",b="search/SEARCH_TEXT_MORE",E="search/SEARCH_TEXT_DONE",w="search/CLEAR",x="search/CLEAR_HIGHLIGHT",T="search/HIGHLIGHT";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.ready=o;var C=1;t.searchText=i,t.searchSelection=a,t.searchMore=s,t.clearHighlight=u,t.clear=c,t.highlight=l;var N=function(e){return function(t){if(e==C){var n=t;f.dispatchAction(E,n)}}},S=function(e){return function(){e==C&&f.dispatchAction(w)}}},function(e,t,n){"use strict";function r(e,t){void 0===e&&(e=v);var n=null;switch(t.type){case E:n={scale:t.payload};break;case b:n=t.payload;break;case y:n={page:t.payload};break;case w:n={pageMouseCover:t.payload};break;default:return e}return g._assign({},e,n)}function o(e){return c.dispatchAction(E,e)}function i(e){f.Context.store.dispatch(function(t,n){var r=n();return!d.isValidPageNumber(e)||e<0||e>=m.getPageCount(r)?void console.warn("Invalid page '"+e+"'"):void(e!==r.view.page&&(f.Context.userStorage.savePage(e),t({type:y,payload:e}),l.closeIfOutsidePage(e),f.Context.internalEventEmitter.triggerDidPageChange()))})}function a(e,t){f.Context.store.dispatch(function(n,r){var o=r();o.view.visiblePages&&o.view.nearPages&&e.first===o.view.visiblePages.first&&e.last===o.view.visiblePages.last&&t.first===o.view.nearPages.first&&t.last===o.view.nearPages.last||(n({type:b,payload:{visiblePages:e,nearPages:t}}),l.closeIfOutsideVisiblePages(e.first,e.last),p.closeIfOutsidePages(e.first,e.last),h.unselectIfOutsideNearPages(t.first,t.last))})}function s(){c.dispatchAction(w,null)}function u(e){c.dispatchAction(w,e)}var c=n(15),l=n(410),p=n(392),h=n(430),f=n(10),d=n(428),m=n(443),g=n(16),v={page:0,scale:1},y="view/PAGE",b="view/VISIBLE_AND_NEAR_PAGES",E="view/SCALE",w="view/PAGE_MOUSE_COVER";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.setScale=o,t.setPage=i,t.setVisibleAndNearPages=a,t.clearPageMouseCover=s,t.setPageMouseCover=u},function(e,t,n){"use strict";var r=n(394);t.getPageCount=r.createSelector(function(e){return e.metadata.book},function(e){return e?e.pages.length:null})},function(e,t,n){"use strict";function r(e,t){switch(void 0===e&&(e=w),t.type){case x:return b._assign({},e,(n={},n[t.payload.controlName]=t.payload.value,n));case T:return b._omit(e,t.payload);default:return e}var n}function o(e,t){y.Context.store.dispatch(function(n,r){t!=r().controls[e]&&(n({type:x,payload:{controlName:e,value:t}}),y.Context.userStorage.saveControlState(E,e,t))})}function i(e,t){return e[t]}function a(e){y.Context.store.dispatch(function(t,n){null!=n().controls[e]&&(t({type:T,payload:e}),y.Context.userStorage.saveControlState(E,e,void 0))})}function s(e){var t={done:!0};o(e,t)}function u(e,t){var n=i(e,t);return n&&n.done}function c(e){var t={done:!0};o(e,t)}function l(e,t){var n=i(e,t);return n&&n.done}function p(e,t){o(e,t)}function h(e,t){return i(e,t)}function f(e){a(e)}function d(e,t){o(v(e),t)}function m(e,t){return i(e,v(t))}function g(e){a(v(e))}function v(e){return"$qans_"+e}var y=n(10),b=n(16),E=0,w={},x="controls/SET",T="controls/DELETE";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.setControlState=o,t.deleteControlState=a,t.setVideoDone=s,t.isVideoDone=u,t.setLectureDone=c,t.isLectureDone=l,t.setFormControl=p,t.getFormControl=h,t.deleteFormControl=f,t.setQuestion=d,t.getQuestion=m,t.deleteQuestion=g},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderChildren=function(){var e=this;return o.Children.map(this.props.children,function(t){return t?o.cloneElement(t,e.props):null})},t.prototype.render=function(){return this.props.error||0===o.Children.count(this.props.children)?null:o.createElement("div",{className:"video-controls video__controls"},this.renderChildren())},t}(o.Component);t.Controls=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(447),a=n(448),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleVideoOverlayPlay=function(e){t.videoOverlayPlayEl=e},t}return r(t,e),t.prototype.componentDidMount=function(){},t.prototype.renderContent=function(){var e;return e=this.props.error?o.createElement("div",{className:"video-overlay__error"},o.createElement("p",{className:"video-overlay__error-text"},this.props.copyKeys.sourceError)):this.props.loading?o.createElement("div",{className:"video-overlay__loader"},o.createElement(i.Spinner,null)):o.createElement("div",{className:"video-overlay__play",onClick:this.props.togglePlay,ref:this.handleVideoOverlayPlay},this.props.paused?o.createElement(a.PlayIcon,null):null)},t.prototype.render=function(){return o.createElement("div",{className:"video-overlay"},this.renderContent())},t}(o.Component);t.Overlay=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"video-spinner"},o.createElement("div",{className:"video-spinner__rect1"}),o.createElement("div",{className:"video-spinner__rect2"}),o.createElement("div",{className:"video-spinner__rect3"}),o.createElement("div",{className:"video-spinner__rect4"}),o.createElement("div",{className:"video-spinner__rect5"}))},t}(o.Component);t.Spinner=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(431),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:"playicon"},o.createElement(i.Icon,{type:i.IconType.PLAY,otherClassName:"playicon__icon"}))},t}(o.Component);t.PlayIcon=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(431),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("button",{onClick:this.props.onClick,className:"video-collapse video__control","aria-label":this.props.copyKeys.collapse},o.createElement(i.Icon,{type:i.IconType.COLLAPSE}))},t}(o.Component);t.Collapse=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(431),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("button",{onClick:this.props.onClick,className:"video-expand video__control","aria-label":this.props.copyKeys.expand},o.createElement(i.Icon,{type:i.IconType.EXPAND}))},t}(o.Component);t.Expand=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(431),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("button",{onClick:this.props.onClick,className:"video-close video__control","aria-label":this.props.copyKeys.expand},o.createElement(i.Icon,{type:i.IconType.CLOSE}))},t}(o.Component);t.Close=a},function(e,t){"use strict";var n=function(){function e(t){var n=this;this.textCueIdx=99999,this.textCues=[];var r=e.fromSrt(t);if(r.length>0){var o=0;r.forEach(function(e){(0==n.textCues.length||e.start>n.textCues[n.textCues.length-1].start)&&(e.start>o&&n.textCues.push({start:o,text:void 0}),n.textCues.push({start:Math.max(e.start,.001),text:e.text}),o=e.end)}),this.textCues.length>0&&o>this.textCues[this.textCues.length-1].start&&this.textCues.push({start:o,text:void 0})}this.reset()}return e.prototype.getUpdate=function(e){var t=-1;if(void 0!=this.textCues){var n=null;if(this.textCueIdx>=this.textCues.length||this.textCueIdx<0||e<this.textCues[this.textCueIdx].start?n=0:this.textCueIdx<this.textCues.length-1&&this.textCues[this.textCueIdx+1].start<=e&&(n=this.textCueIdx+2),null==n)t=this.textCueIdx;else for(t=this.textCues.length-1;n<this.textCues.length;n++)if(e<this.textCues[n].start){t=n-1;break}}if(t!=this.textCueIdx){var r=void 0;return r=t<0?void 0:this.textCues[t].text,void 0==r&&(r=""),this.textCueIdx=t,r}return null},e.prototype.reset=function(){this.textCueIdx=99999},e.fromSrt=function(t){var n=[];if(t){t=t.replace(/\r\n|\r|\n/g,"\n"),t=e.srtStrip(t);var r=t.split("\n\n");for(var o in r){var i=r[o].trim().split("\n");if(i.length>=2){var a=i[1].split(" --> ");if(a.length>=2){var s=e.srtToSeconds(e.srtStrip(a[0])),u=e.srtToSeconds(e.srtStrip(a[1]));n.push({start:s,end:u,text:i.slice(2).join("\n")})}}}}return n},e.toSrt=function(t){var n="";return t.forEach(function(t,r){n+=(r+1).toString()+"\n"+e.secondsToSrt(t.start)+" --> "+e.secondsToSrt(t.end)+"\n"+t.text.trim().replace(/\n+/g,"\n")+"\n\n"}),n},e.srtStrip=function(e){return e.replace(/^\s+|\s+$/g,"")},e.srtToSeconds=function(e){var t=0;if(e)for(var n=e.split(":"),r=0;r<n.length;r++)t=60*t+parseFloat(n[r].replace(",","."));return t},e.secondsToSrt=function(e){var t=Math.floor(e),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),o=t-3600*n-60*r,i=Math.round(1e3*(e-t));return("0"+n).substr(-2)+":"+("0"+r).substr(-2)+":"+("0"+o).substr(-2)+","+("00"+i).substr(-3)},e}();t.SubtitleReader=n},function(e,t){"use strict";t.getVideoControlInitialTime=function(e){return function(t){var n=t.videos;return n&&e&&n[e]?n[e].initialTime:0}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);
e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(392),s=n(401),u=n(387),c=n(403),l=n(16),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.active?a.closeWindow(t.props.control.name):a.openWindow(t.props.control.name)},t}return r(t,e),t.prototype.render=function(){var e=s("pageButton pageButton--formAnswer pane pane--bordered pane--condensed"),t="left"==this.props.control.anchor,n=c.calcControlBaseStyle(this.props.control,this.props.zoom,u.ZINDEX_FORM_BUTTON),r={transform:(t?"translate(-100%, -100%) rotate(-90deg)":"translate(0, -100%) rotate(90deg)")+("scale("+this.props.zoom+")"),transformOrigin:t?"right bottom":"left bottom"};l._assign(n,r);var i=s("pageButton__item showBtn",{active:this.props.active});return o.createElement("ul",{className:e,style:n},o.createElement("li",{className:i,onClick:this.handleClick},this.props.active?"Hide":"Show"))},t}(o.Component);t.Component=p;var h=function(e,t){return{active:!!e.popupWindows[t.control.name],zoom:e.view.scale}},f=i.connect(h)(p);t.PageControlFormAnswerButton=f},function(e,t,n){"use strict";function r(e){e.solution=!!e.solution}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(367),s=n(426),u=n(401),c=n(387),l=n(403),p=n(456),h=n(444),f=n(16),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.doSaveControlValue(!t.props.state||!t.props.state.value)},t}return o(t,e),t.prototype.render=function(){var e=l.calcControlBaseStyle(this.props.control,this.props.zoom,c.ZINDEX_FORM_BUTTON),t=f._assign(e,{fontSize:e.width}),n=this.props.formMode==s.FormMode.SOLUTION?!!this.props.control.solution:this.props.state?!!this.props.state.value:!!this.props.control.value,r=u("formControl","checkbox",this.doCalcFormModeClass(this.props.formMode,null,p.isValueCorrect(n,!!this.props.control.solution)));return i.createElement("div",null,i.createElement("input",{type:"checkbox",name:this.props.control.name,className:r,style:e,ref:this.doHandleRef,onChange:this.handleClick,onFocus:this.doHandleFocus,onKeyDown:this.doHandleKeyDown,checked:n}),i.createElement("label",{className:"formControl",style:t,onClick:this.handleClick,htmlFor:this.props.control.name},i.createElement("div",{className:"icon-checkmark"})))},t}(p.PageControlCustomFormControl);t.Component=d,t.fixProperties=r;var m=function(e,t){return{formMode:e.forms[t.control.formName]?e.forms[t.control.formName]:s.FormMode.REGULAR,state:h.getFormControl(e.controls,t.control.name),zoom:e.view.scale}},g=a.connect(m)(d);t.PageControlFormCheckbox=g},function(e,t,n){"use strict";function r(e,t){if(null==t)return null;var n;return void 0==e?n="boolean"==typeof t&&!t:(n=e==t,n||"number"!=typeof e||(n=Math.abs(e-c.parseFloatNumber(t))<g)),n}function o(e,t){return null==t?null==e||"string"==typeof e&&""===e.trim():r(e,t)}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(193),s=n(426),u=n(457),c=n(458),l=n(444),p=n(444),h=n(459),f=n(460),d=n(10),m=n(16),g=1e-6,v="solution",y="correct",b="incorrect",E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.doHandleFocus=function(){t.props.formMode!=s.FormMode.REGULAR&&u.setFormMode(t.props.control.formName,s.FormMode.REGULAR)},t.doHandleKeyDown=function(e){if(e.keyCode==f.KEYCODE_TAB){var n=h.getTabOrderNeighbourByControlName(t.props.store.getState())[t.props.control.name];if(n){e.preventDefault();var r=void 0;r=e.shiftKey?n.previous:n.next,d.Context.internalEventEmitter.triggerNeedFocusControl(r)}}},t.doHandleRef=function(e){t.ref=e,e?d.Context.internalEventEmitter.bindNeedFocusControl(t.handleNeedFocusControl):d.Context.internalEventEmitter.unbindNeedFocusControl(t.handleNeedFocusControl)},t.handleNeedFocusControl=function(e){e==t.props.control.name&&t.ref&&t.ref.focus()},t.debouncedUpdateStateGradeIfSolutionExchangeDifferent=m._debounce(function(e){null==e||void 0!==t.props.state&&t.props.state.correct===e||p.setFormControl(t.props.control.name,{value:void 0===t.props.state?void 0:t.props.state.value,correct:e})},0),t}return i(t,e),t.prototype.shouldSaveControlValue=function(e){return!(this.props.control.readOnly||this.props.state&&this.props.state.value===e)},t.prototype.doSaveControlValue=function(e){if(this.shouldSaveControlValue(e)){var t={value:e};this.isControlValueCorrect(e,this.props.control.solution)&&(t.correct=!0),l.setFormControl(this.props.control.name,t)}},t.prototype.isControlValueCorrect=function(e,t){return r(e,t)},t.prototype.doCalcFormModeClass=function(e,t,n){switch(e){case s.FormMode.SOLUTION:return v;case s.FormMode.GRADE:return(null!=t?t:n)?y:b;default:return null}},t}(a.Component);t.PageControlCustomFormControl=E,t.isValueCorrect=r,t.isValueCorrectEx=o},function(e,t,n){"use strict";function r(e,t){switch(void 0===e&&(e=s),t.type){case u:var n=a._clone(e);return n[t.payload.formName]=t.payload.mode,n;default:return e}}function o(e,t){i.dispatchAction(u,{formName:e,mode:t})}var i=n(15),a=n(16),s={},u="controls/SET";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.setFormMode=o},function(e,t){"use strict";function n(e,t,n,o){if(null==e)return"";void 0==t&&(t="$");var i,a;return e>=0?(i=t,a=""):(i="("+t,a=")",e=-e),i+r(e,n,o)+a}function r(e,t,n){var r=a(Math.abs(e),n,".",",");if(n>0){for(var o=t;o<n&&"0"==r[r.length-1];o++)r=r.substr(0,r.length-1);"."==r[r.length-1]&&(r=r.substr(0,r.length-1))}return r}function o(e,t,r){return n(e,"",t,r)}function i(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(e,t,n,r){var o,i=(e+"").replace(/[^0-9+\-Ee.]/g,""),a=isFinite(+i)?+i:0,s=isFinite(+t)?Math.abs(t):0,u="undefined"==typeof r?",":r,c="undefined"==typeof n?".":n,l=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};return o=(s?l(a,s):""+Math.round(a)).split("."),o[0].length>3&&(o[0]=o[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,u)),(o[1]||"").length<s&&(o[1]=o[1]||"",o[1]+=new Array(s-o[1].length+1).join("0")),o.join(c)}function s(e){if(null===e||void 0===e)return null;if(e=e.replace(/\s+|\$|£|,|\s+/g,""),e.length<=0)return null;var t=u(e);return!isNaN(t),t}function u(e){if(null===e||void 0===e)return null;e=e.replace(/\s+|,|\s+/g,"");var t=!1;"%"==e.substr(-1,1)&&(t=!0,e=e.substr(0,e.length-1));var n=1;if("("==e.charAt(0)&&")"==e.charAt(e.length-1)?(e=e.substr(1,e.length-2),n=-1):"-"==e.charAt(0)&&(e=e.substr(1,e.length-1),n=-1),/^[0-9]*(\.[0-9]+)?$/.test(e)){var r=parseFloat(e);return!isNaN(r)&&t&&(r/=100),r*n}return NaN}function c(e){return e===+e&&e===(0|e)}t.formatCurrency=n,t.formatFloatUnsigned=r,t.formatNumber=o,t.htmlEscape=i,t.parseCurrency=s,t.parseFloatNumber=u,t.isInteger=c},function(e,t,n){"use strict";var r=n(394),o=n(390);t.getTabOrderNeighbourByControlName=r.createSelector(function(e){return e.metadata.pages},function(e){var t={};return e.forEach(function(e){if(e){var n={};e.multimedia.forEach(function(e){(e.type==o.ControlType.FORMCHECKBOX||e.type==o.ControlType.FORMCOMBOBOX||e.type==o.ControlType.FORMTEXTBOX||e.type==o.ControlType.FORMEDITBOX&&!e.readOnly)&&e.formName&&(n[e.formName]||(n[e.formName]=[]),n[e.formName].push(e))});var r=function(e){if(n.hasOwnProperty(e)){var r=n[e];r.length>1&&(r.sort(function(e,t){return(e.tabIndex?e.tabIndex:0)-(t.tabIndex?t.tabIndex:0)}),r.forEach(function(e,n){t[e.name]={previous:r[(n+(r.length-1))%r.length].name,next:r[(n+1)%r.length].name}}))}};for(var i in n)r(i)}}),t})},function(e,t){"use strict";t.KEYCODE_TAB=9,t.KEYCODE_ENTER=13,t.KEYCODE_ESCAPE=27,t.IOS_KEY_ENTER="Enter"},function(e,t,n){"use strict";function r(e){return e&&void 0!=e.value?e.value:""}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(367),s=n(426),u=n(401),c=n(387),l=n(403),p=n(456),h=n(444),f=n(462),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.doSaveControlValue(e.target.value)},t}return o(t,e),t.prototype.componentWillMount=function(){this.debouncedUpdateStateGradeIfSolutionExchangeDifferent(this.props.solutionExchangeGrade)},t.prototype.componentWillReceiveProps=function(e){this.debouncedUpdateStateGradeIfSolutionExchangeDifferent(e.solutionExchangeGrade)},t.prototype.render=function(){var e=l.calcTransformedControlBaseStyle(this.props.control,this.props.zoom,c.ZINDEX_FORM_BUTTON),t=(this.props.formMode==s.FormMode.SOLUTION?this.props.control.solution:r(this.props.state))||"",n=u("formControl formComboBox pane pane--bordered pane--condensed",this.doCalcFormModeClass(this.props.formMode,this.props.solutionExchangeGrade,p.isValueCorrect(t,this.props.control.solution))),o=[i.createElement("option",{value:"-1",key:""})];return this.props.control.options.split(";").forEach(function(e,t){o.push(i.createElement("option",{value:(t+1).toString(),key:t+1},e))}),i.createElement("select",{className:n,style:e,ref:this.doHandleRef,onChange:this.handleChange,onFocus:this.doHandleFocus,onKeyDown:this.doHandleKeyDown,value:t},o)},t}(p.PageControlCustomFormControl);t.Component=d,t.getComboBoxControlValue=r;var m=function(e,t){return{formMode:e.forms[t.control.formName]?e.forms[t.control.formName]:s.FormMode.REGULAR,solutionExchangeGrade:f.getBestSolutionExchangeGradeByControlName(e)[t.control.name],state:h.getFormControl(e.controls,t.control.name),zoom:e.view.scale}},g=a.connect(m)(d);t.PageControlFormCombobox=g},function(e,t,n){"use strict";function r(e,t,n){for(var r=o(e,t,n),i=s(r,e.inputGroups.groups.length,e.inputGroups.controlsPerGroup),a=m(i),u={},c=0,l=a;c<l.length;c++){var p=l[c],h=p[0],d=p[1];f._assign(u,r[h][d])}return u}function o(e,t,n){for(var r={},o=e.inputGroups.groups.length-1;o>=0;o--){r[o]={};for(var s=e.inputGroups.groups.length-1;s>=0;s--)r[o][s]=a(e.inputGroups,t,n,o,s),e.fullMatch&&i(r[o][s],e.inputGroups.groups[o].controlNames)}return r}function i(e,t){t.every(function(t){return e[t]})||t.forEach(function(t){return e[t]=!1})}function a(e,t,n,r,o){for(var i={},a=void 0,s=e.controlsPerGroup-1;s>=0;s--){var u=e.groups[r].controlNames[s],f=t.findControlByControlName(u),d=e.groups[o].controlNames[s],m=t.findControlByControlName(d);if(void 0===a?a=t.findPageIndexByControlName(u):t.findPageIndexByControlName(u)!==a&&console.error('Input control "'+u+'" belongs to a different page index ('+a+") than other controls"),f)if(m){var g=null;switch(f.type){case h.ControlType.FORMEDITBOX:g=p.getEditBoxControlValue(f,n[u]);break;case h.ControlType.FORMCOMBOBOX:g=l.getComboBoxControlValue(n[u]);break;default:console.error("No input groups support for control of type "+h.ControlType[f.type])}i[u]=c.isValueCorrectEx(g,m.solution)}else console.error('Solution control "'+d+'" not found');else console.error('Input control "'+u+'" not found')}return i}function s(e,t,n){for(var r=[],o=t-1;o>=0;o--){r[o]=[];for(var i=t-1;i>=0;i--){var a=e[o][i],s=n;for(var u in a)a[u]&&s--;r[o][i]=s}}return r}var u=n(394),c=n(456),l=n(461),p=n(463),h=n(390),f=n(16),d=n(393),m=n(571);t.getBestSolutionExchangeGradeByControlName=u.createSelector(d.getControlMapping,function(e){return e.controls},function(e,t){var n={};return e.getSolutionExchanges().forEach(function(o){var i=r(o,e,t);f._assign(n,i)}),n})},function(e,t,n){"use strict";function r(e,t){console.warn(e+"\n"+t)}function o(e){e.format!==N?(e.format!==x&&e.format!==C&&(e.format=T),void 0==e.decimalDigits&&(e.decimalDigits=S),null==e.minDecimalDigits&&(e.minDecimalDigits=e.decimalDigits),null!=e.formula&&e.formula.trim().length>0?e.readOnly=!0:e.formula=null,null!=e.solution&&""===e.solution.toString().trim()&&(e.solution=null)):e.format=N}function i(e,t){return t&&void 0!==t.value?t.value:e.value}var a,s=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},u=n(193),c=n(367),l=n(426),p=n(401),h=n(387),f=n(403),d=n(456),m=n(444),g=n(460),v=n(458),y=n(464),b=n(467),E=n(462),w=n(11);!function(e){e[e.Currency=0]="Currency",e[e.Number=1]="Number",e[e.Percent=2]="Percent",e[e.String=3]="String"}(a||(a={}));var x="currency",T="number",C="percent",N="string",S=2,_=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({inputText:e.target.value})},n.handleFocus=function(){n.props.control.readOnly||(n.setState({focused:!0,inputText:n.getControlValueAsStr()}),n.doHandleFocus())},n.handleBlur=function(){n.props.control.readOnly||(n.setState({focused:!1}),n.saveInputText())},n.handleKeyUp=function(e){e.keyCode==g.KEYCODE_ENTER&&n.state.focused&&n.saveInputText()},n.state={},n}return s(t,e),t.prototype.componentWillMount=function(){this.debouncedUpdateStateGradeIfSolutionExchangeDifferent(this.props.solutionExchangeGrade)},t.prototype.componentWillReceiveProps=function(e){this.debouncedUpdateStateGradeIfSolutionExchangeDifferent(e.solutionExchangeGrade)},t.prototype.render=function(){var e=!this.props.control.readOnly,t=f.calcTransformedControlBaseStyle(this.props.control,this.props.zoom,h.ZINDEX_FORM_BUTTON);t.lineHeight=t.height,t.padding="0 1px",t.fontSize=w.isIOSDevice()?"12px":"14px",t.resize="none";var n,r=this.getControlValue();switch(this.props.formMode){case l.FormMode.REGULAR:n=this.state.focused?this.state.inputText:this.formatValue(r);break;case l.FormMode.SOLUTION:n=this.formatValue(e?this.props.control.solution:r);break;case l.FormMode.GRADE:n=this.formatValue(r)}var o=p("formControl",this.props.control.fontSize||this.props.control.fontStyle||"",this.props.control.fontBold?" bold":"",this.props.control.fontItalic?" italic":"",{numberEditField:this.getFormat()!=a.String},{textEditField:this.getFormat()==a.String},e?this.doCalcFormModeClass(this.props.formMode,this.props.solutionExchangeGrade,d.isValueCorrectEx(r,this.props.control.solution)):null);return u.createElement("input",{type:"editbox",className:o,spellCheck:!0,style:t,ref:this.doHandleRef,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.doHandleKeyDown,onKeyUp:this.handleKeyUp,readOnly:this.props.control.readOnly,value:n})},t.prototype.isControlValueCorrect=function(e,t){return d.isValueCorrectEx(e,t)},t.prototype.saveInputText=function(){var e;if(this.getFormat()==a.String)e=this.state.inputText;else{var t=this.state.inputText.replace(/\s+/g,"");if(""===t)e=null;else if(e=this.parseValue(t),isNaN(e))return void r("Value Error","Your entry is invalid because\n Value entered is not appropriate for this cell type.")}this.doSaveControlValue(e)},t.prototype.parseValue=function(e){switch(this.getFormat()){case a.Number:return v.parseFloatNumber(e);case a.Currency:return v.parseCurrency(e);case a.Percent:return v.parseFloatNumber(e);default:return NaN}},t.prototype.getFormat=function(){switch(this.props.control.format){case x:return a.Currency;case C:return a.Percent;case N:return a.String;default:return a.Number}},t.prototype.formatValue=function(e){var t=this.getFormat();if(!(t!==a.Number&&t!==a.Currency&&t!==a.Percent||!isNaN(e)&&""!==e&&void 0!==e&&null!==e))return"";switch(t){case a.Number:return v.formatNumber(e,this.props.control.minDecimalDigits,this.props.control.decimalDigits);case a.Currency:return v.formatCurrency(e,this.props.control.currencySymbol,this.props.control.minDecimalDigits,this.props.control.decimalDigits);case a.Percent:var n=v.formatFloatUnsigned(100*e,this.props.control.minDecimalDigits,this.props.control.decimalDigits)+"%";return e<0&&(n="-"+n),n;default:return void 0==e?"":e}},t.prototype.getControlValue=function(){return this.getFormat()!==a.String&&null!=this.props.control.formula?null==this.props.calculatedValue?null:b.math.number(this.props.calculatedValue):i(this.props.control,this.props.state)},t.prototype.getControlValueAsStr=function(){var e=this.getControlValue();return null==e?"":e.toString()},t}(d.PageControlCustomFormControl);t.Component=_,t.fixProperties=o,t.getEditBoxControlValue=i;var O=function(e,t){return{calculatedValue:null!=t.control.formula?y.getFormulaCalculatedValues(e)[t.control.name]:null,solutionExchangeGrade:E.getBestSolutionExchangeGradeByControlName(e)[t.control.name],formMode:e.forms[t.control.formName]?e.forms[t.control.formName]:l.FormMode.REGULAR,state:m.getFormControl(e.controls,t.control.name),zoom:e.view.scale}},P=c.connect(O)(_);t.PageControlFormEditbox=P},function(e,t,n){"use strict";var r=n(394),o=n(426),i=n(393),a=n(465),s=n(466),u=n(444),c=n(467);t.getFormulaCalculatedValues=r.createSelector(i.getControlMapping,a.getFormulaHolderControlNames,function(e){return e.controls},function(e){return e.forms},function(e,t,n,r){function i(t){var i=e.findControlByControlName(t);if(null==i)return console.error("No control with varName "+t),null;if(null!=i.formula)return null;if(s.hasSolution(i.solution)&&r[i.formName]==o.FormMode.SOLUTION)return c.math.bignumber(i.solution);var a=u.getFormControl(n,i.name),l=null!=a?a.value:i.value;return null!=l?c.math.bignumber(l):null}var a,l={};do a=!1,t.forEach(function(t){var n=e.findControlByControlName(t);if(void 0==l[t])try{var r=c.math.parse(n.formula),o={},s=!1;r.traverse(function(e,t,n){if(e.isSymbolNode){var r=l[e.name];null==r&&(r=i(e.name)),null!=r?o[e.name]=r:s=!0}}),s||(l[t]=r.compile().eval(o),a=!0)}catch(e){l[t]=Number.NaN,a=!0}});while(a);return l})},function(e,t,n){"use strict";var r=n(394),o=n(390);t.getFormulaHolderControlNames=r.createSelector(function(e){return e.metadata.pages},function(e){var t=[];return e.forEach(function(e){e&&e.multimedia.forEach(function(e){e.type==o.ControlType.FORMEDITBOX&&e.formula&&t.indexOf(e.name)==-1&&t.push(e.name)})}),t})},function(e,t){"use strict";function n(e){return null!=e}t.hasSolution=n},function(e,t,n){"use strict";function r(e){function t(t,n,r){var o=!!(l(r)?e.number(r):r);return o?t:n}function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.bignumber(t.reduce(function(t,n){return e.add(t,n)},0))}function r(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.bignumber(t.reduce(function(t,n){return e.multiply(t,n)},1))}function o(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];p(t?"FV":"PV",3,5,n);var o=e.bignumber(n[0]);if(o<=-1)throw"PV/FV rate operand must be higher than -1.0!";var s=e.bignumber(n[1]),u=e.bignumber(n[2]),c=e.bignumber(0);n.length>3&&(c=n[3]);var l=0;return n.length>4&&(l=e.number(n[4])),t?i(o,s,u,c,l):a(o,s,u,c,l)}}function i(t,n,r,o,i){var a=e.pow(e.add(t,1),n),s=e.multiply(r,e.divide(e.subtract(a,1),t));return 1==i&&(s=e.multiply(s,e.add(t,1))),e.unaryMinus(e.add(e.multiply(o,a),s))}function a(t,n,r,o,i){var a=e.pow(e.add(t,1),n),s=e.multiply(r,e.divide(e.subtract(a,1),t));return 1==i&&(s=e.multiply(s,e.add(t,1))),e.unaryMinus(e.divide(e.add(o,s),a))}function s(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];p("NPER",2,5,t);var r=e.bignumber(t[0]);if(r<=-1)throw"NPER rate operand must be higher than -1.0!";var o=e.bignumber(t[1]),i=e.bignumber(0);t.length>2&&(i=e.bignumber(t[2]));var a=e.bignumber(0);t.length>3&&(a=e.bignumber(t[3]));var s=0;return t.length>4&&(s=e.number(t[4])),1==s&&(o=e.multiply(o,e.add(r,1))),e.divide(e.log(e.divide(e.subtract(o,e.multiply(a,r)),e.add(o,e.multiply(r,i)))),e.log(e.add(r,1)))}function u(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];p("PMT",4,5,t);var r=e.bignumber(t[0]);if(r<=-1)throw"PMT interest operand must be higher than -1.0!";var o=e.bignumber(t[1]),i=e.bignumber(t[2]),a=e.bignumber(t[3]),s=0;t.length>4&&(s=parseInt(t[4]));var u=e.unaryMinus(e.multiply(e.divide(r,e.subtract(e.pow(e.add(r,1),o),1)),e.add(e.multiply(i,e.pow(e.add(r,1),o)),a)));return 0!=s&&(u=e.divide(u,e.add(r,1))),u}function c(t,n){return e.round(t,n)}function l(t){return"BigNumber"==e.typeof(t)}function p(e,t,n,r){if(r.length<t)throw e+" requires at least "+t+" operands!";if(r.length>n)throw e+" requires only "+n+" operands!"}e.import({ADD:n,FV:o(!0),IF:t,NPER:s,PMT:u,PRODUCT:r,PV:o(!1),ROUND:c,SUM:n})}var o=n(468);t.math=o.create(),t.math.config({number:"BigNumber"}),t.math.import(n(480)),t.math.import(n(485)),t.math.import(n(486)),t.math.import(n(506)),t.math.import(n(518)),t.math.import(n(509)),t.math.import(n(519)),t.math.import(n(521)),t.math.import(n(514)),t.math.import(n(512)),t.math.import(n(524)),t.math.import(n(534)),r(t.math)},function(e,t,n){e.exports=n(469)},function(e,t,n){var r=n(470).isFactory,o=(n(470).deepExtend,n(471)),i=n(475),a=n(477),s=n(479);t.create=function(e){function t(e){if(!r(e))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var o,i=n.indexOf(e);return i===-1?(o=e.math===!0?e.factory(c.type,l,t,c.typed,c):e.factory(c.type,l,t,c.typed),n.push(e),u.push(o)):o=u[i],o}if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var n=[],u=[],c=i.mixin({});c.type={},c.expression={transform:Object.create(c)},c.typed=o.create(c.type);var l={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1};return c.import=t(a),c.config=t(s),e&&c.config(e),c}},function(e,t){"use strict";t.clone=function e(t){var n=typeof t;if("number"===n||"string"===n||"boolean"===n||null===t||void 0===t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map(function(t){return e(t)});if(t instanceof Number)return new Number(t.valueOf());if(t instanceof String)return new String(t.valueOf());if(t instanceof Boolean)return new Boolean(t.valueOf());if(t instanceof Date)return new Date(t.valueOf());if(t&&t.isBigNumber===!0)return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);var r={};for(var o in t)t.hasOwnProperty(o)&&(r[o]=e(t[o]));return r},t.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t.deepExtend=function e(t,n){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n)if(n.hasOwnProperty(r))if(n[r]&&n[r].constructor===Object)void 0===t[r]&&(t[r]={}),t[r].constructor===Object?e(t[r],n[r]):t[r]=n[r];else{if(Array.isArray(n[r]))throw new TypeError("Arrays are not supported by deepExtend");t[r]=n[r]}return t},t.deepEqual=function(e,n){var r,o,i;if(Array.isArray(e)){if(!Array.isArray(n))return!1;if(e.length!=n.length)return!1;for(o=0,i=e.length;o<i;o++)if(!t.deepEqual(e[o],n[o]))return!1;return!0}if(e instanceof Object){if(Array.isArray(n)||!(n instanceof Object))return!1;for(r in e)if(!t.deepEqual(e[r],n[r]))return!1;for(r in n)if(!t.deepEqual(e[r],n[r]))return!1;return!0}return typeof e==typeof n&&e==n},t.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(e){}return!1},t.lazy=function(e,n,r){if(t.canDefineProperty()){var o,i=!0;Object.defineProperty(e,n,{get:function(){return i&&(o=r(),i=!1),o},set:function(e){o=e,i=!1},configurable:!0,enumerable:!0})}else e[n]=r()},t.traverse=function(e,t){var n=e;if(t)for(var r=t.split("."),o=0;o<r.length;o++){var i=r[o];i in n||(n[i]={}),n=n[i]}return n},t.isFactory=function(e){return e&&"function"==typeof e.factory}},function(e,t,n){var r=n(472),o=n(473).digits,i=function(){return i=r.create,r};t.create=function(e){var t=i();return t.types=[{name:"number",test:function(e){return"number"==typeof e}},{name:"Complex",test:function(e){return e&&e.isComplex}},{name:"BigNumber",test:function(e){return e&&e.isBigNumber}},{name:"Fraction",test:function(e){return e&&e.isFraction}},{name:"Unit",test:function(e){return e&&e.isUnit}},{name:"string",test:function(e){return"string"==typeof e}},{name:"Array",test:Array.isArray},{name:"Matrix",test:function(e){return e&&e.isMatrix}},{name:"DenseMatrix",test:function(e){return e&&e.isDenseMatrix}},{name:"SparseMatrix",test:function(e){return e&&e.isSparseMatrix}},{name:"ImmutableDenseMatrix",test:function(e){return e&&e.isImmutableDenseMatrix}},{name:"Range",test:function(e){return e&&e.isRange}},{name:"Index",test:function(e){return e&&e.isIndex}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"ResultSet",test:function(e){return e&&e.isResultSet}},{name:"Help",test:function(e){return e&&e.isHelp}},{name:"function",test:function(e){return"function"==typeof e}},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],t.conversions=[{from:"number",to:"BigNumber",convert:function(t){if(o(t)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e.BigNumber(t)}},{from:"number",to:"Complex",convert:function(t){return new e.Complex(t,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(t){return new e.Complex(t.toNumber(),0)}},{from:"Fraction",to:"Complex",convert:function(t){return new e.Complex(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){if(o(t)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to Fraction (value: "+t+"). Use function fraction(x) to convert to Fraction.");return new e.Fraction(t)}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(t){return new e.BigNumber(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return new e.Fraction(+t)}},{from:"boolean",to:"string",convert:function(e){return+e}},{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new e.BigNumber(0)}},{from:"null",to:"Fraction",convert:function(){return new e.Fraction(0)}},{from:"Array",to:"Matrix",convert:function(t){return new e.DenseMatrix(t)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],t}},function(e,t,n){var r,o,i;!function(n,a){o=[],r=a,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(){function e(){function t(e){for(var t,n=0;n<x.types.length;n++){var r=x.types[n];if(r.name===e){t=r.test;break}}if(!t){var o;for(n=0;n<x.types.length;n++)if(r=x.types[n],r.name.toLowerCase()==e.toLowerCase()){o=r.name;break}throw new Error('Unknown type "'+e+'"'+(o?'. Did you mean "'+o+'"?':""))}return t}function n(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(r.signatures&&""!=r.name)if(""==t)t=r.name;else if(t!=r.name){var o=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw o.data={actual:r.name,expected:t},o}}return t}function r(e,t,n,r,o){var i,a=d(r),s=o?o.split(","):null,u=e||"unnamed",c=s&&m(s,"any"),l={fn:e,index:n,actual:r,expected:s};i=s?t>n&&!c?"Unexpected type of argument in function "+u+" (expected: "+s.join(" or ")+", actual: "+a+", index: "+n+")":"Too few arguments in function "+u+" (expected: "+s.join(" or ")+", index: "+n+")":"Too many arguments in function "+u+" (expected: "+n+", actual: "+t+")";var p=new TypeError(i);return p.data=l,p}function o(e){this.name=e||"refs",this.categories={}}function i(e,t){if("string"==typeof e){var n=e.trim(),r="..."===n.substr(0,3);if(r&&(n=n.substr(3)),""===n)this.types=["any"];else{this.types=n.split("|");for(var o=0;o<this.types.length;o++)this.types[o]=this.types[o].trim()}}else{if(!Array.isArray(e)){if(e instanceof i)return e.clone();throw new Error("String or Array expected")}this.types=e}this.conversions=[],this.varArgs=r||t||!1,this.anyType=this.types.indexOf("any")!==-1}function a(e,t){var n;if("string"==typeof e)n=""!==e?e.split(","):[];else{if(!Array.isArray(e))throw new Error("string or Array expected");n=e}this.params=new Array(n.length);for(var r=0;r<n.length;r++){var o=new i(n[r]);if(this.params[r]=o,r===n.length-1)this.varArgs=o.varArgs;else if(o.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."')}this.fn=t}function s(e,t,n){this.path=e||[],this.param=e[e.length-1]||null,this.signature=t||null,this.childs=n||[]}function u(e){var t,n,r={},o=[];for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];if(t=new a(i,s),t.ignore())continue;var u=t.expand();for(n=0;n<u.length;n++){var c=u[n],l=c.toString(),p=r[l];if(p){var h=a.compare(c,p);if(h<0)r[l]=c;else if(0===h)throw new Error('Signature "'+l+'" is defined twice')}else r[l]=c}}for(l in r)r.hasOwnProperty(l)&&o.push(r[l]);for(o.sort(function(e,t){return a.compare(e,t)}),n=0;n<o.length;n++)if(t=o[n],t.varArgs)for(var f=t.params.length-1,d=t.params[f],g=0;g<d.types.length;){if(d.conversions[g])for(var v=d.types[g],y=0;y<o.length;y++){var b=o[y],E=b.params[f];if(b!==t&&E&&m(E.types,v)&&!E.conversions[f]){d.types.splice(g,1),d.conversions.splice(g,1),g--;break}}g++}return o}function c(e){for(var t={},n=0;n<e.length;n++){var r=e[n];if(r.fn&&!r.hasConversions()){var o=r.params.join(",");t[o]=r.fn}}return t}function l(e,t){var n,r,o,a=t.length,u=[];for(n=0;n<e.length;n++)r=e[n],r.params.length!==a||o||(o=r),void 0!=r.params[a]&&u.push(r);u.sort(function(e,t){return i.compare(e.params[a],t.params[a])});var c=[];for(n=0;n<u.length;n++){r=u[n];var p=r.params[a],h=c.filter(function(e){return e.param.overlapping(p)})[0];if(h){if(h.param.varArgs)throw new Error('Conflicting types "'+h.param+'" and "'+p+'"');h.signatures.push(r)}else c.push({param:p,signatures:[r]})}var f=new Array(c.length);for(n=0;n<c.length;n++){var d=c[n];f[n]=l(d.signatures,t.concat(d.param))}return new s(t,o,f)}function p(e){for(var t=[],n=0;n<e;n++)t[n]="arg"+n;return t}function h(e,t){var n=new o,i=u(t);if(0==i.length)throw new Error("No signatures provided");var a=l(i,[]),s=[],h=e||"",d=p(f(i));s.push("function "+h+"("+d.join(", ")+") {"),s.push('  "use strict";'),s.push("  var name = '"+h+"';"),s.push(a.toCode(n,"  ")),s.push("}");var m=[n.toCode(),"return "+s.join("\n")].join("\n"),g=new Function(n.name,"createError",m),v=g(n,r);return v.signatures=c(i),v}function f(e){for(var t=0,n=0;n<e.length;n++){var r=e[n].params.length;r>t&&(t=r)}return t}function d(e){for(var t,n=0;n<x.types.length;n++){var r=x.types[n];if("Object"===r.name)t=r;else if(r.test(e))return r.name}return t&&t.test(e)?t.name:"unknown"}function m(e,t){return e.indexOf(t)!==-1}function g(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var o=n.join(","),i=e.signatures[o];if(i)return i;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")}function v(e,t){var n=d(e);if(t===n)return e;for(var r=0;r<x.conversions.length;r++){var o=x.conversions[r];if(o.from===n&&o.to===t)return o.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)}o.prototype.add=function(e,t){var n=t||"fn";this.categories[n]||(this.categories[n]=[]);var r=this.categories[n].indexOf(e);return r==-1&&(r=this.categories[n].length,this.categories[n].push(e)),n+r},o.prototype.toCode=function(){var e=[],t=this.name+".categories",n=this.categories;for(var r in n)if(n.hasOwnProperty(r))for(var o=n[r],i=0;i<o.length;i++)e.push("var "+r+i+" = "+t+"['"+r+"']["+i+"];");return e.join("\n")},i.compare=function(e,t){
if(e.anyType)return 1;if(t.anyType)return-1;if(m(e.types,"Object"))return 1;if(m(t.types,"Object"))return-1;if(e.hasConversions()){if(t.hasConversions()){var n,r,o;for(n=0;n<e.conversions.length;n++)if(void 0!==e.conversions[n]){r=e.conversions[n];break}for(n=0;n<t.conversions.length;n++)if(void 0!==t.conversions[n]){o=t.conversions[n];break}return x.conversions.indexOf(r)-x.conversions.indexOf(o)}return 1}if(t.hasConversions())return-1;var i,a;for(n=0;n<x.types.length;n++)if(x.types[n].name===e.types[0]){i=n;break}for(n=0;n<x.types.length;n++)if(x.types[n].name===t.types[0]){a=n;break}return i-a},i.prototype.overlapping=function(e){for(var t=0;t<this.types.length;t++)if(m(e.types,this.types[t]))return!0;return!1},i.prototype.clone=function(){var e=new i(this.types.slice(),this.varArgs);return e.conversions=this.conversions.slice(),e},i.prototype.hasConversions=function(){return this.conversions.length>0},i.prototype.contains=function(e){for(var t=0;t<this.types.length;t++)if(e[this.types[t]])return!0;return!1},i.prototype.toString=function(e){for(var t=[],n={},r=0;r<this.types.length;r++){var o=this.conversions[r],i=e&&o?o.to:this.types[r];i in n||(n[i]=!0,t.push(i))}return(this.varArgs?"...":"")+t.join("|")},a.prototype.clone=function(){return new a(this.params.slice(),this.fn)},a.prototype.expand=function(){function e(n,r){if(r.length<n.params.length){var o,s,u,c=n.params[r.length];if(c.varArgs){for(s=c.clone(),o=0;o<x.conversions.length;o++)if(u=x.conversions[o],!m(c.types,u.from)&&m(c.types,u.to)){var l=s.types.length;s.types[l]=u.from,s.conversions[l]=u}e(n,r.concat(s))}else{for(o=0;o<c.types.length;o++)e(n,r.concat(new i(c.types[o])));for(o=0;o<x.conversions.length;o++)u=x.conversions[o],!m(c.types,u.from)&&m(c.types,u.to)&&(s=new i(u.from),s.conversions[0]=u,e(n,r.concat(s)))}}else t.push(new a(r,n.fn))}var t=[];return e(this,[]),t},a.compare=function(e,t){if(e.params.length>t.params.length)return 1;if(e.params.length<t.params.length)return-1;var n,r=e.params.length,o=0,a=0;for(n=0;n<r;n++)e.params[n].hasConversions()&&o++,t.params[n].hasConversions()&&a++;if(o>a)return 1;if(o<a)return-1;for(n=0;n<e.params.length;n++){var s=i.compare(e.params[n],t.params[n]);if(0!==s)return s}return 0},a.prototype.hasConversions=function(){for(var e=0;e<this.params.length;e++)if(this.params[e].hasConversions())return!0;return!1},a.prototype.ignore=function(){for(var e={},t=0;t<x.ignore.length;t++)e[x.ignore[t]]=!0;for(t=0;t<this.params.length;t++)if(this.params[t].contains(e))return!0;return!1},a.prototype.toCode=function(e,t){for(var n=[],r=new Array(this.params.length),o=0;o<this.params.length;o++){var i=this.params[o],a=i.conversions[0];i.varArgs?r[o]="varArgs":a?r[o]=e.add(a.convert,"convert")+"(arg"+o+")":r[o]="arg"+o}var s=this.fn?e.add(this.fn,"signature"):void 0;return s?t+"return "+s+"("+r.join(", ")+"); // signature: "+this.params.join(", "):n.join("\n")},a.prototype.toString=function(){return this.params.join(", ")},s.prototype.toCode=function(e,n,r){var o=[];if(this.param){var i=this.path.length-1,a=this.param.conversions[0],s="// type: "+(a?a.from+" (convert to "+a.to+")":this.param);if(this.param.varArgs)if(this.param.anyType)o.push(n+"if (arguments.length > "+i+") {"),o.push(n+"  var varArgs = [];"),o.push(n+"  for (var i = "+i+"; i < arguments.length; i++) {"),o.push(n+"    varArgs.push(arguments[i]);"),o.push(n+"  }"),o.push(this.signature.toCode(e,n+"  ")),o.push(n+"}");else{for(var u=function(n,r){for(var o=[],i=0;i<n.length;i++)o[i]=e.add(t(n[i]),"test")+"("+r+")";return o.join(" || ")}.bind(this),c=this.param.types,l=[],p=0;p<c.length;p++)void 0===this.param.conversions[p]&&l.push(c[p]);o.push(n+"if ("+u(c,"arg"+i)+") { "+s),o.push(n+"  var varArgs = [arg"+i+"];"),o.push(n+"  for (var i = "+(i+1)+"; i < arguments.length; i++) {"),o.push(n+"    if ("+u(l,"arguments[i]")+") {"),o.push(n+"      varArgs.push(arguments[i]);");for(var p=0;p<c.length;p++){var h=this.param.conversions[p];if(h){var f=e.add(t(c[p]),"test"),d=e.add(h.convert,"convert");o.push(n+"    }"),o.push(n+"    else if ("+f+"(arguments[i])) {"),o.push(n+"      varArgs.push("+d+"(arguments[i]));")}}o.push(n+"    } else {"),o.push(n+"      throw createError(name, arguments.length, i, arguments[i], '"+l.join(",")+"');"),o.push(n+"    }"),o.push(n+"  }"),o.push(this.signature.toCode(e,n+"  ")),o.push(n+"}")}else if(this.param.anyType)o.push(n+"// type: any"),o.push(this._innerCode(e,n,r));else{var m=this.param.types[0],f="any"!==m?e.add(t(m),"test"):null;o.push(n+"if ("+f+"(arg"+i+")) { "+s),o.push(this._innerCode(e,n+"  ",r)),o.push(n+"}")}}else o.push(this._innerCode(e,n,r));return o.join("\n")},s.prototype._innerCode=function(e,t,n){var r,o=[];this.signature&&(o.push(t+"if (arguments.length === "+this.path.length+") {"),o.push(this.signature.toCode(e,t+"  ")),o.push(t+"}"));var i;for(r=0;r<this.childs.length;r++)if(this.childs[r].param.anyType){i=this.childs[r];break}for(r=0;r<this.childs.length;r++)o.push(this.childs[r].toCode(e,t,i));n&&!this.param.anyType&&o.push(n.toCode(e,t,i));var a=this._exceptions(e,t);return a&&o.push(a),o.join("\n")},s.prototype._exceptions=function(e,t){var n=this.path.length;if(0===this.childs.length)return[t+"if (arguments.length > "+n+") {",t+"  throw createError(name, arguments.length, "+n+", arguments["+n+"]);",t+"}"].join("\n");for(var r={},o=[],i=0;i<this.childs.length;i++){var a=this.childs[i];if(a.param)for(var s=0;s<a.param.types.length;s++){var u=a.param.types[s];u in r||a.param.conversions[s]||(r[u]=!0,o.push(u))}}return t+"throw createError(name, arguments.length, "+n+", arguments["+n+"], '"+o.join(",")+"');"};var y=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],b={},E=[],w=[],x={config:b,types:y,conversions:E,ignore:w};return x=h("typed",{Object:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);var o=n(t);return h(o,e)},"string, Object":h,"...Function":function(e){for(var t,r=n(e),o={},i=0;i<e.length;i++){var a=e[i];if("object"!=typeof a.signatures)throw t=new TypeError("Function is no typed-function (index: "+i+")"),t.data={index:i},t;for(var s in a.signatures)if(a.signatures.hasOwnProperty(s))if(o.hasOwnProperty(s)){if(a.signatures[s]!==o[s])throw t=new Error('Signature "'+s+'" is defined twice'),t.data={signature:s},t}else o[s]=a.signatures[s]}return h(r,o)}}),x.config=b,x.types=y,x.conversions=E,x.ignore=w,x.create=e,x.find=g,x.convert=v,x.addType=function(e){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");x.types.push(e)},x.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");x.conversions.push(e)},x}return e()})},function(e,t,n){"use strict";var r=n(474);t.isNumber=function(e){return"number"==typeof e},t.isInteger=function(e){return!!isFinite(e)&&e==Math.round(e)},t.sign=Math.sign||function(e){return e>0?1:e<0?-1:0},t.format=function(e,n){if("function"==typeof n)return n(e);if(e===1/0)return"Infinity";if(e===-(1/0))return"-Infinity";if(isNaN(e))return"NaN";var r="auto",o=void 0;switch(n&&(n.notation&&(r=n.notation),t.isNumber(n)?o=n:n.precision&&(o=n.precision)),r){case"fixed":return t.toFixed(e,o);case"exponential":return t.toExponential(e,o);case"engineering":return t.toEngineering(e,o);case"auto":return t.toPrecision(e,o,n&&n.exponential).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}},t.toExponential=function(e,t){return new r(e).toExponential(t)},t.toEngineering=function(e,t){return new r(e).toEngineering(t)},t.toFixed=function(e,t){return new r(e).toFixed(t)},t.toPrecision=function(e,t,n){return new r(e).toPrecision(t,n)},t.digits=function(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},t.DBL_EPSILON=Number.EPSILON||2.220446049250313e-16,t.nearlyEqual=function(e,n,r){if(null==r)return e==n;if(e==n)return!0;if(isNaN(e)||isNaN(n))return!1;if(isFinite(e)&&isFinite(n)){var o=Math.abs(e-n);return o<t.DBL_EPSILON||o<=Math.max(Math.abs(e),Math.abs(n))*r}return!1}},function(e,t){"use strict";function n(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number");var n=t[1],r=t[2],o=parseFloat(t[4]||"0"),i=r.indexOf(".");o+=i!==-1?i-1:r.length-1,this.sign=n,this.coefficients=r.replace(".","").replace(/^0*/,function(e){return o-=e.length,""}).replace(/0*$/,"").split("").map(function(e){return parseInt(e)}),0===this.coefficients.length&&(this.coefficients.push(0),o++),this.exponent=o}function r(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}n.prototype.toEngineering=function(e){var t=this.roundDigits(e),n=t.exponent,o=t.coefficients,i=n%3===0?n:n<0?n-3-n%3:n-n%3,a=n>=0?n:Math.abs(i);o.length-1<a&&(o=o.concat(r(a-(o.length-1))));for(var s=Math.abs(n-i),u=1,c="";--s>=0;)u++;var l=o.slice(u).join(""),p=l.match(/[1-9]/)?"."+l:"";return c=o.slice(0,u).join("")+p,c+="e"+(n>=0?"+":"")+i.toString(),t.sign+c},n.prototype.toFixed=function(e){var t=this.roundDigits(this.exponent+1+(e||0)),n=t.coefficients,o=t.exponent+1,i=o+(e||0);return n.length<i&&(n=n.concat(r(i-n.length))),o<0&&(n=r(-o+1).concat(n),o=1),e&&n.splice(o,0,0===o?"0.":"."),this.sign+n.join("")},n.prototype.toExponential=function(e){var t=e?this.roundDigits(e):this.clone(),n=t.coefficients,o=t.exponent;n.length<e&&(n=n.concat(r(e-n.length)));var i=n.shift();return this.sign+i+(n.length>0?"."+n.join(""):"")+"e"+(o>=0?"+":"")+o},n.prototype.toPrecision=function(e,t){var n=t&&void 0!==t.lower?t.lower:.001,o=t&&void 0!==t.upper?t.upper:1e5,i=Math.abs(Math.pow(10,this.exponent));if(i<n||i>=o)return this.toExponential(e);var a=e?this.roundDigits(e):this.clone(),s=a.coefficients,u=a.exponent;s.length<e&&(s=s.concat(r(e-s.length))),s=s.concat(r(u-s.length+1+(s.length<e?e-s.length:0))),s=r(-u).concat(s);var c=u>0?u:0;return c<s.length-1&&s.splice(c+1,0,"."),this.sign+s.join("")},n.prototype.clone=function(){var e=new n("0");return e.sign=this.sign,e.coefficients=this.coefficients.slice(0),e.exponent=this.exponent,e},n.prototype.roundDigits=function(e){for(var t=this.clone(),n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var r=n.splice(e,n.length-e);if(r[0]>=5){var o=e-1;for(n[o]++;10===n[o];)n.pop(),0===o&&(n.unshift(0),t.exponent++,o++),o--,n[o]++}}return t},e.exports=n},function(e,t,n){var r=n(476);t.mixin=function(e){var t=new r;return e.on=t.on.bind(t),e.off=t.off.bind(t),e.once=t.once.bind(t),e.emit=t.emit.bind(t),e}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r,u){function c(e,t){var n=arguments.length;if(1!=n&&2!=n)throw new s("import",n,1,2);if(t||(t={}),i(e))f(e,t);else if(Array.isArray(e))e.forEach(function(e){c(e,t)});else if("object"==typeof e){for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];d(o)?l(r,o,t):i(e)?f(e,t):c(o,t)}}else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}function l(e,t,n){if(n.wrap&&"function"==typeof t&&(t=h(t)),m(u[e])&&m(t))return t=n.override?r(e,t.signatures):r(u[e],t),u[e]=t,p(e,t),void u.emit("import",e,function(){return t});if(void 0===u[e]||n.override)return u[e]=t,p(e,t),void u.emit("import",e,function(){return t});if(!n.silent)throw new Error('Cannot import "'+e+'": already exists')}function p(e,t){t&&"function"==typeof t.transform&&(u.expression.transform[e]=t.transform)}function h(e){var t=function(){for(var t=[],n=0,r=arguments.length;n<r;n++){var o=arguments[n];t[n]=o&&o.valueOf()}return e.apply(u,t)};return e.transform&&(t.transform=e.transform),t}function f(e,t){if("string"==typeof e.name){var i=e.name,s=e.path?a(u,e.path):u,c=s.hasOwnProperty(i)?s[i]:void 0,l=function(){var o=n(e);if(m(c)&&m(o))return t.override||(o=r(c,o)),o;if(void 0===c||t.override)return o;if(!t.silent)throw new Error('Cannot import "'+i+'": already exists')};e.lazy!==!1?o(s,i,l):s[i]=l(),u.emit("import",i,l,e.path)}else n(e)}function d(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||e&&e.isUnit===!0||e&&e.isComplex===!0||e&&e.isBigNumber===!0||e&&e.isFraction===!0||e&&e.isMatrix===!0||e&&Array.isArray(e)===!0}function m(e){return"function"==typeof e&&"object"==typeof e.signatures}return c}var o=n(470).lazy,i=n(470).isFactory,a=n(470).traverse,s=(n(470).extend,n(478));t.math=!0,t.name="import",t.factory=r,t.lazy=!0},function(e,t){"use strict";function n(e,t,r,o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=r,this.max=o,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+r+(void 0!=o?"-"+o:"")+" expected)",this.stack=(new Error).stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="ArgumentsError",n.prototype.isArgumentsError=!0,e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r,o){function i(e){if(e){var n=s.clone(t);a(e,"matrix",u),a(e,"number",c),s.deepExtend(t,e);var r=s.clone(t);return o.emit("config",r,n),r}return s.clone(t)}var u=["Matrix","Array"],c=["number","BigNumber","Fraction"];return i.MATRIX=u,i.NUMBER=c,i}function o(e,t){return e.indexOf(t)!==-1}function i(e,t){return e.map(function(e){return e.toLowerCase()}).indexOf(t.toLowerCase())}function a(e,t,n){if(void 0!==e[t]&&!o(n,e[t])){var r=i(n,e[t]);r!==-1?(console.warn('Warning: Wrong casing for configuration option "'+t+'", should be "'+n[r]+'" instead of "'+e[t]+'".'),e[t]=n[r]):console.warn('Warning: Unknown value "'+e[t]+'" for configuration option "'+t+'". Available options: '+n.map(JSON.stringify).join(", ")+".")}}var s=n(470);t.name="config",t.math=!0,t.factory=r},function(e,t,n){e.exports=[n(481),n(483)]},function(e,t,n){function r(e,t,n,r,i){var a=o.clone({precision:t.precision});return a.prototype.type="BigNumber",a.prototype.isBigNumber=!0,a.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},a.fromJSON=function(e){return new a(e.value)},i.on("config",function(e,t){e.precision!==t.precision&&a.config({precision:e.precision})}),a}var o=n(482);t.name="BigNumber",t.path="type",t.factory=r,t.math=!0},function(e,t,n){var r;!function(o){"use strict";function i(e){var t,n,r,o=e.length-1,i="",a=e[0];if(o>0){for(i+=a,t=1;t<o;t++)r=e[t]+"",n=ke-r.length,n&&(i+=g(n)),i+=r;a=e[t],r=a+"",n=ke-r.length,n&&(i+=g(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return i+a}function a(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Se+e)}function s(e,t,n,r){var o,i,a,s;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=ke,o=0):(o=Math.ceil((t+1)/ke),t%=ke),i=Pe(10,ke-t),s=e[o]%i|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==i||n>3&&s+1==i/2)&&(e[o+1]/i/100|0)==Pe(10,t-2)-1||(s==i/2||0==s)&&0==(e[o+1]/i/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==i||!r&&n>3&&s+1==i/2)&&(e[o+1]/i/1e3|0)==Pe(10,t-3)-1,a}function u(e,t,n){for(var r,o,i=[0],a=0,s=e.length;a<s;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=be.indexOf(e.charAt(a++)),r=0;r<i.length;r++)i[r]>n-1&&(void 0===i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function c(e,t){var n,r,o=t.d.length;o<32?(n=Math.ceil(o/3),r=Math.pow(4,-n).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=S(e,1,t.times(r),new e(1));for(var i=n;i--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}function l(e,t,n,r){var o,i,a,s,u,c,l,p,h,f=e.constructor;e:if(null!=t){if(p=e.d,!p)return e;for(o=1,s=p[0];s>=10;s/=10)o++;if(i=t-o,i<0)i+=ke,a=t,l=p[h=0],u=l/Pe(10,o-a-1)%10|0;else if(h=Math.ceil((i+1)/ke),s=p.length,h>=s){if(!r)break e;for(;s++<=h;)p.push(0);l=u=0,o=1,i%=ke,a=i-ke+1}else{for(l=s=p[h],o=1;s>=10;s/=10)o++;i%=ke,a=i-ke+o,u=a<0?0:l/Pe(10,o-a-1)%10|0}if(r=r||t<0||void 0!==p[h+1]||(a<0?l:l%Pe(10,o-a-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(i>0?a>0?l/Pe(10,o-a):0:p[h-1])%10&1||n==(e.s<0?8:7)),t<1||!p[0])return p.length=0,c?(t-=e.e+1,p[0]=Pe(10,(ke-t%ke)%ke),e.e=-t||0):p[0]=e.e=0,e;if(0==i?(p.length=h,s=1,h--):(p.length=h+1,s=Pe(10,ke-i),p[h]=a>0?(l/Pe(10,o-a)%Pe(10,a)|0)*s:0),c)for(;;){if(0==h){for(i=1,a=p[0];a>=10;a/=10)i++;for(a=p[0]+=s,s=1;a>=10;a/=10)s++;i!=s&&(e.e++,p[0]==Le&&(p[0]=1));break}if(p[h]+=s,p[h]!=Le)break;p[h--]=0,s=1}for(i=p.length;0===p[--i];)p.pop()}return Ce&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function p(e,t,n){if(!e.isFinite())return x(e);var r,o=e.e,a=i(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+g(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):o<0?(a="0."+g(-o-1)+a,n&&(r=n-s)>0&&(a+=g(r))):o>=s?(a+=g(o+1-s),n&&(r=n-o-1)>0&&(a=a+"."+g(r))):((r=o+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(o+1===s&&(a+="."),a+=g(r))),a}function h(e,t){for(var n=1,r=e[0];r>=10;r/=10)n++;return n+t*ke-1}function f(e,t,n){if(t>Be)throw Ce=!0,n&&(e.precision=n),Error(_e);return l(new e(Ee),t,1,!0)}function d(e,t,n){if(t>Ue)throw Error(_e);return l(new e(we),t,n,!0)}function m(e){var t=e.length-1,n=t*ke+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function g(e){for(var t="";e--;)t+="0";return t}function v(e,t,n,r){var o,i=new e(1),a=Math.ceil(r/ke+4);for(Ce=!1;;){if(n%2&&(i=i.times(t),P(i.d,a)&&(o=!0)),n=Oe(n/2),0===n){n=i.d.length-1,o&&0===i.d[n]&&++i.d[n];break}t=t.times(t),P(t.d,a)}return Ce=!0,i}function y(e){return 1&e.d[e.d.length-1]}function b(e,t,n){for(var r,o=new e(t[0]),i=0;++i<t.length;){if(r=new e(t[i]),!r.s){o=r;break}o[n](r)&&(o=r)}return o}function E(e,t){var n,r,o,a,u,c,p,h=0,f=0,d=0,m=e.constructor,g=m.rounding,v=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(Ce=!1,p=v):p=t,c=new m(.03125);e.e>-2;)e=e.times(c),d+=5;for(r=Math.log(Pe(2,d))/Math.LN10*2+5|0,p+=r,n=a=u=new m(1),m.precision=p;;){if(a=l(a.times(e),p,1),n=n.times(++f),c=u.plus(je(a,n,p,1)),i(c.d).slice(0,p)===i(u.d).slice(0,p)){for(o=d;o--;)u=l(u.times(u),p,1);if(null!=t)return m.precision=v,u;if(!(h<3&&s(u.d,p-r,g,h)))return l(u,m.precision=v,g,Ce=!0);m.precision=p+=10,n=a=c=new m(1),f=0,h++}u=c}}function w(e,t){var n,r,o,a,u,c,p,h,d,m,g,v=1,y=10,b=e,E=b.d,x=b.constructor,T=x.rounding,C=x.precision;if(b.s<0||!E||!E[0]||!b.e&&1==E[0]&&1==E.length)return new x(E&&!E[0]?-1/0:1!=b.s?NaN:E?0:b);if(null==t?(Ce=!1,d=C):d=t,x.precision=d+=y,n=i(E),r=n.charAt(0),!(Math.abs(a=b.e)<15e14))return h=f(x,d+2,C).times(a+""),b=w(new x(r+"."+n.slice(1)),d-y).plus(h),x.precision=C,null==t?l(b,C,T,Ce=!0):b;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)b=b.times(e),n=i(b.d),r=n.charAt(0),v++;for(a=b.e,r>1?(b=new x("0."+n),a++):b=new x(r+"."+n.slice(1)),m=b,p=u=b=je(b.minus(1),b.plus(1),d,1),g=l(b.times(b),d,1),o=3;;){if(u=l(u.times(g),d,1),h=p.plus(je(u,new x(o),d,1)),i(h.d).slice(0,d)===i(p.d).slice(0,d)){if(p=p.times(2),0!==a&&(p=p.plus(f(x,d+2,C).times(a+""))),p=je(p,new x(v),d,1),null!=t)return x.precision=C,p;if(!s(p.d,d-y,T,c))return l(p,x.precision=C,T,Ce=!0);x.precision=d+=y,h=u=b=je(m.minus(1),m.plus(1),d,1),g=l(b.times(b),d,1),o=c=1}p=h,o+=2}}function x(e){return String(e.s*e.s/0)}function T(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(o=t.length;48===t.charCodeAt(o-1);--o);if(t=t.slice(r,o)){if(o-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%ke,n<0&&(r+=ke),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=ke;r<o;)e.d.push(+t.slice(r,r+=ke));t=t.slice(r),r=ke-t.length}else r-=o;for(;r--;)t+="0";e.d.push(+t),Ce&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function C(e,t){var n,r,o,i,a,s,c,l,p;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Ie.test(t))n=16,t=t.toLowerCase();else if(Ae.test(t))n=2;else{if(!Me.test(t))throw Error(Se+t);n=8}for(i=t.search(/p/i),i>0?(c=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),i=t.indexOf("."),a=i>=0,r=e.constructor,a&&(t=t.replace(".",""),s=t.length,i=s-i,o=v(r,new r(n),i,2*i)),l=u(t,n,Le),p=l.length-1,i=p;0===l[i];--i)l.pop();return i<0?new r(0*e.s):(e.e=h(l,p),e.d=l,Ce=!1,a&&(e=je(e,o,4*s)),c&&(e=e.times(Math.abs(c)<54?Math.pow(2,c):xe.pow(2,c))),Ce=!0,e)}function N(e,t){var n,r=t.d.length;if(r<3)return S(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:0|n,t=t.times(Math.pow(5,-n)),t=S(e,2,t,t);for(var o,i=new e(5),a=new e(16),s=new e(20);n--;)o=t.times(t),t=t.times(i.plus(o.times(a.times(o).minus(s))));return t}function S(e,t,n,r,o){var i,a,s,u,c=1,l=e.precision,p=Math.ceil(l/ke);for(Ce=!1,u=n.times(n),s=new e(r);;){if(a=je(s.times(u),new e(t++*t++),l,1),s=o?r.plus(a):r.minus(a),r=je(a.times(u),new e(t++*t++),l,1),a=s.plus(r),void 0!==a.d[p]){for(i=p;a.d[i]===s.d[i]&&i--;);if(i==-1)break}i=s,s=r,r=a,a=i,c++}return Ce=!0,a.d.length=p+1,a}function _(e,t){var n,r=t.s<0,o=d(e,e.precision,1),i=o.times(.5);if(t=t.abs(),t.lte(i))return ge=r?4:1,t;if(n=t.divToInt(o),n.isZero())ge=r?3:2;else{if(t=t.minus(n.times(o)),t.lte(i))return ge=y(n)?r?2:3:r?4:1,t;ge=y(n)?r?1:4:r?3:2}return t.minus(o).abs()}function O(e,t,n,r){var o,i,s,c,l,h,f,d,m,g=e.constructor,v=void 0!==n;if(v?(a(n,1,ye),void 0===r?r=g.rounding:a(r,0,8)):(n=g.precision,r=g.rounding),e.isFinite()){for(f=p(e),s=f.indexOf("."),v?(o=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):o=t,s>=0&&(f=f.replace(".",""),m=new g(1),m.e=f.length-s,m.d=u(p(m),10,o),m.e=m.d.length),d=u(f,10,o),i=l=d.length;0==d[--l];)d.pop();if(d[0]){if(s<0?i--:(e=new g(e),e.d=d,e.e=i,e=je(e,m,n,r,0,o),d=e.d,i=e.e,h=me),s=d[n],c=o/2,h=h||void 0!==d[n+1],h=r<4?(void 0!==s||h)&&(0===r||r===(e.s<0?3:2)):s>c||s===c&&(4===r||h||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,h)for(;++d[--n]>o-1;)d[n]=0,n||(++i,d.unshift(1));for(l=d.length;!d[l-1];--l);for(s=0,f="";s<l;s++)f+=be.charAt(d[s]);if(v){if(l>1)if(16==t||8==t){for(s=16==t?4:3,--l;l%s;l++)f+="0";for(d=u(f,o,t),l=d.length;!d[l-1];--l);for(s=1,f="1.";s<l;s++)f+=be.charAt(d[s])}else f=f.charAt(0)+"."+f.slice(1);f=f+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)f="0"+f;f="0."+f}else if(++i>l)for(i-=l;i--;)f+="0";else i<l&&(f=f.slice(0,i)+"."+f.slice(i))}else f=v?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=x(e);return e.s<0?"-"+f:f}function P(e,t){if(e.length>t)return e.length=t,!0}function A(e){return new this(e).abs()}function I(e){return new this(e).acos()}function M(e){return new this(e).acosh()}function R(e,t){return new this(e).plus(t)}function L(e){return new this(e).asin()}function k(e){return new this(e).asinh()}function D(e){return new this(e).atan()}function B(e){return new this(e).atanh()}function U(e,t){e=new this(e),t=new this(t);var n,r=this.precision,o=this.rounding,i=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?d(this,r,o):new this(0),n.s=e.s):!e.d||t.isZero()?(n=d(this,i,1).times(.5),n.s=e.s):t.s<0?(this.precision=i,this.rounding=1,n=this.atan(je(e,t,i,1)),t=d(this,i,1),this.precision=r,this.rounding=o,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(je(e,t,i,1)):(n=d(this,i,1).times(t.s>0?.25:.75),n.s=e.s):n=new this(NaN),n}function F(e){return new this(e).cbrt()}function j(e){return l(e=new this(e),e.e+1,2)}function H(e){if(!e||"object"!=typeof e)throw Error(Ne+"Object expected");var t,n,r,o=["precision",1,ye,"rounding",0,8,"toExpNeg",-ve,0,"toExpPos",0,ve,"maxE",0,ve,"minE",-ve,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(void 0!==(r=e[n=o[t]])){if(!(Oe(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(Se+n+": "+r);this[n]=r}if(e.hasOwnProperty(n="crypto"))if(void 0===(r=e[n]))this[n]=r;else{if(r!==!0&&r!==!1&&0!==r&&1!==r)throw Error(Se+n+": "+r);this[n]=!(!r||!Te||!Te.getRandomValues&&!Te.randomBytes)}return this}function V(e){return new this(e).cos()}function W(e){return new this(e).cosh()}function G(e){function t(e){var n,r,o,i=this;if(!(i instanceof t))return new t(e);if(i.constructor=t,e instanceof t)return i.s=e.s,i.e=e.e,void(i.d=(e=e.d)?e.slice():e);if(o=typeof e,"number"===o){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(n=0,r=e;r>=10;r/=10)n++;return i.e=n,void(i.d=[e])}return 0*e!==0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):T(i,e.toString())}if("string"!==o)throw Error(Se+e);return 45===e.charCodeAt(0)?(e=e.slice(1),i.s=-1):i.s=1,Re.test(e)?T(i,e):C(i,e)}var n,r,o;if(t.prototype=Fe,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=H,t.clone=G,t.abs=A,t.acos=I,t.acosh=M,t.add=R,t.asin=L,t.asinh=k,t.atan=D,t.atanh=B,t.atan2=U,t.cbrt=F,t.ceil=j,t.cos=V,t.cosh=W,t.div=z,t.exp=q,t.floor=Y,t.fromJSON=X,t.hypot=K,t.ln=Z,t.log=$,t.log10=J,t.log2=Q,t.max=ee,t.min=te,t.mod=ne,t.mul=re,t.pow=oe,t.random=ie,t.round=ae,t.sign=se,t.sin=ue,t.sinh=ce,t.sqrt=le,t.sub=pe,t.tan=he,t.tanh=fe,t.trunc=de,void 0===e&&(e={}),e)for(o=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<o.length;)e.hasOwnProperty(r=o[n++])||(e[r]=this[r]);return t.config(e),t}function z(e,t){return new this(e).div(t)}function q(e){return new this(e).exp()}function Y(e){return l(e=new this(e),e.e+1,3)}function X(e){var t,n,r,o;if("string"!=typeof e||!e)throw Error(Se+e);if(r=e.length,o=be.indexOf(e.charAt(0)),1===r)return new this(o>81?[-1/0,1/0,NaN][o-82]:o>40?-(o-41):o);if(64&o)n=16&o,t=n?(7&o)-3:(15&o)-7,r=1;else{if(2===r)return o=88*o+be.indexOf(e.charAt(1)),new this(o>=2816?-(o-2816)-41:o+41);if(n=32&o,!(31&o))return e=u(e.slice(1),88,10).join(""),new this(n?"-"+e:e);t=15&o,r=t+1,t=1===t?be.indexOf(e.charAt(1)):2===t?88*be.indexOf(e.charAt(1))+be.indexOf(e.charAt(2)):+u(e.slice(1,r),88,10).join(""),16&o&&(t=-t)}return e=u(e.slice(r),88,10).join(""),t=t-e.length+1,e=e+"e"+t,new this(n?"-"+e:e)}function K(){var e,t,n=new this(0);for(Ce=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Ce=!0,new this(1/0);n=t}return Ce=!0,n.sqrt()}function Z(e){return new this(e).ln()}function $(e,t){return new this(e).log(t)}function Q(e){return new this(e).log(2)}function J(e){return new this(e).log(10)}function ee(){return b(this,arguments,"lt")}function te(){return b(this,arguments,"gt")}function ne(e,t){return new this(e).mod(t)}function re(e,t){return new this(e).mul(t)}function oe(e,t){return new this(e).pow(t)}function ie(e){var t,n,r,o,i=0,s=new this(1),u=[];if(void 0===e?e=this.precision:a(e,1,ye),r=Math.ceil(e/ke),this.crypto===!1)for(;i<r;)u[i++]=1e7*Math.random()|0;else if(Te&&Te.getRandomValues)for(t=Te.getRandomValues(new Uint32Array(r));i<r;)o=t[i],o>=429e7?t[i]=Te.getRandomValues(new Uint32Array(1))[0]:u[i++]=o%1e7;else if(Te&&Te.randomBytes){for(t=Te.randomBytes(r*=4);i<r;)o=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((127&t[i+3])<<24),o>=214e7?Te.randomBytes(4).copy(t,i):(u.push(o%1e7),i+=4);i=r/4}else{if(this.crypto)throw Error(Ne+"crypto unavailable");for(;i<r;)u[i++]=1e7*Math.random()|0}for(r=u[--i],e%=ke,r&&e&&(o=Pe(10,ke-e),u[i]=(r/o|0)*o);0===u[i];i--)u.pop();if(i<0)n=0,u=[0];else{for(n=-1;0===u[0];n-=ke)u.shift();for(r=1,o=u[0];o>=10;o/=10)r++;r<ke&&(n-=ke-r)}return s.e=n,s.d=u,s}function ae(e){return l(e=new this(e),e.e+1,this.rounding)}function se(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function ue(e){return new this(e).sin()}function ce(e){return new this(e).sinh()}function le(e){return new this(e).sqrt()}function pe(e,t){return new this(e).sub(t)}function he(e){return new this(e).tan()}function fe(e){return new this(e).tanh()}function de(e){return l(e=new this(e),e.e+1,1)}var me,ge,ve=9e15,ye=1e9,be="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%()*+,-./:;=?@[]^_`{|}~",Ee="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",we="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",xe={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ve,maxE:ve,crypto:void 0},Te="undefined"!=typeof crypto?crypto:null,Ce=!0,Ne="[DecimalError] ",Se=Ne+"Invalid argument: ",_e=Ne+"Precision limit exceeded",Oe=Math.floor,Pe=Math.pow,Ae=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Ie=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Me=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Re=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Le=1e7,ke=7,De=9007199254740991,Be=Ee.length-1,Ue=we.length-1,Fe={};Fe.absoluteValue=Fe.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),l(e)},Fe.ceil=function(){return l(new this.constructor(this),this.e+1,2)},Fe.comparedTo=Fe.cmp=function(e){var t,n,r,o,i=this,a=i.d,s=(e=new i.constructor(e)).d,u=i.s,c=e.s;if(!a||!s)return u&&c?u!==c?u:a===s?0:!a^u<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?u:s[0]?-c:0;if(u!==c)return u;if(i.e!==e.e)return i.e>e.e^u<0?1:-1;for(r=a.length,o=s.length,t=0,n=r<o?r:o;t<n;++t)if(a[t]!==s[t])return a[t]>s[t]^u<0?1:-1;
return r===o?0:r>o^u<0?1:-1},Fe.cosine=Fe.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+ke,r.rounding=1,n=c(r,_(r,n)),r.precision=e,r.rounding=t,l(2==ge||3==ge?n.neg():n,e,t,!0)):new r(1):new r(NaN)},Fe.cubeRoot=Fe.cbrt=function(){var e,t,n,r,o,a,s,u,c,p,h=this,f=h.constructor;if(!h.isFinite()||h.isZero())return new f(h);for(Ce=!1,a=h.s*Math.pow(h.s*h,1/3),a&&Math.abs(a)!=1/0?r=new f(a.toString()):(n=i(h.d),e=h.e,(a=(e-n.length+1)%3)&&(n+=1==a||a==-2?"0":"00"),a=Math.pow(n,1/3),e=Oe((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?n="5e"+e:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=h.s),s=(e=f.precision)+3;;)if(u=r,c=u.times(u).times(u),p=c.plus(h),r=je(p.plus(h).times(u),p.plus(c),s+2,1),i(u.d).slice(0,s)===(n=i(r.d)).slice(0,s)){if(n=n.slice(s-3,s+1),"9999"!=n&&(o||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(l(r,e+1,1),t=!r.times(r).times(r).eq(h));break}if(!o&&(l(u,e+1,0),u.times(u).times(u).eq(h))){r=u;break}s+=4,o=1}return Ce=!0,l(r,e,f.rounding,t)},Fe.decimalPlaces=Fe.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-Oe(this.e/ke))*ke,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},Fe.dividedBy=Fe.div=function(e){return je(this,new this.constructor(e))},Fe.dividedToIntegerBy=Fe.divToInt=function(e){var t=this,n=t.constructor;return l(je(t,new n(e),0,1,1),n.precision,n.rounding)},Fe.equals=Fe.eq=function(e){return 0===this.cmp(e)},Fe.floor=function(){return l(new this.constructor(this),this.e+1,3)},Fe.greaterThan=Fe.gt=function(e){return this.cmp(e)>0},Fe.greaterThanOrEqualTo=Fe.gte=function(e){var t=this.cmp(e);return 1==t||0===t},Fe.hyperbolicCosine=Fe.cosh=function(){var e,t,n,r,o,i=this,a=i.constructor,s=new a(1);if(!i.isFinite())return new a(i.s?1/0:NaN);if(i.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(i.e,i.sd())+4,a.rounding=1,o=i.d.length,o<32?(e=Math.ceil(o/3),t=Math.pow(4,-e).toString()):(e=16,t="2.3283064365386962890625e-10"),i=S(a,1,i.times(t),new a(1),!0);for(var u,c=e,p=new a(8);c--;)u=i.times(i),i=s.minus(u.times(p.minus(u.times(p))));return l(i,a.precision=n,a.rounding=r,!0)},Fe.hyperbolicSine=Fe.sinh=function(){var e,t,n,r,o=this,i=o.constructor;if(!o.isFinite()||o.isZero())return new i(o);if(t=i.precision,n=i.rounding,i.precision=t+Math.max(o.e,o.sd())+4,i.rounding=1,r=o.d.length,r<3)o=S(i,2,o,o,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:0|e,o=o.times(Math.pow(5,-e)),o=S(i,2,o,o,!0);for(var a,s=new i(5),u=new i(16),c=new i(20);e--;)a=o.times(o),o=o.times(s.plus(a.times(u.times(a).plus(c))))}return i.precision=t,i.rounding=n,l(o,t,n,!0)},Fe.hyperbolicTangent=Fe.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,je(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},Fe.inverseCosine=Fe.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),o=n.precision,i=n.rounding;return r!==-1?0===r?t.isNeg()?d(n,o,i):new n(0):new n(NaN):t.isZero()?d(n,o+4,i).times(.5):(n.precision=o+6,n.rounding=1,t=t.asin(),e=d(n,o+4,i).times(.5),n.precision=o,n.rounding=i,e.minus(t))},Fe.inverseHyperbolicCosine=Fe.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Ce=!1,n=n.times(n).minus(1).sqrt().plus(n),Ce=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},Fe.inverseHyperbolicSine=Fe.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Ce=!1,n=n.times(n).plus(1).sqrt().plus(n),Ce=!0,r.precision=e,r.rounding=t,n.ln())},Fe.inverseHyperbolicTangent=Fe.atanh=function(){var e,t,n,r,o=this,i=o.constructor;return o.isFinite()?o.e>=0?new i(o.abs().eq(1)?o.s/0:o.isZero()?o:NaN):(e=i.precision,t=i.rounding,r=o.sd(),Math.max(r,e)<2*-o.e-1?l(new i(o),e,t,!0):(i.precision=n=r-o.e,o=je(o.plus(1),new i(1).minus(o),n+e,1),i.precision=e+4,i.rounding=1,o=o.ln(),i.precision=e,i.rounding=t,o.times(.5))):new i(NaN)},Fe.inverseSine=Fe.asin=function(){var e,t,n,r,o=this,i=o.constructor;return o.isZero()?new i(o):(t=o.abs().cmp(1),n=i.precision,r=i.rounding,t!==-1?0===t?(e=d(i,n+4,r).times(.5),e.s=o.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,o=o.div(new i(1).minus(o.times(o)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,o.times(2)))},Fe.inverseTangent=Fe.atan=function(){var e,t,n,r,o,i,a,s,u,c=this,p=c.constructor,h=p.precision,f=p.rounding;if(c.isFinite()){if(c.isZero())return new p(c);if(c.abs().eq(1)&&h+4<=Ue)return a=d(p,h+4,f).times(.25),a.s=c.s,a}else{if(!c.s)return new p(NaN);if(h+4<=Ue)return a=d(p,h+4,f).times(.5),a.s=c.s,a}for(p.precision=s=h+10,p.rounding=1,n=Math.min(28,s/ke+2|0),e=n;e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(Ce=!1,t=Math.ceil(s/ke),r=1,u=c.times(c),a=new p(c),o=c;e!==-1;)if(o=o.times(u),i=a.minus(o.div(r+=2)),o=o.times(u),a=i.plus(o.div(r+=2)),void 0!==a.d[t])for(e=t;a.d[e]===i.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),Ce=!0,l(a,p.precision=h,p.rounding=f,!0)},Fe.isFinite=function(){return!!this.d},Fe.isInteger=Fe.isInt=function(){return!!this.d&&Oe(this.e/ke)>this.d.length-2},Fe.isNaN=function(){return!this.s},Fe.isNegative=Fe.isNeg=function(){return this.s<0},Fe.isPositive=Fe.isPos=function(){return this.s>0},Fe.isZero=function(){return!!this.d&&0===this.d[0]},Fe.lessThan=Fe.lt=function(e){return this.cmp(e)<0},Fe.lessThanOrEqualTo=Fe.lte=function(e){return this.cmp(e)<1},Fe.logarithm=Fe.log=function(e){var t,n,r,o,a,u,c,p,h=this,d=h.constructor,m=d.precision,g=d.rounding,v=5;if(null==e)e=new d(10),t=!0;else{if(e=new d(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(n=h.d,h.s<0||!n||!n[0]||h.eq(1))return new d(n&&!n[0]?-1/0:1!=h.s?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(o=n[0];o%10===0;)o/=10;a=1!==o}if(Ce=!1,c=m+v,u=w(h,c),r=t?f(d,c+10):w(e,c),p=je(u,r,c,1),s(p.d,o=m,g))do if(c+=10,u=w(h,c),r=t?f(d,c+10):w(e,c),p=je(u,r,c,1),!a){+i(p.d).slice(o+1,o+15)+1==1e14&&(p=l(p,m+1,0));break}while(s(p.d,o+=10,g));return Ce=!0,l(p,m,g)},Fe.minus=Fe.sub=function(e){var t,n,r,o,i,a,s,u,c,p,f,d,m=this,g=m.constructor;if(e=new g(e),!m.d||!e.d)return m.s&&e.s?m.d?e.s=-e.s:e=new g(e.d||m.s!==e.s?m:NaN):e=new g(NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(c=m.d,d=e.d,s=g.precision,u=g.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!c[0])return new g(3===u?-0:0);e=new g(m)}return Ce?l(e,s,u):e}if(n=Oe(e.e/ke),p=Oe(m.e/ke),c=c.slice(),i=p-n){for(f=i<0,f?(t=c,i=-i,a=d.length):(t=d,n=p,a=c.length),r=Math.max(Math.ceil(s/ke),a)+2,i>r&&(i=r,t.length=1),t.reverse(),r=i;r--;)t.push(0);t.reverse()}else{for(r=c.length,a=d.length,f=r<a,f&&(a=r),r=0;r<a;r++)if(c[r]!=d[r]){f=c[r]<d[r];break}i=0}for(f&&(t=c,c=d,d=t,e.s=-e.s),a=c.length,r=d.length-a;r>0;--r)c[a++]=0;for(r=d.length;r>i;){if(c[--r]<d[r]){for(o=r;o&&0===c[--o];)c[o]=Le-1;--c[o],c[r]+=Le}c[r]-=d[r]}for(;0===c[--a];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=h(c,n),Ce?l(e,s,u):e):new g(3===u?-0:0)},Fe.modulo=Fe.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?l(new r(n),r.precision,r.rounding):(Ce=!1,9==r.modulo?(t=je(n,e.abs(),0,3,1),t.s*=e.s):t=je(n,e,0,r.modulo,1),t=t.times(e),Ce=!0,n.minus(t))},Fe.naturalExponential=Fe.exp=function(){return E(this)},Fe.naturalLogarithm=Fe.ln=function(){return w(this)},Fe.negated=Fe.neg=function(){var e=new this.constructor(this);return e.s=-e.s,l(e)},Fe.plus=Fe.add=function(e){var t,n,r,o,i,a,s,u,c,p,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new d(e.d||f.s===e.s?f:NaN)):e=new d(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(c=f.d,p=e.d,s=d.precision,u=d.rounding,!c[0]||!p[0])return p[0]||(e=new d(f)),Ce?l(e,s,u):e;if(i=Oe(f.e/ke),r=Oe(e.e/ke),c=c.slice(),o=i-r){for(o<0?(n=c,o=-o,a=p.length):(n=p,r=i,a=c.length),i=Math.ceil(s/ke),a=i>a?i+1:a+1,o>a&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(a=c.length,o=p.length,a-o<0&&(o=a,n=p,p=c,c=n),t=0;o;)t=(c[--o]=c[o]+p[o]+t)/Le|0,c[o]%=Le;for(t&&(c.unshift(t),++r),a=c.length;0==c[--a];)c.pop();return e.d=c,e.e=h(c,r),Ce?l(e,s,u):e},Fe.precision=Fe.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Se+e);return n.d?(t=m(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},Fe.round=function(){var e=this,t=e.constructor;return l(new t(e),e.e+1,t.rounding)},Fe.sine=Fe.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+ke,r.rounding=1,n=N(r,_(r,n)),r.precision=e,r.rounding=t,l(ge>2?n.neg():n,e,t,!0)):new r(NaN)},Fe.squareRoot=Fe.sqrt=function(){var e,t,n,r,o,a,s=this,u=s.d,c=s.e,p=s.s,h=s.constructor;if(1!==p||!u||!u[0])return new h(!p||p<0&&(!u||u[0])?NaN:u?s:1/0);for(Ce=!1,p=Math.sqrt(+s),0==p||p==1/0?(t=i(u),(t.length+c)%2==0&&(t+="0"),p=Math.sqrt(t),c=Oe((c+1)/2)-(c<0||c%2),p==1/0?t="1e"+c:(t=p.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),r=new h(t)):r=new h(p.toString()),n=(c=h.precision)+3;;)if(a=r,r=a.plus(je(s,a,n+2,1)).times(.5),i(a.d).slice(0,n)===(t=i(r.d)).slice(0,n)){if(t=t.slice(n-3,n+1),"9999"!=t&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(l(r,c+1,1),e=!r.times(r).eq(s));break}if(!o&&(l(a,c+1,0),a.times(a).eq(s))){r=a;break}n+=4,o=1}return Ce=!0,l(r,c,h.rounding,e)},Fe.tangent=Fe.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=je(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,l(2==ge||4==ge?n.neg():n,e,t,!0)):new r(NaN)},Fe.times=Fe.mul=function(e){var t,n,r,o,i,a,s,u,c,p=this,f=p.constructor,d=p.d,m=(e=new f(e)).d;if(e.s*=p.s,!(d&&d[0]&&m&&m[0]))return new f(!e.s||d&&!d[0]&&!m||m&&!m[0]&&!d?NaN:d&&m?0*e.s:e.s/0);for(n=Oe(p.e/ke)+Oe(e.e/ke),u=d.length,c=m.length,u<c&&(i=d,d=m,m=i,a=u,u=c,c=a),i=[],a=u+c,r=a;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,o=u+r;o>r;)s=i[o]+m[r]*d[o-r-1]+t,i[o--]=s%Le|0,t=s/Le|0;i[o]=(i[o]+t)%Le|0}for(;!i[--a];)i.pop();for(t?++n:i.shift(),r=i.length;!i[--r];)i.pop();return e.d=i,e.e=h(i,n),Ce?l(e,f.precision,f.rounding):e},Fe.toBinary=function(e,t){return O(this,2,e,t)},Fe.toDecimalPlaces=Fe.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(a(e,0,ye),void 0===t?t=r.rounding:a(t,0,8),l(n,e+n.e+1,t))},Fe.toExponential=function(e,t){var n,r=this,o=r.constructor;return void 0===e?n=p(r,!0):(a(e,0,ye),void 0===t?t=o.rounding:a(t,0,8),r=l(new o(r),e+1,t),n=p(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},Fe.toFixed=function(e,t){var n,r,o=this,i=o.constructor;return void 0===e?n=p(o):(a(e,0,ye),void 0===t?t=i.rounding:a(t,0,8),r=l(new i(o),e+o.e+1,t),n=p(r,!1,e+r.e+1)),o.isNeg()&&!o.isZero()?"-"+n:n},Fe.toFraction=function(e){var t,n,r,o,a,s,u,c,l,p,h,f,d=this,g=d.d,v=d.constructor;if(!g)return new v(d);if(l=n=new v(1),r=c=new v(0),t=new v(r),a=t.e=m(g)-d.e-1,s=a%ke,t.d[0]=Pe(10,s<0?ke+s:s),null==e)e=a>0?t:l;else{if(u=new v(e),!u.isInt()||u.lt(l))throw Error(Se+u);e=u.gt(t)?a>0?t:l:u}for(Ce=!1,u=new v(i(g)),p=v.precision,v.precision=a=g.length*ke*2;h=je(u,t,0,1,1),o=n.plus(h.times(r)),1!=o.cmp(e);)n=r,r=o,o=l,l=c.plus(h.times(o)),c=o,o=t,t=u.minus(h.times(o)),u=o;return o=je(e.minus(n),r,0,1,1),c=c.plus(o.times(l)),n=n.plus(o.times(r)),c.s=l.s=d.s,f=je(l,r,a,1).minus(d).abs().cmp(je(c,n,a,1).minus(d).abs())<1?[l,r]:[c,n],v.precision=p,Ce=!0,f},Fe.toHexadecimal=Fe.toHex=function(e,t){return O(this,16,e,t)},Fe.toJSON=function(){var e,t,n,r,o,a,s,c,l=this,p=l.s<0;if(!l.d)return be.charAt(l.s?p?82:83:84);if(t=l.e,1===l.d.length&&t<4&&t>=0&&(a=l.d[0],a<2857))return a<41?be.charAt(p?a+41:a):(a-=41,p&&(a+=2816),r=a/88|0,be.charAt(r)+be.charAt(a-88*r));if(c=i(l.d),s="",!p&&t<=8&&t>=-7)r=64+t+7;else if(p&&t<=4&&t>=-3)r=80+t+3;else if(c.length===t+1)r=32*p;else if(r=32*p+16*(t<0),t=Math.abs(t),t<88)r+=1,s=be.charAt(t);else if(t<7744)r+=2,a=t/88|0,s=be.charAt(a)+be.charAt(t-88*a);else for(e=u(String(t),10,88),o=e.length,r+=o,n=0;n<o;n++)s+=be.charAt(e[n]);for(s=be.charAt(r)+s,e=u(c,10,88),o=e.length,n=0;n<o;n++)s+=be.charAt(e[n]);return s},Fe.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0!==t&&a(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Ce=!1,t<4&&(t=[4,5,7,8][t]),n=je(n,e,0,t,1).times(e),Ce=!0,l(n)):(e.s=n.s,n=e),n},Fe.toNumber=function(){return+this},Fe.toOctal=function(e,t){return O(this,8,e,t)},Fe.toPower=Fe.pow=function(e){var t,n,r,o,a,u,c,p=this,h=p.constructor,f=+(e=new h(e));if(!(p.d&&e.d&&p.d[0]&&e.d[0]))return new h(Pe(+p,f));if(p=new h(p),p.eq(1))return p;if(r=h.precision,a=h.rounding,e.eq(1))return l(p,r,a);if(t=Oe(e.e/ke),n=e.d.length-1,c=t>=n,u=p.s,c){if((n=f<0?-f:f)<=De)return o=v(h,p,n,r),e.s<0?new h(1).div(o):l(o,r,a)}else if(u<0)return new h(NaN);return u=u<0&&1&e.d[Math.max(t,n)]?-1:1,n=Pe(+p,f),t=0!=n&&isFinite(n)?new h(n+"").e:Oe(f*(Math.log("0."+i(p.d))/Math.LN10+p.e+1)),t>h.maxE+1||t<h.minE-1?new h(t>0?u/0:0):(Ce=!1,h.rounding=p.s=1,n=Math.min(12,(t+"").length),o=E(e.times(w(p,r+n)),r),o=l(o,r+5,1),s(o.d,r,a)&&(t=r+10,o=l(E(e.times(w(p,t+n)),t),t+5,1),+i(o.d).slice(r+1,r+15)+1==1e14&&(o=l(o,r+1,0))),o.s=u,Ce=!0,h.rounding=a,l(o,r,a))},Fe.toPrecision=function(e,t){var n,r=this,o=r.constructor;return void 0===e?n=p(r,r.e<=o.toExpNeg||r.e>=o.toExpPos):(a(e,1,ye),void 0===t?t=o.rounding:a(t,0,8),r=l(new o(r),e,t),n=p(r,e<=r.e||r.e<=o.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},Fe.toSignificantDigits=Fe.toSD=function(e,t){var n=this,r=n.constructor;return void 0===e?(e=r.precision,t=r.rounding):(a(e,1,ye),void 0===t?t=r.rounding:a(t,0,8)),l(new r(n),e,t)},Fe.toString=function(){var e=this,t=e.constructor,n=p(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},Fe.truncated=Fe.trunc=function(){return l(new this.constructor(this),this.e+1,1)},Fe.valueOf=function(){var e=this,t=e.constructor,n=p(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var je=function(){function e(e,t,n){var r,o=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+o,e[i]=r%n|0,o=r/n|0;return o&&e.unshift(o),e}function t(e,t,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,n,r){for(var o=0;n--;)e[n]-=o,o=e[n]<t[n]?1:0,e[n]=o*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,o,i,a,s,u){var c,p,h,f,d,m,g,v,y,b,E,w,x,T,C,N,S,_,O,P,A=r.constructor,I=r.s==o.s?1:-1,M=r.d,R=o.d;if(!(M&&M[0]&&R&&R[0]))return new A(r.s&&o.s&&(M?!R||M[0]!=R[0]:R)?M&&0==M[0]||!R?0*I:I/0:NaN);for(u?(d=1,p=r.e-o.e):(u=Le,d=ke,p=Oe(r.e/d)-Oe(o.e/d)),O=R.length,S=M.length,y=new A(I),b=y.d=[],h=0;R[h]==(M[h]||0);h++);if(R[h]>(M[h]||0)&&p--,null==i?(T=i=A.precision,a=A.rounding):T=s?i+(r.e-o.e)+1:i,T<0)b.push(1),m=!0;else{if(T=T/d+2|0,h=0,1==O){for(f=0,R=R[0],T++;(h<S||f)&&T--;h++)C=f*u+(M[h]||0),b[h]=C/R|0,f=C%R|0;m=f||h<S}else{for(f=u/(R[0]+1)|0,f>1&&(R=e(R,f,u),M=e(M,f,u),O=R.length,S=M.length),N=O,E=M.slice(0,O),w=E.length;w<O;)E[w++]=0;P=R.slice(),P.unshift(0),_=R[0],R[1]>=u/2&&++_;do f=0,c=t(R,E,O,w),c<0?(x=E[0],O!=w&&(x=x*u+(E[1]||0)),f=x/_|0,f>1?(f>=u&&(f=u-1),g=e(R,f,u),v=g.length,w=E.length,c=t(g,E,v,w),1==c&&(f--,n(g,O<v?P:R,v,u))):(0==f&&(c=f=1),g=R.slice()),v=g.length,v<w&&g.unshift(0),n(E,g,w,u),c==-1&&(w=E.length,c=t(R,E,O,w),c<1&&(f++,n(E,O<w?P:R,w,u))),w=E.length):0===c&&(f++,E=[0]),b[h++]=f,c&&E[0]?E[w++]=M[N]||0:(E=[M[N]],w=1);while((N++<S||void 0!==E[0])&&T--);m=void 0!==E[0]}b[0]||b.shift()}if(1==d)y.e=p,me=m;else{for(h=1,f=b[0];f>=10;f/=10)h++;y.e=h+p*d-1,l(y,s?i+y.e+1:i,a,m)}return y}}();xe=G(xe),Ee=new xe(Ee),we=new xe(we),r=function(){return xe}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("bignumber",{"":function(){return new e.BigNumber(0)},number:function(t){return new e.BigNumber(t+"")},string:function(t){return new e.BigNumber(t)},BigNumber:function(e){return e},Fraction:function(t){return new e.BigNumber(t.n).div(t.d)},"Array | Matrix":function(e){return o(e,i)}});return i.toTex={0:"0",1:"\\left(${args[0]}\\right)"},i}var o=n(484);t.name="bignumber",t.factory=r},function(e,t){"use strict";e.exports=function e(t,n,r){return t&&"function"==typeof t.map?t.map(function(t){return e(t,n,r)}):n(t)}},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("number",{"":function(){return 0},number:function(e){return e},string:function(e){var t=Number(e);if(isNaN(t))throw new SyntaxError('String "'+e+'" is no valid number');return t},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return o(e,i)}});return i.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},i}var o=n(484);t.name="number",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){var a=r(n(487)),s=r(n(488)),u=n(489),c=r(n(490)),l=r(n(492)),p=r(n(495)),h=r(n(496)),f=r(n(505)),d=i("add",o({"Matrix, Matrix":function(e,t){var n;switch(e.storage()){case"sparse":switch(t.storage()){case"sparse":n=l(e,t,s);break;default:n=c(t,e,s,!0)}break;default:switch(t.storage()){case"sparse":n=c(e,t,s,!1);break;default:n=h(e,t,s)}}return n},"Array, Array":function(e,t){return d(a(e),a(t)).valueOf()},"Array, Matrix":function(e,t){return d(a(e),t)},"Matrix, Array":function(e,t){return d(e,a(t))},"Matrix, any":function(e,t){var n;switch(e.storage()){case"sparse":n=p(e,t,s,!1);break;default:n=f(e,t,s,!1)}return n},"any, Matrix":function(e,t){var n;switch(t.storage()){case"sparse":n=p(t,e,s,!0);break;default:n=f(t,e,s,!0)}return n},"Array, any":function(e,t){return f(a(e),t,s,!1).valueOf()},"any, Array":function(e,t){return f(a(t),e,s,!0).valueOf()}},s.signatures));return d.toTex={2:"\\left(${args[0]}"+u.operators.add+"${args[1]}\\right)"},d}var o=n(470).extend;t.name="add",t.factory=r},function(e,t){"use strict";function n(e,t,n,r){function o(t,n,r){var o=e.Matrix.storage(n||"default");return new o(t,r)}var i=r("matrix",{"":function(){return o([])},string:function(e){return o([],e)},"string, string":function(e,t){return o([],e,t)},Array:function(e){return o(e)},Matrix:function(e){return o(e,e.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});return i.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},i}t.name="matrix",t.factory=n},function(e,t){"use strict";function n(e,t,n,r){var o=r("add",{"number, number":function(e,t){return e+t},"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=o(n.value,t.value),n.fixPrefix=!1,n}});return o}t.factory=n},function(e,t){"use strict";t.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},t.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},t.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var n={deg:"^\\circ"};t.toSymbol=function(e,r){if(r="undefined"!=typeof r&&r)return n.hasOwnProperty(e)?n[e]:"\\mathrm{"+e+"}";if(t.symbols.hasOwnProperty(e))return t.symbols[e];if(e.indexOf("_")!==-1){var o=e.indexOf("_");return t.toSymbol(e.substring(0,o))+"_{"+t.toSymbol(e.substring(o+1))+"}"}return e}},function(e,t,n){"use strict";function r(e,t,n,r){var i=e.DenseMatrix,a=function(e,t,n,a){var s=e._data,u=e._size,c=e._datatype,l=t._values,p=t._index,h=t._ptr,f=t._size,d=t._datatype;if(u.length!==f.length)throw new o(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m,g,v=u[0],y=u[1],b="string"==typeof c&&c===d?c:void 0,E=b?r.find(n,[b,b]):n,w=[];for(m=0;m<v;m++)w[m]=[];var x=[],T=[];for(g=0;g<y;g++){for(var C=g+1,N=h[g],S=h[g+1],_=N;_<S;_++)m=p[_],x[m]=a?E(l[_],s[m][g]):E(s[m][g],l[_]),T[m]=C;for(m=0;m<v;m++)T[m]===C?w[m][g]=x[m]:w[m][g]=s[m][g]}return new i({data:w,size:[v,y],datatype:b})};return a}var o=n(491);t.name="algorithm01",t.factory=r},function(e,t){"use strict";function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}n.prototype=new RangeError,n.prototype.constructor=RangeError,n.prototype.name="DimensionError",n.prototype.isDimensionError=!0,e.exports=n},function(e,t,n){"use strict";function r(e,t,r,i){var a=r(n(493)),s=e.SparseMatrix,u=function(e,t,n){var r=e._values,u=e._index,c=e._ptr,l=e._size,p=e._datatype,h=t._values,f=t._index,d=t._ptr,m=t._size,g=t._datatype;if(l.length!==m.length)throw new o(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");var v,y=l[0],b=l[1],E=a,w=0,x=n;"string"==typeof p&&p===g&&(v=p,E=i.find(a,[v,v]),w=i.convert(0,v),x=i.find(n,[v,v]));var T,C,N,S,_,O=r&&h?[]:void 0,P=[],A=[],I=new s({values:O,index:P,ptr:A,size:[y,b],datatype:v}),M=r&&h?[]:void 0,R=r&&h?[]:void 0,L=[],k=[];for(C=0;C<b;C++){A[C]=P.length;var D=C+1;for(S=c[C],_=c[C+1],N=S;N<_;N++)T=u[N],P.push(T),L[T]=D,M&&(M[T]=r[N]);for(S=d[C],_=d[C+1],N=S;N<_;N++)if(T=f[N],L[T]===D){if(M){var B=x(M[T],h[N]);E(B,w)?L[T]=null:M[T]=B}}else P.push(T),k[T]=D,R&&(R[T]=h[N]);if(M&&R)for(N=A[C];N<P.length;)T=P[N],L[T]===D?(O[N]=M[T],N++):k[T]===D?(O[N]=R[T],N++):P.splice(N,1)}return A[b]=P.length,I};return u}var o=n(491);t.name="algorithm04",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var a=r("equalScalar",{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,n){return e===n||o(e,n,t.epsilon)},"BigNumber, BigNumber":function(e,n){return e.eq(n)||i(e,n,t.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return e.equals(t)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return a(e.value,t.value)},"string, string":function(e,t){return e===t}});return a}var o=n(473).nearlyEqual,i=n(494);t.factory=r},function(e,t){"use strict";e.exports=function(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var o=e.constructor.max(e.abs(),t.abs());return r.lte(o.times(n))}return!1}},function(e,t){"use strict";function n(e,t,n,r){var o=e.DenseMatrix,i=function(e,t,n,i){var a=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,h=c[0],f=c[1],d=n;"string"==typeof l&&(p=l,t=r.convert(t,p),d=r.find(n,[p,p]));for(var m=[],g=new o({data:m,size:[h,f],datatype:p}),v=[],y=[],b=0;b<f;b++){for(var E=b+1,w=u[b],x=u[b+1],T=w;T<x;T++){var C=s[T];v[C]=a[T],y[C]=E}for(var N=0;N<h;N++)0===b&&(m[N]=[]),y[N]===E?m[N][b]=i?d(t,v[N]):d(v[N],t):m[N][b]=t}return g};return i}t.name="algorithm10",t.factory=n},function(e,t,n){"use strict";function r(e,t,n,r){var o=e.DenseMatrix,a=function(e,t,n){var a=e._data,u=e._size,c=e._datatype,l=t._data,p=t._size,h=t._datatype,f=[];if(u.length!==p.length)throw new i(u.length,p.length);for(var d=0;d<u.length;d++){if(u[d]!==p[d])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");f[d]=u[d]}var m,g=n;"string"==typeof c&&c===h&&(m=c,t=r.convert(t,m),g=r.find(n,[m,m]));var v=f.length>0?s(g,0,f,f[0],a,l):[];return new o({data:v,size:f,datatype:m})},s=function(e,t,n,r,o,i){var a=[];if(t===n.length-1)for(var u=0;u<r;u++)a[u]=e(o[u],i[u]);else for(var c=0;c<r;c++)a[c]=s(e,t+1,n,n[t+1],o[c],i[c]);return a};return a}var o=n(497),i=n(491),a=o.string;a.isString;t.name="algorithm13",t.factory=r},function(e,t,n){"use strict";t.array=n(498),t.boolean=n(503),t.function=n(504),t.number=n(473),t.object=n(470),t.string=n(499),t.types=n(501),t.emitter=n(475)},function(e,t,n){"use strict";function r(e,t,n){var o,i=e.length;if(i!=t[n])throw new c(i,t[n]);if(n<t.length-1){var a=n+1;for(o=0;o<i;o++){var s=e[o];if(!Array.isArray(s))throw new c(t.length-1,t.length,"<");r(e[o],t,a)}}else for(o=0;o<i;o++)if(Array.isArray(e[o]))throw new c(t.length+1,t.length,">")}function o(e,n,r,i){var a,s,u=e.length,c=n[r],l=Math.min(u,c);if(e.length=c,r<n.length-1){var p=r+1;for(a=0;a<l;a++)s=e[a],Array.isArray(s)||(s=[s],e[a]=s),o(s,n,p,i);for(a=l;a<c;a++)s=[],e[a]=s,o(s,n,p,i)}else{for(a=0;a<l;a++)for(;Array.isArray(e[a]);)e[a]=e[a][0];if(i!==t.UNINITIALIZED)for(a=l;a<c;a++)e[a]=i}}function i(e,t,n){var r,o;if(n<t){var a=n+1;for(r=0,o=e.length;r<o;r++)e[r]=i(e[r],t,a)}else for(;Array.isArray(e);)e=e[0];return e}function a(e,t,n){var r,o;if(Array.isArray(e)){var i=n+1;for(r=0,o=e.length;r<o;r++)e[r]=a(e[r],t,i)}else for(var s=n;s<t;s++)e=[e];return e}var s=n(473),u=n(499),c=(n(470),n(501),n(491)),l=n(502);t.size=function(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t},t.validate=function(e,t){var n=0==t.length;if(n){if(Array.isArray(e))throw new c(e.length,0)}else r(e,t,0)},t.validateIndex=function(e,t){if(!s.isNumber(e)||!s.isInteger(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new l(e,t)},t.UNINITIALIZED={},t.resize=function(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");t.forEach(function(e){if(!s.isNumber(e)||!s.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+u.format(t)+")")});var r=void 0!==n?n:0;return o(e,t,0,r),e},t.squeeze=function(e,n){for(var r=n||t.size(e);Array.isArray(e)&&1===e.length;)e=e[0],r.shift();for(var o=r.length;1===r[o-1];)o--;return o<r.length&&(e=i(e,o,0),r.length=o),e},t.unsqueeze=function(e,n,r,o){var i=o||t.size(e);if(r)for(var s=0;s<r;s++)e=[e],i.unshift(1);for(e=a(e,n,0);i.length<n;)i.push(1);return e},t.flatten=function(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function e(n){Array.isArray(n)?n.forEach(e):t.push(n)}),t},t.isArray=Array.isArray},function(e,t,n){"use strict";function r(e,n){if(Array.isArray(e)){for(var o="[",i=e.length,a=0;a<i;a++)0!=a&&(o+=", "),o+=r(e[a],n);return o+="]"}return t.format(e,n)}var o=n(473).format,i=n(500).format;t.isString=function(e){return"string"==typeof e},t.endsWith=function(e,t){var n=e.length-t.length,r=e.length;return e.substring(n,r)===t},t.format=function(e,n){if("number"==typeof e)return o(e,n);if(e&&e.isBigNumber===!0)return i(e,n);if(e&&e.isFraction===!0)return n&&"decimal"===n.fraction?e.toString():e.s*e.n+"/"+e.d;if(Array.isArray(e))return r(e,n);if(t.isString(e))return'"'+e+'"';if("function"==typeof e)return e.syntax?String(e.syntax):"function";if(e&&"object"==typeof e){if("function"==typeof e.format)return e.format(n);if(e&&e.toString()!=={}.toString())return e.toString();var a=[];for(var s in e)e.hasOwnProperty(s)&&a.push('"'+s+'": '+t.format(e[s],n));return"{"+a.join(", ")+"}"}return String(e)}},function(e,t){t.format=function(e,n){if("function"==typeof n)return n(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r="auto",o=void 0;switch(void 0!==n&&(n.notation&&(r=n.notation),"number"==typeof n?o=n:n.precision&&(o=n.precision)),r){case"fixed":return t.toFixed(e,o);case"exponential":return t.toExponential(e,o);case"auto":var i=.001,a=1e5;n&&n.exponential&&(void 0!==n.exponential.lower&&(i=n.exponential.lower),void 0!==n.exponential.upper&&(a=n.exponential.upper));({toExpNeg:e.constructor.toExpNeg,toExpPos:e.constructor.toExpPos});if(e.constructor.config({toExpNeg:Math.round(Math.log(i)/Math.LN10),toExpPos:Math.round(Math.log(a)/Math.LN10)}),e.isZero())return"0";var s,u=e.abs();return s=u.gte(i)&&u.lt(a)?e.toSignificantDigits(o).toFixed():t.toExponential(e,o),s.replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}},t.toExponential=function(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()},t.toFixed=function(e,t){return e.toFixed(t||0)}},function(e,t){"use strict";t.type=function(e){var t=typeof e;return"object"===t?null===e?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":"Object":"function"===t?"Function":t},t.isScalar=function(e){return!(e&&e.isMatrix||Array.isArray(e))}},function(e,t){"use strict";function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}n.prototype=new RangeError,n.prototype.constructor=RangeError,n.prototype.name="IndexError",n.prototype.isIndexError=!0,e.exports=n},function(e,t){"use strict";t.isBoolean=function(e){return"boolean"==typeof e}},function(e,t){t.memoize=function(e,t){return function n(){"object"!=typeof n.cache&&(n.cache={});for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=t?t(r):JSON.stringify(r);return i in n.cache?n.cache[i]:n.cache[i]=e.apply(e,r)}},t.maxArgumentCount=function(e){return Object.keys(e.signatures||{}).reduce(function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}},function(e,t,n){"use strict";function r(e,t,n,r){var i=e.DenseMatrix,a=function(e,t,n,a){var u,c=e._data,l=e._size,p=e._datatype,h=n;"string"==typeof p&&(u=p,t=r.convert(t,u),h=r.find(n,[u,u]));var f=l.length>0?s(h,0,l,l[0],c,t,a):[];return new i({data:f,size:o(l),datatype:u})},s=function(e,t,n,r,o,i,a){
var u=[];if(t===n.length-1)for(var c=0;c<r;c++)u[c]=a?e(i,o[c]):e(o[c],i);else for(var l=0;l<r;l++)u[l]=s(e,t+1,n,n[t+1],o[l],i,a);return u};return a}var o=n(470).clone;t.name="algorithm14",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){var a=r(n(507)),s=r(n(509)),u=r(n(511)),c=r(n(487)),l=r(n(510)),p=r(n(505)),h=i("divide",o({"Array | Matrix, Array | Matrix":function(e,t){return s(e,u(t))},"Matrix, any":function(e,t){var n;switch(e.storage()){case"sparse":n=l(e,t,a,!1);break;case"dense":n=p(e,t,a,!1)}return n},"Array, any":function(e,t){return p(c(e),t,a,!1).valueOf()},"any, Array | Matrix":function(e,t){return s(e,u(t))}},a.signatures));return h.toTex={2:"\\frac{${args[0]}}{${args[1]}}"},h}var o=n(470).extend;t.name="divide",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){var i=r(n(508)),a=o("divide",{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var n=e.clone();return n.value=a(null===n.value?n._normalize(1):n.value,t),n},"number | Fraction | BigNumber, Unit":function(e,t){var n=t.pow(-1);return n.value=i(null===n.value?n._normalize(1):n.value,e),n},"Unit, Unit":function(e,t){return e.divide(t)}});return a}t.factory=r},function(e,t){"use strict";function n(e,t,n,r){var o=r("multiplyScalar",{"number, number":function(e,t){return e*t},"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):o(n.value,e),n},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):o(n.value,t),n},"Unit, Unit":function(e,t){return e.multiply(t)}});return o}t.factory=n},function(e,t,n){"use strict";function r(e,t,r,a){var s=n(489),u=r(n(487)),c=r(n(488)),l=r(n(508)),p=r(n(493)),h=r(n(510)),f=r(n(505)),d=e.DenseMatrix,m=e.SparseMatrix,g=a("multiply",o({"Array, Array":function(e,t){v(i.size(e),i.size(t));var n=g(u(e),u(t));return n&&n.isMatrix===!0?n.valueOf():n},"Matrix, Matrix":function(e,t){var n=e.size(),r=t.size();return v(n,r),1===n.length?1===r.length?y(e,t,n[0]):b(e,t):1===r.length?w(e,t):x(e,t)},"Matrix, Array":function(e,t){return g(e,u(t))},"Array, Matrix":function(e,t){return g(u(e,t.storage()),t)},"Matrix, any":function(e,t){var n;switch(e.storage()){case"sparse":n=h(e,t,l,!1);break;case"dense":n=f(e,t,l,!1)}return n},"any, Matrix":function(e,t){var n;switch(t.storage()){case"sparse":n=h(t,e,l,!0);break;case"dense":n=f(t,e,l,!0)}return n},"Array, any":function(e,t){return f(u(e),t,l,!1).valueOf()},"any, Array":function(e,t){return f(u(t),e,l,!0).valueOf()}},l.signatures)),v=function(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}},y=function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");var r,o=e._data,i=e._datatype,s=t._data,u=t._datatype,p=c,h=l;i&&u&&i===u&&"string"==typeof i&&(r=i,p=a.find(c,[r,r]),h=a.find(l,[r,r]));for(var f=h(o[0],s[0]),d=1;d<n;d++)f=p(f,h(o[d],s[d]));return f},b=function(e,t){switch(t.storage()){case"dense":return E(e,t)}throw new Error("Not implemented")},E=function(e,t){var n,r=e._data,o=e._size,i=e._datatype,s=t._data,u=t._size,p=t._datatype,h=o[0],f=u[1],m=c,g=l;i&&p&&i===p&&"string"==typeof i&&(n=i,m=a.find(c,[n,n]),g=a.find(l,[n,n]));for(var v=[],y=0;y<f;y++){for(var b=g(r[0],s[0][y]),E=1;E<h;E++)b=m(b,g(r[E],s[E][y]));v[y]=b}return new d({data:v,size:[f],datatype:n})},w=function(e,t){switch(e.storage()){case"dense":return T(e,t);case"sparse":return S(e,t)}},x=function(e,t){switch(e.storage()){case"dense":switch(t.storage()){case"dense":return C(e,t);case"sparse":return N(e,t)}break;case"sparse":switch(t.storage()){case"dense":return _(e,t);case"sparse":return O(e,t)}}},T=function(e,t){var n,r=e._data,o=e._size,i=e._datatype,s=t._data,u=t._datatype,p=o[0],h=o[1],f=c,m=l;i&&u&&i===u&&"string"==typeof i&&(n=i,f=a.find(c,[n,n]),m=a.find(l,[n,n]));for(var g=[],v=0;v<p;v++){for(var y=r[v],b=m(y[0],s[0]),E=1;E<h;E++)b=f(b,m(y[E],s[E]));g[v]=b}return new d({data:g,size:[p],datatype:n})},C=function(e,t){var n,r=e._data,o=e._size,i=e._datatype,s=t._data,u=t._size,p=t._datatype,h=o[0],f=o[1],m=u[1],g=c,v=l;i&&p&&i===p&&"string"==typeof i&&(n=i,g=a.find(c,[n,n]),v=a.find(l,[n,n]));for(var y=[],b=0;b<h;b++){var E=r[b];y[b]=[];for(var w=0;w<m;w++){for(var x=v(E[0],s[0][w]),T=1;T<f;T++)x=g(x,v(E[T],s[T][w]));y[b][w]=x}}return new d({data:y,size:[h,m],datatype:n})},N=function(e,t){var n=e._data,r=e._size,o=e._datatype,i=t._values,s=t._index,u=t._ptr,h=t._size,f=t._datatype;if(!i)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var d,g=r[0],v=h[1],y=c,b=l,E=p,w=0;o&&f&&o===f&&"string"==typeof o&&(d=o,y=a.find(c,[d,d]),b=a.find(l,[d,d]),E=a.find(p,[d,d]),w=a.convert(0,d));for(var x=[],T=[],C=[],N=new m({values:x,index:T,ptr:C,size:[g,v],datatype:d}),S=0;S<v;S++){C[S]=T.length;var _=u[S],O=u[S+1];if(O>_)for(var P=0,A=0;A<g;A++){for(var I,M=A+1,R=_;R<O;R++){var L=s[R];P!==M?(I=b(n[A][L],i[R]),P=M):I=y(I,b(n[A][L],i[R]))}P!==M||E(I,w)||(T.push(A),x.push(I))}}return C[v]=T.length,N},S=function(e,t){var n=e._values,r=e._index,o=e._ptr,i=e._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,u=t._data,h=t._datatype,f=e._size[0],d=t._size[0],g=[],v=[],y=[],b=c,E=l,w=p,x=0;i&&h&&i===h&&"string"==typeof i&&(s=i,b=a.find(c,[s,s]),E=a.find(l,[s,s]),w=a.find(p,[s,s]),x=a.convert(0,s));var T=[],C=[];y[0]=0;for(var N=0;N<d;N++){var S=u[N];if(!w(S,x))for(var _=o[N],O=o[N+1],P=_;P<O;P++){var A=r[P];C[A]?T[A]=b(T[A],E(S,n[P])):(C[A]=!0,v.push(A),T[A]=E(S,n[P]))}}for(var I=v.length,M=0;M<I;M++){var R=v[M];g[M]=T[R]}return y[1]=v.length,new m({values:g,index:v,ptr:y,size:[f,1],datatype:s})},_=function(e,t){var n=e._values,r=e._index,o=e._ptr,i=e._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,u=t._data,h=t._datatype,f=e._size[0],d=t._size[0],g=t._size[1],v=c,y=l,b=p,E=0;i&&h&&i===h&&"string"==typeof i&&(s=i,v=a.find(c,[s,s]),y=a.find(l,[s,s]),b=a.find(p,[s,s]),E=a.convert(0,s));for(var w=[],x=[],T=[],C=new m({values:w,index:x,ptr:T,size:[f,g],datatype:s}),N=[],S=[],_=0;_<g;_++){T[_]=x.length;for(var O=_+1,P=0;P<d;P++){var A=u[P][_];if(!b(A,E))for(var I=o[P],M=o[P+1],R=I;R<M;R++){var L=r[R];S[L]!==O?(S[L]=O,x.push(L),N[L]=y(A,n[R])):N[L]=v(N[L],y(A,n[R]))}}for(var k=T[_],D=x.length,B=k;B<D;B++){var U=x[B];w[B]=N[U]}}return T[g]=x.length,C},O=function(e,t){var n,r=e._values,o=e._index,i=e._ptr,s=e._datatype,u=t._values,p=t._index,h=t._ptr,f=t._datatype,d=e._size[0],g=t._size[1],v=r&&u,y=c,b=l;s&&f&&s===f&&"string"==typeof s&&(n=s,y=a.find(c,[n,n]),b=a.find(l,[n,n]));for(var E,w,x,T,C,N,S,_,O=v?[]:void 0,P=[],A=[],I=new m({values:O,index:P,ptr:A,size:[d,g],datatype:n}),M=v?[]:void 0,R=[],L=0;L<g;L++){A[L]=P.length;var k=L+1;for(C=h[L],N=h[L+1],T=C;T<N;T++)if(_=p[T],v)for(w=i[_],x=i[_+1],E=w;E<x;E++)S=o[E],R[S]!==k?(R[S]=k,P.push(S),M[S]=b(u[T],r[E])):M[S]=y(M[S],b(u[T],r[E]));else for(w=i[_],x=i[_+1],E=w;E<x;E++)S=o[E],R[S]!==k&&(R[S]=k,P.push(S));if(v)for(var D=A[L],B=P.length,U=D;U<B;U++){var F=P[U];O[U]=M[F]}}return A[g]=P.length,I};return g.toTex={2:"\\left(${args[0]}"+s.operators.multiply+"${args[1]}\\right)"},g}var o=n(470).extend,i=n(498);t.name="multiply",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){var i=r(n(493)),a=e.SparseMatrix,s=function(e,t,n,r){var s=e._values,u=e._index,c=e._ptr,l=e._size,p=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,f=l[0],d=l[1],m=i,g=0,v=n;"string"==typeof p&&(h=p,m=o.find(i,[h,h]),g=o.convert(0,h),t=o.convert(t,h),v=o.find(n,[h,h]));for(var y=[],b=[],E=[],w=new a({values:y,index:b,ptr:E,size:[f,d],datatype:h}),x=0;x<d;x++){E[x]=b.length;for(var T=c[x],C=c[x+1],N=T;N<C;N++){var S=u[N],_=r?v(t,s[N]):v(s[N],t);m(_,g)||(b.push(S),y.push(_))}}return E[d]=b.length,w};return s}t.name="algorithm11",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){function a(e,t,n){var r,o,i,a,s;if(1==t){if(a=e[0][0],0==a)throw Error("Cannot calculate inverse, determinant is zero");return[[u(1,a)]]}if(2==t){var d=h(e);if(0==d)throw Error("Cannot calculate inverse, determinant is zero");return[[u(e[1][1],d),u(p(e[0][1]),d)],[u(p(e[1][0]),d),u(e[0][0],d)]]}var m=e.concat();for(r=0;r<t;r++)m[r]=m[r].concat();for(var g=f(t).valueOf(),v=0;v<n;v++){for(r=v;r<t&&0==m[r][v];)r++;if(r==t||0==m[r][v])throw Error("Cannot calculate inverse, determinant is zero");r!=v&&(s=m[v],m[v]=m[r],m[r]=s,s=g[v],g[v]=g[r],g[r]=s);var y=m[v],b=g[v];for(r=0;r<t;r++){var E=m[r],w=g[r];if(r!=v){if(0!=E[v]){for(i=u(p(E[v]),y[v]),o=v;o<n;o++)E[o]=c(E[o],l(i,y[o]));for(o=0;o<n;o++)w[o]=c(w[o],l(i,b[o]))}}else{for(i=y[v],o=v;o<n;o++)E[o]=u(E[o],i);for(o=0;o<n;o++)w[o]=u(w[o],i)}}}return g}var s=r(n(487)),u=r(n(507)),c=r(n(488)),l=r(n(509)),p=r(n(512)),h=r(n(513)),f=r(n(517)),d=i("inv",{"Array | Matrix":function(e){var t=e.isMatrix===!0?e.size():o.array.size(e);switch(t.length){case 1:if(1==t[0])return e.isMatrix===!0?s([u(1,e.valueOf()[0])]):[u(1,e[0])];throw new RangeError("Matrix must be square (size: "+o.string.format(t)+")");case 2:var n=t[0],r=t[1];if(n==r)return e.isMatrix===!0?s(a(e.valueOf(),n,r),e.storage()):a(e,n,r);throw new RangeError("Matrix must be square (size: "+o.string.format(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+o.string.format(t)+")")}},any:function(e){return u(1,e)}});return d.toTex={1:"\\left(${args[0]}\\right)^{-1}"},d}var o=n(497);t.name="inv",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){var a=n(489),s=i("unaryMinus",{number:function(e){return-e},Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=s(e.value),t},"Array | Matrix":function(e){return o(e,s,!0)}});return s.toTex={1:a.operators.unaryMinus+"\\left(${args[0]}\\right)"},s}var o=n(484);t.name="unaryMinus",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){function s(e,t,n){if(1==t)return i.clone(e[0][0]);if(2==t)return l(p(e[0][0],e[1][1]),p(e[1][0],e[0][1]));for(var r=function(e){var t,n,r=new Array(e.length),o=0;for(t=1;t<e.length;t++)o=c(o,e[t][t]);for(t=0;t<e.length;t++){for(r[t]=new Array(e.length),r[t][t]=h(o),n=0;n<t;n++)r[t][n]=0;for(n=t+1;n<e.length;n++)r[t][n]=e[t][n];t+1<e.length&&(o=l(o,e[t+1][t+1]))}return r},o=e,a=0;a<t-1;a++)o=p(r(o),e);return t%2==0?h(o[0][0]):o[0][0]}var u=r(n(487)),c=r(n(486)),l=r(n(514)),p=r(n(509)),h=r(n(512)),f=o("det",{any:function(e){return i.clone(e)},"Array | Matrix":function(e){var t;switch(e&&e.isMatrix===!0?t=e.size():Array.isArray(e)?(e=u(e),t=e.size()):t=[],t.length){case 0:return i.clone(e);case 1:if(1==t[0])return i.clone(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+a.format(t)+")");case 2:var n=t[0],r=t[1];if(n==r)return s(e.clone().valueOf(),n,r);throw new RangeError("Matrix must be square (size: "+a.format(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+a.format(t)+")")}}});return f.toTex={1:"\\det\\left(${args[0]}\\right)"},f}var o=n(497),i=o.object,a=o.string;t.name="det",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){var a=n(489),s=r(n(487)),u=r(n(488)),c=r(n(512)),l=r(n(490)),p=r(n(515)),h=r(n(516)),f=r(n(495)),d=r(n(496)),m=r(n(505)),g=i("subtract",{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=g(n.value,t.value),n.fixPrefix=!1,n},"Matrix, Matrix":function(e,t){var n=e.size(),r=t.size();if(n.length!==r.length)throw new o(n.length,r.length);var i;switch(e.storage()){case"sparse":switch(t.storage()){case"sparse":i=h(e,t,g);break;default:i=p(t,e,g,!0)}break;default:switch(t.storage()){case"sparse":i=l(e,t,g,!1);break;default:i=d(e,t,g)}}return i},"Array, Array":function(e,t){return g(s(e),s(t)).valueOf()},"Array, Matrix":function(e,t){return g(s(e),t)},"Matrix, Array":function(e,t){return g(e,s(t))},"Matrix, any":function(e,t){var n;switch(e.storage()){case"sparse":n=f(e,c(t),u);break;default:n=m(e,t,g)}return n},"any, Matrix":function(e,t){var n;switch(t.storage()){case"sparse":n=f(t,e,g,!0);break;default:n=m(t,e,g,!0)}return n},"Array, any":function(e,t){return m(s(e),t,g,!1).valueOf()},"any, Array":function(e,t){return m(s(t),e,g,!0).valueOf()}});return g.toTex={2:"\\left(${args[0]}"+a.operators.subtract+"${args[1]}\\right)"},g}var o=n(491);t.name="subtract",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=e.DenseMatrix,a=function(e,t,n,a){var s=e._data,u=e._size,c=e._datatype,l=t._values,p=t._index,h=t._ptr,f=t._size,d=t._datatype;if(u.length!==f.length)throw new o(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m,g=u[0],v=u[1],y=0,b=n;"string"==typeof c&&c===d&&(m=c,y=r.convert(0,m),b=r.find(n,[m,m]));for(var E=[],w=0;w<g;w++)E[w]=[];for(var x=[],T=[],C=0;C<v;C++){for(var N=C+1,S=h[C],_=h[C+1],O=S;O<_;O++){var P=p[O];x[P]=a?b(l[O],s[P][C]):b(s[P][C],l[O]),T[P]=N}for(var A=0;A<g;A++)T[A]===N?E[A][C]=x[A]:E[A][C]=a?b(y,s[A][C]):b(s[A][C],y)}return new i({data:E,size:[g,v],datatype:m})};return a}var o=n(491);t.name="algorithm03",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){var a=r(n(493)),s=e.SparseMatrix,u=function(e,t,n){var r=e._values,u=e._index,c=e._ptr,l=e._size,p=e._datatype,h=t._values,f=t._index,d=t._ptr,m=t._size,g=t._datatype;if(l.length!==m.length)throw new o(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");var v,y=l[0],b=l[1],E=a,w=0,x=n;"string"==typeof p&&p===g&&(v=p,E=i.find(a,[v,v]),w=i.convert(0,v),x=i.find(n,[v,v]));var T,C,N,S,_=r&&h?[]:void 0,O=[],P=[],A=new s({values:_,index:O,ptr:P,size:[y,b],datatype:v}),I=_?[]:void 0,M=_?[]:void 0,R=[],L=[];for(C=0;C<b;C++){P[C]=O.length;var k=C+1;for(N=c[C],S=c[C+1];N<S;N++)T=u[N],O.push(T),R[T]=k,I&&(I[T]=r[N]);for(N=d[C],S=d[C+1];N<S;N++)T=f[N],R[T]!==k&&O.push(T),L[T]=k,M&&(M[T]=h[N]);if(_)for(N=P[C];N<O.length;){T=O[N];var D=R[T],B=L[T];if(D===k||B===k){var U=D===k?I[T]:w,F=B===k?M[T]:w,j=x(U,F);E(j,w)?O.splice(N,1):(_.push(j),N++)}}}return P[b]=O.length,A};return u}var o=n(491);t.name="algorithm05",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,a){function s(e,t){switch(e.length){case 0:return t?c(t):[];case 1:return u(e[0],e[0],t);case 2:return u(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function u(t,n,r){var a=t&&t.isBigNumber===!0?e.BigNumber:n&&n.isBigNumber===!0?e.BigNumber:null;if(t&&t.isBigNumber===!0&&(t=t.toNumber()),n&&n.isBigNumber===!0&&(n=n.toNumber()),!i(t)||t<1)throw new Error("Parameters in function eye must be positive integers");if(!i(n)||n<1)throw new Error("Parameters in function eye must be positive integers");var s=a?new e.BigNumber(1):1,u=a?new a(0):0,c=[t,n];if(r){var l=e.Matrix.storage(r);return l.diagonal(c,s,0,u)}for(var p=o.resize([],c,u),h=t<n?t:n,f=0;f<h;f++)p[f][f]=s;return p}var c=r(n(487)),l=a("eye",{"":function(){return"Matrix"===t.matrix?c([]):[]},string:function(e){return c(e)},"number | BigNumber":function(e){return u(e,e,"Matrix"===t.matrix?"default":void 0)},"number | BigNumber, string":function(e,t){return u(e,e,t)},"number | BigNumber, number | BigNumber":function(e,n){return u(e,n,"Matrix"===t.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return u(e,t,n)},Array:function(e){return s(e)},"Array, string":function(e,t){return s(e,t)},Matrix:function(e){return s(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return s(e.valueOf(),t)}});return l.toTex=void 0,l}var o=n(498),i=n(473).isInteger;t.name="eye",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){var a=r(n(507)),s=i("log",{number:function(n){return n>=0||t.predictable?Math.log(n):new e.Complex(n,0).log()},Complex:function(e){return e.log()},BigNumber:function(n){return!n.isNegative()||t.predictable?n.ln():new e.Complex(n.toNumber(),0).log()},"Array | Matrix":function(e){return o(e,s)},"any, any":function(e,t){return a(s(e),s(t))}});return s.toTex={1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},s}var o=n(484);t.name="log",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,a){function s(n,r){if(t.predictable&&!o(r)&&n<0)try{var i=d(r),a=m(i);if((r===a||Math.abs((r-a)/r)<1e-14)&&i.d%2===1)return(i.n%2===0?1:-1)*Math.pow(-n,r)}catch(e){}return o(r)||n>=0||t.predictable?Math.pow(n,r):new e.Complex(n,0).pow(r,0)}function u(e,t){if(!o(t)||t<0)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var n=i(e);if(2!=n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!=n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var r=p(n[0]).valueOf(),a=e;t>=1;)1==(1&t)&&(r=h(a,r)),t>>=1,a=h(a,a);return r}function c(e,t){return f(u(e.valueOf(),t))}var l=n(489),p=r(n(517)),h=r(n(509)),f=r(n(487)),d=r(n(520)),m=r(n(485)),g=a("pow",{"number, number":s,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(n,r){return r.isInteger()||n>=0||t.predictable?n.pow(r):new e.Complex(n.toNumber(),0).pow(r.toNumber(),0)},"Fraction, Fraction":function(e,n){if(1!==n.d){if(t.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return s(e.valueOf(),n.valueOf())}return e.pow(n)},"Array, number":u,"Array, BigNumber":function(e,t){return u(e,t.toNumber())},"Matrix, number":c,"Matrix, BigNumber":function(e,t){return c(e,t.toNumber())},"Unit, number":function(e,t){return e.pow(t)}});return g.toTex={2:"\\left(${args[0]}\\right)"+l.operators.pow+"{${args[1]}}"},g}var o=n(473).isInteger,i=n(498).size;t.name="pow",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw new Error(t+" cannot be represented as a fraction");return new e.Fraction(t)},string:function(t){return new e.Fraction(t)},"number, number":function(t,n){return new e.Fraction(t,n)},BigNumber:function(t){return new e.Fraction(t.toString())},Fraction:function(e){return e},Object:function(t){return new e.Fraction(t)},"Array | Matrix":function(e){return o(e,i)}});return i}var o=n(484);t.name="fraction",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,a){var c=r(n(487)),l=r(n(493)),p=r(n(522)),h=r(n(510)),f=r(n(523)),d=r(n(505)),m=a("round",{number:Math.round,"number, number":function(e,t){if(!i(t))throw new TypeError(u);if(t<0||t>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return o(e,t)},Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(u);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(u);var n=t.toNumber();return e.round(n)},"number, BigNumber":function(t,n){if(!n.isInteger())throw new TypeError(u);return new e.BigNumber(t).toDecimalPlaces(n.toNumber())},BigNumber:function(e){return e.toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(u);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(u);return e.round(t)},"Array | Matrix":function(e){return s(e,m,!0)},"Matrix, number | BigNumber":function(e,t){var n;switch(e.storage()){case"sparse":n=h(e,t,m,!1);break;default:n=d(e,t,m,!1)}return n},"number | Complex | BigNumber, Matrix":function(e,t){if(!l(e,0)){var n;switch(t.storage()){case"sparse":n=f(t,e,m,!0);break;default:n=d(t,e,m,!0)}return n}return p(t.size(),t.storage())},"Array, number | BigNumber":function(e,t){return d(c(e),t,m,!1).valueOf()},"number | Complex | BigNumber, Array":function(e,t){return d(c(t),e,m,!0).valueOf()}});return m.toTex={1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},m}function o(e,t){return parseFloat(a(e,t))}var i=n(473).isInteger,a=n(473).toFixed,s=n(484),u="Number of decimals in function round must be an integer";t.name="round",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,a){function s(t,n){var r=u(t),o=r?new e.BigNumber(0):0;if(c(t),n){var a=l(n);return t.length>0?a.resize(t,o):a}var s=[];return t.length>0?i(s,t,o):s}function u(e){var t=!1;return e.forEach(function(e,n,r){e&&e.isBigNumber===!0&&(t=!0,r[n]=e.toNumber())}),t}function c(e){e.forEach(function(e){if("number"!=typeof e||!o(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")})}var l=r(n(487)),p=a("zeros",{"":function(){return"Array"===t.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(e){var n=e[e.length-1];if("string"==typeof n){var r=e.pop();return s(e,r)}return"Array"===t.matrix?s(e):s(e,"default")},Array:s,Matrix:function(e){var t=e.storage();return s(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return s(e.valueOf(),t)}});return p.toTex=void 0,p}var o=n(473).isInteger,i=n(498).resize;t.name="zeros",t.factory=r},function(e,t){"use strict";function n(e,t,n,r){var o=e.DenseMatrix,i=function(e,t,n,i){var a=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,h=c[0],f=c[1],d=n;"string"==typeof l&&(p=l,t=r.convert(t,p),d=r.find(n,[p,p]));for(var m=[],g=new o({data:m,size:[h,f],datatype:p}),v=[],y=[],b=0;b<f;b++){for(var E=b+1,w=u[b],x=u[b+1],T=w;T<x;T++){var C=s[T];v[C]=a[T],y[C]=E}for(var N=0;N<h;N++)0===b&&(m[N]=[]),y[N]===E?m[N][b]=i?d(t,v[N]):d(v[N],t):m[N][b]=i?d(t,0):d(0,t)}return g};return i}t.name="algorithm12",t.factory=n},function(e,t,n){e.exports=[n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533)]},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("clone",{any:o.clone});return i.toTex=void 0,i}var o=n(470);t.name="clone",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var a=r("isInteger",{number:i.isInteger,BigNumber:function(e){return e.isInt()},Fraction:function(e){return 1===e.d&&isFinite(e.n)},"Array | Matrix":function(e){return o(e,a)}});return a}var o=n(484),i=n(473);t.name="isInteger",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("isNegative",{number:function(e){return e<0},BigNumber:function(e){return e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s<0},Unit:function(e){return i(e.value)},"Array | Matrix":function(e){return o(e,i)}});return i}var o=n(484);n(473);t.name="isNegative",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("isNumeric",{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string":function(){return!1},"Array | Matrix":function(e){return o(e,i)}});return i}var o=n(484);n(473);t.name="isNumeric",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("isPositive",{number:function(e){return e>0},BigNumber:function(e){return!e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s>0&&e.n>0},Unit:function(e){return i(e.value)},"Array | Matrix":function(e){return o(e,i)}});return i}var o=n(484);n(473);t.name="isPositive",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("isPrime",{number:function(e){if(e<2)return!1;if(2==e)return!0;if(e%2==0)return!1;for(var t=3;t*t<=e;t+=2)if(e%t==0)return!1;return!0},BigNumber:function(t){if(t.lt(2))return!1;if(t.equals(2))return!0;if(t.mod(2).isZero())return!1;for(var n=e.BigNumber(3);n.times(n).lte(t);n=n.plus(1))if(t.mod(n).isZero())return!1;return!0},"Array | Matrix":function(e){return o(e,i)}});return i}var o=n(484);t.name="isPrime",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("isZero",{number:function(e){return 0===e},BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:function(e){return i(e.value)},"Array | Matrix":function(e){return o(e,i)}});return i}var o=n(484);n(473);t.name="isZero",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("isNaN",{number:function(e){return Number.isNaN(e)},BigNumber:function(e){return e.isNaN()},Fraction:function(e){return!1},Complex:function(e){return Number.isNaN(e.re)&&Number.isNaN(e.im)},Unit:function(e){return Number.isNaN(e.value)},"Array | Matrix":function(e){return o(e,Number.isNaN)}});return i}var o=n(484);n(473);t.name="isNaN",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("_typeof",{any:function(e){var t=o.type(e);if("Object"===t){if(e.isBigNumber===!0)return"BigNumber";if(e.isComplex===!0)return"Complex";if(e.isFraction===!0)return"Fraction";if(e.isMatrix===!0)return"Matrix";if(e.isUnit===!0)return"Unit";if(e.isIndex===!0)return"Index";if(e.isRange===!0)return"Range";if(e.isChain===!0)return"Chain";if(e.isHelp===!0)return"Help"}return t}});return i.toTex=void 0,i}var o=n(501);t.name="typeof",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){var i=r(n(535));return o("parse",{"string | Array | Matrix":i,"string | Array | Matrix, Object":i})}t.name="parse",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,a){function s(t,n){if(1!=arguments.length&&2!=arguments.length)throw new o("parse",arguments.length,1,2);if(ve=n&&n.nodes?n.nodes:{},"string"==typeof t)return ye=t,w();if(Array.isArray(t)||t instanceof e.Matrix)return i(t,function(e){if("string"!=typeof e)throw new TypeError("String expected");return ye=e,w()});throw new TypeError("String or matrix expected")}function u(){Ee=0,we=ye.charAt(0),Ce=0,Ne=null}function c(){Ee++,we=ye.charAt(Ee)}function l(){return ye.charAt(Ee+1)}function p(){return ye.charAt(Ee+2)}function h(){for(Te=de.NULL,xe="",be="";v(we);)c();if("#"==we)for(;"\n"!=we&&""!=we;)be+=we,c();if(""==we)return void(Te=de.DELIMITER);if("\n"==we&&!Ce)return Te=de.DELIMITER,xe=we,void c();var e=we+l(),t=e+p();if(3==t.length&&me[t])return Te=de.DELIMITER,xe=t,c(),c(),void c();if(2==e.length&&me[e])return Te=de.DELIMITER,xe=e,c(),void c();if(me[we])return Te=de.DELIMITER,xe=we,void c();if(!b(we)){if(g()){for(;g()||E(we);)xe+=we,c();return void(Te=ge.hasOwnProperty(xe)?de.DELIMITER:de.SYMBOL)}for(Te=de.UNKNOWN;""!=we;)xe+=we,c();throw Q('Syntax error in part "'+xe+'"')}if(Te=de.NUMBER,"."==we)xe+=we,c(),E(we)||(Te=de.DELIMITER);else{for(;E(we);)xe+=we,c();y(we,l())&&(xe+=we,c())}for(;E(we);)xe+=we,c();if(e=l(),"E"==we||"e"==we)if(E(e)||"-"==e||"+"==e){if(xe+=we,c(),"+"!=we&&"-"!=we||(xe+=we,c()),!E(we))throw Q('Digit expected, got "'+we+'"');for(;E(we);)xe+=we,c();if(y(we,l()))throw Q('Digit expected, got "'+we+'"')}else if("."==e)throw c(),Q('Digit expected, got "'+we+'"')}function f(){do h();while("\n"==xe)}function d(){Ce++}function m(){Ce--}function g(){var e=ye.charAt(Ee-1),t=ye.charAt(Ee+1),n=function(e){return/^[a-zA-Z_\u00C0-\u02AF\u0370-\u03FF]$/.test(e)},r=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)};return n(we)||r(we,t)||r(e,we)}function v(e){return" "==e||"\t"==e||"\n"==e&&Ce>0}function y(e,t){return"."==e&&!me[e+t]}function b(e){return e>="0"&&e<="9"||"."==e}function E(e){return e>="0"&&e<="9"}function w(){u(),h();var e=x();if(""!=xe)throw Te==de.DELIMITER?J("Unexpected operator "+xe):Q('Unexpected part "'+xe+'"');return e}function x(){var e,t,n=[];if(""==xe)return e=new ie("undefined","undefined"),e.comment=be,e;for("\n"!=xe&&";"!=xe&&(e=T(),e.comment=be);"\n"==xe||";"==xe;)0==n.length&&e&&(t=";"!=xe,n.push({node:e,visible:t})),h(),"\n"!=xe&&";"!=xe&&""!=xe&&(e=T(),e.comment=be,t=";"!=xe,n.push({node:e,visible:t}));return n.length>0?new re(n):e}function T(){var e,t,n,r,o=C();if("="==xe){if(o&&o.isSymbolNode)return e=o.name,f(),n=T(),new ne(new fe(e),n);if(o&&o.isAccessorNode)return f(),n=T(),new ne(o.object,o.index,n);if(o&&o.isFunctionNode&&(r=!0,t=[],e=o.name,o.args.forEach(function(e,n){e&&e.isSymbolNode?t[n]=e.name:r=!1}),r))return f(),n=T(),new ae(e,t,n);throw Q("Invalid left hand side of assignment operator =")}return o}function C(){for(var e=N();"?"==xe;){var t=Ne;Ne=Ce,f();var n=e,r=T();if(":"!=xe)throw Q("False part of conditional expression expected");Ne=null,f();var o=T();e=new oe(n,r,o),Ne=t}return e}function N(){for(var e=S();"or"==xe;)f(),e=new ce("or","or",[e,S()]);return e}function S(){for(var e=_();"xor"==xe;)f(),e=new ce("xor","xor",[e,_()]);return e}function _(){for(var e=O();"and"==xe;)f(),e=new ce("and","and",[e,O()]);return e}function O(){for(var e=P();"|"==xe;)f(),e=new ce("|","bitOr",[e,P()]);return e}function P(){for(var e=A();"^|"==xe;)f(),e=new ce("^|","bitXor",[e,A()]);return e}function A(){for(var e=I();"&"==xe;)f(),e=new ce("&","bitAnd",[e,I()]);return e}function I(){var e,t,n,r,o;for(e=M(),t={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};xe in t;)n=xe,r=t[n],f(),o=[e,M()],e=new ce(n,r,o);return e}function M(){var e,t,n,r,o;for(e=R(),t={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};xe in t;)n=xe,r=t[n],f(),o=[e,R()],e=new ce(n,r,o);return e}function R(){var e,t,n,r,o;for(e=L(),t={to:"to",in:"to"};xe in t;)n=xe,r=t[n],f(),"in"===n&&""===xe?e=new ce("*","multiply",[e,new fe("in")],!0):(o=[e,L()],e=new ce(n,r,o));return e}function L(){var e,t=[];if(e=":"==xe?new ie("1","number"):k(),":"==xe&&Ne!==Ce){for(t.push(e);":"==xe&&t.length<3;)f(),")"==xe||"]"==xe||","==xe||""==xe?t.push(new fe("end")):t.push(k());e=3==t.length?new he(t[0],t[2],t[1]):new he(t[0],t[1])}return e}function k(){var e,t,n,r,o;for(e=D(),t={"+":"add","-":"subtract"};xe in t;)n=xe,r=t[n],f(),o=[e,D()],e=new ce(n,r,o);return e}function D(){var e,t,n,r,o;for(e=B(),t=e,n={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};;)if(xe in n)r=xe,o=n[r],f(),t=B(),e=new ce(r,o,[e,t]);else{if(!(Te==de.SYMBOL||"in"==xe&&e&&e.isConstantNode||Te==de.NUMBER&&!t.isConstantNode||"("==xe))break;t=B(),e=new ce("*","multiply",[e,t],!0)}return e}function B(){var e,t,n={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"}[xe];return n?(e=xe,f(),t=[B()],new ce(e,n,t)):U()}function U(){
var e,t,n,r;return e=F(),"^"!=xe&&".^"!=xe||(t=xe,n="^"==t?"pow":"dotPow",f(),r=[e,B()],e=new ce(t,n,r)),e}function F(){var e,t,n,r,o;for(e=j(),t={"!":"factorial","'":"transpose"};xe in t;)n=xe,r=t[n],h(),o=[e],e=new ce(n,r,o),e=V(e);return e}function j(){var e,t=[];if(Te==de.SYMBOL&&ve[xe]){if(e=ve[xe],h(),"("==xe){if(t=[],d(),h(),")"!=xe)for(t.push(T());","==xe;)h(),t.push(T());if(")"!=xe)throw Q("Parenthesis ) expected");m(),h()}return new e(t)}return H()}function H(){var e,t;return Te==de.SYMBOL||Te==de.DELIMITER&&xe in ge?(t=xe,h(),e=new fe(t),e=V(e)):W()}function V(e,t){for(var n;!("("!=xe&&"["!=xe&&"."!=xe||t&&t.indexOf(xe)===-1);)if(n=[],"("==xe){if(!e.isSymbolNode&&!e.isAccessorNode)return e;if(d(),h(),")"!=xe)for(n.push(T());","==xe;)h(),n.push(T());if(")"!=xe)throw Q("Parenthesis ) expected");m(),h(),e=new pe(e,n)}else if("["==xe){if(d(),h(),"]"!=xe)for(n.push(T());","==xe;)h(),n.push(T());if("]"!=xe)throw Q("Parenthesis ] expected");m(),h(),e=new ee(e,new se(n))}else{if(h(),Te!=de.SYMBOL)throw Q("Property name expected after dot");n.push(new ie(xe)),h();var r=!0;e=new ee(e,new se(n,r))}return e}function W(){var e,t;return'"'==xe?(t=G(),e=new ie(t,"string"),e=V(e)):z()}function G(){for(var e="";""!=we&&'"'!=we;)"\\"==we&&(e+=we,c()),e+=we,c();if(h(),'"'!=xe)throw Q('End of string " expected');return h(),e}function z(){var e,t,n,r;if("["==xe){if(d(),h(),"]"!=xe){var o=q();if(";"==xe){for(n=1,t=[o];";"==xe;)h(),t[n]=q(),n++;if("]"!=xe)throw Q("End of matrix ] expected");m(),h(),r=t[0].items.length;for(var i=1;i<n;i++)if(t[i].items.length!=r)throw J("Column dimensions mismatch ("+t[i].items.length+" != "+r+")");e=new te(t)}else{if("]"!=xe)throw Q("End of matrix ] expected");m(),h(),e=o}}else m(),h(),e=new te([]);return V(e)}return Y()}function q(){for(var e=[T()],t=1;","==xe;)h(),e[t]=T(),t++;return new te(e)}function Y(){if("{"==xe){var e,t={};do if(h(),"}"!=xe){if('"'==xe)e=G();else{if(Te!=de.SYMBOL)throw Q("Symbol or string expected as object key");e=xe,h()}if(":"!=xe)throw Q("Colon : expected after object key");h(),t[e]=T()}while(","==xe);if("}"!=xe)throw Q("Comma , or bracket } expected after object value");h();var n=new ue(t);return n=V(n)}return X()}function X(){var e;return Te==de.NUMBER?(e=xe,h(),new ie(e,"number")):K()}function K(){var e;if("("==xe){if(d(),h(),e=T(),")"!=xe)throw Q("Parenthesis ) expected");return m(),h(),e=new le(e),e=V(e)}return Z()}function Z(){throw Q(""==xe?"Unexpected end of expression":"Value expected")}function $(){return Ee-xe.length+1}function Q(e){var t=$(),n=new SyntaxError(e+" (char "+t+")");return n.char=t,n}function J(e){var t=$(),n=new SyntaxError(e+" (char "+t+")");return n.char=t,n}var ee=r(n(536)),te=r(n(542)),ne=r(n(543)),re=r(n(546)),oe=r(n(548)),ie=r(n(549)),ae=r(n(550)),se=r(n(551)),ue=r(n(567)),ce=r(n(568)),le=r(n(570)),pe=r(n(569)),he=r(n(552)),fe=r(n(553)),de={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},me={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"'":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},ge={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},ve={},ye="",be="",Ee=0,we="",xe="",Te=de.NULL,Ce=0,Ne=null;return s}var o=n(478),i=n(484);t.name="parse",t.path="expression",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!e||!e.isNode)throw new TypeError('Node expected for parameter "object"');if(!t||!t.isIndexNode)throw new TypeError('IndexNode expected for parameter "index"');this.object=e||null,this.index=t,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function a(e){return!(e.isAccessorNode||e.isArrayNode||e.isConstantNode||e.isFunctionNode||e.isObjectNode||e.isParenthesisNode||e.isSymbolNode)}var s=r(n(537)),u=r(n(539));return i.prototype=new s,i.prototype.type="AccessorNode",i.prototype.isAccessorNode=!0,i.prototype._compile=function(e,t){e.access=u;var n=this.object._compile(e,t),r=this.index._compile(e,t);return this.index.isObjectProperty()?n+'["'+this.index.getObjectProperty()+'"]':this.index.needsSize()?"(function () {  var object = "+n+";  var size = math.size(object).valueOf();  return access(object, "+r+");})()":"access("+n+", "+r+")"},i.prototype.forEach=function(e){e(this.object,"object",this),e(this.index,"index",this)},i.prototype.map=function(e){return new i(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))},i.prototype.clone=function(){return new i(this.object,this.index)},i.prototype._toString=function(e){var t=this.object.toString(e);return a(this.object)&&(t="("+t+")"),t+this.index.toString(e)},i.prototype._toTex=function(e){var t=this.object.toTex(e);return a(this.object)&&(t="\\left("+t+"\\right)"),t+this.index.toTex(e)},i}t.name="AccessorNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r,i){function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator")}function s(e){for(var t in e)if(e.hasOwnProperty(t)&&t in o)throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}return a.prototype.eval=function(e){return this.compile().eval(e)},a.prototype.type="Node",a.prototype.isNode=!0,a.prototype.comment="",a.prototype.compile=function(){if(arguments.length>0)throw new Error("Calling compile(math) is deprecated. Call the function as compile() instead.");var e={math:i.expression.transform,args:{},_validateScope:s},t={},n=this._compile(e,t),r=Object.keys(e).map(function(e){return"    var "+e+' = defs["'+e+'"];'}),o=r.join(" ")+'return {  "eval": function (scope) {    if (scope) _validateScope(scope);    scope = scope || {};    return '+n+";  }};",a=new Function("defs",o);return a(e)},a.prototype._compile=function(e,t){throw new Error("Cannot compile a Node interface")},a.prototype.forEach=function(e){throw new Error("Cannot run forEach on a Node interface")},a.prototype.map=function(e){throw new Error("Cannot run map on a Node interface")},a.prototype._ifNode=function(e){if(!e||!e.isNode)throw new TypeError("Callback function must return a Node");return e},a.prototype.traverse=function(e){function t(e,n){e.forEach(function(e,r,o){n(e,r,o),t(e,n)})}e(this,null,null),t(this,e)},a.prototype.transform=function(e){function t(e,n){return e.map(function(e,r,o){var i=n(e,r,o);return t(i,n)})}var n=e(this,null,null);return t(n,e)},a.prototype.filter=function(e){var t=[];return this.traverse(function(n,r,o){e(n,r,o)&&t.push(n)}),t},a.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")},a.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")},a.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},a.prototype.toString=function(e){var t;if(e&&"object"==typeof e)switch(typeof e.handler){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return"undefined"!=typeof t?t:this._toString(e)},a.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},a.prototype.toTex=function(e){var t;if(e&&"object"==typeof e)switch(typeof e.handler){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return"undefined"!=typeof t?t:this._toTex(e)},a.prototype._toTex=function(e){throw new Error("_toTex not implemented for "+this.type)},a.prototype.getIdentifier=function(){return this.type},a.prototype.getContent=function(){return this},a}var o=n(538);n(470).extend;t.name="Node",t.path="expression.node",t.math=!0,t.factory=r},function(e,t){"use strict";e.exports={end:!0}},function(e,t,n){"use strict";function r(e,t,r,i){var a=r(n(541)),s=r(n(487));return function(e,t){try{if(Array.isArray(e))return s(e).subset(t).valueOf();if(e&&"function"==typeof e.subset)return e.subset(t);if("string"==typeof e)return a(e,t);if("object"==typeof e){if(!t.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return e[t.getObjectProperty()]}throw new TypeError("Cannot apply index: unsupported type of object")}catch(e){throw o(e)}}}var o=n(540).transform;t.factory=r},function(e,t,n){var r=n(502);t.transform=function(e){return e&&e.isIndexError?new r(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}},function(e,t,n){"use strict";function r(e,t,r,c){function l(e,t){if(!t||t.isIndex!==!0)throw new TypeError("Index expected");if(1!=t.size().length)throw new u(t.size().length,1);var n=e.length;s(t.min()[0],n),s(t.max()[0],n);var r=t.dimension(0),o="";return r.forEach(function(t){o+=e.charAt(t)}),o}function p(e,t,n,r){if(!t||t.isIndex!==!0)throw new TypeError("Index expected");if(1!=t.size().length)throw new u(t.size().length,1);if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var o=t.dimension(0),i=o.size()[0];if(i!=n.length)throw new u(o.size()[0],n.length);var a=e.length;s(t.min()[0]),s(t.max()[0]);for(var c=[],l=0;l<a;l++)c[l]=e.charAt(l);if(o.forEach(function(e,t){c[e]=n.charAt(t[0])}),c.length>a)for(l=a-1,i=c.length;l<i;l++)c[l]||(c[l]=r);return c.join("")}var h=r(n(487)),f=c("subset",{"Array, Index":function(e,t){var n=h(e),r=n.subset(t);return r&&r.valueOf()},"Matrix, Index":function(e,t){return e.subset(t)},"Object, Index":o,"string, Index":l,"Array, Index, any":function(e,t,n){return h(a(e)).subset(t,n,void 0).valueOf()},"Array, Index, any, any":function(e,t,n,r){return h(a(e)).subset(t,n,r).valueOf()},"Matrix, Index, any":function(e,t,n){return e.clone().subset(t,n)},"Matrix, Index, any, any":function(e,t,n,r){return e.clone().subset(t,n,r)},"string, Index, string":p,"string, Index, string, string":p,"Object, Index, any":i});return f.toTex=void 0,f}function o(e,t){if(1!==t.size().length)throw new u(t.size(),1);var n=t.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");return e[n]}function i(e,t,n){if(1!==t.size().length)throw new u(t.size(),1);var r=t.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");var o=a(e);return o[r]=n,o}var a=n(470).clone,s=n(498).validateIndex,u=n(491);t.name="subset",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){function i(e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=e||[],!Array.isArray(this.items)||!this.items.every(function(e){return e&&e.isNode}))throw new TypeError("Array containing Nodes expected");var t=function(){throw new Error("Property `ArrayNode.nodes` is deprecated, use `ArrayNode.items` instead")};Object.defineProperty(this,"nodes",{get:t,set:t})}var a=r(n(537));return i.prototype=new a,i.prototype.type="ArrayNode",i.prototype.isArrayNode=!0,i.prototype._compile=function(e,t){var n="Array"!==e.math.config().matrix,r=this.items.map(function(n){return n._compile(e,t)});return(n?"math.matrix([":"[")+r.join(",")+(n?"])":"]")},i.prototype.forEach=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];e(n,"items["+t+"]",this)}},i.prototype.map=function(e){for(var t=[],n=0;n<this.items.length;n++)t[n]=this._ifNode(e(this.items[n],"items["+n+"]",this));return new i(t)},i.prototype.clone=function(){return new i(this.items.slice(0))},i.prototype._toString=function(e){var t=this.items.map(function(t){return t.toString(e)});return"["+t.join(", ")+"]"},i.prototype._toTex=function(e){var t="\\begin{bmatrix}";return this.items.forEach(function(n){t+=n.items?n.items.map(function(t){return t.toTex(e)}).join("&"):n.toTex(e),t+="\\\\"}),t+="\\end{bmatrix}"},i}t.name="ArrayNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){function i(e,t,n){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=e,this.index=n?t:null,this.value=n?n:t,!e||!e.isSymbolNode&&!e.isAccessorNode)throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(e&&e.isSymbolNode&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!this.index.isIndexNode)throw new TypeError('IndexNode expected as "index"');if(!this.value||!this.value.isNode)throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function a(e,t){t||(t="keep");var n=l.getPrecedence(e,t),r=l.getPrecedence(e.value,t);return"all"===t||null!==r&&r<=n}var s=r(n(537)),u=(r(n(542)),r(n(487)),r(n(544))),c=r(n(539)),l=(n(538),n(545));return i.prototype=new s,i.prototype.type="AssignmentNode",i.prototype.isAssignmentNode=!0,i.prototype._compile=function(e,t){e.assign=u,e.access=c;var n,r=this.object._compile(e,t),o=this.index?this.index._compile(e,t):null,i=this.value._compile(e,t);if(this.index){if(this.index.isObjectProperty())return r+'["'+this.index.getObjectProperty()+'"] = '+i;if(this.object.isSymbolNode)return n=this.index.needsSize()?"var size = math.size(object).valueOf();":"","(function () {  var object = "+r+";  var value = "+i+";  "+n+'  scope["'+this.object.name+'"] = assign(object, '+o+", value);  return value;})()";n=this.index.needsSize()?"var size = math.size(object).valueOf();":"";var a=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var s='["'+this.object.index.getObjectProperty()+'"]';return"(function () {  var parent = "+a+";  var object = parent"+s+";  var value = "+i+";"+n+"  parent"+s+" = assign(object, "+o+", value);  return value;})()"}var l=this.object.index.needsSize()?"var size = math.size(parent).valueOf();":"",p=this.object.index._compile(e,t);return"(function () {  var parent = "+a+";  "+l+"  var parentIndex = "+p+";  var object = access(parent, parentIndex);  var value = "+i+";  "+n+"  assign(parent, parentIndex, assign(object, "+o+", value));  return value;})()"}if(!this.object.isSymbolNode)throw new TypeError("SymbolNode expected as object");return'scope["'+this.object.name+'"] = '+i},i.prototype.forEach=function(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)},i.prototype.map=function(e){var t=this._ifNode(e(this.object,"object",this)),n=this.index?this._ifNode(e(this.index,"index",this)):null,r=this._ifNode(e(this.value,"value",this));return new i(t,n,r)},i.prototype.clone=function(){return new i(this.object,this.index,this.value)},i.prototype._toString=function(e){var t=this.object.toString(e),n=this.index?this.index.toString(e):"",r=this.value.toString(e);return a(this,e&&e.parenthesis)&&(r="("+r+")"),t+n+" = "+r},i.prototype._toTex=function(e){var t=this.object.toTex(e),n=this.index?this.index.toTex(e):"",r=this.value.toTex(e);return a(this,e&&e.parenthesis)&&(r="\\left("+r+"\\right)"),t+n+":="+r},i}n(489);t.name="AssignmentNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){var a=r(n(541)),s=r(n(487));return function(e,t,n){try{if(Array.isArray(e))return s(e).subset(t,n).valueOf();if(e&&"function"==typeof e.subset)return e.subset(t,n);if("string"==typeof e)return a(e,t,n);if("object"==typeof e){if(!t.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return e[t.getObjectProperty()]=n,e}throw new TypeError("Cannot apply index: unsupported type of object")}catch(e){throw o(e)}}}var o=n(540).transform;t.factory=r},function(e,t){"use strict";function n(e,t){var n=e;"keep"!==t&&(n=e.getContent());for(var r=n.getIdentifier(),o=0;o<i.length;o++)if(r in i[o])return o;return null}function r(e,t){var r=e;"keep"!==t&&(r=e.getContent());var o=r.getIdentifier(),a=n(r,t);if(null===a)return null;var s=i[a][o];if(s.hasOwnProperty("associativity")){if("left"===s.associativity)return"left";if("right"===s.associativity)return"right";throw Error("'"+o+"' has the invalid associativity '"+s.associativity+"'.")}return null}function o(e,t,r){var o=e,a=t;if("keep"!==r)var o=e.getContent(),a=t.getContent();var s=o.getIdentifier(),u=a.getIdentifier(),c=n(o,r);if(null===c)return null;var l=i[c][s];if(l.hasOwnProperty("associativeWith")&&l.associativeWith instanceof Array){for(var p=0;p<l.associativeWith.length;p++)if(l.associativeWith[p]===u)return!0;return!1}return null}var i=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];e.exports.properties=i,e.exports.getPrecedence=n,e.exports.getAssociativity=r,e.exports.isAssociativeWith=o},function(e,t,n){"use strict";function r(e,t,r,o){function i(e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map(function(e){var t=e&&e.node,n=!e||void 0===e.visible||e.visible;if(!t||!t.isNode)throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof n)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:n}})}var a=r(n(537)),s=r(n(547));return i.prototype=new a,i.prototype.type="BlockNode",i.prototype.isBlockNode=!0,i.prototype._compile=function(e,t){e.ResultSet=s;var n=this.blocks.map(function(n){var r=n.node._compile(e,t);return n.visible?"results.push("+r+");":r+";"});return"(function () {var results = [];"+n.join("")+"return new ResultSet(results);})()"},i.prototype.forEach=function(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)},i.prototype.map=function(e){for(var t=[],n=0;n<this.blocks.length;n++){var r=this.blocks[n],o=this._ifNode(e(r.node,"blocks["+n+"].node",this));t[n]={node:o,visible:r.visible}}return new i(t)},i.prototype.clone=function(){var e=this.blocks.map(function(e){return{node:e.node,visible:e.visible}});return new i(e)},i.prototype._toString=function(e){return this.blocks.map(function(t){return t.node.toString(e)+(t.visible?"":";")}).join("\n")},i.prototype._toTex=function(e){return this.blocks.map(function(t){return t.node.toTex(e)+(t.visible?"":";")}).join("\\;\\;\n")},i}t.name="BlockNode",t.path="expression.node",t.factory=r},function(e,t){"use strict";function n(e,t,n,r){function o(e){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return o.prototype.type="ResultSet",o.prototype.isResultSet=!0,o.prototype.valueOf=function(){return this.entries},o.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},o.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},o.fromJSON=function(e){return new o(e.entries)},o}t.name="ResultSet",t.path="type",t.factory=n},function(e,t,n){"use strict";function r(e,t,r,i){function a(e,t,n){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(!e||!e.isNode)throw new TypeError("Parameter condition must be a Node");if(!t||!t.isNode)throw new TypeError("Parameter trueExpr must be a Node");if(!n||!n.isNode)throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=n}var s=r(n(537));return a.prototype=new s,a.prototype.type="ConditionalNode",a.prototype.isConditionalNode=!0,a.prototype._compile=function(e,t){return e.testCondition=function(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t)return!!t;if(t){if(t.isBigNumber===!0)return!t.isZero();if(t.isComplex===!0)return!(!t.re&&!t.im);if(t.isUnit===!0)return!!t.value}if(null===t||void 0===t)return!1;throw new TypeError('Unsupported type of condition "'+e.math.typeof(t)+'"')},"testCondition("+this.condition._compile(e,t)+") ? ( "+this.trueExpr._compile(e,t)+") : ( "+this.falseExpr._compile(e,t)+")"},a.prototype.forEach=function(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)},a.prototype.map=function(e){return new a(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))},a.prototype.clone=function(){return new a(this.condition,this.trueExpr,this.falseExpr)},a.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=o.getPrecedence(this,t),r=this.condition.toString(e),i=o.getPrecedence(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r="("+r+")");var a=this.trueExpr.toString(e),s=o.getPrecedence(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==s&&s<=n)&&(a="("+a+")");var u=this.falseExpr.toString(e),c=o.getPrecedence(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==c&&c<=n)&&(u="("+u+")"),r+" ? "+a+" : "+u},a.prototype._toTex=function(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},a}var o=(n(489),n(545));t.name="ConditionalNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){function a(e,t){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(t){if("string"!=typeof t)throw new TypeError('String expected for parameter "valueType"');if("string"!=typeof e)throw new TypeError('String expected for parameter "value"');this.value=e,this.valueType=t}else this.value=e+"",this.valueType=o(e);if(!u[this.valueType])throw new TypeError('Unsupported type of value "'+this.valueType+'"')}var s=r(n(537)),u={number:!0,string:!0,boolean:!0,undefined:!0,null:!0};return a.prototype=new s,a.prototype.type="ConstantNode",a.prototype.isConstantNode=!0,a.prototype._compile=function(e,t){switch(this.valueType){case"number":var n=e.math.config().number;return"BigNumber"===n?'math.bignumber("'+this.value+'")':"Fraction"===n?'math.fraction("'+this.value+'")':this.value.replace(/^(0*)[0-9]/,function(e,t){return e.substring(t.length)});case"string":return'"'+this.value+'"';case"boolean":return this.value;case"undefined":return this.value;case"null":return this.value;default:throw new TypeError('Unsupported type of constant "'+this.valueType+'"')}},a.prototype.forEach=function(e){},a.prototype.map=function(e){return this.clone()},a.prototype.clone=function(){return new a(this.value,this.valueType)},a.prototype._toString=function(e){switch(this.valueType){case"string":return'"'+this.value+'"';default:return this.value}},a.prototype._toTex=function(e){var t,n=this.value;switch(this.valueType){case"string":return'\\mathtt{"'+n+'"}';case"number":return t=n.toLowerCase().indexOf("e"),t!==-1?n.substring(0,t)+"\\cdot10^{"+n.substring(t+1)+"}":n;default:return n}},a}var o=n(501).type;t.name="ConstantNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,s){function u(e,t,n){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!n||!n.isNode)throw new TypeError('Node expected for parameter "expr"');if(e in o)throw new Error('Illegal function name, "'+e+'" is a reserved keyword');this.name=e,this.params=t.map(function(e){return e&&e.name||e}),this.types=t.map(function(e){return e&&e.type||"any"}),this.expr=n}function c(e,t){var n=a.getPrecedence(e,t),r=a.getPrecedence(e.expr,t);return"all"===t||null!==r&&r<=n}var l=r(n(537));return u.prototype=new l,u.prototype.type="FunctionAssignmentNode",u.prototype.isFunctionAssignmentNode=!0,u.prototype._compile=function(e,t){e.typed=s;var n=Object.create(t);this.params.forEach(function(e){n[e]=!0});var r=this.expr._compile(e,n);return'scope["'+this.name+'"] =   (function () {    var fn = typed("'+this.name+'", {      "'+this.types.join(",")+'": function ('+this.params.join(",")+") {        return "+r+'      }    });    fn.syntax = "'+this.name+"("+this.params.join(", ")+')";    return fn;  })()'},u.prototype.forEach=function(e){e(this.expr,"expr",this)},u.prototype.map=function(e){var t=this._ifNode(e(this.expr,"expr",this));return new u(this.name,this.params.slice(0),t)},u.prototype.clone=function(){return new u(this.name,this.params.slice(0),this.expr)},u.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toString(e);return c(this,t)&&(n="("+n+")"),"function "+this.name+"("+this.params.join(", ")+") = "+n},u.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toTex(e);return c(this,t)&&(n="\\left("+n+"\\right)"),"\\mathrm{"+this.name+"}\\left("+this.params.map(i.toSymbol).join(",")+"\\right):="+n},u}var o=n(538),i=n(489),a=n(545);t.name="FunctionAssignmentNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=e,this.dotNotation=t||!1,!u(e)||!e.every(function(e){return e&&e.isNode}))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties");var n=function(){throw new Error("Property `IndexNode.object` is deprecated, use `IndexNode.fn` instead")};Object.defineProperty(this,"object",{get:n,set:n})}var a=r(n(537)),s=(r(n(552)),r(n(553)),r(n(566))),u=Array.isArray;return i.prototype=new a,i.prototype.type="IndexNode",i.prototype.isIndexNode=!0,i.prototype._compile=function(e,t){var n=Object.create(t);e.range=function(e,t,n){return new s(e&&e.isBigNumber===!0?e.toNumber():e,t&&t.isBigNumber===!0?t.toNumber():t,n&&n.isBigNumber===!0?n.toNumber():n)};var r=this.dimensions.map(function(t,r){return t&&t.isRangeNode?t.needsEnd()?(n.end=!0,"(function () {var end = size["+r+"]; return range("+t.start._compile(e,n)+", "+t.end._compile(e,n)+", "+(t.step?t.step._compile(e,n):"1")+"); })()"):"range("+t.start._compile(e,n)+", "+t.end._compile(e,n)+", "+(t.step?t.step._compile(e,n):"1")+")":t.isSymbolNode&&"end"===t.name?(n.end=!0,"(function () {var end = size["+r+"]; return "+t._compile(e,n)+"; })()"):t._compile(e,n)});return"math.index("+r.join(", ")+")"},i.prototype.forEach=function(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)},i.prototype.map=function(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this._ifNode(e(this.dimensions[n],"dimensions["+n+"]",this));return new i(t)},i.prototype.clone=function(){return new i(this.dimensions.slice(0))},i.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&this.dimensions[0].isConstantNode&&"string"===this.dimensions[0].valueType},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},i.prototype._toString=function(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},i.prototype._toTex=function(e){var t=this.dimensions.map(function(t){return t.toTex(e)});return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}"},i.prototype.needsSize=function(){return this.dimensions.some(function(e){return e.isRangeNode&&e.needsEnd()||e.isSymbolNode&&"end"===e.name})},i}t.name="IndexNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i){function a(e,t,n){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(!e||!e.isNode)throw new TypeError("Node expected");if(!t||!t.isNode)throw new TypeError("Node expected");if(n&&(!n||!n.isNode))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=t,this.step=n||null}function s(e,t){var n=o.getPrecedence(e,t),r={},i=o.getPrecedence(e.start,t);if(r.start=null!==i&&i<=n||"all"===t,e.step){var a=o.getPrecedence(e.step,t);r.step=null!==a&&a<=n||"all"===t}var s=o.getPrecedence(e.end,t);return r.end=null!==s&&s<=n||"all"===t,r}var u=r(n(537));return a.prototype=new u,a.prototype.type="RangeNode",a.prototype.isRangeNode=!0,a.prototype.needsEnd=function(){var e=this.filter(function(e){return e&&e.isSymbolNode&&"end"==e.name});return e.length>0},a.prototype._compile=function(e,t){return"math.range("+this.start._compile(e,t)+", "+this.end._compile(e,t)+(this.step?", "+this.step._compile(e,t):"")+")"},a.prototype.forEach=function(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)},a.prototype.map=function(e){return new a(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))},a.prototype.clone=function(){return new a(this.start,this.end,this.step&&this.step)},a.prototype._toString=function(e){var t,n=e&&e.parenthesis?e.parenthesis:"keep",r=s(this,n),o=this.start.toString(e);if(r.start&&(o="("+o+")"),t=o,this.step){var i=this.step.toString(e);r.step&&(i="("+i+")"),t+=":"+i}var a=this.end.toString(e);return r.end&&(a="("+a+")"),t+=":"+a;
},a.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=s(this,t),r=this.start.toTex(e);if(n.start&&(r="\\left("+r+"\\right)"),this.step){var o=this.step.toTex(e);n.step&&(o="\\left("+o+"\\right)"),r+=":"+o}var i=this.end.toTex(e);return n.end&&(i="\\left("+i+"\\right)"),r+=":"+i},a}var o=n(545);t.name="RangeNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i,a){function s(e){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');this.name=e}function u(e){throw new Error("Undefined symbol "+e)}var c=r(n(537)),l=r(n(554));return s.prototype=new c,s.prototype.type="SymbolNode",s.prototype.isSymbolNode=!0,s.prototype._compile=function(e,t){return e.undef=u,e.Unit=l,t[this.name]?this.name:this.name in e.math?'("'+this.name+'" in scope ? scope["'+this.name+'"] : math["'+this.name+'"])':'("'+this.name+'" in scope ? scope["'+this.name+'"] : '+(l.isValuelessUnit(this.name)?'new Unit(null, "'+this.name+'")':'undef("'+this.name+'")')+")"},s.prototype.forEach=function(e){},s.prototype.map=function(e){return this.clone()},s.prototype.clone=function(){return new s(this.name)},s.prototype._toString=function(e){return this.name},s.prototype._toTex=function(e){var t=!1;"undefined"==typeof a[this.name]&&l.isValuelessUnit(this.name)&&(t=!0);var n=o.toSymbol(this.name,t);return"\\"===n[0]?n:" "+n},s}var o=n(489);t.name="SymbolNode",t.path="expression.node",t.math=!0,t.factory=r},function(e,t,n){"use strict";function r(e,t,r,s,u){function c(e,t){if(!(this instanceof c))throw new Error("Constructor must be called with the new operator");if(void 0!==e&&!P(e)&&!e.isComplex)throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!=t&&("string"!=typeof t||""==t))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!=t){var n=c.parse(t);this.units=n.units,this.dimensions=n.dimensions}else{this.units=[{unit:W,prefix:U.NONE,power:0}],this.dimensions=[];for(var r=0;r<j.length;r++)this.dimensions[r]=0}this.value=void 0!=e?this._normalize(e):null,this.fixPrefix=!1,this.isUnitListSimplified=!0}function l(){for(;" "==D||"\t"==D;)f()}function p(e){return e>="0"&&e<="9"||"."==e}function h(e){return e>="0"&&e<="9"}function f(){k++,D=L.charAt(k)}function d(e){k=e,D=L.charAt(k)}function m(){var e,t="";if(e=k,"+"==D?f():"-"==D&&(t+=D,f()),!p(D))return d(e),null;if("."==D){if(t+=D,f(),!h(D))return d(e),null}else{for(;h(D);)t+=D,f();"."==D&&(t+=D,f())}for(;h(D);)t+=D,f();if("E"==D||"e"==D){var n="",r=k;if(n+=D,f(),"+"!=D&&"-"!=D||(n+=D,f()),!h(D))return d(r),t;for(t+=n;h(D);)t+=D,f()}return t}function g(){for(var e="",t=L.charCodeAt(k);t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122;)e+=D,f(),t=L.charCodeAt(k);return t=e.charCodeAt(0),t>=65&&t<=90||t>=97&&t<=122?e||null:null}function v(e){return D===e?(f(),e):null}function y(e){if(G.hasOwnProperty(e)){var t=G[e],n=t.prefixes[""];return{unit:t,prefix:n}}for(var r in G)if(G.hasOwnProperty(r)&&o(e,r)){var t=G[r],i=e.length-r.length,a=e.substring(0,i),n=t.prefixes[a];if(void 0!==n)return{unit:t,prefix:n}}return null}function b(t){if("BigNumber"===t.number){var n=a.pi(e.BigNumber);G.rad.value=new e.BigNumber(1),G.deg.value=n.div(180),G.grad.value=n.div(200),G.cycle.value=n.times(2),G.arcsec.value=n.div(648e3),G.arcmin.value=n.div(10800)}else G.rad.value=1,G.deg.value=Math.PI/180,G.grad.value=Math.PI/200,G.cycle.value=2*Math.PI,G.arcsec.value=Math.PI/648e3,G.arcmin.value=Math.PI/10800}function E(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),r=function(e){return/^[a-zA-Z]$/.test(e)},o=function(e){return e>="0"&&e<="9"};if(0===t&&!r(n))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!r(n)&&!o(n))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}}var w=r(n(488)),x=r(n(514)),T=r(n(508)),C=r(n(507)),N=r(n(519)),S=r(n(556)),_=r(n(557)),O=r(n(558)),P=r(n(528)),A=r(n(560)),I=r(n(533)),M=r(n(485)),R=r(n(561));c.prototype.type="Unit",c.prototype.isUnit=!0;var L,k,D;c.parse=function(n,r){if(r=r||{},L=n,k=-1,D="","string"!=typeof L)throw new TypeError("Invalid argument in Unit.parse, string expected");var o=new c;o.units=[],f(),l();var i=m(),a=null;i&&(a="BigNumber"===t.number?new e.BigNumber(i):"Fraction"===t.number?new e.Fraction(i):parseFloat(i)),l();for(var s=1,u=!1,p=[],h=1;;){for(l();"("===D;)p.push(s),h*=s,s=1,f(),l();if(!D)break;var d=D,b=g();if(null==b)throw new SyntaxError('Unexpected "'+d+'" in "'+L+'" at index '+k.toString());var E=y(b);if(null==E)throw new SyntaxError('Unit "'+b+'" not found.');var w=s*h;if(l(),v("^")){l();var x=m();if(null==x)throw new SyntaxError('In "'+n+'", "^" must be followed by a floating-point number');w*=x}o.units.push({unit:E.unit,prefix:E.prefix,power:w});for(var T=0;T<j.length;T++)o.dimensions[T]+=(E.unit.dimensions[T]||0)*w;for(l();")"===D;){if(0===p.length)throw new SyntaxError('Unmatched ")" in "'+L+'" at index '+k.toString());h/=p.pop(),f(),l()}if(u=!1,v("*")?(s=1,u=!0):v("/")?(s=-1,u=!0):s=1,E.unit.base){var C=E.unit.base.key;q.auto[C]={unit:E.unit,prefix:E.prefix}}}if(l(),D)throw new SyntaxError('Could not parse: "'+n+'"');if(u)throw new SyntaxError('Trailing characters: "'+n+'"');if(0!==p.length)throw new SyntaxError('Unmatched "(" in "'+L+'"');if(0==o.units.length&&!r.allowNoUnits)throw new SyntaxError('"'+n+'" contains no units');return o.value=void 0!=a?o._normalize(a):null,o},c.prototype.clone=function(){var e=new c;e.fixPrefix=this.fixPrefix,e.isUnitListSimplified=this.isUnitListSimplified,e.value=i(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++){e.units[t]={};for(var n in this.units[t])this.units[t].hasOwnProperty(n)&&(e.units[t][n]=this.units[t][n])}return e},c.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},c.prototype._normalize=function(e){var t,n,r,o,i;if(null==e||0===this.units.length)return e;if(this._isDerived()){var a=e;i=c._getNumberConverter(I(e));for(var s=0;s<this.units.length;s++)t=i(this.units[s].unit.value),o=i(this.units[s].prefix.value),r=i(this.units[s].power),a=T(a,N(T(t,o),r));return a}return i=c._getNumberConverter(I(e)),t=i(this.units[0].unit.value),n=i(this.units[0].unit.offset),o=i(this.units[0].prefix.value),T(w(e,n),T(t,o))},c.prototype._denormalize=function(e,t){var n,r,o,i,a;if(null==e||0===this.units.length)return e;if(this._isDerived()){var s=e;a=c._getNumberConverter(I(e));for(var u=0;u<this.units.length;u++)n=a(this.units[u].unit.value),i=a(this.units[u].prefix.value),o=a(this.units[u].power),s=C(s,N(T(n,i),o));return s}return a=c._getNumberConverter(I(e)),n=a(this.units[0].unit.value),i=a(this.units[0].prefix.value),r=a(this.units[0].unit.offset),void 0==t?x(C(C(e,n),i),r):x(C(C(e,n),t),r)},c.isValuelessUnit=function(e){return null!=y(e)},c.prototype.hasBase=function(e){if("string"==typeof e&&(e=H[e]),!e)return!1;for(var t=0;t<j.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},c.prototype.equalBase=function(e){for(var t=0;t<j.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},c.prototype.equals=function(e){return this.equalBase(e)&&O(this.value,e.value)},c.prototype.multiply=function(e){for(var t=this.clone(),n=0;n<j.length;n++)t.dimensions[n]=(this.dimensions[n]||0)+(e.dimensions[n]||0);for(var n=0;n<e.units.length;n++){var r={};for(var o in e.units[n])r[o]=e.units[n][o];t.units.push(r)}if(null!=this.value||null!=e.value){var i=null==this.value?this._normalize(1):this.value,a=null==e.value?e._normalize(1):e.value;t.value=T(i,a)}else t.value=null;return t.isUnitListSimplified=!1,B(t)},c.prototype.divide=function(e){for(var t=this.clone(),n=0;n<j.length;n++)t.dimensions[n]=(this.dimensions[n]||0)-(e.dimensions[n]||0);for(var n=0;n<e.units.length;n++){var r={};for(var o in e.units[n])r[o]=e.units[n][o];r.power=-r.power,t.units.push(r)}if(null!=this.value||null!=e.value){var i=null==this.value?this._normalize(1):this.value,a=null==e.value?e._normalize(1):e.value;t.value=C(i,a)}else t.value=null;return t.isUnitListSimplified=!1,B(t)},c.prototype.pow=function(e){for(var t=this.clone(),n=0;n<j.length;n++)t.dimensions[n]=(this.dimensions[n]||0)*e;for(var n=0;n<t.units.length;n++)t.units[n].power*=e;return null!=t.value?t.value=N(t.value,e):t.value=null,t.isUnitListSimplified=!1,B(t)};var B=function(e){return e.equalBase(H.NONE)&&null!==e.value&&!t.predictable?e.value:e};c.prototype.abs=function(){var e=this.clone();e.value=S(e.value);for(var t in e.units)"VA"!==e.units[t].unit.name&&"VAR"!==e.units[t].unit.name||(e.units[t].unit=G.W);return e},c.prototype.to=function(e){var t,n=null==this.value?this._normalize(1):this.value;if("string"==typeof e){if(t=c.parse(e),!this.equalBase(t))throw new Error("Units do not match");if(null!==t.value)throw new Error("Cannot convert to a unit with a value");return t.value=i(n),t.fixPrefix=!0,t.isUnitListSimplified=!0,t}if(e&&e.isUnit){if(!this.equalBase(e))throw new Error("Units do not match");if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return t=e.clone(),t.value=i(n),t.fixPrefix=!0,t.isUnitListSimplified=!0,t}throw new Error("String or Unit expected as parameter")},c.prototype.toNumber=function(e){return M(this.toNumeric(e))},c.prototype.toNumeric=function(e){var t=this;return e&&(t=this.to(e)),t._isDerived()?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},c.prototype.toString=function(){return this.format()},c.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},c.fromJSON=function(e){var t=new c(e.value,e.unit);return t.fixPrefix=e.fixPrefix||!1,t},c.prototype.valueOf=c.prototype.toString,c.prototype.simplifyUnitListLazy=function(){if(!this.isUnitListSimplified&&null!=this.value){var e,t=[];for(var r in Y)if(this.hasBase(H[r])){e=r;break}if("NONE"===e)this.units=[];else{var o;e&&Y.hasOwnProperty(e)&&(o=Y[e]);if(o)this.units=[{unit:o.unit,prefix:o.prefix,power:1}];else{for(var i=!1,a=0;a<j.length;a++){var s=j[a];Math.abs(this.dimensions[a]||0)>1e-12&&(Y.hasOwnProperty(s)?t.push({unit:Y[s].unit,prefix:Y[s].prefix,power:this.dimensions[a]||0}):i=!0)}n(563);t.length<this.units.length&&!i&&(this.units=t)}}this.isUnitListSimplified=!0}},c.prototype.formatUnits=function(){this.simplifyUnitListLazy();for(var e="",t="",n=0,r=0,o=0;o<this.units.length;o++)this.units[o].power>0?(n++,e+=" "+this.units[o].prefix.name+this.units[o].unit.name,Math.abs(this.units[o].power-1)>1e-15&&(e+="^"+this.units[o].power)):this.units[o].power<0&&r++;if(r>0)for(var o=0;o<this.units.length;o++)this.units[o].power<0&&(n>0?(t+=" "+this.units[o].prefix.name+this.units[o].unit.name,Math.abs(this.units[o].power+1)>1e-15&&(t+="^"+-this.units[o].power)):(t+=" "+this.units[o].prefix.name+this.units[o].unit.name,t+="^"+this.units[o].power));e=e.substr(1),t=t.substr(1),n>1&&r>0&&(e="("+e+")"),r>1&&n>0&&(t="("+t+")");var i=e;return n>0&&r>0&&(i+=" / "),i+=t},c.prototype.format=function(e){this.simplifyUnitListLazy();var t=!1,n=!0;"undefined"!=typeof this.value&&null!==this.value&&this.value.isComplex&&(t=Math.abs(this.value.re)<1e-14,n=Math.abs(this.value.im)<1e-14);for(var r in this.units)this.units[r].unit&&("VA"===this.units[r].unit.name&&t?this.units[r].unit=G.VAR:"VAR"!==this.units[r].unit.name||t||(this.units[r].unit=G.VA));1!==this.units.length||this.fixPrefix||Math.abs(this.units[0].power-Math.round(this.units[0].power))<1e-14&&(this.units[0].prefix=this._bestPrefix());var o=this._denormalize(this.value),i=null!==this.value?A(o,e||{}):"",a=this.formatUnits();return this.value&&this.value.isComplex&&(i="("+i+")"),a.length>0&&i.length>0&&(i+=" "),i+=a},c.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=S(this.value),t=S(this.units[0].unit.value),n=this.units[0].prefix;if(0===e)return n;var r=this.units[0].power,o=Math.abs(Math.log(e/Math.pow(n.value*t,r))/Math.LN10-1.2),i=this.units[0].unit.prefixes;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];if(s.scientific){var u=Math.abs(Math.log(e/Math.pow(s.value*t,r))/Math.LN10-1.2);(u<o||u===o&&s.name.length<n.name.length)&&(n=s,o=u)}}return n},c.prototype.splitUnit=function(e){for(var t=this.clone(),n=[],r=0;r<e.length&&(t=t.to(e[r]),r!=e.length-1);r++){var o=_(t.toNumeric()),i=new c(o,e[r].toString());n.push(i),t=x(t,i)}return n.push(t),n};var U={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};U.SHORTLONG={};for(var F in U.SHORT)U.SHORT.hasOwnProperty(F)&&(U.SHORTLONG[F]=U.SHORT[F]);for(var F in U.LONG)U.LONG.hasOwnProperty(F)&&(U.SHORTLONG[F]=U.LONG[F]);var j=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],H={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var F in H)H[F].key=F;var V={},W={name:"",base:V,value:1,offset:0,dimensions:[0,0,0,0,0,0,0,0,0]},G={meter:{name:"meter",base:H.LENGTH,prefixes:U.LONG,value:1,offset:0},inch:{name:"inch",base:H.LENGTH,prefixes:U.NONE,value:.0254,offset:0},foot:{name:"foot",base:H.LENGTH,prefixes:U.NONE,value:.3048,offset:0},yard:{name:"yard",base:H.LENGTH,prefixes:U.NONE,value:.9144,offset:0},mile:{name:"mile",base:H.LENGTH,prefixes:U.NONE,value:1609.344,offset:0},link:{name:"link",base:H.LENGTH,prefixes:U.NONE,value:.201168,offset:0},rod:{name:"rod",base:H.LENGTH,prefixes:U.NONE,value:5.02921,offset:0},chain:{name:"chain",base:H.LENGTH,prefixes:U.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:H.LENGTH,prefixes:U.NONE,value:1e-10,offset:0},m:{name:"m",base:H.LENGTH,prefixes:U.SHORT,value:1,offset:0},in:{name:"in",base:H.LENGTH,prefixes:U.NONE,value:.0254,offset:0},ft:{name:"ft",base:H.LENGTH,prefixes:U.NONE,value:.3048,offset:0},yd:{name:"yd",base:H.LENGTH,prefixes:U.NONE,value:.9144,offset:0},mi:{name:"mi",base:H.LENGTH,prefixes:U.NONE,value:1609.344,offset:0},li:{name:"li",base:H.LENGTH,prefixes:U.NONE,value:.201168,offset:0},rd:{name:"rd",base:H.LENGTH,prefixes:U.NONE,value:5.02921,offset:0},ch:{name:"ch",base:H.LENGTH,prefixes:U.NONE,value:20.1168,offset:0},mil:{name:"mil",base:H.LENGTH,prefixes:U.NONE,value:254e-7,offset:0},m2:{name:"m2",base:H.SURFACE,prefixes:U.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:H.SURFACE,prefixes:U.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:H.SURFACE,prefixes:U.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:H.SURFACE,prefixes:U.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:H.SURFACE,prefixes:U.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:H.SURFACE,prefixes:U.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:H.SURFACE,prefixes:U.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:H.SURFACE,prefixes:U.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:H.SURFACE,prefixes:U.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:H.SURFACE,prefixes:U.NONE,value:1e4,offset:0},m3:{name:"m3",base:H.VOLUME,prefixes:U.CUBIC,value:1,offset:0},L:{name:"L",base:H.VOLUME,prefixes:U.SHORT,value:.001,offset:0},l:{name:"l",base:H.VOLUME,prefixes:U.SHORT,value:.001,offset:0},litre:{name:"litre",base:H.VOLUME,prefixes:U.LONG,value:.001,offset:0},cuin:{name:"cuin",base:H.VOLUME,prefixes:U.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:H.VOLUME,prefixes:U.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:H.VOLUME,prefixes:U.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:H.VOLUME,prefixes:U.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:H.VOLUME,prefixes:U.NONE,value:15e-6,offset:0},drop:{name:"drop",base:H.VOLUME,prefixes:U.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:H.VOLUME,prefixes:U.NONE,value:5e-8,offset:0},minim:{name:"minim",base:H.VOLUME,prefixes:U.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:H.VOLUME,prefixes:U.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:H.VOLUME,prefixes:U.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:H.VOLUME,prefixes:U.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:H.VOLUME,prefixes:U.NONE,value:1e-6,offset:0},cup:{name:"cup",base:H.VOLUME,prefixes:U.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:H.VOLUME,prefixes:U.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:H.VOLUME,prefixes:U.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:H.VOLUME,prefixes:U.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:H.VOLUME,prefixes:U.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:H.VOLUME,prefixes:U.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:H.VOLUME,prefixes:U.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:H.VOLUME,prefixes:U.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:H.VOLUME,prefixes:U.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:H.VOLUME,prefixes:U.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:H.VOLUME,prefixes:U.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:H.VOLUME,prefixes:U.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:H.VOLUME,prefixes:U.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:H.VOLUME,prefixes:U.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:H.VOLUME,prefixes:U.NONE,value:.1173478,offset:0},obl:{name:"obl",base:H.VOLUME,prefixes:U.NONE,value:.1589873,offset:0},g:{name:"g",base:H.MASS,prefixes:U.SHORT,value:.001,offset:0},gram:{name:"gram",base:H.MASS,prefixes:U.LONG,value:.001,offset:0},ton:{name:"ton",base:H.MASS,prefixes:U.SHORT,value:907.18474,offset:0},tonne:{name:"tonne",base:H.MASS,prefixes:U.SHORT,value:1e3,offset:0},grain:{name:"grain",base:H.MASS,prefixes:U.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:H.MASS,prefixes:U.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:H.MASS,prefixes:U.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:H.MASS,prefixes:U.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:H.MASS,prefixes:U.NONE,value:45.359237,offset:0},stick:{name:"stick",base:H.MASS,prefixes:U.NONE,value:.115,offset:0},stone:{name:"stone",base:H.MASS,prefixes:U.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:H.MASS,prefixes:U.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:H.MASS,prefixes:U.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:H.MASS,prefixes:U.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:H.MASS,prefixes:U.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:H.MASS,prefixes:U.NONE,value:45.359237,offset:0},s:{name:"s",base:H.TIME,prefixes:U.SHORT,value:1,offset:0},min:{name:"min",base:H.TIME,prefixes:U.NONE,value:60,offset:0},h:{name:"h",base:H.TIME,prefixes:U.NONE,value:3600,offset:0},second:{name:"second",base:H.TIME,prefixes:U.LONG,value:1,offset:0},sec:{name:"sec",base:H.TIME,prefixes:U.LONG,value:1,offset:0},minute:{name:"minute",base:H.TIME,prefixes:U.NONE,value:60,offset:0},hour:{name:"hour",base:H.TIME,prefixes:U.NONE,value:3600,offset:0},day:{name:"day",base:H.TIME,prefixes:U.NONE,value:86400,offset:0},week:{name:"week",base:H.TIME,prefixes:U.NONE,value:604800,offset:0},month:{name:"month",base:H.TIME,prefixes:U.NONE,value:2629800,offset:0},year:{name:"year",base:H.TIME,prefixes:U.NONE,value:31557600,offset:0},decade:{name:"year",base:H.TIME,prefixes:U.NONE,value:315576e3,offset:0},century:{name:"century",base:H.TIME,prefixes:U.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:H.TIME,prefixes:U.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:H.FREQUENCY,prefixes:U.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:H.FREQUENCY,prefixes:U.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:H.ANGLE,prefixes:U.NONE,value:1,offset:0},deg:{name:"deg",base:H.ANGLE,prefixes:U.NONE,value:null,offset:0},grad:{name:"grad",base:H.ANGLE,prefixes:U.NONE,value:null,offset:0},cycle:{name:"cycle",base:H.ANGLE,prefixes:U.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:H.ANGLE,prefixes:U.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:H.ANGLE,prefixes:U.NONE,value:null,offset:0},A:{name:"A",base:H.CURRENT,prefixes:U.SHORT,value:1,offset:0},ampere:{name:"ampere",base:H.CURRENT,prefixes:U.LONG,value:1,offset:0},K:{name:"K",base:H.TEMPERATURE,prefixes:U.NONE,value:1,offset:0},degC:{name:"degC",base:H.TEMPERATURE,prefixes:U.NONE,value:1,offset:273.15},degF:{name:"degF",base:H.TEMPERATURE,prefixes:U.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:H.TEMPERATURE,prefixes:U.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:H.TEMPERATURE,prefixes:U.NONE,value:1,offset:0},celsius:{name:"celsius",base:H.TEMPERATURE,prefixes:U.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:H.TEMPERATURE,prefixes:U.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:H.TEMPERATURE,prefixes:U.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:H.AMOUNT_OF_SUBSTANCE,prefixes:U.SHORT,value:1,offset:0},mole:{name:"mole",base:H.AMOUNT_OF_SUBSTANCE,prefixes:U.LONG,value:1,offset:0},cd:{name:"cd",base:H.LUMINOUS_INTENSITY,prefixes:U.NONE,value:1,offset:0},candela:{name:"candela",base:H.LUMINOUS_INTENSITY,prefixes:U.NONE,value:1,offset:0},N:{name:"N",base:H.FORCE,prefixes:U.SHORT,value:1,offset:0},newton:{name:"newton",base:H.FORCE,prefixes:U.LONG,value:1,offset:0},dyn:{name:"dyn",base:H.FORCE,prefixes:U.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:H.FORCE,prefixes:U.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:H.FORCE,prefixes:U.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:H.FORCE,prefixes:U.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:H.FORCE,prefixes:U.LONG,value:4448.2216,offset:0},J:{name:"J",base:H.ENERGY,prefixes:U.SHORT,value:1,offset:0},joule:{name:"joule",base:H.ENERGY,prefixes:U.SHORT,value:1,offset:0},erg:{name:"erg",base:H.ENERGY,prefixes:U.NONE,value:1e-5,offset:0},Wh:{name:"Wh",base:H.ENERGY,prefixes:U.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:H.ENERGY,prefixes:U.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:H.ENERGY,prefixes:U.SHORT,value:1.602176565e-19,offset:0},electronvolt:{name:"electronvolt",base:H.ENERGY,prefixes:U.LONG,value:1.602176565e-19,offset:0},W:{name:"W",base:H.POWER,prefixes:U.SHORT,value:1,offset:0},watt:{name:"W",base:H.POWER,prefixes:U.LONG,value:1,offset:0},hp:{name:"hp",base:H.POWER,prefixes:U.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:H.POWER,prefixes:U.SHORT,value:R.I,offset:0},VA:{name:"VA",base:H.POWER,prefixes:U.SHORT,value:1,offset:0},Pa:{name:"Pa",base:H.PRESSURE,prefixes:U.SHORT,value:1,offset:0},psi:{name:"psi",base:H.PRESSURE,prefixes:U.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:H.PRESSURE,prefixes:U.NONE,value:101325,offset:0},bar:{name:"bar",base:H.PRESSURE,prefixes:U.NONE,value:1e5,offset:0},torr:{name:"torr",base:H.PRESSURE,prefixes:U.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:H.PRESSURE,prefixes:U.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:H.PRESSURE,prefixes:U.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:H.PRESSURE,prefixes:U.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:H.ELECTRIC_CHARGE,prefixes:U.LONG,value:1,offset:0},C:{name:"C",base:H.ELECTRIC_CHARGE,prefixes:U.SHORT,value:1,offset:0},farad:{name:"farad",base:H.ELECTRIC_CAPACITANCE,prefixes:U.LONG,value:1,offset:0},F:{name:"F",base:H.ELECTRIC_CAPACITANCE,prefixes:U.SHORT,value:1,offset:0},volt:{name:"volt",base:H.ELECTRIC_POTENTIAL,prefixes:U.LONG,value:1,offset:0},V:{name:"V",base:H.ELECTRIC_POTENTIAL,prefixes:U.SHORT,value:1,offset:0},ohm:{name:"ohm",base:H.ELECTRIC_RESISTANCE,prefixes:U.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:H.ELECTRIC_INDUCTANCE,prefixes:U.LONG,value:1,offset:0},H:{name:"H",base:H.ELECTRIC_INDUCTANCE,prefixes:U.SHORT,value:1,offset:0},siemens:{name:"siemens",base:H.ELECTRIC_CONDUCTANCE,prefixes:U.LONG,value:1,offset:0},S:{name:"S",base:H.ELECTRIC_CONDUCTANCE,prefixes:U.SHORT,value:1,offset:0},weber:{name:"weber",base:H.MAGNETIC_FLUX,prefixes:U.LONG,value:1,offset:0},Wb:{name:"Wb",base:H.MAGNETIC_FLUX,prefixes:U.SHORT,value:1,offset:0},tesla:{name:"tesla",base:H.MAGNETIC_FLUX_DENSITY,prefixes:U.LONG,value:1,offset:0},T:{name:"T",base:H.MAGNETIC_FLUX_DENSITY,prefixes:U.SHORT,value:1,offset:0},b:{name:"b",base:H.BIT,prefixes:U.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:H.BIT,prefixes:U.BINARY_LONG,value:1,offset:0},B:{name:"B",base:H.BIT,prefixes:U.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:H.BIT,prefixes:U.BINARY_LONG,value:8,offset:0}},z={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",hertz:"hertz",radians:"rad",
degree:"deg",degrees:"deg",gradian:"grad",gradians:"grad",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole"};b(t),u.on("config",function(e,t){e.number!==t.number&&b(e)});var q={si:{NONE:{unit:W,prefix:U.NONE[""]},LENGTH:{unit:G.m,prefix:U.SHORT[""]},MASS:{unit:G.g,prefix:U.SHORT.k},TIME:{unit:G.s,prefix:U.SHORT[""]},CURRENT:{unit:G.A,prefix:U.SHORT[""]},TEMPERATURE:{unit:G.K,prefix:U.SHORT[""]},LUMINOUS_INTENSITY:{unit:G.cd,prefix:U.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:G.mol,prefix:U.SHORT[""]},ANGLE:{unit:G.rad,prefix:U.SHORT[""]},BIT:{unit:G.bit,prefix:U.SHORT[""]},FORCE:{unit:G.N,prefix:U.SHORT[""]},ENERGY:{unit:G.J,prefix:U.SHORT[""]},POWER:{unit:G.W,prefix:U.SHORT[""]},PRESSURE:{unit:G.Pa,prefix:U.SHORT[""]},ELECTRIC_CHARGE:{unit:G.C,prefix:U.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:G.F,prefix:U.SHORT[""]},ELECTRIC_POTENTIAL:{unit:G.V,prefix:U.SHORT[""]},ELECTRIC_RESISTANCE:{unit:G.ohm,prefix:U.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:G.H,prefix:U.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:G.S,prefix:U.SHORT[""]},MAGNETIC_FLUX:{unit:G.Wb,prefix:U.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:G.T,prefix:U.SHORT[""]},FREQUENCY:{unit:G.Hz,prefix:U.SHORT[""]}}};q.cgs=JSON.parse(JSON.stringify(q.si)),q.cgs.LENGTH={unit:G.m,prefix:U.SHORT.c},q.cgs.MASS={unit:G.g,prefix:U.SHORT[""]},q.cgs.FORCE={unit:G.dyn,prefix:U.SHORT[""]},q.cgs.ENERGY={unit:G.erg,prefix:U.NONE[""]},q.us=JSON.parse(JSON.stringify(q.si)),q.us.LENGTH={unit:G.ft,prefix:U.NONE[""]},q.us.MASS={unit:G.lbm,prefix:U.NONE[""]},q.us.TEMPERATURE={unit:G.degF,prefix:U.NONE[""]},q.us.FORCE={unit:G.lbf,prefix:U.NONE[""]},q.us.ENERGY={unit:G.BTU,prefix:U.BTU[""]},q.us.POWER={unit:G.hp,prefix:U.NONE[""]},q.us.PRESSURE={unit:G.psi,prefix:U.NONE[""]},q.auto=JSON.parse(JSON.stringify(q.si));var Y=q.auto;c.setUnitSystem=function(e){if(!q.hasOwnProperty(e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(q).join(", "));Y=q[e]},c.getUnitSystem=function(){for(var e in q)if(q[e]===Y)return e},c.typeConverters={BigNumber:function(t){return new e.BigNumber(t+"")},Fraction:function(t){return new e.Fraction(t)},Complex:function(e){return e},number:function(e){return e}},c._getNumberConverter=function(e){if(!c.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return c.typeConverters[e]};for(var F in G){var X=G[F];X.dimensions=X.base.dimensions}for(var K in z)if(z.hasOwnProperty(K)){var X=G[z[K]],Z={};for(var F in X)X.hasOwnProperty(F)&&(Z[F]=X[F]);Z.name=K,G[K]=Z}return c.createUnit=function(e,t){if("object"!=typeof e)throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var n in e)if(e.hasOwnProperty(n)&&c.deleteUnit(n),e[n].aliases)for(var r=0;r<e[n].aliases.length;r++)c.deleteUnit(e[n].aliases[r]);var o;for(var n in e)e.hasOwnProperty(n)&&(o=c.createUnitSingle(n,e[n]));return o},c.createUnitSingle=function(e,t,n){if("undefined"!=typeof t&&null!==t||(t={}),"string"!=typeof e)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(G.hasOwnProperty(e))throw new Error('Cannot create unit "'+e+'": a unit with that name already exists');E(e);var r,o,i=null,a=[],s=0;if(t&&"Unit"===t.type)i=t.clone();else if("string"==typeof t)""!==t&&(r=t);else{if("object"!=typeof t)throw new TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');r=t.definition,o=t.prefixes,s=t.offset,a=t.aliases}if(a)for(var u=0;u<a.length;u++)if(G.hasOwnProperty(a[u]))throw new Error('Cannot create alias "'+a[u]+'": a unit with that name already exists');if(r&&"string"==typeof r&&!i)try{i=c.parse(r,{allowNoUnits:!0})}catch(t){throw t.message='Could not create unit "'+e+'" from "'+r+'": '+t.message,t}else r&&"Unit"===r.type&&(i=r.clone());a=a||[],s=s||0,o=o&&o.toUpperCase?U[o.toUpperCase()]||U.NONE:U.NONE;var l={};if(i){l={name:e,value:i.value,dimensions:i.dimensions.slice(0),prefixes:o,offset:s};var p=!1;for(var u in H)if(H.hasOwnProperty(u)){for(var h=!0,f=0;f<j.length;f++)if(Math.abs((l.dimensions[f]||0)-(H[u].dimensions[f]||0))>1e-12){h=!1;break}if(h){p=!0;break}}if(!p){var d=e+"_STUFF",m={dimensions:i.dimensions.slice(0)};m.key=d,H[d]=m,Y[d]={unit:l,prefix:U.NONE[""]},l.base=d}}else{var d=e+"_STUFF";if(j.indexOf(d)>=0)throw new Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');j.push(d);for(var g in H)H.hasOwnProperty(g)&&(H[g].dimensions[j.length-1]=0);for(var m={dimensions:[]},u=0;u<j.length;u++)m.dimensions[u]=0;m.dimensions[j.length-1]=1,m.key=d,H[d]=m,l={name:e,value:1,dimensions:H[d].dimensions.slice(0),prefixes:o,offset:s,base:d},Y[d]={unit:l,prefix:U.NONE[""]}}c.UNITS[e]=l;for(var u=0;u<a.length;u++){var v=a[u],y={};for(var b in l)l.hasOwnProperty(b)&&(y[b]=l[b]);y.name=v,c.UNITS[v]=y}return new c(null,e)},c.deleteUnit=function(e){delete c.UNITS[e]},c.PREFIXES=U,c.BASE_UNITS=H,c.UNITS=G,c.UNIT_SYSTEMS=q,c}var o=n(499).endsWith,i=n(470).clone,a=n(555);t.name="Unit",t.path="type",t.factory=r,t.math=!0},function(e,t,n){function r(e){return e[0].precision}var o=n(504).memoize;t.e=o(function(e){return new e(1).exp()},r),t.phi=o(function(e){return new e(1).plus(new e(5).sqrt()).div(2)},r),t.pi=o(function(e){return pi=e.acos(-1)},r),t.tau=o(function(e){return t.pi(e).times(2)},r)},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("abs",{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return o(e,i,!0)},Unit:function(e){return e.abs()}});return i.toTex={1:"\\left|${args[0]}\\right|"},i}var o=n(484);t.name="abs",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("fix",{number:function(e){return e>0?Math.floor(e):Math.ceil(e)},Complex:function(t){return new e.Complex(t.re>0?Math.floor(t.re):Math.ceil(t.re),t.im>0?Math.floor(t.im):Math.ceil(t.im))},BigNumber:function(e){return e.isNegative()?e.ceil():e.floor()},Fraction:function(e){return e.s<0?e.ceil():e.floor()},"Array | Matrix":function(e){return o(e,i,!0)}});return i.toTex={1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},i}var o=n(484);t.name="fix",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){var i=r(n(487)),a=r(n(493)),s=r(n(515)),u=r(n(559)),c=r(n(523)),l=r(n(496)),p=r(n(505)),h=n(489),f=o("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:a(e,t)},"Matrix, Matrix":function(e,t){var n;switch(e.storage()){case"sparse":switch(t.storage()){case"sparse":n=u(e,t,a);break;default:n=s(t,e,a,!0)}break;default:switch(t.storage()){case"sparse":n=s(e,t,a,!1);break;default:n=l(e,t,a)}}return n},"Array, Array":function(e,t){return f(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return f(i(e),t)},"Matrix, Array":function(e,t){return f(e,i(t))},"Matrix, any":function(e,t){var n;switch(e.storage()){case"sparse":n=c(e,t,a,!1);break;default:n=p(e,t,a,!1)}return n},"any, Matrix":function(e,t){var n;switch(t.storage()){case"sparse":n=c(t,e,a,!0);break;default:n=p(t,e,a,!0)}return n},"Array, any":function(e,t){return p(i(e),t,a,!1).valueOf()},"any, Array":function(e,t){return p(i(t),e,a,!0).valueOf()}});return f.toTex={2:"\\left(${args[0]}"+h.operators.equal+"${args[1]}\\right)"},f}t.name="equal",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=e.DenseMatrix,a=function(e,t,n){var a=e._size,u=e._datatype,c=t._size,l=t._datatype;if(a.length!==c.length)throw new o(a.length,c.length);if(a[0]!==c[0]||a[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+c+")");var p,h=a[0],f=a[1],d=0,m=n;"string"==typeof u&&u===l&&(p=u,d=r.convert(0,p),m=r.find(n,[p,p]));var g,v,y=[];for(g=0;g<h;g++)y[g]=[];var b=new i({data:y,size:[h,f],datatype:p}),E=[],w=[],x=[],T=[];for(v=0;v<f;v++){var C=v+1;for(s(e,v,x,E,C),s(t,v,T,w,C),g=0;g<h;g++){var N=x[g]===C?E[g]:d,S=T[g]===C?w[g]:d;y[g][v]=m(N,S)}}return b},s=function(e,t,n,r,o){for(var i=e._values,a=e._index,s=e._ptr,u=s[t],c=s[t+1];u<c;u++){var l=a[u];n[l]=o,r[l]=i[u]}};return a}var o=n(491);t.name="algorithm07",t.factory=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=r("format",{any:o.format,"any, Object | function | number":o.format});return i.toTex=void 0,i}var o=n(499);t.name="format",t.factory=r},function(e,t,n){function r(e,t,n,r,s){return o.prototype.type="Complex",o.prototype.isComplex=!0,o.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},o.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},o.prototype.format=function(e){var t="",n=this.im,r=this.re,o=i(this.re,e),s=i(this.im,e),u=a(e)?e:e?e.precision:null;if(null!==u){var c=Math.pow(10,-u);Math.abs(r/n)<c&&(r=0),Math.abs(n/r)<c&&(n=0)}return t=0==n?o:0==r?1==n?"i":n==-1?"-i":s+"i":n>0?1==n?o+" + i":o+" + "+s+"i":n==-1?o+" - i":o+" - "+s.substring(1)+"i"},o.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return o(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(a(n)){if(r&&r.isUnit&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),a(r))return new o({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},o.prototype.valueOf=o.prototype.toString,o.fromJSON=function(e){return new o(e)},o.EPSILON=t.epsilon,s.on("config",function(e,t){e.epsilon!==t.epsilon&&(o.EPSILON=e.epsilon)}),o}var o=n(562),i=n(473).format,a=n(473).isNumber;t.name="Complex",t.path="type",t.factory=r,t.math=!0},function(e,t,n){var r,o;(function(e){/**
	 * @license Complex.js v2.0.1 11/02/2016
	 *
	 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
	 * Dual licensed under the MIT or GPL Version 2 licenses.
	 **/
!function(i){"use strict";function a(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}function s(e,t){return this instanceof s?(l(e,t),this.re=u.re,void(this.im=u.im)):new s(e,t)}var u={re:0,im:0};Math.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},Math.sinh=Math.sinh||function(e){return.5*(Math.exp(e)-Math.exp(-e))};var c=function(){throw SyntaxError("Invalid Param")},l=function(e,t){if(void 0===e||null===e)u.re=u.im=0;else if(void 0!==t)u.re=e,u.im=t;else switch(typeof e){case"object":"im"in e&&"re"in e?(u.re=e.re,u.im=e.im):"abs"in e&&"arg"in e?(u.re=e.abs*Math.cos(e.arg),u.im=e.abs*Math.sin(e.arg)):"r"in e&&"phi"in e?(u.re=e.r*Math.cos(e.phi),u.im=e.r*Math.sin(e.phi)):c();break;case"string":u.im=u.re=0;var n=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),r=1,o=0;null===n&&c();for(var i=0;i<n.length;i++){var a=n[i];" "===a||"\t"===a||"\n"===a||("+"===a?r++:"-"===a?o++:"i"===a||"I"===a?(r+o===0&&c()," "===n[i+1]||isNaN(n[i+1])?u.im+=parseFloat((o%2?"-":"")+"1"):(u.im+=parseFloat((o%2?"-":"")+n[i+1]),i++),r=o=0):((r+o===0||isNaN(a))&&c(),"i"===n[i+1]||"I"===n[i+1]?(u.im+=parseFloat((o%2?"-":"")+a),i++):u.re+=parseFloat((o%2?"-":"")+a),r=o=0))}r+o>0&&c();break;case"number":u.im=0,u.re=e;break;default:c()}isNaN(u.re)||isNaN(u.im)};s.prototype={re:0,im:0,sign:function(){var e=this.abs();return new s(this.re/e,this.im/e)},add:function(e,t){return l(e,t),new s(this.re+u.re,this.im+u.im)},sub:function(e,t){return l(e,t),new s(this.re-u.re,this.im-u.im)},mul:function(e,t){return l(e,t),0===u.im&&0===this.im?new s(this.re*u.re,0):new s(this.re*u.re-this.im*u.im,this.re*u.im+this.im*u.re)},div:function(e,t){l(e,t),e=this.re,t=this.im;var n,r,o=u.re,i=u.im;return 0===o&&0===i?new s(0!==e?e/0:0,0!==t?t/0:0):0===i?new s(e/o,t/o):Math.abs(o)<Math.abs(i)?(r=o/i,n=o*r+i,new s((e*r+t)/n,(t*r-e)/n)):(r=i/o,n=i*r+o,new s((e+t*r)/n,(t-e*r)/n))},pow:function(e,t){if(l(e,t),e=this.re,t=this.im,0===e&&0===t)return new s(0,0);var n=Math.atan2(t,e),r=a(e,t);if(0===u.im){if(0===t&&e>=0)return new s(Math.pow(e,u.re),0);if(0===e)switch(u.re%4){case 0:return new s(Math.pow(t,u.re),0);case 1:return new s(0,Math.pow(t,u.re));case 2:return new s(-Math.pow(t,u.re),0);case 3:return new s(0,-Math.pow(t,u.re))}}return e=Math.exp(u.re*r-u.im*n),t=u.im*r+u.re*n,new s(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,o=this.abs();return n>=0&&0===r?new s(Math.sqrt(n),0):(e=n>=0?.5*Math.sqrt(2*(o+n)):Math.abs(r)/Math.sqrt(2*(o-n)),t=n<=0?.5*Math.sqrt(2*(o-n)):Math.abs(r)/Math.sqrt(2*(o+n)),new s(e,r>=0?t:-t))},exp:function(){var e=Math.exp(this.re);return 0===this.im,new s(e*Math.cos(this.im),e*Math.sin(this.im))},log:function(){var e=this.re,t=this.im;return new s(a(e,t),Math.atan2(t,e))},abs:function(){var e=Math.abs(this.re),t=Math.abs(this.im);return e<3e3&&t<3e3?Math.sqrt(e*e+t*t):(e<t?(e=t,t=this.re/this.im):t=this.im/this.re,e*Math.sqrt(1+t*t))},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new s(Math.sin(e)*Math.cosh(t),Math.cos(e)*Math.sinh(t))},cos:function(){var e=this.re,t=this.im;return new s(Math.cos(e)*Math.cosh(t),-Math.sin(e)*Math.sinh(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+Math.cosh(t);return new s(Math.sin(e)/n,Math.sinh(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-Math.cosh(t);return new s(-Math.sin(e)/n,Math.sinh(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*Math.cosh(2*t)+.5*Math.cos(2*e);return new s(Math.cos(e)*Math.cosh(t)/n,Math.sin(e)*Math.sinh(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*Math.cosh(2*t)-.5*Math.cos(2*e);return new s(Math.sin(e)*Math.cosh(t)/n,-Math.cos(e)*Math.sinh(t)/n)},asin:function(){var e=this.re,t=this.im,n=new s(t*t-e*e+1,-2*e*t).sqrt(),r=new s(n.re-t,n.im+e).log();return new s(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new s(t*t-e*e+1,-2*e*t).sqrt(),r=new s(n.re-t,n.im+e).log();return new s(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new s(0,1/0);if(t===-1)return new s(0,-(1/0))}var n=e*e+(1-t)*(1-t),r=new s((1-t*t-e*e)/n,-2*e/n).log();return new s(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new s(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).atan():new s(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(0,1/0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).acos():new s(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).asin():new s(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new s(Math.sinh(e)*Math.cos(t),Math.cosh(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new s(Math.cosh(e)*Math.cos(t),Math.sinh(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=Math.cosh(e)+Math.cos(t);return new s(Math.sinh(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=Math.cosh(e)-Math.cos(t);return new s(Math.sinh(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-Math.cosh(2*e);return new s(-2*Math.sinh(e)*Math.cos(t)/n,2*Math.cosh(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+Math.cosh(2*e);return new s(2*Math.cosh(e)*Math.cos(t)/n,-2*Math.sinh(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e,t=this.acos();return t.im<=0?(e=t.re,t.re=-t.im,t.im=e):(e=t.im,t.im=-t.re,t.re=e),t},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,o=1+e,i=r*r+t*t,u=0!==i?new s((o*r-t*t)/i,(t*r+o*t)/i):new s(e!==-1?e/0:0,0!==t?t/0:0),c=u.re;return u.re=a(u.re,u.im)/2,u.im=Math.atan2(u.im,c)/2,n&&(u.im=-u.im),u},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).atanh():new s(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new s(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).asinh():new s(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(1/0,0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).acosh():new s(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){var e=this.re,t=this.im,n=e*e+t*t;return new s(0!==e?e/n:0,0!==t?-t/n:0)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new s(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new s(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new s(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){return l(e,t),Math.abs(u.re-this.re)<=s.EPSILON&&Math.abs(u.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return isNaN(e)||isNaN(t)?"NaN":(0!==e&&(n+=e),0!==t&&(0!==e?n+=t<0?" - ":" + ":t<0&&(n+="-"),t=Math.abs(t),1!==t&&(n+=t),n+="i"),n?n:"0")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.EPSILON=1e-16,n(13).amd?(r=[],o=function(){return s}.apply(t,r),!(void 0!==o&&(e.exports=o))):e.exports=s}(this)}).call(t,n(97)(e))},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),u(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return b(o)||(o=u(e,o,r)),o}var i=c(e,n);if(i)return i;var a=Object.keys(n),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),N(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(S(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return e.stylize(Date.prototype.toString.call(n),"date");if(N(n))return l(n)}var v="",y=!1,E=["{","}"];if(d(n)&&(y=!0,E=["[","]"]),S(n)){var w=n.name?": "+n.name:"";v=" [Function"+w+"]"}if(x(n)&&(v=" "+RegExp.prototype.toString.call(n)),C(n)&&(v=" "+Date.prototype.toUTCString.call(n)),N(n)&&(v=" "+l(n)),0===a.length&&(!y||0==n.length))return E[0]+v+E[1];if(r<0)return x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var T;return T=y?p(e,n,r,m,a):a.map(function(t){return h(e,n,r,m,t,y)}),e.seen.pop(),f(T,v,E)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)I(t,String(a))?i.push(h(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(e,t,n,r,o,!0))}),i}function h(e,t,n,r,o,i){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),I(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?u(e,c.value,null):u(e,c.value,n-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function E(e){return"symbol"==typeof e}function w(e){return void 0===e}function x(e){return T(e)&&"[object RegExp]"===O(e)}function T(e){return"object"==typeof e&&null!==e}function C(e){return T(e)&&"[object Date]"===O(e)}function N(e){return T(e)&&("[object Error]"===O(e)||e instanceof Error)}function S(e){return"function"==typeof e}function _(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function O(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(M,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<i;s=r[++n])a+=g(s)||!T(s)?" "+s:" "+o(s);return a},t.deprecate=function(n,o){function i(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),a=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var a=!1;return i};var R,L={};t.debuglog=function(e){if(w(R)&&(R={NODE_ENV:"production"}.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=r.pid;L[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else L[e]=function(){};return L[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=y,t.isString=b,t.isSymbol=E,t.isUndefined=w,t.isRegExp=x,t.isObject=T,t.isDate=C,t.isError=N,t.isFunction=S,t.isPrimitive=_,t.isBuffer=n(564);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(565),t._extend=function(e,t){if(!t||!T(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(183))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e,t,n,r){function i(e,t,n){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(null!=e)if(e.isBigNumber===!0)e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(null!=t)if(t.isBigNumber===!0)t=t.toNumber();else if("number"!=typeof t)throw new TypeError("Parameter end must be a number");if(null!=n)if(n.isBigNumber===!0)n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter step must be a number");this.start=null!=e?parseFloat(e):0,this.end=null!=t?parseFloat(t):0,this.step=null!=n?parseFloat(n):1}return i.prototype.type="Range",i.prototype.isRange=!0,i.parse=function(e){if("string"!=typeof e)return null;var t=e.split(":"),n=t.map(function(e){return parseFloat(e)}),r=n.some(function(e){return isNaN(e)});if(r)return null;switch(n.length){case 2:return new i(n[0],n[1]);case 3:return new i(n[0],n[2],n[1]);default:return null}},i.prototype.clone=function(){return new i(this.start,this.end,this.step)},i.prototype.size=function(){var e=0,t=this.start,n=this.step,r=this.end,i=r-t;return o.sign(n)==o.sign(i)?e=Math.ceil(i/n):0==i&&(e=0),isNaN(e)&&(e=0),[e]},i.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},i.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},i.prototype.forEach=function(e){var t=this.start,n=this.step,r=this.end,o=0;if(n>0)for(;t<r;)e(t,[o],this),t+=n,o++;else if(n<0)for(;t>r;)e(t,[o],this),t+=n,o++},i.prototype.map=function(e){var t=[];return this.forEach(function(n,r,o){t[r[0]]=e(n,r,o)}),t},i.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},i.prototype.valueOf=function(){return this.toArray()},i.prototype.format=function(e){var t=o.format(this.start,e);return 1!=this.step&&(t+=":"+o.format(this.step,e)),t+=":"+o.format(this.end,e)},i.prototype.toString=function(){return this.format()},i.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},i.fromJSON=function(e){return new i(e.start,e.end,e.step)},i}var o=n(473);t.name="Range",t.path="type",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){function i(e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=e||{},e&&("object"!=typeof e||Object.keys(e).some(function(t){return!e[t]||!e[t].isNode})))throw new TypeError("Object containing Nodes expected")}var a=r(n(537));return i.prototype=new a,i.prototype.type="ObjectNode",i.prototype.isObjectNode=!0,i.prototype._compile=function(e,t){var n=[];for(var r in this.properties)this.properties.hasOwnProperty(r)&&n.push('"'+r+'": '+this.properties[r]._compile(e,t));return"{"+n.join(", ")+"}"},i.prototype.forEach=function(e){for(var t in this.properties)this.properties.hasOwnProperty(t)&&e(this.properties[t],'properties["'+t+'"]',this)},i.prototype.map=function(e){var t={};for(var n in this.properties)this.properties.hasOwnProperty(n)&&(t[n]=this._ifNode(e(this.properties[n],'properties["'+n+'"]',this)));return new i(t)},i.prototype.clone=function(){var e={};for(var t in this.properties)this.properties.hasOwnProperty(t)&&(e[t]=this.properties[t]);return new i(e)},i.prototype._toString=function(e){var t=[];for(var n in this.properties)this.properties.hasOwnProperty(n)&&t.push('"'+n+'": '+this.properties[n].toString(e));return"{"+t.join(", ")+"}"},i.prototype._toTex=function(e){var t=[];for(var n in this.properties)this.properties.hasOwnProperty(n)&&t.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}"+t.join("\n")+"\\end{array}\\right\\}"},i}n(499);t.name="ObjectNode",t.path="expression.node",t.factory=r},function(e,t,n){"use strict";function r(e,t,r,a,s){function u(e,t,n,r){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof t)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(n)||!n.every(function(e){return e&&e.isNode}))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=r===!0,this.op=e,this.fn=t,this.args=n||[]}function c(e,t,n,r){var o=i.getPrecedence(e,t),a=i.getAssociativity(e,t);if("all"===t||n.length>2){var s=[];return n.forEach(function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":s.push(!1);break;default:s.push(!0)}}),s}switch(n.length){case 0:return[];case 1:var u=i.getPrecedence(n[0],t);if(r&&null!==u){var c,l;if("keep"===t?(c=n[0].getIdentifier(),l=e.getIdentifier()):(c=n[0].getContent().getIdentifier(),l=e.getContent().getIdentifier()),i.properties[o][l].latexLeftParens===!1)return[!1];if(i.properties[u][c].latexParens===!1)return[!1]}return null===u?[!1]:u<=o?[!0]:[!1];case 2:var p,h=i.getPrecedence(n[0],t),f=i.isAssociativeWith(e,n[0],t);p=null!==h&&(h===o&&"right"===a&&!f||h<o);var d,m=i.getPrecedence(n[1],t),g=i.isAssociativeWith(e,n[1],t);if(d=null!==m&&(m===o&&"left"===a&&!g||m<o),r){var l,v,y;"keep"===t?(l=e.getIdentifier(),v=e.args[0].getIdentifier(),y=e.args[1].getIdentifier()):(l=e.getContent().getIdentifier(),v=e.args[0].getContent().getIdentifier(),y=e.args[1].getContent().getIdentifier()),null!==h&&(i.properties[o][l].latexLeftParens===!1&&(p=!1),i.properties[h][v].latexParens===!1&&(p=!1)),null!==m&&(i.properties[o][l].latexRightParens===!1&&(d=!1),i.properties[m][y].latexParens===!1&&(d=!1))}return[p,d]}}var l=r(n(537));r(n(549)),r(n(553)),r(n(569));return u.prototype=new l,u.prototype.type="OperatorNode",u.prototype.isOperatorNode=!0,u.prototype._compile=function(e,t){if(!e.math[this.fn])throw new Error("Function "+this.fn+' missing in provided namespace "math"');var n=this.args.map(function(n){return n._compile(e,t)});return"math."+this.fn+"("+n.join(", ")+")"},u.prototype.forEach=function(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},u.prototype.map=function(e){for(var t=[],n=0;n<this.args.length;n++)t[n]=this._ifNode(e(this.args[n],"args["+n+"]",this));return new u(this.op,this.fn,t)},u.prototype.clone=function(){return new u(this.op,this.fn,this.args.slice(0))},u.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",r=this.args,o=c(this,t,r,!1);switch(r.length){case 1:var a=i.getAssociativity(this,t),s=r[0].toString(e);return o[0]&&(s="("+s+")"),"right"===a?this.op+s:"left"===a?s+this.op:s+this.op;case 2:var u=r[0].toString(e),l=r[1].toString(e);return o[0]&&(u="("+u+")"),o[1]&&(l="("+l+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"==n?u+" "+l:u+" "+this.op+" "+l;default:return this.fn+"("+this.args.join(", ")+")"}},u.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",r=this.args,a=c(this,t,r,!0),s=o.operators[this.fn];switch(s="undefined"==typeof s?this.op:s,r.length){case 1:var u=i.getAssociativity(this,t),l=r[0].toTex(e);return a[0]&&(l="\\left("+l+"\\right)"),"right"===u?s+l:"left"===u?l+s:l+s;case 2:var p=r[0],h=p.toTex(e);a[0]&&(h="\\left("+h+"\\right)");var f=r[1],d=f.toTex(e);a[1]&&(d="\\left("+d+"\\right)");var m;switch(m="keep"===t?p.getIdentifier():p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return s+"{"+h+"}{"+d+"}";case"OperatorNode:pow":switch(h="{"+h+"}",d="{"+d+"}",m){case"ConditionalNode":case"OperatorNode:divide":h="\\left("+h+"\\right)"}case"OperatorNode:multiply":if(this.implicit&&"hide"===n)return h+"~"+d}return h+s+d;default:return"\\mathrm{"+this.fn+"}\\left("+r.map(function(t){return t.toTex(e)}).join(",")+"\\right)"}},u.prototype.getIdentifier=function(){return this.type+":"+this.fn},u}var o=n(489),i=n(545);t.name="OperatorNode",t.path="expression.node",t.math=!0,t.factory=r},function(e,t,n){"use strict";function r(e,t,r,i,a){function s(e,t){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof e&&(console.warn("WARNING: passing a string to FunctionNode is deprecated, pass a SymbolNode instead."),e=new l(e)),!e||!e.isNode)throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(function(e){return e&&e.isNode}))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}});var n=function(){throw new Error("Property `FunctionNode.object` is deprecated, use `FunctionNode.fn` instead")};Object.defineProperty(this,"object",{get:n,set:n})}function u(e,t,n){for(var r,o="",i=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),a=0;null!==(r=i.exec(e));)if(o+=e.substring(a,r.index),a=r.index,"$$"===r[0])o+="$",a++;else{a+=r[0].length;var s=t[r[1]];if(!s)throw new ReferenceError("Template: Property "+r[1]+" does not exist.");if(void 0===r[2])switch(typeof s){case"string":o+=s;break;case"object":if(s.isNode)o+=s.toTex(n);else{if(!Array.isArray(s))throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes");o+=s.map(function(e,t){if(e&&e.isNode)return e.toTex(n);throw new TypeError("Template: "+r[1]+"["+t+"] is not a Node.")}).join(",")}break;default:throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes")}else{if(!s[r[2]]||!s[r[2]].isNode)throw new TypeError("Template: "+r[1]+"["+r[2]+"] is not a Node.");o+=s[r[2]].toTex(n)}}return o+=e.slice(a)}var c=r(n(537)),l=r(n(553));s.prototype=new c,s.prototype.type="FunctionNode",s.prototype.isFunctionNode=!0,s.prototype._compile=function(e,t){var n,r=this.fn._compile(e,t),o=this.args.map(function(n){return n._compile(e,t)});if(this.fn.isSymbolNode){var i=this.fn.name,a=e.math[i],s="function"==typeof a&&1==a.rawArgs;return s?(n=this._getUniqueArgumentsName(e),e[n]=this.args,r+"("+n+", math, scope)"):r+"("+o.join(", ")+")"}if(this.fn.isAccessorNode&&this.fn.index.isObjectProperty()){n=this._getUniqueArgumentsName(e),e[n]=this.args;var u=this.fn.object._compile(e,t),c=this.fn.index.getObjectProperty();return"(function () {var object = "+u+';return (object["'+c+'"] && object["'+c+'"].rawArgs)  ? object["'+c+'"]('+n+', math, scope) : object["'+c+'"]('+o.join(", ")+")})()"}return n=this._getUniqueArgumentsName(e),e[n]=this.args,"(function () {var fn = "+r+";return (fn && fn.rawArgs)  ? fn("+n+", math, scope) : fn("+o.join(", ")+")})()"},s.prototype._getUniqueArgumentsName=function(e){var t,n=0;do t="args"+n,n++;while(t in e);return t},s.prototype.forEach=function(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},s.prototype.map=function(e){for(var t=this.fn.map(e),n=[],r=0;r<this.args.length;r++)n[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new s(t,n)},s.prototype.clone=function(){return new s(this.fn,this.args.slice(0))};var p=s.prototype.toString;s.prototype.toString=function(e){var t,n=this.fn.toString(e);return e&&"object"==typeof e.handler&&e.handler.hasOwnProperty(n)&&(t=e.handler[n](this,e)),"undefined"!=typeof t?t:p.call(this,e)},s.prototype._toString=function(e){var t=this.args.map(function(t){return t.toString(e)});return this.fn.toString(e)+"("+t.join(", ")+")"};var h=s.prototype.toTex;return s.prototype.toTex=function(e){var t;return e&&"object"==typeof e.handler&&e.handler.hasOwnProperty(this.name)&&(t=e.handler[this.name](this,e)),"undefined"!=typeof t?t:h.call(this,e)},s.prototype._toTex=function(e){var t,n=this.args.map(function(t){return t.toTex(e)});!a[this.name]||"function"!=typeof a[this.name].toTex&&"object"!=typeof a[this.name].toTex&&"string"!=typeof a[this.name].toTex||(t=a[this.name].toTex);var r;switch(typeof t){case"function":r=t(this,e);break;case"string":r=u(t,this,e);break;case"object":switch(typeof t[n.length]){case"function":r=t[n.length](this,e);break;case"string":r=u(t[n.length],this,e)}}return"undefined"!=typeof r?r:u(o.defaultTemplate,this,e)},s.prototype.getIdentifier=function(){return this.type+":"+this.name},s}var o=n(489);t.name="FunctionNode",t.path="expression.node",t.math=!0,t.factory=r},function(e,t,n){"use strict";function r(e,t,r,o){function i(e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!e||!e.isNode)throw new TypeError('Node expected for parameter "content"');this.content=e}var a=r(n(537));return i.prototype=new a,i.prototype.type="ParenthesisNode",i.prototype.isParenthesisNode=!0,i.prototype._compile=function(e,t){return this.content._compile(e,t)},i.prototype.getContent=function(){return this.content.getContent()},i.prototype.forEach=function(e){e(this.content,"content",this)},i.prototype.map=function(e){var t=e(this.content,"content",this);return new i(t)},i.prototype.clone=function(){return new i(this.content)},i.prototype._toString=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)},i.prototype._toTex=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left("+this.content.toTex(e)+"\\right)":this.content.toTex(e)},i}t.name="ParenthesisNode",t.path="expression.node",t.factory=r},function(e,t){function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}function r(e,t){var n,r;if(!t){var o=-1/0;for(n=0;n<e.length;++n)for(r=0;r<e[n].length;++r)e[n][r]>o&&(o=e[n][r]);t=function(e){return o-e}}var i=[];for(n=0;n<e.length;++n){var a=e[n];for(i[n]=[],r=0;r<a.length;++r)i[n][r]=t(e[n][r])}return i}function o(e){var t,n,r=[];for(t=0;t<e.length;++t)for(n=0;n<e[t].length;++n){var o=String(e[t][n]).length;(!r[n]||o>=r[n])&&(r[n]=o)}var i="";for(t=0;t<e.length;++t){for(n=0;n<e[t].length;++n){for(var a=String(e[t][n]);a.length<r[n];)a=" "+a;i+=a,n!=e[t].length-1&&(i+=" ")}t!=e[t].length-1&&(i+="\n")}return i}function i(e,t){var r=new n;return r.compute(e,t)}var a=parseInt(Number.MAX_SAFE_INTEGER/2)||(1<<26)*(1<<26),s=0;n.prototype.pad_matrix=function(e,t){t=t||s;var n,r=0,o=e.length;for(n=0;n<o;++n)e[n].length>r&&(r=e[n].length);o=r>o?r:o;var i=[];for(n=0;n<o;++n){for(var a=e[n]||[],u=a.slice();o>u.length;)u.push(t);i.push(u)}return i},n.prototype.compute=function(e,t){t=t||{},t.padValue=t.padValue||s,this.C=this.pad_matrix(e,t.padValue),this.n=this.C.length,this.original_length=e.length,this.original_width=e[0].length;for(var n=[];n.length<this.n;)n.push(!1);this.row_covered=n.slice(),this.col_covered=n.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(2*this.n,0),this.marked=this.__make_matrix(this.n,0);for(var r=1,o={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var i=o[r];if(!i)break;r=i.apply(this)}for(var a=[],u=0;u<this.original_length;++u)for(var c=0;c<this.original_width;++c)1==this.marked[u][c]&&a.push([u,c]);return a},n.prototype.__make_matrix=function(e,t){for(var n=[],r=0;r<e;++r){n[r]=[];for(var o=0;o<e;++o)n[r][o]=t}return n},n.prototype.__step1=function(){for(var e=0;e<this.n;++e)for(var t=Math.min.apply(Math,this.C[e]),n=0;n<this.n;++n)this.C[e][n]-=t;return 2},n.prototype.__step2=function(){for(var e=0;e<this.n;++e)for(var t=0;t<this.n;++t)if(0===this.C[e][t]&&!this.col_covered[t]&&!this.row_covered[e]){this.marked[e][t]=1,this.col_covered[t]=!0,this.row_covered[e]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var e=0,t=0;t<this.n;++t)for(var n=0;n<this.n;++n)1==this.marked[t][n]&&0==this.col_covered[n]&&(this.col_covered[n]=!0,++e);return e>=this.n?7:4},n.prototype.__step4=function(){for(var e=!1,t=-1,n=-1,r=-1;!e;){var o=this.__find_a_zero();if(t=o[0],n=o[1],t<0)return 6;if(this.marked[t][n]=2,r=this.__find_star_in_row(t),!(r>=0))return this.Z0_r=t,this.Z0_c=n,5;n=r,this.row_covered[t]=!0,this.col_covered[n]=!1}},n.prototype.__step5=function(){var e=0;this.path[e][0]=this.Z0_r,this.path[e][1]=this.Z0_c;for(var t=!1;!t;){var n=this.__find_star_in_col(this.path[e][1]);if(n>=0?(e++,this.path[e][0]=n,this.path[e][1]=this.path[e-1][1]):t=!0,!t){var r=this.__find_prime_in_row(this.path[e][0]);e++,this.path[e][0]=this.path[e-1][0],this.path[e][1]=r}}return this.__convert_path(this.path,e),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var e=this.__find_smallest(),t=0;t<this.n;++t)for(var n=0;n<this.n;++n)this.row_covered[t]&&(this.C[t][n]+=e),this.col_covered[n]||(this.C[t][n]-=e);return 4},n.prototype.__find_smallest=function(){for(var e=a,t=0;t<this.n;++t)for(var n=0;n<this.n;++n)this.row_covered[t]||this.col_covered[n]||e>this.C[t][n]&&(e=this.C[t][n]);return e},n.prototype.__find_a_zero=function(){for(var e=0;e<this.n;++e)for(var t=0;t<this.n;++t)if(0===this.C[e][t]&&!this.row_covered[e]&&!this.col_covered[t])return[e,t];return[-1,-1]},n.prototype.__find_star_in_row=function(e){for(var t=0;t<this.n;++t)if(1==this.marked[e][t])return t;return-1},n.prototype.__find_star_in_col=function(e){for(var t=0;t<this.n;++t)if(1==this.marked[t][e])return t;return-1},n.prototype.__find_prime_in_row=function(e){for(var t=0;t<this.n;++t)if(2==this.marked[e][t])return t;return-1},n.prototype.__convert_path=function(e,t){for(var n=0;n<=t;++n)this.marked[e[n][0]][e[n][1]]=1==this.marked[e[n][0]][e[n][1]]?0:1},n.prototype.__clear_covers=function(){for(var e=0;e<this.n;++e)this.row_covered[e]=!1,this.col_covered[e]=!1;
},n.prototype.__erase_primes=function(){for(var e=0;e<this.n;++e)for(var t=0;t<this.n;++t)2==this.marked[e][t]&&(this.marked[e][t]=0)},i.version="1.2.2",i.format_matrix=o,i.make_cost_matrix=r,i.Munkres=n,"undefined"!=typeof e&&e.exports&&(e.exports=i)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(426),s=n(401),u=n(387),c=n(403),l=n(457),p=n(573),h=n(444),f=n(16),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheckClick=function(){l.setFormMode(t.props.control.formName,t.props.formMode==a.FormMode.GRADE?a.FormMode.REGULAR:a.FormMode.GRADE)},t.handleShowClick=function(){l.setFormMode(t.props.control.formName,t.props.formMode==a.FormMode.SOLUTION?a.FormMode.REGULAR:a.FormMode.SOLUTION)},t.handleResetClick=function(){t.props.resetableControls&&t.props.resetableControls.forEach(function(e){h.deleteFormControl(e.name)}),l.setFormMode(t.props.control.formName,a.FormMode.REGULAR)},t}return r(t,e),t.prototype.render=function(){var e=s("pageButton pageButton--formGrade formControl pane pane--bordered pane--condensed",this.props.control.anchor),t=this.applyAnchorStyle(c.calcControlBaseStyle(this.props.control,this.props.zoom,u.ZINDEX_FORM_BUTTON));return o.createElement("ul",{className:e,style:t},o.createElement("li",{className:s("pageButton__item",{active:this.props.formMode==a.FormMode.GRADE}),onClick:this.handleCheckClick},"Check"),o.createElement("li",{className:s("pageButton__item",{active:this.props.formMode==a.FormMode.SOLUTION}),onClick:this.handleShowClick},"Show"),o.createElement("li",{className:"pageButton__item",onClick:this.handleResetClick},"Reset"))},t.prototype.applyAnchorStyle=function(e){var t="left"==this.props.control.anchor,n={transform:(t?"translate(-100%, -100%) rotate(-90deg)":"translate(0, -100%) rotate(90deg)")+("scale("+this.props.zoom+")"),transformOrigin:t?"right bottom":"left bottom"};return f._assign(n,e),n},t}(o.Component);t.Component=d;var m=function(e,t){return{formMode:e.forms[t.control.formName]?e.forms[t.control.formName]:a.FormMode.REGULAR,resetableControls:p.getFormResetableControlsByFormName(e)[t.control.formName],zoom:e.view.scale}},g=i.connect(m)(d);t.PageControlFormGradeButtons=g},function(e,t,n){"use strict";var r=n(394),o=n(390);t.getFormResetableControlsByFormName=r.createSelector(function(e){return e.metadata.pages},function(e){var t={};return e.forEach(function(e){e&&e.multimedia.forEach(function(e){(e.type==o.ControlType.FORMCHECKBOX||e.type==o.ControlType.FORMCOMBOBOX||e.type==o.ControlType.FORMTEXTBOX||e.type==o.ControlType.FORMEDITBOX&&!e.readOnly)&&(t[e.formName]||(t[e.formName]=[]),t[e.formName].push(e))})}),t})},function(e,t,n){"use strict";function r(e){return e.state&&void 0!==e.state.value?e.state.value:e.control.value||""}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(367),s=n(426),u=n(401),c=n(387),l=n(403),p=n(456),h=n(444),f=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({internalValue:e.target.value})},n.handleBlur=function(){n.doSaveControlValue(n.state.internalValue)},n.state={internalValue:r(t)},n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){r(e)!=r(this.props)&&this.setState({internalValue:r(e)})},t.prototype.render=function(){var e=l.calcTransformedControlBaseStyle(this.props.control,this.props.zoom,c.ZINDEX_FORM_BUTTON);e.resize="none",this.props.control.transparent&&(e.background="transparent");var t=u("formControl",this.props.control.fontSize||this.props.control.fontStyle||"");return i.createElement("textarea",{className:t,spellCheck:!0,style:e,ref:this.doHandleRef,onChange:this.handleChange,onFocus:this.doHandleFocus,onBlur:this.handleBlur,onKeyDown:this.doHandleKeyDown,placeholder:this.props.control.placeholder,value:this.state.internalValue})},t}(p.PageControlCustomFormControl);t.Component=f;var d=function(e,t){return{formMode:e.forms[t.control.formName]?e.forms[t.control.formName]:s.FormMode.REGULAR,state:h.getFormControl(e.controls,t.control.name),zoom:e.view.scale}},m=a.connect(d)(f);t.PageControlFormTextbox=m},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(387),s=n(403),u=n(402),c=n(10),l=n(8),p=n(406),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleImageSrc=function(e){return c.Context.resourceLoader.getResourceUrl(l.ResourceType.IMAGE,[e,t.props.book.images[e].ext])},t.handleClick=function(){p.openGallery()},t}return r(t,e),t.prototype.render=function(){var e=s.calcControlBaseStyle(this.props.control,this.props.zoom,a.ZINDEX_FIGURE_POPUP_BUTTON);return o.createElement(u.PageImageButton,{active:!1,className:"galleryBtn",style:e,title:this.props.control.title,thumbNormalImgId:this.props.control.thumbNormalImgId,thumbHotImgId:this.props.control.thumbHotImgId,thumbActiveImgId:this.props.control.thumbActiveImgId,onClick:this.handleClick,onImageSrc:this.handleImageSrc})},t}(o.Component);t.Component=h;var f=function(e,t){return{book:e.metadata.book,zoom:e.view.scale}},d=i.connect(f)(h);t.PageControlImageGalleryButton=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(387),s=n(403),u=n(402),c=n(10),l=n(8),p=n(406),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleImageSrc=function(e){return c.Context.resourceLoader.getResourceUrl(l.ResourceType.IMAGE,[e,t.props.book.images[e].ext])},t.handleClick=function(){p.openInteractivity(t.props.url,t.props.control.title)},t}return r(t,e),t.prototype.render=function(){var e=s.calcControlBaseStyle(this.props.control,this.props.zoom,a.ZINDEX_FIGURE_POPUP_BUTTON);return this.props.control.inPlace?o.createElement("iframe",{className:"interactivityPopup--embed",style:e,src:this.props.url,title:this.props.control.title}):o.createElement(u.PageImageButton,{active:!1,className:"interactivityPopupBtn",style:e,title:this.props.control.title,thumbNormalImgId:this.props.control.thumbNormalImgId,thumbHotImgId:this.props.control.thumbHotImgId,thumbActiveImgId:this.props.control.thumbActiveImgId,onClick:this.handleClick,onImageSrc:this.handleImageSrc})},t}(o.Component);t.Component=h;var f=function(e,t){return{book:e.metadata.book,url:c.Context.resourceLoader.getResourceUrl(l.ResourceType.INTERACTIVITY_INDEX,[t.control.interactivityId,t.control.dataId]),zoom:e.view.scale}},d=i.connect(f)(h);t.PageControlInteractivityPopup=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(392),s=n(410),u=n(401),c=n(403),l=n(387),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleAnswerClick=function(){t.props.answerActive?a.closeWindow(t.props.control.name):a.openWindow(t.props.control.name)},t.handleExplanationClick=function(){t.props.explanationActive?s.close():s.open(t.props.control.name,!0)},t}return r(t,e),t.prototype.render=function(){var e=u("pageButton pageButton--question pane pane--condensed pane--bordered"),t=u("pageButton__item pageButton__item--answer",{active:this.props.answerActive}),n=u("pageButton__item pageButton__item--explanation",{active:this.props.explanationActive}),r=c.calcTransformedControlBaseStyle(this.props.control,this.props.zoom,l.ZINDEX_QUESTION_BUTTONS);return o.createElement("div",{style:r,className:e},o.createElement("label",{className:t,onClick:this.handleAnswerClick},"Answer"),o.createElement("label",{className:n,onClick:this.handleExplanationClick},"Explanation"))},t}(o.Component);t.Component=p;var h=function(e,t){return{answerActive:!!e.popupWindows[t.control.name],explanationActive:e.mediaOpen.controlName==t.control.name,zoom:e.view.scale}},f=i.connect(h)(p);t.PageControlQuestionButtons=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(444),s=n(387),u=n(403),c=n(393),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.radioControl&&a.setQuestion(t.props.control.questionName,{option:t.props.control.optionIndex,correct:t.props.radioControl.isCorrectAnswer})},t}return r(t,e),t.prototype.render=function(){var e=u.calcControlBaseStyle(this.props.control,this.props.zoom,s.ZINDEX_FORM_BUTTON);return o.createElement("div",{style:e,className:"questionOptionHotspot formControl",onClick:this.handleClick})},t}(o.Component);t.Component=l;var p=function(e,t){var n=a.getQuestion(e.controls,t.control.questionName);return{isSelected:n&&null!=n.option&&n.option==t.control.optionIndex,radioControl:c.getControlMapping(e).findQuestionOptionRadioControlByQuestionNameAndOptionIndex(t.control.questionName,t.control.optionIndex),zoom:e.view.scale}},h=i.connect(p)(l);t.PageControlQuestionOptionHotspot=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(401),s=n(444),u=n(387),c=n(403),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){s.setQuestion(t.props.control.questionName,{option:t.props.control.optionIndex,correct:t.props.control.isCorrectAnswer})},t.handleChange=function(){},t}return r(t,e),t.prototype.render=function(){var e=Math.random().toString(36).substring(7),t=c.calcTransformedControlBaseStyle(this.props.control,this.props.zoom,u.ZINDEX_FORM_BUTTON),n={fontSize:1/this.props.zoom+"em"},r=a("formControl",{correctAnswer:this.props.isSelected&&this.props.control.isCorrectAnswer}),i=this.props.isSelected?this.props.control.isCorrectAnswer?o.createElement("div",{className:"icon icon-checkmark-circle",style:n}):o.createElement("div",{className:"icon icon-close-circle",style:n}):null;return o.createElement("div",{style:t},o.createElement("input",{type:"radio",className:"formControl radio",id:e,tabIndex:-1,checked:this.props.isSelected,onChange:this.handleChange}),o.createElement("label",{className:r,htmlFor:e,onClick:this.handleClick},o.createElement("div",{className:"radio__checked"}),i))},t}(o.Component);t.Component=l;var p=function(e,t){var n=s.getQuestion(e.controls,t.control.questionName);return{isSelected:n&&null!=n.option&&n.option==t.control.optionIndex,zoom:e.view.scale}},h=i.connect(p)(l);t.PageControlQuestionOptionRadio=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(387),s=n(403),u=n(402),c=n(10),l=n(8),p=n(406),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleImageSrc=function(e){return c.Context.resourceLoader.getResourceUrl(l.ResourceType.IMAGE,[e,t.props.book.images[e].ext])},t.handleClick=function(){var e=t.props.control.imageIds.map(function(e){return{id:e,title:void 0}});p.openGallery(e[0].id)},t}return r(t,e),t.prototype.render=function(){var e=this.props.book.images[this.props.control.imageId],t=s.calcControlBaseStyle(this.props.control,this.props.zoom,a.ZINDEX_FIGURE_POPUP_BUTTON,e.height/e.width);return o.createElement(u.PageImageButton,{active:!1,className:"galleryBtn",fakeBackground:!0,style:t,title:this.props.control.title,thumbNormalImgId:this.props.control.thumbNormalImgId,thumbHotImgId:this.props.control.thumbHotImgId,thumbActiveImgId:this.props.control.thumbActiveImgId,onClick:this.handleClick,onImageSrc:this.handleImageSrc})},t}(o.Component);t.Component=h;var f=function(e,t){return{book:e.metadata.book,zoom:e.view.scale}},d=i.connect(f)(h);t.PageControlFigure=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(437),s=n(10),u=n(582),c=n(8),l=n(411),p=n(412),h=n(583),f=n(594),d=n(425),m=n(444),g=n(387),v=n(16),y=1e3,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mediaStatus={playing:!1,percentageBuffered:100,closedCaption:"",currentTime:0},t.handleClosedCaptionUpdate=function(e){t.mediaStatus.closedCaption=e,t.updateMediaStatus()},t.handleEnded=function(){m.setLectureDone(t.props.openMediaControlName),d.nextIfActive()},t.handleFocus=function(e){s.Context.internalEventEmitter.triggerNeedScrollIntoPageBounds(t.props.page,e)},t.handleImageSrc=function(e){return s.Context.resourceLoader.getResourceUrl(c.ResourceType.IMAGE,[e,t.props.book.images[e].ext])},t.handlePause=function(){t.mediaStatus.playing=!1,t.updateMediaStatus()},t.handlePlay=function(){s.Context.internalEventEmitter.triggerNeedStopAudioVideo(),t.mediaStatus.playing=!0,t.updateMediaStatus()},t.handleTimeUpdate=function(e){t.mediaStatus.currentTime=e,t.updateMediaStatus(),t.debouncedSetInitialTime(t.props.openMediaControlName,e)},t.debouncedSetInitialTime=v._debounce(function(e,t){p.setTime(e,t)},y),t.handleRef=function(e){null!=t.ref&&(s.Context.internalEventEmitter.unbindNeedMediaPlay(t.handleNeedMediaPlay),s.Context.internalEventEmitter.unbindNeedMediaPause(t.handleNeedMediaPause),s.Context.internalEventEmitter.unbindNeedMediaSeek(t.handleNeedMediaSeek)),t.ref=e,null!=t.ref&&(s.Context.internalEventEmitter.bindNeedMediaPlay(t.handleNeedMediaPlay),s.Context.internalEventEmitter.bindNeedMediaPause(t.handleNeedMediaPause),s.Context.internalEventEmitter.bindNeedMediaSeek(t.handleNeedMediaSeek))},t.handleNeedMediaPlay=function(){t.ref.play()},t.handleNeedMediaPause=function(){t.ref.pause()},t.handleNeedMediaSeek=function(e){t.ref.seek(e)},t.updateMediaStatus=v._throttle(function(){t.active&&l.set(t.mediaStatus)},g.THROTTLE_MEDIA_STATUS_UPDATE),t}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.openLecture!=this.props.openLecture&&(this.mediaStatus.currentTime=0),e.openLecture==this.props.openLecture&&e.openMediaSrt==this.props.openMediaSrt||(this.mediaStatus.closedCaption=""),this.updateMediaStatus()},t.prototype.render=function(){if(!this.active)return null;var e=null==this.props.openLecture.overlayNote.audioId?null:s.Context.resourceLoader.getResourceUrl(s.Context.getAudioResourceType(),[this.props.openLecture.overlayNote.audioId]),t=this.props.lectureState?this.props.lectureState.initialTime:null,n=this.props.openLecture.overlayNote.notes,r=this.props.book.pages[this.props.page].width,i=this.props.book.pages[this.props.page].height;return o.createElement(h.LectureViewer,{audioSrc:e,autoPlay:this.props.mediaOpen.autoPlay,height:i*this.props.scale,initialTime:t,notes:n,rate:this.props.userSettings.playSpeed,showAll:this.props.userSettings.lectureNotesOn,srt:this.props.openMediaSrt,viewBox:{left:0,top:0,right:r,bottom:i},width:r*this.props.scale,onClosedCaptionUpdate:this.handleClosedCaptionUpdate,onEnded:this.handleEnded,onFocus:this.handleFocus,onImageSrc:this.handleImageSrc,onPause:this.handlePause,onPlay:this.handlePlay,onTimeUpdate:this.handleTimeUpdate,ref:this.handleRef})},Object.defineProperty(t.prototype,"active",{get:function(){return null!=this.props.book.pages&&null!=this.props.book.pages[this.props.page]&&null==this.props.mediaOpen.gotoPlaylistItem&&null!=this.props.openLecture},enumerable:!0,configurable:!0}),t}(o.Component);t.Component=b;var E=function(e){var t=a.getOpenMediaControlName(e);return{book:e.metadata.book,lectureState:null!=t?e.lectures[t]:null,mediaOpen:e.mediaOpen,openLecture:u.getOpenLecture(e),openMediaControlName:t,openMediaSrt:f.getOpenMediaSrt(e),scale:e.view.scale,userSettings:e.userSettings}},w=i.connect(E)(b);t.PageLecture=w},function(e,t,n){"use strict";var r=n(394),o=n(393),i=n(437),a=n(395);t.getOpenLecture=r.createSelector(a.getComputedPageMetadataByIndex,o.getControlMapping,i.getOpenMediaControlName,function(e){return e.view.page},function(e,t,n,r){if(null==n)return null;var o=t.findOverlayNoteIdByControlName(n);if(null==o)return null;var i=t.findPageIndexByControlName(n);if(null==i||i!=r||null==e[i])return null;var a=e[i].lectureIndexByOverlayNoteId[o];return null==a?null:e[i].lectures[a]})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(584),i=n(193),a=n(585),s=n(11),u=n(387),c=n(16),l=n(593),p=1,h=function(e){function t(t){var n=e.call(this,t)||this;return n.audioEl=null,n.notesViewer=null,n.rootRef=null,n.fontLoaded=!1,n.currentTime=0,n.muted=!1,n.playing=!1,n.ended=!1,n.pending={},n.handleAudioRef=function(e){n.audioEl!=e&&(n.audioEl=e,null!=e&&(n.audioEl.load(),n.applyPendingValues()))},n.handleRootRef=function(e){n.notesViewer&&(n.notesViewer.close(),n.notesViewer=null),n.rootRef=e,n.updateNotesViewerOnPropsChange(null,n.props)},n.handleAudioCanPlayThrough=function(){n.applyPendingValues(),n.updateStateFromAudio()},n.handleAudioEnded=function(){(!n.props.initialTime||n.props.initialTime<n.currentTime)&&(s.isIeBrowser()&&!n.audioEl.paused&&(n.audioEl.pause(),n.audioEl.currentTime=n.audioEl.duration),n.ended=!0,n.updateStateFromAudio(),n.notesViewer&&n.notesViewer.audioEnded(),n.props.onEnded&&n.props.onEnded())},n.handleAudioLoadedMetadata=function(){n.applyPendingValues(),n.updateStateFromAudio()},n.handleAudioPlaying=function(){s.isIeBrowser()&&n.ended&&(n.audioEl.currentTime=0),n.ended=!1,n.updateStateFromAudio()},n.handleFontLoaded=function(){n.fontLoaded=!0,n.updateNotesViewerOnPropsChange(null,n.props)},n.updateStateFromAudio=c._throttle(function(){if(n.audioEl){var e=n.playing;n.currentTime=n.audioEl.currentTime,n.playing=!n.audioEl.paused,n.muted=0==n.audioEl.volume,n.props.onTimeUpdate&&n.props.onTimeUpdate(n.currentTime),n.notesViewer&&n.seekNotesViewer(),e!=n.playing&&(n.playing&&n.props.onPlay&&n.props.onPlay(),!n.playing&&n.props.onPause&&n.props.onPause())}},u.THROTTLE_MEDIA_STATUS_UPDATE),new l(o.FONT_NAME).load().then(n.handleFontLoaded).catch(function(){}),n.resetState(t),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.rate!=this.props.rate&&(this.pending.rate=e.rate,this.applyPendingValues()),e.audioSrc==this.props.audioSrc&&e.notes==this.props.notes||this.resetState(e),this.updateNotesViewerOnPropsChange(this.props,e)},t.prototype.componentDidUpdate=function(e){e.audioSrc!=this.props.audioSrc&&this.applyPendingValues()},t.prototype.render=function(){var e=null;return this.props.audioSrc&&(e=i.createElement("audio",{src:this.props.audioSrc,ref:this.handleAudioRef,onLoadedMetadata:this.handleAudioLoadedMetadata,onTimeUpdate:this.updateStateFromAudio,onEnded:this.handleAudioEnded,onCanPlayThrough:this.handleAudioCanPlayThrough,onPlay:this.updateStateFromAudio,onPause:this.updateStateFromAudio,onEmptied:this.updateStateFromAudio,onAbort:this.updateStateFromAudio,onPlaying:this.handleAudioPlaying})),i.createElement("div",{ref:this.handleRootRef,style:this.props.style},e)},t.prototype.pause=function(){this.pending.play=!1,this.applyPendingValues()},t.prototype.play=function(){this.pending.play=!0,this.applyPendingValues()},t.prototype.mute=function(e){this.pending.mute=e,this.applyPendingValues()},t.prototype.seek=function(e){this.pending.seek=e,this.applyPendingValues()},t.prototype.updateNotesViewerOnPropsChange=function(e,t){this.rootRef&&this.fontLoaded&&(t.notes&&0!=t.notes.length||t.srt?(this.notesViewer||(this.notesViewer=this.createNotesViewer(),e=null),null!=e&&e.height==t.height&&e.width==t.width||this.notesViewer.setSize(t.width,t.height),null!=e&&e.notes==t.notes&&c._isEqual(e.viewBox,t.viewBox)||(this.notesViewer.loadNotesEx(t.viewBox.left+" "+t.viewBox.top+" "+(t.viewBox.right+" "+t.viewBox.bottom),t.notes),this.notesViewer.audioTimeUpdate(this.currentTime)),null!=e&&e.srt==t.srt||(this.notesViewer.loadSrt(t.srt?t.srt:""),this.notesViewer.refreshSubtitle()),null!=e&&e.showAll===t.showAll||(this.notesViewer.setShowAll(t.showAll),this.notesViewer.setIncludeMask(!t.showAll))):this.notesViewer&&(this.notesViewer.close(),this.notesViewer=null))},t.prototype.createNotesViewer=function(){var e=this,t=new a.OverlayNotesViewer(this.rootRef,function(t){return e.props.onImageSrc(t)});return t.bindSubtitle(function(t){e.props.onClosedCaptionUpdate&&e.props.onClosedCaptionUpdate(t)}),t},t.prototype.seekNotesViewer=function(){this.notesViewer.audioTimeUpdate(this.currentTime),(null==this.lastScrollUpdate||Math.abs(this.lastScrollUpdate-this.currentTime)>p)&&(this.updateFocusRectangle(),this.lastScrollUpdate=this.currentTime)},t.prototype.applyPendingValues=function(){this.isAudioReady&&(null!=this.pending.rate&&(this.audioEl.playbackRate=this.pending.rate),null!=this.pending.mute&&(this.audioEl.volume=this.pending.mute?0:1),null!=this.pending.seek&&(this.audioEl.currentTime=this.pending.seek),null!=this.pending.play&&(this.pending.play?this.audioEl.play():this.audioEl.pause()),this.pending={},this.updateStateFromAudio())},Object.defineProperty(t.prototype,"isAudioReady",{get:function(){return this.audioEl&&this.audioEl.readyState>=HTMLMediaElement.HAVE_METADATA},enumerable:!0,configurable:!0}),t.prototype.updateFocusRectangle=function(){if(this.props.onFocus&&this.playing){var e=this.notesViewer.calcFocusBoundariesRect();if(e){var t=this.props.width/(this.props.viewBox.right-this.props.viewBox.left);this.props.onFocus({left:e.left*t,top:e.top*t,right:e.right*t,bottom:e.bottom*t})}}},t.prototype.resetState=function(e){this.playing=!1,this.currentTime=0,this.ended=!1,this.pending={rate:e.rate,seek:e.initialTime,play:e.autoPlay,mute:!1},this.lastScrollUpdate=null},t}(i.Component);t.LectureViewer=h},function(e,t){"use strict";t.FONT_NAME="FeltTipRoman",t.LINE_PADDING=2,t.DEFAULT_COLOR="#f00",t.DEFAULT_HIGHLIGHT_COLOR="#ff0",t.DEFAULT_MASK_COLOR="#fff",t.ROUNDRECT_RADIUS=10,t.ROUNDRECT_PADDING=t.ROUNDRECT_RADIUS*(1-Math.cos(Math.PI/4)),t.DEFAULT_MASK_ALPHA=.8,t.HIGHLIGHT_ALPHA=.3,t.FONT_SIZE_XLARGE=29,t.FONT_SIZE_LARGE=24,t.FONT_SIZE_NORMAL=20,t.FONT_SIZE_SMALL=18,t.FONT_SIZE_XSMALL=15,t.FONT_STRIKE_WIDTH=.5,t.SUBSCRIPT_FONT_SIZE_RATIO=.85,t.SUBSCRIPT_TOP_OFFSET=.35,t.SUPERSCRIPT_FONT_SIZE_RATIO=.85,t.SUPERSCRIPT_TOP_OFFSET=-.2,t.LINE_HEIGHT_RATIO=1.2,t.ALPHABETIC_BASELINE_OFFSET=.91,t.HITDRAW_STROKE_WIDTH=8,t.NORMAL_STROKE_WIDTH=2.5,t.REPAINT_THROTTLE=100,t.FADE_TIME=2,t.IMAGE_PRELOAD_TIME=10,t.ACTIVEVIEW_UPPER_TIME=3,t.ACTIVEVIEW_LOWER_TIME=1,t.ACTIVEVIEW_SCROLL_MARGIN=40,t.CANVAS_MARGIN=2,t.LINE_DASH_ARRAY="8, 8"},function(e,t,n){"use strict";var r=n(586),o=n(584),i=n(588),a=n(589),s=n(452),u=n(591),c=n(587),l=n(592),p=n(16),h=n(179),f=function(){function e(t,n){var r=this;this.showAll=!1,this.includeMask=!0,this.visibleLayer=null,this.globalAlpha=1,this.previousDrawTime=0,this.nextDrawTime=0,this.currentTime=0,this.isFading=!1,this.isAudioEnded=!1,this.throttledRepaint=p._throttle(function(){if(r.notes){var t=r.currentTime;r.updateSubtitle(t),r.isAudioEnded&&(t=r.lastNoteTime),r.previousDrawTime=0,r.nextDrawTime=Number.MAX_VALUE,r.isFading=!1;for(var n,i,a=r.notes.length-1;a>=0;a--)i=r.notes[a],null!=r.visibleLayer?n=(i.layer?i.layer:0)==r.visibleLayer?1:0:r.showAll&&!i.layer?n=1:t>i.start?(n=null==i.end||t<i.end?Math.min(1,(t-i.start)/o.FADE_TIME):null!=i.end?1-Math.min(1,(t-i.end)/o.FADE_TIME):0,n>0&&n<1?r.isFading=!0:(r.previousDrawTime=Math.max(r.previousDrawTime,i.start+o.FADE_TIME),null!=i.end&&t<i.end&&(r.nextDrawTime=Math.min(r.nextDrawTime,i.end)))):(n=0,r.nextDrawTime=Math.min(r.nextDrawTime,i.start)),i.type==e.TYPE_MASK?r.includeMask?n*=i.alpha?i.alpha:o.DEFAULT_MASK_ALPHA:n=0:i.type==e.TYPE_HIGHLIGHT&&(n*=o.HIGHLIGHT_ALPHA),n*=r.globalAlpha,r.noteOpacities[a]!==n&&(0==n?r.svgNotes[a].attr("visibility","hidden"):(0==r.noteOpacities[a]&&r.svgNotes[a].attr("visibility","visible"),r.svgNotes[a].attr("opacity",n)),r.noteOpacities[a]=n)}},o.REPAINT_THROTTLE),this.parent=h(t),this.getImageUrl=n,this.currentTime=0}return e.prototype.audioEnded=function(){this.isAudioEnded=!0},e.prototype.audioTimeUpdate=function(e){this.currentTime=e,this.lastNoteTime=Math.max(this.lastNoteTime,e),this.imageLoader&&this.imageLoader.setTime(e),this.isAudioEnded&&e>0&&(this.isAudioEnded=!1),this.repaintIfNeeded()},e.prototype.bindSubtitle=function(e){this.subtitleEventHandler=e},e.buildTextStyle=function(e,t){return"font-family:"+o.FONT_NAME+(e?";font-style:"+e:"")+";font-size:"+t+"px;stroke-width:"+o.FONT_STRIKE_WIDTH+"px"},e.calcBoundaries=function(e){for(var t=99999,n=99999,r=0,i=0,a=0,s=e;a<s.length;a++){var u=s[a],c=this.calcNoteBoundaries(u);t=Math.min(t,c.left),n=Math.min(n,c.top),r=Math.max(r,c.right),i=Math.max(i,c.bottom)}return t=Math.min(Math.max(0,t),r),n=Math.min(Math.max(0,n),i),{left:Math.floor(t-o.CANVAS_MARGIN),top:Math.floor(n-o.CANVAS_MARGIN),right:Math.ceil(r+o.CANVAS_MARGIN),bottom:Math.ceil(i+o.CANVAS_MARGIN)}},e.calcNoteBoundaries=function(t){var n,r,s,u;if(t.type==e.TYPE_TEXT){var c=e.sliceText(t.text,e.parseNoteFontSize(t.fontSize),t.align);n=0,s=0;for(var l=c.length-1;l>=0;l--)n=Math.min(n,c[l].bounds.left),s=Math.max(s,c[l].bounds.right);n+=t.x1,r=t.y1+c[0].bounds.top,s+=t.x1,u=t.y1+c[c.length-1].bounds.bottom}else if(t.type==e.TYPE_BEZIERPATH){var p=a.calcBezierPathBoundaries({x:t.x1,y:t.y1},t.bezierPoints);n=p.left-o.LINE_PADDING,r=p.top-o.LINE_PADDING,s=p.right+o.LINE_PADDING,u=p.bottom+o.LINE_PADDING}else{var h=0;if(t.type==e.TYPE_LINE?h=o.LINE_PADDING:t.type==e.TYPE_ROUNDRECT&&(h=o.ROUNDRECT_PADDING),n=Math.min(t.x1,t.x2)-h,s=Math.max(t.x1,t.x2)+h,r=Math.min(t.y1,t.y2)-h,u=Math.max(t.y1,t.y2)+h,t.type==e.TYPE_LINE&&void 0!=t.ctrlX&&void 0!=t.ctrlY){var f=i.calcQuadraticBezierCurveEdge(t.x1,t.y1,t.ctrlX,t.ctrlY,t.x2,t.y2);n=Math.min(n,f.x-h),s=Math.max(s,f.x+h),r=Math.min(r,f.y-h),u=Math.max(u,f.y+h)}}return{left:n,top:r,right:s,bottom:u}},e.prototype.close=function(){this.bindSubtitle(null),this.svg&&(this.svgRoot.remove(),this.svgRoot=void 0,this.svg=void 0)},e.prototype.show=function(){this.svg&&this.svgRoot.show()},e.prototype.hide=function(){this.svg&&this.svgRoot.hide()},e.createSvgEllipse=function(e){var t=c.createSvgElement("g",{}),n=(e.x1+e.x2)/2,r=(e.y1+e.y2)/2,o=Math.abs(e.x2-e.x1)/2,i=Math.abs(e.y2-e.y1)/2;return c.createSvgElement("ellipse",{cx:n,cy:r,rx:o,ry:i}).attr("fill","none").appendTo(t),t},e.createSvgImage=function(t,n,r){var o=Math.min(t.x1,t.x2),i=Math.min(t.y1,t.y2),a=Math.abs(t.x2-t.x1),s=Math.abs(t.y2-t.y1),u=c.createSvgElement("g",{}),l=c.createSvgElement("image",{x:o,y:i,width:a,height:s}).appendTo(u);return l[0].setAttribute("preserveAspectRatio","none"),l[0].setAttributeNS("http://www.w3.org/1999/xlink","href",n),r&&e.createSvgRect(t).attr("fill","none").appendTo(u),u},e.createSvgNoteElement=function(t,n,r,o){return e.createSvgNote(t,n,r,o)[0]},e.createSvgNote=function(t,n,i,a){var s;s=n?o.HITDRAW_STROKE_WIDTH:o.NORMAL_STROKE_WIDTH;var u=null;if(t.type==e.TYPE_LINE?u=r.createSvgLine(t,n):t.type==e.TYPE_BEZIERPATH?u=r.createSvgBezierPath(t,n):t.type==e.TYPE_ROUNDRECT?u=e.createSvgRoundRect(t):t.type==e.TYPE_RECT?u=e.createSvgUnfilledRect(t):t.type==e.TYPE_ELLIPSE?u=e.createSvgEllipse(t):t.type==e.TYPE_TEXT?u=e.createSvgText(t):t.type==e.TYPE_MASK||t.type==e.TYPE_HIGHLIGHT?u=e.createSvgRect(t):t.type==e.TYPE_SHAPE?(u=e.createSvgShape(t.shape,t.x1,t.y1,t.x2-t.x1,t.y2-t.y1,n),n||(s=e.getSvgShapeLineWidth(t.shape,t.x2-t.x1,t.y2-t.y1))):t.type==e.TYPE_IMAGE?u=e.createSvgImage(t,a(t.imageId),i):(console.error("Invalid note type: "+t.type),console.error(t),u=c.createSvgElement("g",{})),u){var l=void 0;i?n?(l="painted",u.attr("visibility","hidden")):l="none":l="visiblePainted",u.attr({"pointer-events":l,"stroke-width":s});var p=t.color;p||(p=t.type==e.TYPE_MASK?o.DEFAULT_MASK_COLOR:t.type==e.TYPE_HIGHLIGHT?o.DEFAULT_HIGHLIGHT_COLOR:o.DEFAULT_COLOR),e.setSvgNoteColor(u,p)}return u},e.createSvgRect=function(e){var t=Math.min(e.x1,e.x2),n=Math.min(e.y1,e.y2),r=Math.abs(e.x2-e.x1),o=Math.abs(e.y2-e.y1);return c.createSvgElement("rect",{x:t,y:n,width:r,height:o})},e.createSvgRoundRect=function(e){var t=e.x1-o.ROUNDRECT_PADDING,n=e.y1-o.ROUNDRECT_PADDING,i=e.x2+o.ROUNDRECT_PADDING,a=e.y2+o.ROUNDRECT_PADDING,s=Math.min(Math.min(o.ROUNDRECT_RADIUS,(i-t)/2),(a-n)/2),u=c.createSvgElement("g",{});return r.createSvgPath(["M",t+s,n,"L",i-s,n,"Q",i,n,i,n+s,"L",i,a-s,"Q",i,a,i-s,a,"L",t+s,a,"Q",t,a,t,a-s,"L",t,n+s,"Q",t,n,t+s,n]).attr({fill:"none"}).appendTo(u),u},e.createSvgShapeElement=function(t,n,r,o,i,a){return e.createSvgShape(t,n,r,o,i,a)[0]},e.createSvgShape=function(t,n,i,a,s,u){t.width&&t.height||(t.width=1,t.height=1);var l=t.lines,p=t.texts,h=t.polygons;l&&0!=l.length||p&&0!=p.length||h&&0!=h.length||(t.width=a,t.height=s,l=[{x1:0,y1:0,x2:t.width,y2:t.height},{x1:t.width,y1:0,x2:0,y2:t.height}]);var f=a/t.width,d=s/t.height,m=c.createSvgElement("g",{});return l&&l.forEach(function(e){var t=n+e.x1*f,a=i+e.y1*d,s=n+e.x2*f,c=i+e.y2*d,l=void 0,p=void 0,h=void 0!=e.ctrlX&&void 0!=e.ctrlY;h&&(l=n+e.ctrlX*f,p=i+e.ctrlY*d);var g;g=h?r.createSvgPath(["M",t,a,"Q",l,p,s,c]).attr("fill","none").appendTo(m):r.createSvgPath(["M",t,a," L",s,c]).attr("fill","none").appendTo(m),!u&&e.dashed&&g.attr("stroke-dasharray",o.LINE_DASH_ARRAY)}),p&&p.forEach(function(t){var r=e.sliceText(t.text,t.height,"left");r.forEach(function(r){var o=Math.round(r.fontSize*(f+d)/2),a={style:e.buildTextStyle(r.fontStyle,o),x:n+(t.x+r.x)*f,y:i+(t.y+r.y)*d,"text-anchor":r.anchor};t.rotAngle&&(a.transform="rotate("+t.rotAngle+" "+(n+t.x*f)+" "+(i+t.y*d)+")"),c.createSvgTextElement(a).text(r.text).appendTo(m)})}),h&&h.length>0&&h.forEach(function(e){var t=n+e.x*f,o=i+e.y*d,a=["M",t,o];e.lines.forEach(function(e){var t=n+e.x*f,r=i+e.y*d,o=void 0,s=void 0,u=void 0!=e.ctrlX&&void 0!=e.ctrlY;u?(o=n+e.ctrlX*f,s=i+e.ctrlY*d,a.push("Q",o,s,t,r)):a.push("L",t,r)}),a.push("z"),r.createSvgPath(a).attr("stroke","none").appendTo(m)}),m},e.createSvgText=function(t){var n=e.sliceText(t.text,e.parseNoteFontSize(t.fontSize),t.align),r=c.createSvgElement("g",{});return n.forEach(function(n){var o={style:e.buildTextStyle(n.fontStyle,n.fontSize),x:t.x1+n.x,y:t.y1+n.y,"text-anchor":n.anchor};t.rotAngle&&(o.transform="rotate("+t.rotAngle+" "+t.x1+" "+t.y1+")"),c.createSvgTextElement(o).text(n.text).appendTo(r)}),r},e.createSvgUnfilledRect=function(t){var n=c.createSvgElement("g",{});return e.createSvgRect(t).attr({fill:"none"}).appendTo(n),n},e.prototype.calcFocusBoundariesRect=function(){var t=Math.floor(Math.max(0,this.currentTime));if(void 0===this.activeViewBoundaries[t]){for(var n=99999,r=99999,i=0,a=0,s=this.notes.length-1;s>=0;s--){var u=this.notes[s];if(u.type!=e.TYPE_MASK&&t>=u.start-o.ACTIVEVIEW_UPPER_TIME&&t<=u.start+o.ACTIVEVIEW_LOWER_TIME){var c=e.calcNoteBoundaries(u);n=Math.min(n,c.left),r=Math.min(r,c.top),i=Math.max(i,c.right),a=Math.max(a,c.bottom)}}99999==n?this.activeViewBoundaries[t]=null:(n=Math.min(Math.max(0,n),i),r=Math.min(Math.max(0,r),a),this.activeViewBoundaries[t]={left:Math.floor(n),top:Math.floor(r),right:Math.ceil(i),bottom:Math.ceil(a)})}var l=this.activeViewBoundaries[t];return l&&(l={left:l.left,top:l.top,right:l.right,bottom:l.bottom
}),l},e.prototype.getBoundaries=function(){return this.boundaries},e.prototype.getCurrentTime=function(){return this.currentTime},e.prototype.getIncludeMask=function(){return this.includeMask},e.prototype.getShowAll=function(){return this.showAll},e.getSvgShapeLineWidth=function(e,t,n){var r=t/e.width,i=n/e.height;return o.NORMAL_STROKE_WIDTH*(r+i)/2},e.intersectRect=function(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},e.isNoteInsideRect=function(t,n){if(t.type==e.TYPE_TEXT){for(var r=e.sliceText(t.text,e.parseNoteFontSize(t.fontSize),t.align),o=r.length-1;o>=0;o--)if(e.intersectRect({left:r[o].bounds.left+t.x1,top:r[o].bounds.top+t.y1,right:r[o].bounds.right+t.x1,bottom:r[o].bounds.bottom+t.y1},n))return!0;return!1}return t.type==e.TYPE_BEZIERPATH?e.intersectRect(a.calcBezierPathBoundaries({x:t.x1,y:t.y1},t.bezierPoints),n):t.type==e.TYPE_LINE||t.type==e.TYPE_ROUNDRECT||t.type==e.TYPE_ELLIPSE||t.type==e.TYPE_RECT||t.type==e.TYPE_MASK||t.type==e.TYPE_HIGHLIGHT||t.type==e.TYPE_IMAGE||t.type==e.TYPE_SHAPE?e.intersectRect({left:Math.min(t.x1,t.x2),top:Math.min(t.y1,t.y2),right:Math.max(t.x1,t.x2),bottom:Math.max(t.y1,t.y2)},n):(console.error("Invalid note type: "+t.type),!1)},e.prototype.loadNotes=function(e,t,n){this.loadNotesEx("0 0 "+e+" "+t,n)},e.prototype.loadNotesEx=function(t,n){function r(t){return 999999*(t.layer?t.layer:0)+(t.type==e.TYPE_MASK?t.start+9999:t.start)}var i=this;n?this.notes=JSON.parse(JSON.stringify(n)):this.notes=[];for(var a=this.notes.length-1;a>=0;a--)void 0===this.notes[a].type&&this.notes.splice(a,1);this.notes.sort(function(e,t){return r(e)-r(t)}),this.isAudioEnded=!1,this.boundaries=e.calcBoundaries(this.notes),this.activeViewBoundaries=[],this.lastNoteTime=0,this.notes.forEach(function(e){""==e.color&&(e.color=void 0)}),this.noteOpacities=[],this.imageLoader=new u.ImageLoader(this.getImageUrl),this.imageLoader.setOnLoad(function(){i.throttledRepaint()}),this.notes.forEach(function(t){t.type==e.TYPE_IMAGE&&i.imageLoader.preloadImageAt(t.imageId,t.start-o.IMAGE_PRELOAD_TIME)}),this.svg?this.svg.empty():(this.svgRoot=c.createSvgElement("svg",{class:"overlayNotesLayer","pointer-events":"none"}).appendTo(this.parent),this.svgRoot[0].setAttribute("viewBox",t),this.svg=c.createSvgElement("g",{}).appendTo(this.svgRoot)),this.svgNotes=[],this.notes.forEach(function(t){var n=e.createSvgNote(t,!1,!1,function(e){return i.getImageUrl(e)});i.svg.append(n),i.svgNotes.push(n),i.updateSvgSize()}),this.throttledRepaint()},e.prototype.loadSrt=function(e){this.subtitleReader=new s.SubtitleReader(e),this.refreshSubtitle()},e.prototype.setSize=function(e,t){this.width=e,this.height=t,this.updateSvgSize()},e.prototype.updateSvgSize=function(){this.svgRoot&&(null==this.width||null==this.height?(this.svgRoot[0].removeAttribute("width"),this.svgRoot[0].removeAttribute("height")):(this.svgRoot[0].setAttribute("width",this.width.toString()),this.svgRoot[0].setAttribute("height",this.height.toString())))},e.parseNoteFontSize=function(e){return"small"==e?o.FONT_SIZE_SMALL:"xsmall"==e?o.FONT_SIZE_XSMALL:"large"==e?o.FONT_SIZE_LARGE:"xlarge"==e?o.FONT_SIZE_XLARGE:o.FONT_SIZE_NORMAL},e.prototype.refreshSubtitle=function(){this.subtitleReader&&this.subtitleReader.reset(),this.repaintIfNeeded()},e.prototype.repaintIfNeeded=function(){var e=this.currentTime;return!this.isFading&&e>=this.previousDrawTime&&e<this.nextDrawTime?void this.updateSubtitle(e):void this.throttledRepaint()},e.calcNeededScrollToFocus=function(e,t){return l.neededScrollToFocus(e,t,o.ACTIVEVIEW_SCROLL_MARGIN)},e.prototype.setGlobalAlpha=function(e){this.globalAlpha=e},e.prototype.setIncludeMask=function(e){this.includeMask!=e&&(this.includeMask=e,this.throttledRepaint())},e.prototype.setShowAll=function(e){this.showAll!=e&&(this.showAll=e,this.throttledRepaint())},e.prototype.setVisibleLayer=function(e){this.visibleLayer!=e&&(this.visibleLayer=e,this.throttledRepaint())},e.setSvgNoteElementColor=function(t,n){e.setSvgNoteColor(h(t),n)},e.setSvgNoteColor=function(e,t){e.attr({fill:t,stroke:t})},e.createTextSlice=function(e,t,n,r,i,a){var s="";n.subscript&&(t*=o.SUBSCRIPT_FONT_SIZE_RATIO,i+=t*o.SUBSCRIPT_TOP_OFFSET),n.superscript&&(t*=o.SUPERSCRIPT_FONT_SIZE_RATIO,i+=t*o.SUPERSCRIPT_TOP_OFFSET),n.italic&&(s="italic ");var u=c.measureSvgText(e,this.buildTextStyle(s,t));return null===u&&(u=0),{text:e,fontSize:t,fontStyle:s,x:r,y:i,anchor:a,bounds:{left:r,top:i,right:r+u,bottom:i+t*o.LINE_HEIGHT_RATIO}}},e.sliceText=function(t,n,r){var i=t+"#"+n+"#"+r,a=e.cacheSliceText[i];if(a)return a;t||(t=" ");var s=t.replace(/(\r\n|\n\r|\r|\n)/g,"\n").split("\n"),u=0,c="start";"center"==r?(u=.5,c="middle"):"right"==r&&(u=1,c="end");var l,p=n*o.ALPHABETIC_BASELINE_OFFSET;a=[];for(var h={},f=0;f<s.length;f++){l=0;for(var d=s[f],m=a.length,g=0;;){var v=/<(\/?)([a-z]+)>/gi,y=v.exec(d.substr(g).toLowerCase());if(null==y)break;var b={};for(var E in h)h.hasOwnProperty(E)&&(b[E]=h[E]);var w="/"==y[1],x=!0;switch(y[2]){case"sub":b.subscript=!w,w||(b.superscript=!1);break;case"sup":b.superscript=!w,w||(b.subscript=!1);break;case"i":b.italic=!w;break;default:x=!1}x?(y.index>0&&(a.push(e.createTextSlice(d.substr(0,g+y.index),n,h,l,p,c)),l=a[a.length-1].bounds.right),h=b,d=d.substr(g+v.lastIndex),g=0):g+=v.lastIndex}if(d.length>0&&a.push(e.createTextSlice(d,n,h,l,p,c)),0!=u&&a.length>m)for(var T=a[a.length-1].bounds.right,C=a.length-1;C>=m;C--)a[C].bounds.left-=T*u,a[C].bounds.right-=T*u;p+=n*o.LINE_HEIGHT_RATIO}return e.cacheSliceText[i]=a,a},e.prototype.updateSubtitle=function(e){if(this.subtitleReader){var t=this.subtitleReader.getUpdate(e);null!=t&&this.subtitleEventHandler&&this.subtitleEventHandler(t)}},e}();f.TYPE_BEZIERPATH="bezierpath",f.TYPE_ELLIPSE="ellipse",f.TYPE_HIGHLIGHT="highlight",f.TYPE_IMAGE="image",f.TYPE_LINE="line",f.TYPE_MASK="mask",f.TYPE_RECT="rect",f.TYPE_ROUNDRECT="roundrect",f.TYPE_SHAPE="shape",f.TYPE_TEXT="text",f.cacheSliceText={},t.OverlayNotesViewer=f},function(e,t,n){"use strict";function r(e){var t=[];return e.forEach(function(e){t.push(e.toString()),t.push(" ")}),h.createSvgElement("path",{d:t.join("")})}function o(e,t){var n={x:e.x1,y:e.y1},o={x:e.x2,y:e.y2},i=h.createSvgElement("g",{}),u=void 0!=e.ctrlX&&void 0!=e.ctrlY,l=c(e.edgeSizeStart),d=c(e.edgeSizeEnd),m=a(e),g=m.hasStartArrow,v=m.hasEndArrow,y=m.hasLeftBracket,b=m.hasRightBracket;g&&(n=s(u?{x:e.ctrlX,y:e.ctrlY}:{x:e.x2,y:e.y2},n,l,i)),v&&(o=s(u?{x:e.ctrlX,y:e.ctrlY}:{x:e.x1,y:e.y1},o,d,i));var E;return E=u?r(["M",n.x,n.y,"Q",e.ctrlX,e.ctrlY,o.x,o.y]).appendTo(i):r(["M",n.x,n.y," L",o.x,o.y]).appendTo(i),E.attr("fill","none"),!t&&e.dashed&&E.attr("stroke-dasharray",f.LINE_DASH_ARRAY),(y||b)&&p(n,o,y,e.dashed,t).appendTo(i),i}function i(e,t){var n=h.createSvgElement("g",{});if(null!=e.bezierPoints&&e.bezierPoints.length>0){var o=e.bezierPoints.map(function(t){return{cp1:void 0===t.cp1?void 0:{x:t.cp1.x+e.x1,y:t.cp1.y+e.y1},cp2:void 0===t.cp2?void 0:{x:t.cp2.x+e.x1,y:t.cp2.y+e.y1},point:{x:t.point.x+e.x1,y:t.point.y+e.y1}}}),i={x:e.x1,y:e.y1},u=o[o.length-1].point,l=c(e.edgeSizeStart),d=c(e.edgeSizeEnd),m=a(e),g=m.hasStartArrow,v=m.hasEndArrow,y=m.hasLeftBracket,b=m.hasRightBracket;g&&(i=s(o[0].cp1||o[0].cp2||o[0].point,i,l,n)),v&&(u=s(o[o.length-1].cp2||o[o.length-1].cp1||(1===o.length?i:o[o.length-2].point),u,d,n));var E=void 0;E=r(["M",i.x,i.y,o.map(function(e,t){var n=void 0===e.cp1?0===t?i:o[t-1].point:e.cp1,r=void 0===e.cp2?e.point:e.cp2;return"C "+n.x+" "+n.y+", "+r.x+" "+r.y+", "+e.point.x+" "+e.point.y}).join(" ")]).appendTo(n),E.attr("fill","none"),!t&&e.dashed&&E.attr("stroke-dasharray",f.LINE_DASH_ARRAY),(y||b)&&p(i,u,y,e.dashed,t).appendTo(n)}return n}function a(e){return{hasStartArrow:"startArrow"===e.edges||"bothArrows"===e.edges,hasEndArrow:"endArrow"===e.edges||"bothArrows"===e.edges,hasLeftBracket:e.edges===b,hasRightBracket:e.edges===E}}function s(e,t,n,r){var o=Math.atan2(t.y-e.y,t.x-e.x),i=u(t,o+Math.PI,n);return l(i,o,n).appendTo(r),t}function u(e,t,n){return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}}function c(e){var t=g[e];return void 0===t?v:t}function l(e,t,n){var r=e.x+Math.cos(t)*n,o=e.y+Math.sin(t)*n,i=t+Math.PI/2,a=e.x+Math.cos(i)*n*m,s=e.y+Math.sin(i)*n*m;i=t-Math.PI/2;var u=e.x+Math.cos(i)*n*m,c=e.y+Math.sin(i)*n*m;return h.createSvgElement("polygon",{points:r+","+o+" "+a+","+s+" "+u+","+c})}function p(e,t,n,o,i){var a=Math.atan2(t.y-e.y,t.x-e.x);n?a-=Math.PI/2:a+=Math.PI/2;var s=r(["M",e.x,e.y,"L",e.x+Math.cos(a)*y,e.y+Math.sin(a)*y,"M",t.x,t.y,"L",t.x+Math.cos(a)*y,t.y+Math.sin(a)*y]);return!i&&o&&s.attr("stroke-dasharray",f.LINE_DASH_ARRAY),s}var h=n(587),f=n(584),d=Math.PI/8,m=Math.sin(d)/Math.cos(d),g={xsmall:6,small:8,normal:10,large:12,xlarge:14},v=10,y=10,b="leftBracket",E="rightBracket";t.createSvgPath=r,t.createSvgLine=o,t.createSvgBezierPath=i},function(e,t,n){"use strict";function r(e,t){var n=l(document.createElementNS("http://www.w3.org/2000/svg",e)).on("dragstart",function(e){return e.preventDefault(),!1});return t&&n.attr(t),n}function o(e){var t=r("text",e);return t[0].setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t}function i(e){return p||(p=r("svg",{visibility:"hidden",width:0,height:0}).appendTo(l(document.body))),h||(h=r("text",{}).appendTo(p)),f!=e&&(h.attr("style",e),f=e),h}function a(e){var t=d[e];if(!t){var n=i(e).text("XX");if(m[e]=n[0].getComputedTextLength(),0==m[e])return null;t=[],d[e]=t}return t}function s(e,t,n,r){var o=r[e];if(void 0==o){var a=i(t);a.text("X"+String.fromCharCode(e)+"X"),o=a[0].getComputedTextLength()-n,r[e]=o}return o}function u(e,t){var n=a(t);if(null==n)return null;for(var r=m[t],o=0,i=e.length-1;i>=0;i--)o+=s(e.charCodeAt(i),t,r,n);return o}function c(e,t,n){var r=a(n);if(null==r)return null;for(var o=m[n],i=[],u=0,c=0,l=0,p=0,h=0;h<e.length;h++){var f=e.charCodeAt(h),d=s(f,n,o,r);32==f?(l=h,p=u+d):10==f?(i.push(e.substr(c,h-c)),c=h+1,u=0):u+d>t?l>c?(i.push(e.substr(c,l+1-c)),c=l+1,u-=p):(i.push(e.substr(c,h-c)),c=h,u=0):45==f&&(l=h,p=u+d),u+=d}return i.push(e.substr(c)),i}var l=n(179);t.createSvgElement=r,t.createSvgTextElement=o;var p,h,f,d={},m={};t.measureSvgText=u,t.wrapSvgText=c},function(e,t){"use strict";function n(e,t,n,r,o,i){var a=e,s=e-2*n+o;0!=s&&(s=(e-n)/s,s>0&&s<1&&(a=e*Math.pow(1-s,2)+2*n*(1-s)*s+o*s*s));var u=t;return s=t-2*r+i,0!=s&&(s=(t-r)/s,s>0&&s<1&&(u=t*Math.pow(1-s,2)+2*r*(1-s)*s+i*s*s)),{x:a,y:u}}t.calcQuadraticBezierCurveEdge=n},function(e,t,n){"use strict";function r(e,t){var n=o(t);return{left:n.left+e.x,top:n.top+e.y,right:n.right+e.x,bottom:n.bottom+e.y}}function o(e){var t={left:0,top:0,right:1,bottom:1};if(null!=e&&e.length>0){var n=e.map(function(t,n){var r=0===n?{x:0,y:0}:e[n-1].point,o=void 0===t.cp1?r:t.cp1,a=void 0===t.cp2?t.point:t.cp2,s=t.point;return i.getBoundsOfCubicBezierCurve(r.x,r.y,o.x,o.y,a.x,a.y,s.x,s.y)});n.forEach(function(e){t.left=Math.min(e.left,t.left),t.top=Math.min(e.top,t.top),t.right=Math.max(e.right,t.right),t.bottom=Math.max(e.bottom,t.bottom)})}return t}var i=n(590);t.calcBezierPathBoundaries=r},function(e,t){"use strict";function n(e,t,n,r,o,i,a,s){for(var u,c,l,p,h,f,d,m,g=new Array,v=[new Array,new Array],y=new Array,b=0;b<2;++b)if(0==b?(c=6*e-12*n+6*o,u=-3*e+9*n-9*o+3*a,l=3*n-3*e):(c=6*t-12*r+6*i,u=-3*t+9*r-9*i+3*s,l=3*r-3*t),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;p=-l/c,0<p&&p<1&&g.push(p)}else d=c*c-4*l*u,m=Math.sqrt(d),d<0||(h=(-c+m)/(2*u),0<h&&h<1&&g.push(h),f=(-c-m)/(2*u),0<f&&f<1&&g.push(f));for(var E,w,x,T=g.length,C=T;T--;)p=g[T],x=1-p,E=x*x*x*e+3*x*x*p*n+3*x*p*p*o+p*p*p*a,v[0][T]=E,w=x*x*x*t+3*x*x*p*r+3*x*p*p*i+p*p*p*s,v[1][T]=w,y[T]={X:E,Y:w};return g[C]=0,g[C+1]=1,y[C]={X:e,Y:t},y[C+1]={X:a,Y:s},v[0][C]=e,v[1][C]=t,v[0][C+1]=a,v[1][C+1]=s,g.length=v[0].length=v[1].length=y.length=C+2,{left:Math.min.apply(Math,v[0]),top:Math.min.apply(Math,v[1]),right:Math.max.apply(Math,v[0]),bottom:Math.max.apply(Math,v[1])}}t.getBoundsOfCubicBezierCurve=n},function(e,t){"use strict";var n=function(){function e(e){this.images={},this.preloadTimes=[],this.getImageUrl=e}return e.prototype.getImage=function(e){var t=this,n=this.getImageUrl(e),r=this.images[n];if(r){if(r.getAttribute("isLoaded"))return r}else r=new Image,this.images[n]=r,r.onload=function(){r.setAttribute("isLoaded","true"),t.onLoad(e)},r.src=n;return null},e.prototype.preloadImageAt=function(e,t){for(var n=this.preloadTimes.length-1;n>=0&&!(t>=this.preloadTimes[n].time);n--);this.preloadTimes.splice(++n,0,{imageId:e,time:t})},e.prototype.setOnLoad=function(e){this.onLoad=e},e.prototype.setTime=function(e){for(;this.preloadTimes.length>0&&e>=this.preloadTimes[0].time;)this.getImage(this.preloadTimes[0].imageId),this.preloadTimes.splice(0,1)},e}();t.ImageLoader=n},function(e,t){"use strict";function n(e,t,n){var r=e.left+n-t.left,o=t.right-(e.right-n),i=e.top+n-t.top,a=t.bottom-(e.bottom-n),s=0;r>0!=o>0&&(s=r>0?-Math.min(r,(r-o)/2):Math.min(o,(o-r)/2));var u=0;return i>0!=a>0&&(u=i>a?-Math.min(i,(i-a)/2):Math.min(a,(a-i)/2)),{scrollLeft:s,scrollTop:u}}t.neededScrollToFocus=n},function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())})}function r(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function o(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+t+";"}function i(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,n){function r(){var e=o;i(e)&&null!==e.a.parentNode&&n(e.g)}var o=e;t(e.b,r),t(e.c,r),i(e)}function s(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function u(){if(null===p){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}p=""!==e.style.font}return p}function c(e,t){return[e.style,e.weight,u()?e.stretch:"","100px",t].join(" ")}var l=null,p=null,h=null;s.prototype.load=function(e,t){var i=this,s=e||"BESbswy",u=0,p=t||3e3,f=(new Date).getTime();return new Promise(function(e,t){if(null===h&&(h=!!document.fonts),h){var d=new Promise(function(e,t){function n(){(new Date).getTime()-f>=p?t():document.fonts.load(c(i,'"'+i.family+'"'),s).then(function(t){1<=t.length?e():setTimeout(n,25)},function(){t()})}n()}),m=new Promise(function(e,t){u=setTimeout(t,p)});Promise.race([m,d]).then(function(){clearTimeout(u),e(i)},function(){t(i)})}else n(function(){function n(){var t;(t=-1!=v&&-1!=y||-1!=v&&-1!=b||-1!=y&&-1!=b)&&((t=v!=y&&v!=b&&y!=b)||(null===l&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=l&&(v==E&&y==E&&b==E||v==w&&y==w&&b==w||v==x&&y==x&&b==x)),t=!t),t&&(null!==T.parentNode&&T.parentNode.removeChild(T),clearTimeout(u),e(i))}function h(){if((new Date).getTime()-f>=p)null!==T.parentNode&&T.parentNode.removeChild(T),t(i);else{var e=document.hidden;!0!==e&&void 0!==e||(v=d.a.offsetWidth,y=m.a.offsetWidth,b=g.a.offsetWidth,n()),u=setTimeout(h,50)}}var d=new r(s),m=new r(s),g=new r(s),v=-1,y=-1,b=-1,E=-1,w=-1,x=-1,T=document.createElement("div");T.dir="ltr",o(d,c(i,"sans-serif")),o(m,c(i,"serif")),o(g,c(i,"monospace")),T.appendChild(d.a),T.appendChild(m.a),T.appendChild(g.a),document.body.appendChild(T),E=d.a.offsetWidth,w=m.a.offsetWidth,x=g.a.offsetWidth,h(),a(d,function(e){v=e,n()}),o(d,c(i,'"'+i.family+'",sans-serif')),a(m,function(e){y=e,n()}),o(m,c(i,'"'+i.family+'",serif')),a(g,function(e){b=e,n()}),o(g,c(i,'"'+i.family+'",monospace'))})})},e.exports=s}()},function(e,t,n){"use strict";var r=n(394),o=n(390),i=n(595);t.getOpenMediaSrt=r.createSelector(i.getOpenMediaSubtitles,function(e){return e.userSettings.subtitleLanguage},o.findSubtitleWithLanguage)},function(e,t,n){"use strict";var r=n(394),o=n(582),i=n(596);t.getOpenMediaSubtitles=r.createSelector(o.getOpenLecture,i.getOpenVideo,function(e,t){return null!=e?e.overlayNote.subs:null!=t?t.subs:null})},function(e,t,n){"use strict";var r=n(394),o=n(393),i=n(437);t.getOpenVideo=r.createSelector(function(e){return e.metadata.book?e.metadata.book.videos:null},o.getControlMapping,i.getOpenMediaControlName,function(e,t,n){if(null==n)return null;var r=t.findVideoIdByControlName(n);return null==r?null:e[r]})},function(e,t,n){"use strict";var r=n(426),o=n(394);t.getSelectedAnnotationTool=o.createSelector(function(e){return e.userSettings?e.userSettings.annotationTool:null},function(e){return null!=e&&r.AnnotationTool[e]?e:r.AnnotationTool.HIGHLIGHT})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(426),a=n(367),s=n(599),u=n(601),c=n(431),l=n(603),p=n(10),h=n(437),f=n(605),d=n(440),m=n(425),g=n(606),v=n(608),y=10,b=1.25,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePlayPauseClick=function(){t.playing?p.Context.internalEventEmitter.triggerNeedMediaPause():p.Context.internalEventEmitter.triggerNeedMediaPlay()},t.handlePlayRewindClick=function(){v.seekMediaByShift(-y)},t.handleZoomIn=function(){m.zoomBy(b)},t.handleZoomOut=function(){m.zoomBy(1/b)},t}return r(t,e),t.prototype.render=function(){var e=this.playing?o.createElement(c.Icon,{type:c.IconType.PAUSE}):o.createElement(c.Icon,{type:c.IconType.PLAY}),t=this.playing?"Pause":"Play";return o.createElement("div",null,o.createElement(s.ToolbarButton,{disabled:!this.hasMediaWithDuration,size:s.ToolbarButtonSize.REGULAR,theme:s.ToolbarButtonTheme.REGULAR,height:s.ToolbarButtonHeight.REGULAR,qaLabel:"playPauseBtn",title:t,onClick:this.handlePlayPauseClick,onlyIcon:!0},e),o.createElement(s.ToolbarButton,{disabled:!this.hasMediaWithDuration,size:s.ToolbarButtonSize.SMALL_WIDTH,theme:s.ToolbarButtonTheme.REGULAR,height:s.ToolbarButtonHeight.REGULAR,title:"Rewind 10 secs",qaLabel:"playRewindBtn",otherClassName:"button--playrewind",onClick:this.handlePlayRewindClick,onlyIcon:!0},o.createElement(c.Icon,{type:c.IconType.REWIND10})),o.createElement(u.ToolbarMenuButton,{active:this.props.menuOpen===i.MenuType.PlaySettings,disabled:!this.hasMedia,size:s.ToolbarButtonSize.REGULAR,theme:s.ToolbarButtonTheme.REGULAR,height:s.ToolbarButtonHeight.REGULAR,title:"Player settings",qaLabel:"playSettingsBtn",otherClassName:"button--playsettings",onOpen:function(){return d.openMenu(i.MenuType.PlaySettings)},onClose:function(){return d.closeMenu()}},o.createElement(l.MediaProgress,{time:this.props.status.currentTime,duration:this.props.openMediaDuration,active:this.hasMediaWithDuration})),o.createElement("div",{className:"menu__separator"}),o.createElement(u.ToolbarMenuButton,{size:s.ToolbarButtonSize.SMALL_WIDTH,theme:s.ToolbarButtonTheme.REGULAR,height:s.ToolbarButtonHeight.REGULAR,qaLabel:"zoomInBtn",title:"Zoom in",onClick:this.handleZoomIn,otherClassName:"button--zoomin"},o.createElement(c.Icon,{type:c.IconType.PLUS})),o.createElement(u.ToolbarMenuButton,{size:s.ToolbarButtonSize.SMALL_WIDTH,theme:s.ToolbarButtonTheme.REGULAR,height:s.ToolbarButtonHeight.REGULAR,qaLabel:"zoomOutBtn",title:"Zoom out",onClick:this.handleZoomOut,otherClassName:"button--zoomout"},o.createElement(c.Icon,{type:c.IconType.MINUS})),o.createElement(u.ToolbarMenuButton,{active:this.props.menuOpen===i.MenuType.ZoomLayout,size:s.ToolbarButtonSize.REGULAR,theme:s.ToolbarButtonTheme.REGULAR,height:s.ToolbarButtonHeight.REGULAR,qaLabel:"zoomMenuBtn",title:"Page view",onOpen:function(){return d.openMenu(i.MenuType.ZoomLayout)},onClose:function(){return d.closeMenu()}},o.createElement(g.Select,{label:Math.floor(100*this.props.viewScale)+"%"})),o.createElement("div",{className:"menu__separator"}))},Object.defineProperty(t.prototype,"hasMedia",{get:function(){return null!=this.props.openMediaControlName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasMediaWithDuration",{get:function(){return this.hasMedia&&!!this.props.openMediaDuration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playlistDisabled",{get:function(){return!this.props.playlistItems||0==this.props.playlistItems.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this.hasMediaWithDuration&&this.props.status.playing},enumerable:!0,configurable:!0}),t}(o.Component);t.Component=E;var w=function(e,t){return{playlistItems:e.metadata.book?e.metadata.book.playlist:null,openMediaControlName:h.getOpenMediaControlName(e),openMediaDuration:f.getOpenMediaDuration(e),status:e.mediaStatus,menuOpen:e.toolbar.menuOpen,viewScale:e.view.scale}},x=a.connect(w)(E);t.ToolbarLeftPane=x},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(401),s=n(600);!function(e){e[e.REGULAR=0]="REGULAR",e[e.BIG=1]="BIG",e[e.SMALL=2]="SMALL",e[e.SMALL_WIDTH=3]="SMALL_WIDTH",e[e.NAV=4]="NAV"}(r=t.ToolbarButtonSize||(t.ToolbarButtonSize={}));var u;!function(e){e[e.REGULAR=0]="REGULAR",e[e.BLUE=1]="BLUE",e[e.NAV=2]="NAV"}(u=t.ToolbarButtonTheme||(t.ToolbarButtonTheme={}));var c;!function(e){e[e.REGULAR=0]="REGULAR",e[e.FULL=1]="FULL"}(c=t.ToolbarButtonHeight||(t.ToolbarButtonHeight={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultProps={onlyIcon:!1},t.handleRef=function(e){t.ref=e},t}return o(t,e),t.prototype.render=function(){var e=a("button",s.enumToClass("button--size",r[this.props.size]),s.enumToClass("button--theme",u[this.props.theme]),s.enumToClass("button--height",c[this.props.height]),this.props.otherClassName,{active:this.props.active},{disabled:this.props.disabled},{"button--icon":this.props.onlyIcon});return i.createElement("button",{className:e,ref:this.handleRef,title:this.props.title,disabled:this.props.disabled,onClick:this.props.disabled?null:this.props.onClick,onMouseDown:function(e){e.stopPropagation()},"data-qa":this.props.qaLabel},this.props.children)},t.prototype.getElement=function(){return this.ref},t.prototype.getBoundingClientRect=function(){return this.ref?this.ref.getBoundingClientRect():null},t}(i.Component);t.ToolbarButton=l},function(e,t){"use strict";function n(e,t){return t?""+e+(e.indexOf("--")!=-1?"-":"--")+t.toString().toLowerCase().replace("_","-"):null}t.enumToClass=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=n(193),a=n(599),s=n(602),u=n(440),c=n(387),l=n(16),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRef=function(e){t.props.active&&(t.ref&&s.removeExclusionOfOutsidePopupDownEvent(t.ref.getElement()),e&&s.addExclusionOfOutsidePopupDownEvent(e.getElement())),t.ref=e,t.updateBtnDimensions()},t.handleClick=function(){t.props.active?t.props.onClose&&t.props.onClose():t.props.onOpen&&t.props.onOpen(),t.props.onClick&&t.props.onClick()},t.throttledUpdateBtnDimensions=l._throttle(function(){t.updateBtnDimensions()},c.THROTTLE_DOM_EVENTS),t.updateBtnDimensions=function(){if(t.ref&&t.props.active){var e=t.ref.getBoundingClientRect();e&&u.setMenuButtonClientPosition(e.left,e.right)}},t}return r(t,e),t.prototype.componentDidMount=function(){this.props.active&&(this.addResizeEventListener(),this.updateBtnDimensions())},t.prototype.componentWillUnmount=function(){this.ref&&s.removeExclusionOfOutsidePopupDownEvent(this.ref.getElement()),this.removeResizeEventListener()},t.prototype.componentDidUpdate=function(){this.ref&&(this.props.active?(this.addResizeEventListener(),s.addExclusionOfOutsidePopupDownEvent(this.ref.getElement()),this.updateBtnDimensions()):(this.removeResizeEventListener(),s.removeExclusionOfOutsidePopupDownEvent(this.ref.getElement())))},t.prototype.render=function(){var e=l._assign({},this.props,{onClick:this.handleClick});return i.createElement(a.ToolbarButton,o({},e,{ref:this.handleRef}))},t.prototype.addResizeEventListener=function(){this.addedEventListener||(window.addEventListener("resize",this.throttledUpdateBtnDimensions),this.addedEventListener=!0)},t.prototype.removeResizeEventListener=function(){this.addedEventListener&&(window.removeEventListener("resize",this.throttledUpdateBtnDimensions),this.addedEventListener=!1)},t}(i.Component);t.ToolbarMenuButton=p},function(e,t,n){"use strict";function r(e,t){t?(p?h(p).unbind("touchstart mousedown",c):h(document).bind("touchstart mousedown",s),h(e).bind("touchstart mousedown",c),p=e,l=t):e==p&&(h(document).unbind("touchstart mousedown",s),h(e).unbind("touchstart mousedown",c),p=null,l=null)}function o(e){r(e,null)}function i(e){f.indexOf(e)==-1&&f.push(e)}function a(e){var t=f.indexOf(e);t!=-1&&f.splice(t,1)}function s(e){l&&(e&&e.target&&f.indexOf(e.target)!=-1||l(e?e.originalEvent:null),p&&o(p))}function u(){return!!p}function c(e){e.stopPropagation()}var l,p,h=n(179),f=[];t.bindPopupClose=r,t.unbindPopupClose=o,t.addExclusionOfOutsidePopupDownEvent=i,t.removeExclusionOfOutsidePopupDownEvent=a,t.handleOutsidePopupDownEvent=s,t.isPopupBinded=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=n(431),s=n(604),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=i("progressInfo",this.props.otherClassName),t=this.props.active&&null!=this.props.time?s.secondsToStr(this.props.time):"--:--",n=this.props.active&&null!=this.props.duration?s.secondsToStr(this.props.duration):"--:--";return o.createElement("span",{className:e},o.createElement("span",null,t),o.createElement("span",{className:"progressInfo__separator"},"/"),o.createElement("span",null,n),o.createElement(a.Icon,{type:a.IconType.SETTINGS,otherClassName:"progressInfo__icon"}))},t}(o.Component);t.MediaProgress=u},function(e,t){"use strict";function n(e){var t=Math.abs(Math.floor(e/60)),n=Math.abs(Math.floor(e%60));return(e<0?"-":"")+((t<10?"0":"")+t+":"+(n<10?"0":"")+n)}t.secondsToStr=n},function(e,t,n){"use strict";var r=n(394),o=n(582),i=n(596);t.getOpenMediaDuration=r.createSelector(o.getOpenLecture,i.getOpenVideo,function(e,t){return null!=e?e.overlayNote.dur:null!=t?t.duration:null})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=n(431);n(607);var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:i("select",this.props.otherClassName)},this.props.label,o.createElement(a.Icon,{type:a.IconType.MENU_OPEN,otherClassName:"select__icon"}))},t}(o.Component);t.Select=s},417,function(e,t,n){"use strict";function r(e){var t=i.Context.store.getState(),n=a.getOpenMediaDuration(t);if(n){var r=e>0?Math.min(n,t.mediaStatus.currentTime+e):Math.max(0,t.mediaStatus.currentTime+e);i.Context.internalEventEmitter.triggerNeedMediaSeek(r)}}function o(e){var t=i.Context.store.getState(),n=a.getOpenMediaDuration(t);n&&i.Context.internalEventEmitter.triggerNeedMediaSeek(n*e)}var i=n(10),a=n(605);t.seekMediaByShift=r,t.seekMediaByPosition=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(610),s=n(437),u=n(605),c=n(10),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSeek=function(e){c.Context.internalEventEmitter.triggerNeedMediaSeek(e)},t}return r(t,e),t.prototype.render=function(){return o.createElement(a.MediaSeek,{active:this.hasMediaWithDuration,duration:this.props.openMediaDuration,percentageBuffered:100,percentagePlayed:100*this.props.status.currentTime/this.props.openMediaDuration,onSeek:this.handleSeek})},Object.defineProperty(t.prototype,"hasMediaWithDuration",{get:function(){return null!=this.props.openMediaControlName&&!!this.props.openMediaDuration},enumerable:!0,configurable:!0}),t}(o.Component);t.Component=l;var p=function(e,t){return{openMediaControlName:s.getOpenMediaControlName(e),openMediaDuration:u.getOpenMediaDuration(e),status:e.mediaStatus}},h=i.connect(p)(l);t.ToolbarSeekBar=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(611),a=function(e){function t(t){var n=e.call(this,t)||this;return n.handleSeek=function(e){n.props.onSeek&&n.props.onSeek(e.target.valueAsNumber*n.props.duration/100)},n.handleFocus=function(){n.setState({focused:!0})},n.handleBlur=function(){n.setState({focused:!1})},n.state={focused:!1},n}return r(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.percentageBuffered!==e.percentageBuffered||this.props.percentagePlayed!==e.percentagePlayed||this.props.duration!==e.duration},t.prototype.render=function(){return o.createElement("div",{className:"video-seek video__control"+(this.state.focused?" video__control--focused":""),"aria-label":"Seek","data-qa":"videoProgress"},o.createElement("div",{className:"video-seek__container"},o.createElement("div",{style:{width:this.props.percentageBuffered+"%"},className:"video-seek__buffer-bar"}),o.createElement(i.ProgressBar,{onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleSeek,progress:this.props.percentagePlayed,active:this.props.active})))},t}(o.Component);t.MediaSeek=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(){},n.handleFocus=function(){},n.handleBlur=function(){},n.handleMouseMove=function(e){n.props.onChange&&1==e.buttons&&1==e.nativeEvent.which&&n.props.onChange(e);
},n}return r(t,e),t.prototype.componentDidMount=function(){this.refs.input.setAttribute("orient",this.props.orientation)},t.prototype.render=function(){var e=i("video-progress-bar__fill",{"video-progress-bar__fill--hide":!this.props.active}),t=i("video-progress-bar__hand",{"video-progress-bar__hand--hide":!this.props.active});return o.createElement("div",{className:"video-progress-bar "+("horizontal"===this.props.orientation?"video-progress-bar--horizontal":"video-progress-bar--vertical")},o.createElement("div",{className:e,style:(n={},n["horizontal"===this.props.orientation?"width":"height"]=this.props.progress+"%",n)}),o.createElement("div",{className:"video-progress-bar__handwrapper"},o.createElement("div",{className:t,style:{left:this.props.progress+"%"}})),o.createElement("input",{className:"video-progress-bar__input mousetrap",onBlur:this.props.onBlur?this.props.onBlur:this.handleBlur,onFocus:this.props.onFocus?this.props.onFocus:this.handleBlur,ref:"input",onChange:this.props.onChange?this.props.onChange:this.handleChange,onMouseMove:this.handleMouseMove,type:"range",min:"0",max:"100",value:this.props.progress.toString(),step:this.props.step}));var n},t}(o.Component);a.defaultProps={orientation:"horizontal",step:1,progress:0,active:!1},t.ProgressBar=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(613),a=n(632),s=n(627),u=n(633),c=n(637),l=n(641),p=n(643),h=n(645),f=n(647),d=n(648),m=n(654),g=n(660),v=n(426),y=n(367),b=n(440),E=n(661),w=n(10),x=n(393),T=(_={},_[v.MenuType.AnnotationColor]=h.AnnotationColorDropDown,_[v.MenuType.Annotations]=l.AnnotationsDropDown,_[v.MenuType.BookNotes]=f.BookNotesDropDown,_[v.MenuType.Navigation]=c.NavigationDropDown,_[v.MenuType.PlaySpeed]=m.PlaySettingsDropDown,_[v.MenuType.Print]=g.PrintDropdown,_[v.MenuType.Search]=d.SearchMarksDropDown,_[v.MenuType.PlaySettings]=m.PlaySettingsDropDown,_[v.MenuType.SubtitleLanguage]=m.PlaySettingsDropDown,_[v.MenuType.Thumbnails]=null,_[v.MenuType.ZoomLayout]=p.ZoomLayoutDropDown,_),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleOutsideMenuClick=function(){b.closeMenu()},t.handleTryNowClick=function(){w.Context.internalEventEmitter.triggerNeedRetryCommunication()},t}return r(t,e),t.prototype.render=function(){var e=this,t=null;if(this.props.menuButtonClientPosition){var n=T[this.props.menuOpen];if(n){var r={buttonLeft:this.props.menuButtonClientPosition.left-this.props.viewportClientRect.left,buttonRight:this.props.menuButtonClientPosition.right-this.props.viewportClientRect.left,maxRight:this.props.viewportClientRect.right-this.props.viewportClientRect.left,onOutsideClick:this.handleOutsideMenuClick,store:this.props.store};t=o.createElement(n,r)}}var c=0==this.props.retryIn?null:o.createElement("div",{className:"connWarning"},o.createElement("strong",null,"Communication failed.")," Retrying in"," ",o.createElement("span",{className:"lwSecs"},this.props.retryIn),"s...",o.createElement("a",{href:"#",className:"lwLink",onClick:this.handleTryNowClick},"Try now")),l=[];for(var p in this.props.popupWindows){var h=this.props.popupWindows[p].zIndex,f=void 0;for(f=l.length;f>0&&!(this.props.popupWindows[l[f-1]].zIndex<h);f--);l.splice(f,0,p)}return o.createElement("div",{style:{width:"100%",height:"100%"}},l.map(function(t,n){return o.createElement(i.PopupWindow,{store:e.props.store,control:e.props.controlMapping.findControlByControlName(t),zIndex:n,key:t})}),o.createElement(a.ClosedCaptionPane,{closedCaption:this.props.closedCaption}),o.createElement(u.ThumbsView,{store:this.props.store}),c,o.createElement(s.PlaylistPane,{store:this.props.store}),t)},t}(o.Component);t.Component=C;var N=function(e,t){return{closedCaption:e.mediaStatus.closedCaption,controlMapping:x.getControlMapping(e),menuOpen:e.toolbar.menuOpen,menuButtonClientPosition:e.toolbar.menuButtonClientPosition,popupWindows:e.popupWindows,retryIn:e.failure.retryIn,viewportClientRect:E.getViewportClientRectWithoutToolbar(e)}},S=y.connect(N)(C);t.LayerViewport=S;var _},function(e,t,n){"use strict";function r(e){switch(e.type){case d.ControlType.VIDEO:return _.Video;case d.ControlType.QUESTIONBUTTONS:case d.ControlType.FORMANSWERBUTTON:return e.answer&&e.answer.pageSnapshots&&e.answer.pageSnapshots.length>0?_.AnswerPageSnapshots:_.AnswerHtml;case d.ControlType.FIGUREPOPUP:return _.Images;default:return console.error("Unknown content type for control type "+e.type),null}}function o(e){return e.answerText?e.answerText:e.answer?e.answer.html||"":""}var i,a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(614),u=n(193),c=n(404),l=n(367),p=n(392),h=n(410),f=n(413),d=n(390),m=n(615),g=n(619),v=n(620),y=n(622),b=n(624),E=n(453),w=n(625),x=1e3,T=800,C=150,N=100;!function(e){e[e.LeftOutside=0]="LeftOutside",e[e.LeftInside=1]="LeftInside",e[e.Center=2]="Center",e[e.RightInside=3]="RightInside",e[e.RightOutside=4]="RightOutside"}(i=t.HorizontalPosition||(t.HorizontalPosition={}));var S;!function(e){e[e.TopOutside=0]="TopOutside",e[e.TopInside=1]="TopInside",e[e.Center=2]="Center",e[e.BottomInside=3]="BottomInside",e[e.BottomOutside=4]="BottomOutside"}(S=t.VerticalPosition||(t.VerticalPosition={}));var _;!function(e){e[e.Video=0]="Video",e[e.AnswerPageSnapshots=1]="AnswerPageSnapshots",e[e.AnswerHtml=2]="AnswerHtml",e[e.Images=3]="Images"}(_=t.ContentType||(t.ContentType={}));var O=function(e){function t(t){var n=e.call(this,t)||this;return n.handleBoundsChange=function(e,t){p.setBounds(n.props.control.name,t)},n.handleBringToFront=function(){p.bringToFront(n.props.control.name)},n.handleMouseEnter=function(){n.props.popupWindow.isMouseOver||p.setMouseOver(n.props.control.name,!0)},n.handleMouseLeave=function(){n.props.popupWindow.isMouseOver&&p.setMouseOver(n.props.control.name,!1)},n.handleClose=function(){n.props.contentType===_.Video&&(f.setTime(n.props.mediaOpen.controlName,0),h.close(),p.closeWindow(n.props.control.name)),p.closeWindow(n.props.control.name)},n.handleMaximize=function(){p.maximize(n.props.control.name)},n.handleRestore=function(){p.restore(n.props.control.name)},n.state={},n}return a(t,e),t.prototype.componentWillReceiveProps=function(e){this.initBoundsIfNoneSet(e)},t.prototype.componentWillMount=function(){this.initBoundsIfNoneSet(this.props)},t.prototype.render=function(){var e=null,t={backgroundColor:"black",zIndex:this.props.zIndex};if(this.props.popupWindow.bounds){var n=this.props.popupWindow.bounds.right-this.props.popupWindow.bounds.left-m.HORZ_MARGIN,r=this.props.popupWindow.bounds.bottom-this.props.popupWindow.bounds.top-m.VERT_MARGIN;switch(this.props.contentType){case _.Video:e=u.createElement(g.VideoContent,{autoPlay:this.props.mediaOpen.autoPlay,control:this.props.control,initialTime:this.props.initialTime,width:n,height:r});break;case _.AnswerPageSnapshots:e=u.createElement(v.PageSnapshotsContent,{items:this.props.control.answer.pageSnapshots,width:n,height:r}),t.overflow="auto";break;case _.AnswerHtml:e=u.createElement(y.HtmlContent,{html:o(this.props.control)}),t.backgroundColor="white",t.overflow="auto";break;case _.Images:e=u.createElement(b.ImagesContent,{items:this.props.control.imageIds,width:n,height:r}),t.overflow="auto";break;default:console.error("Invalid content type")}}if(null==e)return null;var i=this.getConstraints(),a=this.props.popupWindow.maximized?{left:0,top:0,right:i.viewport.width,bottom:i.viewport.height}:this.props.popupWindow.bounds;return u.createElement(m.Window,{bounds:a,constraints:i,contentStyle:t,maximized:this.props.popupWindow.maximized,onBoundsChange:this.handleBoundsChange,onBringToFront:this.handleBringToFront,onClose:this.handleClose,onMaximize:this.handleMaximize,onRestore:this.handleRestore,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,otherClassName:this.props.contentType===_.Images?"bookPopupPane--images":null},e)},t.prototype.initContentSize=function(e,t,n){var r=this,i=n;if(!e.control)return this.contentKey=null,n;var a=null,s=null;switch(e.contentType){case _.Video:a="Video"+e.control.name,a!==this.contentKey&&(s=g.calcBestVideoContentSize(e.control));break;case _.AnswerPageSnapshots:a="Answer"+e.control.name,a!==this.contentKey&&(s=v.calcBestPageSnapshotsContentSize(e.control));break;case _.AnswerHtml:if(a="Answer"+e.control.name,a!==this.contentKey){i={loading:!0};var u=this.getAvailableViewportSize();y.calcBestHtmlContentSize(o(e.control),C,Math.min(x,u.width),N,Math.min(T,u.height)).then(function(e){r.contentKey===a&&(r.applyBestSize(t,e),r.setState({}))})}break;case _.Images:a="Images"+e.control.name,a!==this.contentKey&&(s=b.calcBestImagesContentSize(e.control.imageIds));break;default:console.warn("Not supported content type "+e.contentType)}return this.contentKey=a,null!=s&&this.applyBestSize(t,s),i},t.prototype.applyBestSize=function(e,t){var n=t.width+m.HORZ_MARGIN,r=t.height+m.VERT_MARGIN,o=e.x-n/2,i=e.y-r/2,a={left:o,top:i,right:o+n,bottom:i+r};a=c.calcConstrainedBoundsChange(a,a,this.getConstraints()),this.handleBoundsChange(a,a)},t.prototype.getAvailableViewportSize=function(){return{width:Math.max(C,this.props.viewportClientRectWithoutBars.right-this.props.viewportClientRectWithoutBars.left),height:Math.max(N,this.props.viewportClientRectWithoutBars.bottom-this.props.viewportClientRectWithoutBars.top)}},t.prototype.getConstraints=function(){return{viewport:this.getAvailableViewportSize(),minWidth:C,minHeight:N,maxWidth:x,maxHeight:T}},t.prototype.initBoundsIfNoneSet=function(e){if(null==e.popupWindow.bounds){var t=this.getAvailableViewportSize(),n=s.bestWindowPosition(e.popupWindows,t.width,t.height);this.setState(this.initContentSize(e,n,this.state))}},t}(u.Component);t.Component=O;var P=function(e,t){return{contentType:r(t.control),initialTime:E.getVideoControlInitialTime(e.mediaOpen.controlName)(e),popupWindow:e.popupWindows[t.control.name],popupWindows:e.popupWindows,mediaOpen:e.mediaOpen,viewportClientRectWithoutBars:w.getViewportClientRectWithoutBars(e)}},A=l.connect(P)(O);t.PopupWindow=A},function(e,t){"use strict";function n(e,t,n){for(var o=[],i=0,a=r;i<a.length;i++){var s=a[i],u=0;for(var c in e){var l=e[c];if(l.bounds){var p=(l.bounds.left+l.bounds.right)/2,h=(l.bounds.top+l.bounds.bottom)/2;u+=Math.pow(p-t*s.xOffset,2)+Math.pow(h-n*s.yOffset,2)}}o.push(u)}var f=-1,d=0;return o.forEach(function(e,t){e>f&&(f=e,d=t)}),{x:t*r[d].xOffset,y:n*r[d].yOffset}}var r=[{xOffset:.5,yOffset:.5},{xOffset:.25,yOffset:.25},{xOffset:.75,yOffset:.25},{xOffset:.25,yOffset:.75},{xOffset:.75,yOffset:.75}];t.bestWindowPosition=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=n(404),s=n(431),u=n(599),c=n(616),l=n(387),p=n(16),h=n(617),f=n(618),d=4,m=40,g=10,v=20;t.HORZ_MARGIN=2*d,t.VERT_MARGIN=2*d+m;var y;!function(e){e[e.Move=0]="Move",e[e.TopLeft=1]="TopLeft",e[e.Top=2]="Top",e[e.TopRight=3]="TopRight",e[e.Right=4]="Right",e[e.BottomRight=5]="BottomRight",e[e.Bottom=6]="Bottom",e[e.BottomLeft=7]="BottomLeft",e[e.Left=8]="Left"}(y||(y={}));var b=(w={},w[y.Move]={cursor:"move",left:!0,top:!0,right:!0,bottom:!0},w[y.TopLeft]={cursor:"nwse-resize",left:!0,top:!0},w[y.Top]={cursor:"ns-resize",top:!0},w[y.TopRight]={cursor:"nesw-resize",top:!0,right:!0},w[y.Right]={cursor:"ew-resize",right:!0},w[y.BottomRight]={cursor:"nwse-resize",right:!0,bottom:!0},w[y.Bottom]={cursor:"ns-resize",bottom:!0},w[y.BottomLeft]={cursor:"nesw-resize",left:!0,bottom:!0},w[y.Left]={cursor:"ew-resize",left:!0},w),E=function(e){function t(t){var n=e.call(this,t)||this;return n.handleRef=function(e){n.removeDisableParentScrolling&&(n.removeDisableParentScrolling(),n.removeDisableParentScrolling=null),e&&(n.removeDisableParentScrolling=h.disableParentScrolling(e))},n.handleRestore=function(){n.props.onRestore&&n.props.onRestore(),n.bringToFront()},n.handleMaximize=function(){n.props.onMaximize&&n.props.onMaximize(),n.bringToFront()},n.handleContentMouseDown=function(){n.bringToFront()},n.createHandleDragStart=function(e){return function(t,r){n.dragStartBounds=n.props.bounds,n.dragStartPos={x:r.x,y:r.y},n.dragType=e,n.bringToFront(),f.disableTouchDragging()}},n.handleDragStop=function(){n.dragType=null,f.enableTouchDragging()},n.handleDragDrag=p._throttle(function(e,t){if(null!=n.dragType){var r=t.x-n.dragStartPos.x,o=t.y-n.dragStartPos.y,i=b[n.dragType];n.triggerBoundsChangeIfNeeded(n.props.bounds,{left:n.dragStartBounds.left+(i.left?r:0),top:n.dragStartBounds.top+(i.top?o:0),right:n.dragStartBounds.right+(i.right?r:0),bottom:n.dragStartBounds.bottom+(i.bottom?o:0)},n.props.constraints)}},l.THROTTLE_DOM_EVENTS),t.maximized||n.triggerBoundsChangeIfNeeded(t.bounds,t.bounds,t.constraints),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.maximized||this.triggerBoundsChangeIfNeeded(e.bounds,e.bounds,e.constraints)},t.prototype.render=function(){var e,t=this;e={left:this.props.bounds.left+"px",top:this.props.bounds.top+"px",width:this.props.bounds.right-this.props.bounds.left+"px",height:this.props.bounds.bottom-this.props.bounds.top+"px"};var n=[y.Bottom,y.Right,y.Top,y.Left,y.BottomLeft,y.BottomRight,y.TopLeft,y.TopRight].map(function(e){var n=-d+"px",r=v-d+"px",i=b[e];return o.createElement(c.DraggableCore,{offsetParent:document.body,onDrag:t.handleDragDrag,onStart:t.createHandleDragStart(e),onStop:t.handleDragStop,key:"corner"+e},o.createElement("span",{className:"bookPopupPane__resize",style:{width:i.left||i.right?(i.top||i.bottom?v:g)+"px":void 0,height:i.top||i.bottom?(i.left||i.right?v:g)+"px":void 0,top:i.top?n:i.bottom?void 0:r,left:i.left?n:i.right?void 0:r,right:i.right?n:i.left?void 0:r,bottom:i.bottom?n:i.top?void 0:r,cursor:i.cursor}}))});return o.createElement(c.DraggableCore,{disabled:this.props.dragDisabled||this.props.maximized,handle:".bookPopupPane__header",offsetParent:document.body,onDrag:this.handleDragDrag,onStart:this.createHandleDragStart(y.Move),onStop:this.handleDragStop},o.createElement("div",{className:i("bookPopupPane",this.props.otherClassName),style:e,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},o.createElement("div",{className:"bookPopupPane__header"},o.createElement(u.ToolbarButton,{size:u.ToolbarButtonSize.SMALL,theme:u.ToolbarButtonTheme.REGULAR,height:u.ToolbarButtonHeight.REGULAR,qaLabel:"closeWindowBtn",onClick:this.props.onClose,title:"Close",active:!0},o.createElement(s.Icon,{type:s.IconType.CLOSE})),this.props.maximized?o.createElement(u.ToolbarButton,{size:u.ToolbarButtonSize.SMALL,theme:u.ToolbarButtonTheme.REGULAR,height:u.ToolbarButtonHeight.REGULAR,qaLabel:"restoreWndBtn",onClick:this.handleRestore,title:"Restore",active:!0,otherClassName:"bookPopupPane__restore"},o.createElement(s.Icon,{type:s.IconType.RESTORE})):o.createElement(u.ToolbarButton,{size:u.ToolbarButtonSize.SMALL,theme:u.ToolbarButtonTheme.REGULAR,height:u.ToolbarButtonHeight.REGULAR,qaLabel:"maximizeWndBtn",onClick:this.handleMaximize,title:"Maximize",active:!this.props.maximized,otherClassName:"bookPopupPane__maximize"},o.createElement(s.Icon,{type:s.IconType.MAXIMIZE}))),o.createElement("span",{className:"content",onMouseDown:this.handleContentMouseDown,ref:this.handleRef,style:this.props.contentStyle},this.props.children),this.props.maximized?null:n))},t.prototype.triggerBoundsChangeIfNeeded=function(e,t,n){t=a.calcConstrainedBoundsChange(e,t,n),t.left===e.left&&t.top===e.top&&t.right===e.right&&t.bottom===e.bottom||this.props.onBoundsChange(e,t)},t.prototype.bringToFront=function(){var e=this;setTimeout(function(){e.props.onBringToFront&&e.props.onBringToFront()},1)},t}(o.Component);t.Window=E;var w},function(e,t,n){!function(t,r){e.exports=r(n(193),n(228))}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(1).default,e.exports.DraggableCore=n(9).default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(2),h=r(p),f=n(3),d=r(f),m=n(4),g=r(m),v=n(5),y=n(8),b=n(6),E=n(9),w=r(E),x=n(11),T=r(x),C=function(e){function t(e){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.onDragStart=function(e,t){(0,T.default)("Draggable: onDragStart: %j",t);var r=n.props.onStart(e,(0,y.createDraggableData)(n,t));return r!==!1&&void n.setState({dragging:!0,dragged:!0})},n.onDrag=function(e,t){if(!n.state.dragging)return!1;(0,T.default)("Draggable: onDrag: %j",t);var r=(0,y.createDraggableData)(n,t),o={x:r.x,y:r.y};if(n.props.bounds){var i=o.x,a=o.y;o.x+=n.state.slackX,o.y+=n.state.slackY;var s=(0,y.getBoundPosition)(n,o.x,o.y),u=c(s,2);o.x=u[0],o.y=u[1],o.slackX=n.state.slackX+(i-o.x),o.slackY=n.state.slackY+(a-o.y),r.x=i,r.y=a,r.deltaX=o.x-n.state.x,r.deltaY=o.y-n.state.y}var l=n.props.onDrag(e,r);return l!==!1&&void n.setState(o)},n.onDragStop=function(e,t){if(!n.state.dragging)return!1;var r=n.props.onStop(e,(0,y.createDraggableData)(n,t));if(r===!1)return!1;(0,T.default)("Draggable: onDragStop: %j",t);var o={dragging:!1,slackX:0,slackY:0},i=Boolean(n.props.position);if(i){var a=n.props.position,s=a.x,u=a.y;o.x=s,o.y=u}n.setState(o)},n.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},n}return s(t,e),l(t,[{key:"componentWillMount",value:function(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function(){"undefined"!=typeof SVGElement&&d.default.findDOMNode(this)instanceof SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var e,t={},n=null,r=Boolean(this.props.position),i=!r||this.state.dragging,a=this.props.position||this.props.defaultPosition,s={x:(0,y.canDragX)(this)&&i?this.state.x:a.x,y:(0,y.canDragY)(this)&&i?this.state.y:a.y};this.state.isElementSVG?n=(0,v.createSVGTransform)(s):t=(0,v.createCSSTransform)(s);var c=this.props,l=c.defaultClassName,p=c.defaultClassNameDragging,f=c.defaultClassNameDragged,d=(0,g.default)(this.props.children.props.className||"",l,(e={},o(e,p,this.state.dragging),o(e,f,this.state.dragged),e));return h.default.createElement(w.default,u({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),h.default.cloneElement(h.default.Children.only(this.props.children),{className:d,style:u({},this.props.children.props.style,t),transform:n}))}}]),t}(h.default.Component);C.displayName="Draggable",C.propTypes=u({},w.default.propTypes,{axis:p.PropTypes.oneOf(["both","x","y","none"]),bounds:p.PropTypes.oneOfType([p.PropTypes.shape({left:p.PropTypes.number,right:p.PropTypes.number,top:p.PropTypes.number,bottom:p.PropTypes.number}),p.PropTypes.string,p.PropTypes.oneOf([!1])]),defaultClassName:p.PropTypes.string,defaultClassNameDragging:p.PropTypes.string,defaultClassNameDragged:p.PropTypes.string,defaultPosition:p.PropTypes.shape({x:p.PropTypes.number,y:p.PropTypes.number}),position:p.PropTypes.shape({x:p.PropTypes.number,y:p.PropTypes.number}),className:b.dontSetMe,style:b.dontSetMe,transform:b.dontSetMe}),C.defaultProps=u({},w.default.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null}),t.default=C},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){var r,o;/*!
		  Copyright (c) 2016 Jed Watson.
		  Licensed under the MIT License (MIT), see
		  http://jedwatson.github.io/classnames
		*/
!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(r=[],o=function(){return n}.apply(t,r),!(void 0!==o&&(e.exports=o)))}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return N||(N=(0,x.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,x.isFunction)(e[t])})),e[N].call(e,t)}function a(e,t,n){var r=e;do{if(i(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function s(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function u(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}function c(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,x.int)(n.borderTopWidth),t+=(0,x.int)(n.borderBottomWidth)}function l(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,x.int)(n.borderLeftWidth),t+=(0,x.int)(n.borderRightWidth)}function p(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,x.int)(n.paddingTop),t-=(0,x.int)(n.paddingBottom)}function h(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,x.int)(n.paddingLeft),t-=(0,x.int)(n.paddingRight)}function f(e,t){var n=t===t.ownerDocument.body,r=n?{left:0,top:0}:t.getBoundingClientRect(),o=e.clientX+t.scrollLeft-r.left,i=e.clientY+t.scrollTop-r.top;return{x:o,y:i}}function d(e){var t=e.x,n=e.y;return o({},(0,T.browserPrefixToKey)("transform",C.default),"translate("+t+"px,"+n+"px)")}function m(e){var t=e.x,n=e.y;return"translate("+t+","+n+")"}function g(e,t){return e.targetTouches&&(0,x.findInArray)(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&(0,x.findInArray)(e.changedTouches,function(e){return t===e.identifier})}function v(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function y(e){var t=e.getAttribute("style")||"";e.setAttribute("style",t+O)}function b(e){var t=e.getAttribute("style")||"";e.setAttribute("style",t.replace(O,""))}function E(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return w({touchAction:"none"},e)}Object.defineProperty(t,"__esModule",{value:!0});var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.matchesSelector=i,t.matchesSelectorAndParentsTo=a,t.addEvent=s,t.removeEvent=u,t.outerHeight=c,t.outerWidth=l,t.innerHeight=p,t.innerWidth=h,t.offsetXYFromParent=f,t.createCSSTransform=d,t.createSVGTransform=m,t.getTouch=g,t.getTouchIdentifier=v,t.addUserSelectStyles=y,t.removeUserSelectStyles=b,t.styleHacks=E;var x=n(6),T=n(7),C=r(T),N="",S=(0,T.getPrefix)("user-select"),_=(0,T.browserPrefixToStyle)("user-select",S),O=";"+_+": none;"},function(e,t){"use strict";function n(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function r(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function o(e){return"number"==typeof e&&!isNaN(e)}function i(e){return parseInt(e,10)}function a(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}Object.defineProperty(t,"__esModule",{value:!0}),t.findInArray=n,t.isFunction=r,t.isNum=o,t.int=i,t.dontSetMe=a},function(e,t){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?"transform":arguments[0];if("undefined"==typeof window||"undefined"==typeof window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<a.length;n++)if(r(e,a[n])in t)return a[n];return""}function r(e,t){return t?""+t+i(e):e}function o(e,t){return t?"-"+t.toLowerCase()+"-"+e:e}function i(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefix=n,t.browserPrefixToKey=r,t.browserPrefixToStyle=o;var a=["Moz","Webkit","O","ms"];t.default=n()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:p(r);var o=d.default.findDOMNode(e);if("string"==typeof r){var i=o.ownerDocument,a=i.defaultView,s=void 0;if("parent"===r)s=o.parentNode;else if(s=i.querySelector(r),!s)throw new Error('Bounds selector "'+r+'" could not find an element.');var u=a.getComputedStyle(o),c=a.getComputedStyle(s);r={left:-o.offsetLeft+(0,h.int)(c.paddingLeft)+(0,h.int)(u.borderLeftWidth)+(0,h.int)(u.marginLeft),top:-o.offsetTop+(0,h.int)(c.paddingTop)+(0,h.int)(u.borderTopWidth)+(0,h.int)(u.marginTop),right:(0,m.innerWidth)(s)-(0,m.outerWidth)(o)-o.offsetLeft,bottom:(0,m.innerHeight)(s)-(0,m.outerHeight)(o)-o.offsetTop}}return(0,h.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,h.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,h.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,h.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function i(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]}function a(e){return"both"===e.props.axis||"x"===e.props.axis}function s(e){return"both"===e.props.axis||"y"===e.props.axis}function u(e,t,n){var r="number"==typeof t?(0,m.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=d.default.findDOMNode(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,m.offsetXYFromParent)(r||e,i)}function c(e,t,n){var r=e._pendingState||e.state,o=!(0,h.isNum)(r.lastX);return o?{node:d.default.findDOMNode(e),deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:d.default.findDOMNode(e),deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}}function l(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function p(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundPosition=o,t.snapToGrid=i,t.canDragX=a,t.canDragY=s,t.getControlPosition=u,t.createCoreData=c,t.createDraggableData=l;var h=n(6),f=n(3),d=r(f),m=n(5)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),l=r(c),p=n(3),h=r(p),f=n(5),d=n(8),m=n(6),g=n(11),v=r(g),y={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},b=y.mouse,E=function(e){function t(){var e,n,r,a;o(this,t);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return n=r=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},r.handleDragStart=function(e){if(r.props.onMouseDown(e),!r.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;var t=h.default.findDOMNode(r),n=t.ownerDocument;if(!(r.props.disabled||!(e.target instanceof n.defaultView.Node)||r.props.handle&&!(0,f.matchesSelectorAndParentsTo)(e.target,r.props.handle,t)||r.props.cancel&&(0,f.matchesSelectorAndParentsTo)(e.target,r.props.cancel,t))){var o=(0,f.getTouchIdentifier)(e);r.setState({touchIdentifier:o});var i=(0,d.getControlPosition)(e,o,r);if(null!=i){var a=i.x,s=i.y,u=(0,d.createCoreData)(r,a,s);(0,v.default)("DraggableCore: handleDragStart: %j",u),(0,v.default)("calling",r.props.onStart);var c=r.props.onStart(e,u);c!==!1&&(r.props.enableUserSelectHack&&(0,f.addUserSelectStyles)(n.body),r.setState({dragging:!0,lastX:a,lastY:s}),(0,f.addEvent)(n,b.move,r.handleDrag),(0,f.addEvent)(n,b.stop,r.handleDragStop))}}},r.handleDrag=function(e){var t=(0,d.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,o=t.y;if(Array.isArray(r.props.grid)){var i=n-r.state.lastX,a=o-r.state.lastY,u=(0,d.snapToGrid)(r.props.grid,i,a),c=s(u,2);if(i=c[0],a=c[1],!i&&!a)return;n=r.state.lastX+i,o=r.state.lastY+a}var l=(0,d.createCoreData)(r,n,o);(0,v.default)("DraggableCore: handleDrag: %j",l);var p=r.props.onDrag(e,l);if(p!==!1)r.setState({lastX:n,lastY:o});else try{r.handleDragStop(new MouseEvent("mouseup"))}catch(e){var h=document.createEvent("MouseEvents");h.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(h)}}},r.handleDragStop=function(e){if(r.state.dragging){var t=(0,d.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,o=t.y,i=(0,d.createCoreData)(r,n,o),a=h.default.findDOMNode(r),s=a.ownerDocument;r.props.enableUserSelectHack&&(0,f.removeUserSelectStyles)(s.body),(0,v.default)("DraggableCore: handleDragStop: %j",i),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),r.props.onStop(e,i),(0,v.default)("DraggableCore: Removing handlers"),(0,f.removeEvent)(s,b.move,r.handleDrag),(0,f.removeEvent)(s,b.stop,r.handleDragStop)}}},r.onMouseDown=function(e){return b=y.mouse,r.handleDragStart(e)},r.onMouseUp=function(e){return b=y.mouse,r.handleDragStop(e)},r.onTouchStart=function(e){return b=y.touch,r.handleDragStart(e)},r.onTouchEnd=function(e){return b=y.touch,r.handleDragStop(e)},a=n,i(r,a)}return a(t,e),u(t,[{key:"componentWillUnmount",value:function(){var e=h.default.findDOMNode(this),t=e.ownerDocument;(0,f.removeEvent)(t,y.mouse.move,this.handleDrag),(0,f.removeEvent)(t,y.touch.move,this.handleDrag),(0,f.removeEvent)(t,y.mouse.stop,this.handleDragStop),(0,f.removeEvent)(t,y.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&(0,f.removeUserSelectStyles)(t.body)}},{key:"render",value:function(){return l.default.cloneElement(l.default.Children.only(this.props.children),{style:(0,f.styleHacks)(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),t}(l.default.Component);E.displayName="DraggableCore",E.propTypes={allowAnyClick:c.PropTypes.bool,disabled:c.PropTypes.bool,enableUserSelectHack:c.PropTypes.bool,offsetParent:function(t,n){if(e.browser&&t[n]&&1!==t[n].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:c.PropTypes.arrayOf(c.PropTypes.number),handle:c.PropTypes.string,cancel:c.PropTypes.string,onStart:c.PropTypes.func,onDrag:c.PropTypes.func,onStop:c.PropTypes.func,onMouseDown:c.PropTypes.func,className:m.dontSetMe,style:m.dontSetMe,transform:m.dontSetMe},E.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},t.default=E}).call(t,n(10))},function(e,t){function n(){p&&c&&(p=!1,c.length?l=c.concat(l):h=-1,l.length&&r())}function r(){if(!p){var e=a(n);p=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,p=!1,s(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,s,u=e.exports={};!function(){try{a=setTimeout}catch(e){a=function(){throw new Error("setTimeout is not defined")}}try{s=clearTimeout}catch(e){s=function(){throw new Error("clearTimeout is not defined")}}}();var c,l=[],p=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new o(e,t)),1!==l.length||p||a(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}])})},function(e,t){"use strict";function n(e){function t(t){if(t.deltaY<0){var n=e.scrollTop;n+t.deltaY<0&&(t.preventDefault(),n>0&&(e.scrollTop=0))}else if(t.deltaY>0){var r=e.scrollHeight-e.offsetHeight,n=e.scrollTop;n+t.deltaY>r&&(t.preventDefault(),n<r&&(e.scrollTop=r))}}return e.addEventListener("wheel",t),function(){e.removeEventListener("wheel",t)}}t.disableParentScrolling=n},function(e,t){"use strict";function n(e){return e.type==t.TOUCHSTART||e.type==t.TOUCHMOVE||e.type==t.TOUCHEND}function r(e,t){return e&&t&&Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)>=Math.pow(u,2)}function o(e){return n(e)?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function i(){document.addEventListener("touchmove",s)}function a(){document.removeEventListener("touchmove",s)}function s(e){e.preventDefault()}var u=3;t.MOUSEMOVE="mousemove",t.MOUSEUP="mouseup",t.TOUCHSTART="touchstart",t.TOUCHMOVE="touchmove",t.TOUCHEND="touchend",t.isTouchEvent=n,t.reachedDragThreshold=r,t.getEventClientPoint=o,t.disableTouchDragging=i,t.enableTouchDragging=a},function(e,t,n){"use strict";function r(e){var t=a.Context.store.getState().metadata.book.videos[e.videoId];return{width:t.width,height:t.height}}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(10),s=n(414),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return i.createElement(s.VideoControl,{controlName:this.props.control.name,autoPlay:this.props.autoPlay,initialTime:this.props.initialTime,mode:this.props.control.inPlace?s.Mode.InPlaceExpanded:s.Mode.Expanded,width:this.props.width,height:this.props.height,store:a.Context.store})},t}(i.Component);t.VideoContent=u,t.calcBestVideoContentSize=r},function(e,t,n){"use strict";function r(e){var t=0,n=0;return e.answer.pageSnapshots.forEach(function(e){t=Math.max(t,e.width),n=Math.max(n,e.height)}),{width:t,height:n}}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},a=n(193),s=n(192),u=n(10),c=n(226),l=n(621),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getContentSize=function(){var e=this.props.items[this.state.index];return{width:e.width,height:e.height}},t.prototype.renderContent=function(e){var t=this.props.items[this.state.index],n=c.createProgressiveLoadPageBackgroundProps(t.pageIdx,u.Context.store.getState().metadata.book.pages[t.pageIdx],{left:t.left,top:t.top,width:t.width,height:t.height});return n.visibility=s.Visibility.Visible,n.scale=e.width/t.width,a.createElement(s.ProgressiveLoadPageBackground,i({},n))},t}(l.CustomCarouselContent);t.PageSnapshotsContent=p,t.calcBestPageSnapshotsContentSize=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(431),a=n(599),s=function(e){function t(t){var n=e.call(this,t)||this;return n.handleContentClick=function(){n.setState({actualSize:!n.state.actualSize})},n.handlePrevClick=function(){n.setState({index:(n.state.index+n.props.items.length-1)%n.props.items.length})},n.handleNextClick=function(){n.setState({index:(n.state.index+1)%n.props.items.length})},n.state={index:0,actualSize:!1},n}return r(t,e),t.prototype.render=function(){var e=this,t=null,n=null,r=null;if(this.props.items.length>1){t=o.createElement("div",{className:"bookPopupPane__prev pos-fullLeft"},o.createElement(a.ToolbarButton,{size:a.ToolbarButtonSize.REGULAR,theme:a.ToolbarButtonTheme.REGULAR,height:a.ToolbarButtonHeight.REGULAR,qaLabel:"carouselPrevBtn",onClick:this.handlePrevClick},o.createElement(i.Icon,{type:i.IconType.ARROW_LEFT,otherClassName:"icon pos-middleCenter"}))),n=o.createElement("div",{className:"bookPopupPane__next pos-fullRight"},o.createElement(a.ToolbarButton,{size:a.ToolbarButtonSize.REGULAR,theme:a.ToolbarButtonTheme.REGULAR,height:a.ToolbarButtonHeight.REGULAR,qaLabel:"carouselNextBtn",onClick:this.handleNextClick},o.createElement(i.Icon,{type:i.IconType.ARROW_RIGHT,otherClassName:"icon pos-middleCenter"})));for(var s=[],u=function(t){var n=c.state.index==t?"active":null;s.push(o.createElement("div",{key:"item"+t,onClick:function(){return e.handleNavItemClick(t)},className:n}))},c=this,l=0;l<this.props.items.length;l++)u(l);r=o.createElement("div",{className:"bookPopupPane__pagination pos-fullBottom"},s)}var p=this.getContentSize(),h=p.width,f=p.height;this.state.actualSize||(p.width/p.height>this.props.width/this.props.height?(h=this.props.width,f=Math.floor(this.props.width*p.height/p.width)):(f=this.props.height,h=Math.floor(this.props.height*p.width/p.height)));var d={position:"absolute",left:Math.max(0,Math.floor((this.props.width-h)/2))+"px",top:Math.max(0,Math.floor((this.props.height-f)/2))+"px",width:h+"px",height:f+"px",cursor:this.state.actualSize?"zoom-in":"zoom-out"};return o.createElement("div",null,r,t,n,o.createElement("div",{style:d,onClick:this.handleContentClick},this.renderContent({width:h,height:f})))},t.prototype.handleNavItemClick=function(e){this.setState({index:e})},t}(o.Component);t.CustomCarouselContent=s},function(e,t,n){"use strict";function r(e,t,n,r,o){return a.calcHtmlOptimalSize(e,t,n,r,o)}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(623),s=n(408),u=n(10),c="HTML",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.componentDidMount=function(){this.setupAnchorHandling()},t.prototype.componentDidUpdate=function(e,t){this.setupAnchorHandling()},t.prototype.render=function(){return i.createElement("div",{dangerouslySetInnerHTML:this.getSafeHtml(),ref:c})},t.prototype.getSafeHtml=function(){return{__html:this.props.html}},t.prototype.setupAnchorHandling=function(){s.HotspotUri.addClickHandlerToAnchorElements(this.refs[c],u.Context.gotoPage)},t}(i.Component);t.HtmlContent=l,t.calcBestHtmlContentSize=r},function(e,t,n){"use strict";function r(e,t,n,r,a){var s=document.createElement("div");return s.style.overflow="auto",document.body.appendChild(s),s.innerHTML=e,new l.Promise(function(e){o(s).then(function(){var o=i(s,t,n,r,a);document.body.removeChild(s),e(o)}).catch(function(){document.body.removeChild(s)})})}function o(e){return new l.Promise(function(t){var n=u(e).find("img"),r=n.length;if(n.length>0){var o=function(){r--,r||t()};n.each(function(){u(this).load(o).error(o)})}else t()})}function i(e,t,n,r,o){u(e).css({width:n,height:o});var i=e;if(c.hasHorizontalScrollbar(i)){var l=a(e,"height",r,o,function(){return c.hasVerticalScrollbar(i)});return{width:n,height:l}}if(c.hasVerticalScrollbar(i)){var p=null,h=o;do p=h,h*=2,u(e).css({height:h});while(c.hasVerticalScrollbar(i));h=a(e,"height",p,h,function(){return c.hasVerticalScrollbar(i)});var f=a(e,"width",t,n,function(){return c.hasHorizontalScrollbar(i)||c.hasVerticalScrollbar(i)});return{width:f,height:Math.min(h,o)}}return s(e,t,n,r,o)}function a(e,t,n,r,o){for(var i=r;r>n+1;)i=Math.round((r+n)/2),u(e).css(t,i),o()?n=i+1:r=i;return i=r,u(e).css(t,i),i}function s(e,t,n,r,o){for(var i=n,a=o,s=e;i>t||a>r;)if(i>t&&(a<=r||i>a)){var l=Math.floor((i+t)/2);u(e).css({width:l,height:a}),c.hasHorizontalScrollbar(s)||c.hasVerticalScrollbar(s)?t=l+1:i=l}else{var l=Math.floor((a+r)/2);u(e).css({width:i,height:l}),c.hasHorizontalScrollbar(s)||c.hasVerticalScrollbar(s)?r=l+1:a=l}return{width:i,height:a}}var u=n(179),c=n(403),l=n(182);t.calcHtmlOptimalSize=r,t.calcOptimalSize=i},function(e,t,n){"use strict";function r(e){var t=0,n=0;return e.forEach(function(e){var r=a.Context.store.getState().metadata.book.images[e];t=Math.max(t,r.width),n=Math.max(n,r.height)}),{width:t,height:n}}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(10),s=n(621),u=n(8),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getContentSize=function(){var e=this.props.items[this.state.index],t=a.Context.store.getState().metadata.book.images[e];return{width:t.width,height:t.height}},t.prototype.renderContent=function(e){var t=this.props.items[this.state.index],n=a.Context.store.getState().metadata.book.images[t],r={width:e.width+"px",height:e.height+"px"};return i.createElement("img",{src:a.Context.resourceLoader.getResourceUrl(u.ResourceType.IMAGE,[t,n.ext]),style:r})},t}(s.CustomCarouselContent);t.ImagesContent=c,t.calcBestImagesContentSize=r},function(e,t,n){"use strict";var r=n(394),o=n(387),i=n(626),a=n(627);t.getViewportClientRectWithoutBars=r.createSelector(function(e){return e.environment},i.isPlaylistOpen,function(e,t){var n=e.size.width>o.MENU_COLLAPSED_MAXWIDTH?o.TOOLBAR_HEIGHT:o.TOOLBAR_HEIGHT_COLLAPSED;return{left:0,top:0,right:e.size.width-(t?a.AUTO_PLAY_LIST_WIDTH:0),bottom:e.size.height-n,width:e.size.width,height:e.size.height-n}})},function(e,t,n){"use strict";var r=n(394),o=n(10),i=n(434);t.isPlaylistOpen=r.createSelector(function(e){return i.getPlaylistTotalTime(e)>0},function(e){return e.userSettings.playlistOpen},function(e,t){return o.Context.controlSettings.enablePlaylist&&e&&t})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=n(431),s=n(604),u=n(367),c=n(436),l=n(410),p=n(628),h=n(629),f=n(434),d=n(630),m=n(425),g=n(617),v=n(626);t.AUTO_PLAY_LIST_WIDTH=300;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){l.gotoPlaylistItem(e)},t.handleAutoPlayToggle=function(){t.props.userSettings.autoPlayActive?m.deactivateAutoPlay():m.activateAutoPlay()},t.handleRef=function(e){t.removeDisableParentScrolling&&(t.removeDisableParentScrolling(),t.removeDisableParentScrolling=null),e&&(t.removeDisableParentScrolling=g.disableParentScrolling(e))},t}return r(t,e),t.prototype.render=function(){var e=this;return this.props.playlistOpen&&this.props.playlistItems&&0!=this.props.playlistItems.length?o.createElement("div",{className:"autoPlayPane"},o.createElement("div",{className:"autoPlayPane__header"},"Playlist",o.createElement(d.Toggle,{id:"autoplay",label:"AutoPlay",checked:this.props.userSettings.autoPlayActive,onChange:this.handleAutoPlayToggle,className:"autoPlayPane__toggle",qaLabel:"autoPlayBtn"})),o.createElement("div",{className:"autoPlayPane__content"},o.createElement("ul",{className:"autoPlayPane__list",style:{pointerEvents:"auto"},ref:this.handleRef},this.props.playlistItems.map(function(t,n){var r=e.props.openMediaPlaylistIndex==n,u=e.props.playlistItemIndexesDone.indexOf(n)==-1;return o.createElement("li",{key:n,"data-qa":"video"+n,onClick:function(){return e.handleClick(n)},className:i("autoPlayPane__listItem",{"autoPlayPane__listItem--active":r},{"autoPlayPane__listItem--notdone":!r&&u})},o.createElement("span",{className:"autoPlayPane__listItemTitle"},t.title),o.createElement("span",{className:"autoPlayPane__listItemDuration"},s.secondsToStr(t.duration)),o.createElement("span",{className:"autoPlayPane__listItemStatus"},u?o.createElement("div",{className:i("mediaStatus",{"mediaStatus--playing":r},{"mediaStatus--notdone":!r})},o.createElement(a.Icon,{type:a.IconType.PLAY})):o.createElement("div",{className:"mediaStatus mediaStatus--done"},o.createElement(a.Icon,{type:a.IconType.CHECKMARK}))))}))),o.createElement("div",{className:"autoPlayPane__footer"},o.createElement("div",{className:"autoPlayPane__footer--total"},o.createElement("span",null,"TOTAL"),o.createElement("span",null,s.secondsToStr(this.props.playlistTotalTime))),o.createElement("div",{className:"autoPlayPane__footer--remaining"},o.createElement("span",null,"REMAINING"),o.createElement("span",null,s.secondsToStr(this.props.playlistRemainingTime))))):null},t}(o.Component);t.Component=y;var b=function(e,t){return{playlistItemIndexesDone:p.getPlaylistItemIndexesDone(e),playlistItems:e.metadata.book?e.metadata.book.playlist:null,playlistOpen:v.isPlaylistOpen(e),playlistRemainingTime:h.getPlaylistRemainingTime(e),playlistTotalTime:f.getPlaylistTotalTime(e),openMediaPlaylistIndex:c.getOpenMediaPlaylistIndex(e),userSettings:e.userSettings}},E=u.connect(b)(y);t.PlaylistPane=E},function(e,t,n){"use strict";var r=n(394),o=n(187),i=n(444);t.getPlaylistItemIndexesDone=r.createSelector(function(e){return e.controls},function(e){return e.metadata.book?e.metadata.book.playlist:null},function(e,t){if(null==t)return null;var n=[];return t.forEach(function(t,r){var a=!1,s=o.controlNameOfPlaylistItem(t);switch(t.type){case o.PlaylistItemType.PAGELECTURE:a=i.isLectureDone(e,s);break;case o.PlaylistItemType.VIDEO:a=i.isVideoDone(e,s);break;case o.PlaylistItemType.QUESTIONEXPLANATION:a=i.isLectureDone(e,s)}a&&n.push(r)}),n})},function(e,t,n){"use strict";var r=n(394),o=n(628);t.getPlaylistRemainingTime=r.createSelector(o.getPlaylistItemIndexesDone,function(e){return e.metadata.book&&e.metadata.book.playlist?e.metadata.book.playlist:[]},function(e,t){return t.reduce(function(t,n,r){return t+(e.indexOf(r)!=-1?0:Math.floor(n.duration))},0)})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401);n(631);var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{className:i("toggle",this.props.className),id:this.props.id},o.createElement("input",{type:"checkbox",onChange:this.props.onChange,checked:this.props.checked,id:"toggle-"+this.props.id,value:this.props.checked?"1":"0","data-qa":this.props.qaLabel}),o.createElement("label",{htmlFor:"toggle-"+this.props.id},o.createElement("span",{className:"text"},this.props.label),o.createElement("span",{className:"toggleButton"},o.createElement("span",{className:"hand"}))))},t}(o.Component);t.Toggle=a},417,function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClick=function(){n.setState(function(e){return{top:!e.top}})},n.state={top:!1},n}return r(t,e),t.prototype.render=function(){if(this.props.closedCaption){var e=i("subtitle",{"subtitle--top":this.state.top});return o.createElement("div",{className:e},o.createElement("div",{className:"subtitle__inner",onClick:this.handleClick,style:{pointerEvents:"all"},dangerouslySetInnerHTML:{__html:this.props.closedCaption}}))}return null},t}(o.Component);t.ClosedCaptionPane=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(426),a=n(367),s=n(634),u=n(401),c=n(602),l=n(440),p=n(442),h=n(10),f=n(635),d="thumbs",m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRef=function(e){t.ref&&(f.Shortcuts.endScope(d),c.unbindPopupClose(t.ref)),t.ref=e,null!=e&&(f.Shortcuts.startScope(d),f.Shortcuts.bind("escape",t.handleShortcutEscape,d),c.bindPopupClose(e,function(){l.closeMenu(i.MenuType.Thumbnails)})),t.updateRootScroll(t.props.active)},t.handlePageRef=function(e){e&&e.focus()},t.handleThumbsClick=function(e){l.closeMenu(),p.setPage(e)},t.handleShortcutEscape=function(e){l.closeMenu(i.MenuType.Thumbnails)},t}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.updateRootScroll(e.active)},t.prototype.render=function(){var e=this;if(!this.props.pages||!this.props.active)return null;var t=[];return this.props.pages.forEach(function(n,r){var i={width:e.props.images[r].width+"px",height:e.props.images[r].height+"px",background:'url("'+e.props.images[r].url+'") '+-e.props.images[r].x+"px 0"},a=e.props.activePage==r,s=u("thumbHolder",{active:a});t[r]=o.createElement("div",{className:s,style:i,key:r,onClick:function(){return e.handleThumbsClick(r)}},o.createElement("span",{className:"thumbHolderName",ref:a?e.handlePageRef:null},n.name))}),o.createElement("div",{className:"thumbnailsView",style:{pointerEvents:"auto"},ref:this.handleRef},t)},t.prototype.updateRootScroll=function(e){e&&null==this.ref&&(e=!1),this.rootScrollDisabled!=e&&(this.rootScrollDisabled=e,e?h.Context.pagesScroll.disable():h.Context.pagesScroll.enable())},t}(o.Component);t.Component=m;var g=function(e,t){return{active:e.toolbar.menuOpen==i.MenuType.Thumbnails,activePage:e.view.page,pages:e.metadata.book?e.metadata.book.pages:null,images:s.getThumbImages(e)}},v=a.connect(g)(m);t.ThumbsView=v},function(e,t,n){"use strict";var r=n(8),o=n(394),i=n(10);t.THUMBS_PER_IMAGE=40,t.THUMBS_IMAGE_MAX_SIZE=150,t.getThumbImages=o.createSelector(function(e){return e.metadata.book?e.metadata.book.pages:null},function(e){if(null==e)return null;for(var n,o=[],a=-1,s=0,u=[],c=0;c<e.length;c++){c%t.THUMBS_PER_IMAGE==0&&(a++,a>0&&(u[a-1]=s),s=0,n=i.Context.resourceLoader.getResourceUrl(r.ResourceType.THUMB_STRIP,[(a+1).toString()]));var l,p;e[c].width>e[c].height?(l=t.THUMBS_IMAGE_MAX_SIZE,p=Math.ceil(t.THUMBS_IMAGE_MAX_SIZE*e[c].height/e[c].width)):(p=t.THUMBS_IMAGE_MAX_SIZE,l=Math.ceil(t.THUMBS_IMAGE_MAX_SIZE*e[c].width/e[c].height)),o.push({url:n,x:s,width:l,height:p,totalWidth:0}),s+=l}u[a]=s;for(var c=0;c<e.length;c++)o[c].totalWidth=u[Math.floor(c/t.THUMBS_PER_IMAGE)];return o})},function(e,t,n){"use strict";
function r(){t.Shortcuts.bind(["backspace","space","end"],function(e){return e.preventDefault(),!1})}function o(){t.Shortcuts.startScope(f),t.Shortcuts.bind(["space","k"],function(e){e.preventDefault();var t=s.Context.store.getState();t.mediaStatus.playing?s.Context.internalEventEmitter.triggerNeedMediaPause():s.Context.internalEventEmitter.triggerNeedMediaPlay()},f),[0,1,2,3,4,5,6,7,8,9].forEach(function(e){t.Shortcuts.bind(""+e,function(t){t.preventDefault(),h.seekMediaByPosition(e/10)},f)}),t.Shortcuts.bind("home",function(e){e.preventDefault(),h.seekMediaByPosition(0)},f),t.Shortcuts.bind("left",function(e){e.preventDefault(),h.seekMediaByShift(-5)},f),t.Shortcuts.bind("right",function(e){e.preventDefault(),h.seekMediaByShift(5)},f),t.Shortcuts.bind(["j","ctrl+left"],function(e){e.preventDefault(),h.seekMediaByShift(-10)},f),t.Shortcuts.bind(["l","ctrl+right"],function(e){e.preventDefault(),h.seekMediaByShift(10)},f),t.Shortcuts.bind(["backspace","del"],function(){p.getSelectedVisualAnnotation(s.Context.store.getState())&&u.deleteSelectedAnnotation()},f),t.Shortcuts.bind(">",function(){i(1)},f),t.Shortcuts.bind("<",function(){i(-1)},f),t.Shortcuts.bind("up",function(e){e.preventDefault();var t=s.Context.store.getState();s.Context.gotoPage(t.view.page-1)},f),t.Shortcuts.bind("down",function(e){e.preventDefault();var t=s.Context.store.getState();s.Context.gotoPage(t.view.page+1)},f)}function i(e){var t=s.Context.store.getState(),n=l.PLAY_SPEEDS.indexOf(t.userSettings.playSpeed);n!=-1&&n+e>=0&&n+e<l.PLAY_SPEEDS.length&&c.setPlaySpeed(l.PLAY_SPEEDS[n+e])}var a=n(636),s=n(10),u=n(430),c=n(425),l=n(425),p=n(429),h=n(608),f="base";t.Shortcuts=new a.ShortcutHandler,t.bindGlobalShortcuts=r,t.bindBaseShortcuts=o},function(e,t){"use strict";var n=(function(){function e(){}return e}(),"globalScope"),r=function(){function e(){this.scopes={},this.scopeQueue=[]}return e.prototype.bind=function(e,t,r){r=null==r?n:r,this.scopes[r]?this.removeBindingFromScope(r,e):this.scopes[r]=[],this.scopes[r].push({keys:e,callback:t}),this.currentScope!=r&&r!=n||(this.applyScopeBindings(n),this.applyScopeBindings(this.currentScope))},e.prototype.unbind=function(e,t){t=null==t?n:t,this.scopes[t]&&(this.removeBindingFromScope(t,e),this.currentScope!=t&&t!=n||(Mousetrap.unbind(e),this.applyScopeBindings(n),this.applyScopeBindings(this.currentScope)))},e.prototype.startScope=function(e){if(e==n)throw"Cannot reference base scope";this.currentScope!=e&&(this.unapplyScopeBindings(this.currentScope),this.removeScopeFromQueue(e),this.scopeQueue.push(e),this.applyScopeBindings(n),this.applyScopeBindings(this.currentScope))},e.prototype.endScope=function(e){if(e==n)throw"Cannot reference base scope";var t=this.currentScope==e;t&&this.unapplyScopeBindings(this.currentScope),this.removeScopeFromQueue(e)&&t&&(this.applyScopeBindings(n),this.applyScopeBindings(this.currentScope))},e.prototype.removeBindingFromScope=function(e,t){var n=this.indexOfBinding(e,t);n!=-1&&this.scopes[e].splice(n,1)},e.prototype.indexOfBinding=function(e,t){if(this.scopes[e])for(var n=this.scopes[e],r=n.length-1;r>=0;r--)if(n[r].keys==t)return r;return-1},e.prototype.unapplyScopeBindings=function(e){if(this.scopes[e])for(var t=0,n=this.scopes[e];t<n.length;t++){var r=n[t];Mousetrap.unbind(r.keys)}},e.prototype.applyScopeBindings=function(e){if(this.scopes[e])for(var t=0,n=this.scopes[e];t<n.length;t++){var r=n[t];Mousetrap.bind(r.keys,r.callback)}},e.prototype.removeScopeFromQueue=function(e){var t=this.scopeQueue.indexOf(e);return t!=-1&&this.scopeQueue.splice(t,1),t!=-1},Object.defineProperty(e.prototype,"currentScope",{get:function(){return this.scopeQueue[this.scopeQueue.length-1]},enumerable:!0,configurable:!0}),e}();t.ShortcutHandler=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(638),a=n(599),s=n(431),u=n(639),c=n(367),l=n(426),p=n(10),h=n(440),f=n(640),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleFirstPageClick=function(){t.gotoPageIndex(0)},t.handlePreviousPageClick=function(){t.gotoPageIndex(t.props.page-1)},t.handleLastPageClick=function(){t.gotoPageIndex(t.props.pageCount-1)},t.handleNextPageClick=function(){t.gotoPageIndex(t.props.page+1)},t.handleThumbnailsClick=function(){h.openMenu(l.MenuType.Thumbnails)},t.handleInputPageChange=function(e){t.gotoPageIndex(e-1)},t.handleInputClose=function(){h.closeMenu()},t}return r(t,e),t.prototype.render=function(){return o.createElement(i.DropDown,{align:i.DropDownAlign.CENTER,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,maxRight:this.props.maxRight,otherClassName:"text-center",onOutsideClick:this.props.onOutsideClick},o.createElement(a.ToolbarButton,{disabled:0==this.props.page,size:a.ToolbarButtonSize.SMALL,theme:a.ToolbarButtonTheme.REGULAR,height:a.ToolbarButtonHeight.REGULAR,qaLabel:"firstPageBtn",onClick:this.handleFirstPageClick,onlyIcon:!0},o.createElement(s.Icon,{type:s.IconType.FIRST})),o.createElement(a.ToolbarButton,{disabled:0==this.props.page,size:a.ToolbarButtonSize.SMALL,theme:a.ToolbarButtonTheme.REGULAR,height:a.ToolbarButtonHeight.REGULAR,qaLabel:"previousPageBtn",onClick:this.handlePreviousPageClick,onlyIcon:!0},o.createElement(s.Icon,{type:s.IconType.PREVIOUS})),o.createElement(f.InputPageNumber,{value:this.props.page+1,qaLabel:"pageNumberInput",pageCount:this.props.pageCount,style:{marginTop:"8px"},onChange:this.handleInputPageChange,onClose:this.handleInputClose}),o.createElement(a.ToolbarButton,{disabled:this.props.page==this.props.pageCount-1,size:a.ToolbarButtonSize.SMALL,theme:a.ToolbarButtonTheme.REGULAR,height:a.ToolbarButtonHeight.REGULAR,qaLabel:"nextPageBtn",onClick:this.handleNextPageClick,onlyIcon:!0},o.createElement(s.Icon,{type:s.IconType.NEXT})),o.createElement(a.ToolbarButton,{disabled:this.props.page==this.props.pageCount-1,size:a.ToolbarButtonSize.SMALL,theme:a.ToolbarButtonTheme.REGULAR,height:a.ToolbarButtonHeight.REGULAR,qaLabel:"lastPageBtn",onClick:this.handleLastPageClick,onlyIcon:!0},o.createElement(s.Icon,{type:s.IconType.LAST})),o.createElement("div",{className:"dropdown__separator"}),o.createElement(a.ToolbarButton,{onClick:this.handleThumbnailsClick,size:a.ToolbarButtonSize.REGULAR,theme:a.ToolbarButtonTheme.REGULAR,height:a.ToolbarButtonHeight.REGULAR,qaLabel:"thumbnailsBtn"},o.createElement(s.Icon,{type:s.IconType.THUMBNAILS})," Thumbnails"))},t.prototype.gotoPageIndex=function(e){e>=0&&e<this.props.pageCount&&Math.floor(e)===e&&p.Context.gotoPage(e)},t}(u.CustomDropDown);t.Component=d;var m=function(e,t){return{page:e.view.page,pageCount:e.metadata.book?e.metadata.book.pages.length:0}},g=c.connect(m)(d);t.NavigationDropDown=g},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(401),s=n(602),u=n(635),c={pointerEvents:"auto",maxHeight:"100%"},l="dropdown";!function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(r=t.DropDownAlign||(t.DropDownAlign={}));var p=function(e){function t(t){var n=e.call(this,t)||this;return n.handlePaneRef=function(e){n.ref&&(u.Shortcuts.endScope(l),s.unbindPopupClose(n.ref)),n.ref=e,null!=e&&(n.setPosition(),u.Shortcuts.startScope(l),u.Shortcuts.bind("escape",n.handleShortcutEscape,l),s.bindPopupClose(e,function(e){n.props.onOutsideClick&&n.props.onOutsideClick(e)}))},n.handleShortcutEscape=function(e){n.props.onOutsideClick&&n.props.onOutsideClick(event)},n.state={paneOuterWidth:0},n}return o(t,e),t.prototype.componentDidUpdate=function(){this.setPosition()},t.prototype.setPosition=function(){var e=null,t=null;switch(this.ref.style.left=null,this.ref.style.width=null,t=this.ref.offsetWidth,this.props.align){case r.LEFT:e=Math.ceil(this.props.buttonRight-t);break;case r.RIGHT:e=Math.ceil(this.props.buttonLeft);break;case r.CENTER:e=Math.ceil((this.props.buttonLeft+this.props.buttonRight-t)/2)}e+t>this.props.maxRight&&(e=this.props.maxRight-t),e=Math.max(0,e),this.ref.style.left=e+"px",this.ref.style.width=t+"px"},t.prototype.render=function(){var e=a("dropdown",this.props.otherClassName,{"dropdown--condensed":this.props.condensed});return i.createElement("div",{className:e,style:c,ref:this.handlePaneRef},this.props.children)},t}(i.Component);t.DropDown=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Component);t.CustomDropDown=i},function(e,t,n){"use strict";function r(e){return{pageValue:e.value.toString()}}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(11),s=n(460),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleInputRef=function(e){e&&!a.hasTouchEvents()&&e.focus()},n.handleInputPageBlur=function(){n.setState(r(n.props))},n.handleInputKeyUp=function(e){e.which==s.KEYCODE_ESCAPE&&n.props.onClose()},n.handleInputPageChange=function(e){var t=e.target.value,r=parseInt(t,10);(""===t||n.isValidPageNumber(r))&&(n.setState({pageValue:t}),n.isValidPageNumber(r)&&n.setPageNumber(r))},n.state=r(n.props),n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){e.value!=this.props.value&&this.setState(r(e))},t.prototype.render=function(){return i.createElement("input",{type:"number",min:"1",max:this.props.pageCount,onBlur:this.handleInputPageBlur,onKeyUp:this.handleInputKeyUp,onChange:this.handleInputPageChange,value:this.state.pageValue,style:this.props.style,ref:this.handleInputRef,"data-qa":this.props.qaLabel})},t.prototype.setPageNumber=function(e){e>0&&e<=this.props.pageCount&&Math.floor(e)===e&&this.props.onChange(e)},t.prototype.isValidPageNumber=function(e){return!isNaN(e)&&e>0&&e<=this.props.pageCount},t}(i.Component);t.InputPageNumber=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(638),a=n(431),s=n(642),u=n(426),c=n(639),l=n(367),p=n(440),h=n(425),f=n(427),d=n(597),m=[u.AnnotationTool.HIGHLIGHT,u.AnnotationTool.ELLIPSE,u.AnnotationTool.RECTANGLE,u.AnnotationTool.TEXT],g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSelectTool=function(e){h.setAnnotationTool(e),p.closeMenu()},t}return r(t,e),t.prototype.render=function(){var e=this,t=m.map(function(t){return o.createElement(s.Button,{active:t==e.props.annotationTool,label:f.ANNOTATION_TOOLS[t].title,icon:!0,onClick:function(){return e.handleSelectTool(t)},key:u.AnnotationTool[t],qaLabel:"textBtn"},o.createElement(a.Icon,{type:f.ANNOTATION_TOOLS[t].icon}))});return o.createElement(i.DropDown,{align:i.DropDownAlign.CENTER,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,maxRight:this.props.maxRight,onOutsideClick:this.props.onOutsideClick},t)},t}(c.CustomDropDown);t.Component=g;var v=function(e,t){return{annotationTool:d.getSelectedAnnotationTool(e)}},y=l.connect(v)(g);t.AnnotationsDropDown=y},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=i("btn",{"btn--icon":this.props.icon},{active:this.props.active},{disabled:this.props.disabled},this.props.otherClassName);return o.createElement("button",{className:e,type:"button","data-qa":this.props.qaLabel,onClick:this.props.onClick,disabled:this.props.disabled},this.props.children,this.props.label)},t}(o.Component);t.Button=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(642),a=n(638),s=n(639),u=n(367),c=n(425),l=n(425),p=n(440),h=n(644),f=[75,100,150,200],d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleZoom=function(e){c.setZoom(e),p.closeMenu()},t.handleZoomToFit=function(){c.setZoom(c.ZOOM_TO_FIT_VALUE),p.closeMenu()},t.handleLayoutChange=function(e){c.setLayout(e),p.closeMenu()},t}return r(t,e),t.prototype.render=function(){var e=this;return o.createElement(a.DropDown,{align:a.DropDownAlign.CENTER,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,maxRight:this.props.maxRight,onOutsideClick:this.props.onOutsideClick},l.LAYOUT_MODES.map(function(t){return o.createElement(i.Button,{label:h.layoutToTitle(t),qaLabel:"layout"+l.LayoutMode[t],key:l.LayoutMode[t],onClick:function(){return e.handleLayoutChange(t)},active:e.props.layout==t})}),o.createElement("div",{className:"dropdown__separator"}),f.map(function(t,n){return o.createElement(i.Button,{key:n,label:t+"%",qaLabel:"zoom"+t,onClick:function(){return e.handleZoom(t)}})}),o.createElement("div",{className:"dropdown__separator"}),o.createElement(i.Button,{label:h.zoomToTitle(c.ZOOM_TO_FIT_VALUE),key:"fit",qaLabel:"zoomToFit",onClick:this.handleZoomToFit,active:this.props.zoom==c.ZOOM_TO_FIT_VALUE}))},t}(s.CustomDropDown);t.Component=d;var m=function(e,t){return{zoom:e.userSettings.zoom,layout:e.userSettings.layout}},g=u.connect(m)(d);t.ZoomLayoutDropDown=g},function(e,t,n){"use strict";function r(e){return null!=u.SUBTITLE_LANGUAGE_TITLES[e]}function o(e){return u.SUBTITLE_LANGUAGE_TITLES[e]||u.SUBTITLE_LANGUAGE_TITLE_OFF}function i(e){var t=u.PLAY_SPEED_TITLES[e];return t?t:(console.warn("Invalid play speed "+e),"Normal")}function a(e){var t=u.LAYOUT_MODE_DETAILS[e];return t?t.title:(console.warn("Invalid layout "+e),u.LAYOUT_MODE_DETAILS[u.LayoutMode.CONTINUOUS].title)}function s(e){return e==u.ZOOM_TO_FIT_VALUE?"Zoom to Fit":100==e?"Actual Size":Math.round(e)+"%"}var u=n(425);t.isSubtitleOption=r,t.subtitleToTitle=o,t.playSpeedToTitle=i,t.layoutToTitle=a,t.zoomToTitle=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(638),s=n(426),u=n(646),c=n(639),l=n(440),p=n(425),h=n(427),f=[s.AnnotationColor.GREEN,s.AnnotationColor.YELLOW,s.AnnotationColor.CYAN,s.AnnotationColor.PURPLE,s.AnnotationColor.BLUE],d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){p.setAnnotationColor(e),l.closeMenu()},t}return r(t,e),t.prototype.render=function(){var e=this,t=f.map(function(t){return o.createElement(u.ColorSwatch,{color:h.ANNOTATION_COLORS[t].color,size:u.Size.REGULAR,position:u.Position.BLOCK,onClick:function(){return e.handleClick(t)},qaLabel:h.ANNOTATION_COLORS[t].title,key:t})});return o.createElement(a.DropDown,{align:a.DropDownAlign.CENTER,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,maxRight:this.props.maxRight,onOutsideClick:this.props.onOutsideClick,condensed:!0},t)},t}(c.CustomDropDown);t.Component=d;var m=function(e,t){return{page:e.view.page}},g=i.connect(m)(d);t.AnnotationColorDropDown=g},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(401);!function(e){e[e.REGULAR=0]="REGULAR",e[e.MINI=1]="MINI"}(r=t.Size||(t.Size={}));var s;!function(e){e[e.REGULAR=0]="REGULAR",e[e.OPACITY=1]="OPACITY"}(s=t.Theme||(t.Theme={}));var u;!function(e){e[e.REGULAR=0]="REGULAR",e[e.BLOCK=1]="BLOCK"}(u=t.Position||(t.Position={}));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=a("color-swatch",{"color-swatch--mini":this.props.size==r.MINI},{"color-swatch--block":this.props.position==u.BLOCK});return i.createElement("span",{className:e,style:{backgroundColor:this.props.color},"data-qa":this.props.qaLabel,onClick:this.props.onClick})},t}(i.Component);t.ColorSwatch=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(638),a=n(403),s=n(639),u=n(367),c=n(11),l=n(16),p=n(617),h=n(427),f=n(440),d=n(460),m=1e3,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTextAreaRef=function(e){null==e||c.isMobileDevice()||a.placeCaretAtEndAndScroll(e),t.removeDisableParentScrolling&&(t.removeDisableParentScrolling(),t.removeDisableParentScrolling=null),e&&(t.removeDisableParentScrolling=p.disableParentScrolling(e))},t.handleKeyUp=function(e){e.which==d.KEYCODE_ESCAPE?f.closeMenu():t.setValue(e.target.value,!1)},t.handleChange=function(e){t.setValue(e.target.value,!0)},t.debouncedSaveBookNotes=l._debounce(function(e){t.saveBookNotes(e)},m),t}return r(t,e),t.prototype.render=function(){return o.createElement(i.DropDown,{align:i.DropDownAlign.CENTER,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,maxRight:this.props.maxRight,otherClassName:"dropdown--book-notes",onOutsideClick:this.props.onOutsideClick,condensed:!0},o.createElement("div",{className:"dropdown--book-notes__inner"},o.createElement("textarea",{rows:10,"data-qa":"notesText",onKeyUp:this.handleKeyUp,onChange:this.handleChange,defaultValue:this.props.bookNotes,ref:this.handleTextAreaRef})))},t.prototype.setValue=function(e,t){t?this.saveBookNotes(e):this.debouncedSaveBookNotes(e)},t.prototype.saveBookNotes=function(e){h.setBookNotes(e)},t}(s.CustomDropDown);t.Component=g;var v=function(e,t){return{bookNotes:e.annotations.bookNotes}},y=u.connect(v)(g);t.BookNotesDropDown=y},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(401),s=n(431),u=n(639),c=n(638),l=n(649),p=n(652),h={width:"250px"};!function(e){e[e.Search=0]="Search",e[e.Bookmarks=1]="Bookmarks"}(r=t.TabsTypes||(t.TabsTypes={}));var f=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOpenTab=function(e){n.setState({activeTab:e})},n.state={activeTab:r.Search},n}return o(t,e),t.prototype.render=function(){var e=this;return i.createElement(c.DropDown,{align:c.DropDownAlign.CENTER,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,maxRight:this.props.maxRight,otherClassName:"text-center",onOutsideClick:this.props.onOutsideClick,condensed:!0},i.createElement("div",{className:"panel",style:h},i.createElement("div",{className:"panel__pane-tabs"},i.createElement("button",{className:a("panel__pane-tabs__item",{active:this.state.activeTab===r.Search}),onClick:function(){return e.handleOpenTab(r.Search)}},i.createElement(s.Icon,{type:s.IconType.SEARCH})),i.createElement("button",{className:a("panel__pane-tabs__item",{active:this.state.activeTab===r.Bookmarks}),"data-qa":"searchBookmarks",onClick:function(){return e.handleOpenTab(r.Bookmarks)}},i.createElement(s.Icon,{type:s.IconType.BOOKMARK}))),i.createElement("div",null,this.state.activeTab===r.Search?i.createElement(l.SearchDropDown,{store:this.props.store}):i.createElement(p.MarksDropDown,{store:this.props.store}))))},t}(u.CustomDropDown);t.SearchMarksDropDown=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(650),s=n(11),u=n(387),c=n(441),l=n(442),p=n(440),h=n(651),f=n(16),d=n(617),m=n(460),g=n(460),v="player_version",y="No search results found.",b="Searched here",E={overflow:"auto"},w=function(e){function t(t){var n=e.call(this,t)||this;return n.handleInputKeyUp=function(e){var t=e.which||e.keyCode;if(t==g.KEYCODE_ESCAPE)p.closeMenu();else if(t==g.KEYCODE_ENTER||s.isIOSDevice()&&e.key===m.IOS_KEY_ENTER){var r=e.target;return s.hasTouchEvents()&&r.blur(),c.searchText(r.value,n.props.page),!1}return!0},n.handleInputChange=function(e){n.setState({text:e.target.value})},n.handleListRef=function(e){n.listRef=e,n.updateIfNeeded(),n.removeDisableParentScrolling&&(n.removeDisableParentScrolling(),n.removeDisableParentScrolling=null),e&&(n.removeDisableParentScrolling=d.disableParentScrolling(e))},n.handleHereRef=function(e){n.hereRef=e,n.updateIfNeeded()},n.handleListScroll=f._throttle(function(){n.updateIfNeeded()},u.THROTTLE_DOM_EVENTS),n.handleHereClick=function(){c.clearHighlight(),l.setPage(n.props.search.initialPage)},n.handleResultClick=function(e){c.highlight(e.pageIdx,e.positions)},n.handleInputRef=function(e){n.inputRef=e},n.state={text:t.search.searchText||""},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.search.searchText!=this.props.search.searchText&&(this.scrolledToHere=!1,this.setState({text:e.search.searchText||""}))},t.prototype.componentDidUpdate=function(){this.updateIfNeeded()},t.prototype.componentDidMount=function(){this.inputRef&&!s.isMobileDevice()&&this.inputRef.focus()},t.prototype.render=function(){var e=this.renderLines();return o.createElement("div",{className:"panel__pane"},o.createElement("input",{type:"search",maxLength:a.MAX_TEXT_LENGTH,placeholder:"Search",className:"panel__pane-search-input",value:this.state.text,"data-qa":"searchTextArea",onKeyUp:this.handleInputKeyUp,onChange:this.handleInputChange,ref:this.handleInputRef}),o.createElement("div",{style:E},o.createElement("ul",{className:"panel__pane-list",ref:this.handleListRef,onScroll:this.handleListScroll},e)))},t.prototype.renderLines=function(){var e=this,t=[];if(this.props.search.searchText==v){var n=["Player: "+u.CONTROL_VERSION,"Builder: "+this.props.book.version,"Builder partner id: "+this.props.book.partnerId,"Book id: "+this.props.book.bookId,"Book hash: "+this.props.book.contentHash,"Book created: "+this.props.book.created].join("\n");t.push(o.createElement("li",{key:"pv"},o.createElement("span",null,n)))}else if(this.props.search.results)if(0==this.props.search.results.length)t.push(o.createElement("li",{key:"nr"},o.createElement("span",null,y)));else{var r=!1;this.props.search.results.forEach(function(n){!r&&n.pageIdx>=e.props.search.initialPage&&(r=!0,t.push(e.createHereItem())),t.push(o.createElement("li",{"data-qa":"searchRow",key:n.pageIdx+","+n.positions[0],onClick:function(){return e.handleResultClick(n)}},o.createElement("span",{className:"highlightPage"},"Page "+(n.pageIdx+1)," "),o.createElement("span",{dangerouslySetInnerHTML:{__html:h.convertExcerptHighlight(n.excerpt)}})))}),r||t.push(this.createHereItem())}return t},t.prototype.createHereItem=function(){return o.createElement("li",{key:"sh",onClick:this.handleHereClick,ref:this.handleHereRef},o.createElement("span",null,b))},t.prototype.updateIfNeeded=function(){this.listRef&&this.hereRef&&(this.scrollToHereIfNeeded(),this.requestMoreIfNeeded())},t.prototype.requestMoreIfNeeded=function(){this.listRef&&(0==this.listRef.scrollTop?this.props.search.hasMoreBackward&&!this.props.search.isRequesting&&c.searchMore(!0):this.listRef.scrollTop+this.listRef.offsetHeight>=this.listRef.scrollHeight&&this.props.search.hasMoreForward&&!this.props.search.isRequesting&&c.searchMore(!1))},t.prototype.scrollToHereIfNeeded=function(){this.hereRef&&!this.scrolledToHere&&(this.listRef.scrollTop=this.hereRef.offsetTop,this.scrolledToHere=!0)},t}(o.Component);t.Component=w;var x=function(e,t){return{book:e.metadata.book,environmentSize:e.environment.size,page:e.view.page,search:e.search}},T=i.connect(x)(w);t.SearchDropDown=T},function(e,t,n){"use strict";var r=n(179);t.MAX_TEXT_LENGTH=150;var o=function(){function e(e){this.searchIndex=e,this.words=this.searchIndex.words.split(" ")}return e.prototype.findFirstMatchingWordIndex=function(e){e=e.toLowerCase();for(var t,n=0,r=this.words.length-1;n<=r;)t=Math.floor((n+r)/2),e>this.words[t].toLowerCase()?n=t+1:r=t-1;return t=r,t<this.words.length-1&&(t==-1||e>this.words[t].toLowerCase())?t+1:t},e.prototype.getAnnotationExcerpts=function(t,n,r,o){for(var i={bookmarks:[],highlights:[]},a=0;a<t.length;a++){var s=this.searchIndex.pgWords[t[a]].length,u=this.getPageRangeExcerptEx(t[a],0,s-1,void 0,e.ANNOTATION_EXCERPT_MAX_CHARS);i.bookmarks.push(u)}for(var a=0;a<n.length;a++){var u=this.getPageRangeExcerptEx(n[a].pageIdx,n[a].firstWordIdx,n[a].lastWordIdx,void 0,e.ANNOTATION_EXCERPT_MAX_CHARS);i.highlights.push(u)}setTimeout(function(){r(i)},e.ASYNC_CALL_WAIT)},e.prototype.getFoundWordPositions=function(e){var t=this.lastFoundPageWordPositions[e];if(void 0==t){t=[];for(var n=this.searchIndex.pgWords[e],r=n.length,o=this.lastFoundWordRanges.length,i=0;i<r;i++)for(var a=n[i],s=0;s<o;s++)if(a>=this.lastFoundWordRanges[s][0]&&a<=this.lastFoundWordRanges[s][1]){t.push(i);break}this.lastFoundPageWordPositions[e]=t}return t},e.prototype.getPageRangeExcerptEx=function(t,n,r,o,i){for(var a=this.searchIndex.pgWords[t],s="",u=n;u<=r;u++){var c=this.words[a[u]];if(s+=u==o?" <hl>"+c+"</hl>":s.length>0&&/^[a-z0-9]/i.test(c)?" "+c:c,i<=s.length)break}return s+=" ",i&&(s=e.shortenAnnotationExcerpt(s,i)),s},e.prototype.getSearchExcerpt=function(t){var n=this.getFoundWordPositions(t);if(void 0!=n){for(var r=this.searchIndex.pgWords[t].length,o="",i=e.SEARCH_EXCERPT_MAX_WORDS,a=0,s=-1;a<n.length&&i>1;){var u=n[a],c=Math.max(s+1,u-e.SEARCH_EXCERPT_WORDS_AROUND),l=e.getPreviousVal(this.searchIndex.paragraphs[t],u);l+1>c&&(c=l+1);var p=r-1;a<n.length-1&&(p=Math.min(p,n[a+1]-1));var h=e.getNextVal(this.searchIndex.paragraphs[t],u);h<p&&(p=h);var f=!1;p>u+e.SEARCH_EXCERPT_WORDS_AROUND&&(f=!0,p=u+e.SEARCH_EXCERPT_WORDS_AROUND);var d=p-c+1;d>i&&(p=Math.max(u,p-Math.floor((d-i)/2)),c=p-i+1),i-=p-c+1,o+=this.getPageRangeExcerptEx(t,c,p,u,void 0),f&&(o+="... "),s=p,a++}return o}},e.prototype.needWordPages=function(){if(void 0==this.wordPages){this.wordPages=[],this.wordPages[this.words.length-1]=void 0;for(var e=this.searchIndex.pgWords.length-1;e>=0;e--)for(var t=this.searchIndex.pgWords[e].length-1;t>=0;t--){var n=this.searchIndex.pgWords[e][t];void 0==this.wordPages[n]?this.wordPages[n]=[e]:this.wordPages[n][this.wordPages[n].length-1]!=e&&n>0&&this.wordPages[n].push(e)}}},e.parseSearchText=function(n){n=n.replace(/[\.,\/#!$%\^&\*;:{}=_'`~()]/g," ").substr(0,t.MAX_TEXT_LENGTH).toLowerCase();for(var o=r.trim(n).split(/\s+/),i=0;i<o.length;i++)for(var a=0;a<o[i].length;a++){var s=o[i].charCodeAt(a);if(s<33||s>126){o[i]=o[i].substr(0,a);break}}for(var i=o.length-1;i>=0;i--)o[i].length<e.MIN_SEARCH_WORD_LENGTH&&o.splice(i,1);var u=[];return r.each(o,function(e,t){r.inArray(t,u)===-1&&u.push(t)}),u},e.prototype.searchFull=function(t){this.needWordPages(),this.lastSearchText=t,this.lastFoundPages=[],this.lastFoundPageWordPositions={},this.lastFoundWordRanges=[];var n=e.parseSearchText(t);if(0!=n.length){for(var r=n.length-1;r>=0;r--)for(var o=n[r].toLowerCase(),i=this.findFirstMatchingWordIndex(o),a=i;;a++)if(0==this.words.length)this.lastFoundWordRanges[r]=[0,-1];else{var s=this.words[a].toLowerCase();if(a==this.words.length||o!=s.substr(0,o.length)){this.lastFoundWordRanges[r]=[i,a-1];break}}for(var u={},c=this.lastFoundWordRanges[0][0],l=this.lastFoundWordRanges[0][1],a=c;a<=l;a++)for(var p=this.wordPages[a].length-1;p>=0;p--)u[this.wordPages[a][p]]=0;for(var r=1;r<n.length;r++)for(var c=this.lastFoundWordRanges[r][0],l=this.lastFoundWordRanges[r][1],a=c;a<=l;a++)for(var p=this.wordPages[a].length-1;p>=0;p--){var h=this.wordPages[a][p];u[h]==r-1&&(u[h]=r)}for(var f=this.searchIndex.pgWords.length,d=n.length-1,r=0;r<f;r++)u[r]==d&&this.lastFoundPages.push(r)}},e.prototype.searchText=function(t,n,r,o,i,a,s){t!=this.lastSearchText&&this.searchFull(t);for(var u=0,c=this.lastFoundPages.length-1,l=c,p=1;p<=c;p++)if(this.lastFoundPages[p]>n){l=p-1;break}o||(c=this.lastFoundPages[l]<=n?l:l-1),r||(u=this.lastFoundPages[l]>=n?l:l+1);var h=Math.min(c,Math.max(u,l-Math.floor(i/2)+i));u=Math.max(u,h-i+1),c=Math.min(c,u+i-1);var f=[],d=!1,m=!1;u<=c&&(d=u>0,m=c<this.lastFoundPages.length-1);for(var p=u;p<=c;p++){var g=this.lastFoundPages[p],v={pageIdx:g,positions:this.getFoundWordPositions(g),excerpt:this.getSearchExcerpt(g)};f.push(v)}var y={searchText:t,results:f,hasMoreBackward:d,hasMoreForward:m};setTimeout(function(){a(y)},e.ASYNC_CALL_WAIT)},e.prototype.searchSelection=function(t,n,r,o,i,a){var s=this.getPageRangeExcerptEx(t,n,r,void 0,e.ANNOTATION_EXCERPT_MAX_CHARS);this.searchText(s,t,!0,!0,o,i,a)},e.shortenAnnotationExcerpt=function(e,t){return void 0==e?"":e.length>t?e.substring(0,t-4)+"...":e},e.getNextVal=function(e,t){for(var n=0;n<e.length;n++)if(e[n]>t)return e[n]},e.getPreviousVal=function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]<t)return e[n]},e}();o.MIN_SEARCH_WORD_LENGTH=2,o.SEARCH_EXCERPT_WORDS_AROUND=5,o.SEARCH_EXCERPT_MAX_WORDS=30,o.ANNOTATION_EXCERPT_MAX_CHARS=150,o.ASYNC_CALL_WAIT=10,o.MAX_RESULTS=1e3,t.LocalTextServer=o},function(e,t){"use strict";function n(e){return e=e.replace(/<hl>/g,"<span class='highlightWord'>"),e.replace(/<\/hl>/g,"</span>")}t.convertExcerptHighlight=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(440),s=n(651),u=n(653),c=n(442),l=n(617),p=(m={},m[u.AnnotationExcerptType.BOOKMARK]={title:"Bookmark",className:"annotation-header--bookmark"},m[u.AnnotationExcerptType.NOTE]={title:"Note",className:"annotation-header--note"},m[u.AnnotationExcerptType.HIGHLIGHT]={title:"Highlight",className:"annotation-header--highlight"},m[u.AnnotationExcerptType.TEXT]={title:"Text",className:""},m),h=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClose=function(){a.closeMenu()},n.handleExcerptClick=function(e){c.setPage(e)},n.handleRef=function(e){n.removeDisableParentScrolling&&(n.removeDisableParentScrolling(),n.removeDisableParentScrolling=null),e&&(n.removeDisableParentScrolling=l.disableParentScrolling(e))},n.state={excerpts:[]},n}return r(t,e),t.prototype.componentWillMount=function(){this.assignExcerptsIntoStateWhenAvailable()},t.prototype.componentWillReceiveProps=function(e){e.annotationsListing!=this.props.annotationsListing&&this.assignExcerptsIntoStateWhenAvailable()},t.prototype.render=function(){var e=this,t=this.state.excerpts.map(function(t,n){return o.createElement("li",{key:n,onClick:function(){return e.handleExcerptClick(t.pgIdx)},"data-qa":"page"+u.AnnotationExcerptType[t.type]},o.createElement("span",{className:"annotation-header "+p[t.type].className},p[t.type].title+" / Page "+e.props.pagesProperties[t.pgIdx].name),o.createElement("br",null),o.createElement("span",{dangerouslySetInnerHTML:{__html:s.convertExcerptHighlight(t.excerpt)}}))});return o.createElement("div",{className:"panel__pane"},o.createElement("span",{className:"panel__pane--header"},"Bookmarks"),o.createElement("ul",{className:"panel__pane-list",ref:this.handleRef},t))},t.prototype.assignExcerptsIntoStateWhenAvailable=function(){var e=this;if(this.props.annotationsListing){var t=this.props.annotationsListing;t.then(function(n){t==e.props.annotationsListing&&e.setState({excerpts:n
})}).catch(function(){t==e.props.annotationsListing&&e.setState({excerpts:[]})})}else this.setState({excerpts:[]})},t}(o.Component);t.Component=h;var f=function(e,t){return{annotationsListing:u.getAnnotationsListing(e),page:e.view.page,pagesProperties:e.metadata.book?e.metadata.book.pages:null}},d=i.connect(f)(h);t.MarksDropDown=d;var m},function(e,t,n){"use strict";function r(e){return void 0==e?"":e.length>u?e.substring(0,u-4)+"...":e}var o,i=n(394),a=n(10),s=n(182),u=150;!function(e){e[e.BOOKMARK=0]="BOOKMARK",e[e.NOTE=1]="NOTE",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.TEXT=3]="TEXT"}(o=t.AnnotationExcerptType||(t.AnnotationExcerptType={})),t.getAnnotationsListing=i.createSelector(function(e){return e.search.textServerReady},function(e){return e.annotations&&e.annotations.pages?e.annotations.pages:null},function(e,t){if(!e)return s.Promise.reject("Text server not ready yet");var n=[],i=[];return t.forEach(function(e,t){e.bookmarked&&n.push(t),e.highlights&&Array.prototype.push.apply(i,e.highlights.map(function(e){return{pageIdx:t,firstWordIdx:e.fw,lastWordIdx:e.lw}}))}),i.sort(function(e,t){return e.pageIdx==t.pageIdx?e.firstWordIdx-t.firstWordIdx:e.pageIdx-t.pageIdx}),new s.Promise(function(e,s){a.Context.textServer.getAnnotationExcerpts(n,i,function(a){var s=[],u=0,c=0;t.forEach(function(e,t){for(u<n.length&&n[u]==t&&(s.push({type:o.BOOKMARK,pgIdx:t,excerpt:a.bookmarks[u]}),u++),e.notes&&e.notes.forEach(function(e){var n=r(e.note);s.push({type:o.NOTE,pgIdx:t,excerpt:n})});c<i.length&&i[c].pageIdx==t;)s.push({type:o.HIGHLIGHT,pgIdx:t,excerpt:a.highlights[c]}),c++;if(e.textAnnotations)for(var l in e.textAnnotations)if(e.textAnnotations.hasOwnProperty(l)){var p=e.textAnnotations[l].t;p=r(p),s.push({type:o.TEXT,pgIdx:t,excerpt:p})}}),e(s)},function(){s()})})})},function(e,t,n){"use strict";function r(){l.openMenu(s.MenuType.PlaySettings)}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(638),s=n(426),u=n(639),c=n(367),l=n(440),p=n(425),h=n(655),f=n(644),d=n(656),m=n(657),g=n(658),v=n(642),y=n(659),b=n(439),E=n(11),w="Subtitles/CC",x="Speed",T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleBackClick=function(){r()},t.handleOpenMenu=function(e){l.openMenu(e)},t.handleLanguageChange=function(e){p.setSubtitleLanguage(e),r()},t.handlePlaySpeedChange=function(e){p.setPlaySpeed(e),r()},t.handleShowNotesClick=function(){t.props.lectureNotesOn?p.disableLectureNotes():p.enableLectureNotes()},t}return o(t,e),t.prototype.render=function(){var e=null,t=null;switch(this.props.menuOpen){case s.MenuType.PlaySettings:t=this.renderMainMenu();break;case s.MenuType.SubtitleLanguage:e=w,t=i.createElement(m.SubtitleLanguageSubMenu,{bookSubtitleLanguages:this.props.bookSubtitleLanguages,subtitleLanguage:this.props.subtitleLanguage,onChange:this.handleLanguageChange});break;case s.MenuType.PlaySpeed:e=x,t=i.createElement(g.PlaySpeedSubMenu,{value:this.props.playSpeed,onChange:this.handlePlaySpeedChange})}var n=e?i.createElement(v.Button,{qaLabel:"menuBackBtn",onClick:this.handleBackClick},"< "+e):null,r=e?i.createElement("div",{className:"dropdown__separator"}):null;return i.createElement(a.DropDown,{align:a.DropDownAlign.CENTER,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,maxRight:this.props.maxRight,onOutsideClick:this.props.onOutsideClick},n,r,t)},t.prototype.renderMainMenu=function(){var e=this,t=[];this.props.bookSubtitleLanguages.length>0&&t.push(i.createElement(d.MenuItem,{label:w,value:f.subtitleToTitle(this.props.subtitleLanguage)+" >",qaLabel:"subtitleMenuBtn",key:"subs",onClick:function(){return e.handleOpenMenu(s.MenuType.SubtitleLanguage)}})),E.isIeBrowser()||t.push(i.createElement(d.MenuItem,{label:x,value:f.playSpeedToTitle(this.props.playSpeed)+" >",qaLabel:"speedMenuBtn",key:"speed",onClick:function(){return e.handleOpenMenu(s.MenuType.PlaySpeed)}}));var n=!!this.props.pageLectureWithNotesControlName;return i.createElement("div",null,i.createElement(d.MenuItem,{active:this.props.lectureNotesOn,disabled:!n,label:"Instructor Notes",value:this.props.lectureNotesOn?"ON":"OFF",qaLabel:"instNotesPg"+(this.props.page+1),onClick:this.handleShowNotesClick}),t)},t}(u.CustomDropDown);t.Component=T;var C=function(e,t){var n=b.getPageLectureWithNotes(e)?y.getPageLectureControlName(e):null;return{bookSubtitleLanguages:h.getBookSubtitleLanguages(e),lectureNotesOn:e.userSettings.lectureNotesOn,lectureState:n?e.lectures[n]:null,menuOpen:e.toolbar.menuOpen,page:e.view.page,pageCount:e.metadata.book?e.metadata.book.pages.length:0,pageLectureWithNotesControlName:n,playSpeed:e.userSettings.playSpeed,subtitleLanguage:e.userSettings.subtitleLanguage}},N=c.connect(C)(T);t.PlaySettingsDropDown=N},function(e,t,n){"use strict";var r=n(394),o=n(425),i=n(395);t.getBookSubtitleLanguages=r.createSelector(function(e){return e.metadata.book.videos},i.getComputedPageMetadataByIndex,function(e,t){function n(e){e&&e.forEach(function(e){r[e.lang]=!0})}var r={};for(var i in e)e.hasOwnProperty(i)&&n(e[i].subs);t.forEach(function(e){e.lectures&&e.lectures.forEach(function(e){n(e.overlayNote.subs)})});var a=[];return o.SUBTITLE_LANGUAGES.forEach(function(e){r[e]&&a.push(e)}),a})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(642),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement(i.Button,{active:this.props.active,disabled:this.props.disabled,icon:!0,qaLabel:this.props.qaLabel,onClick:this.props.onClick,otherClassName:"menuitem"},o.createElement("span",{className:"menuitem__left"},this.props.label),o.createElement("span",{className:"menuitem__right"},this.props.value))},t}(o.Component);t.MenuItem=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(425),a=n(644),s=n(642),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this,t=this.props.bookSubtitleLanguages.map(function(t){return o.createElement(s.Button,{label:a.subtitleToTitle(t),qaLabel:"lang"+t,key:t,onClick:function(){return e.props.onChange(t)},active:e.props.subtitleLanguage==t})});return o.createElement("div",null,o.createElement(s.Button,{label:i.SUBTITLE_LANGUAGE_TITLE_OFF,qaLabel:"langOff",key:"none",onClick:function(){return e.props.onChange(i.SUBTITLE_LANGUAGE_OFF)},active:!a.isSubtitleOption(this.props.subtitleLanguage)}),t)},t}(o.Component);t.SubtitleLanguageSubMenu=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(425),a=n(644),s=n(642),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this,t=i.PLAY_SPEEDS.map(function(t){return o.createElement(s.Button,{label:a.playSpeedToTitle(t),qaLabel:"playSpeed"+t,key:t.toString(),onClick:function(){return e.props.onChange(t)},active:e.props.value==t})});return o.createElement("div",null,t)},t}(o.Component);t.PlaySpeedSubMenu=u},function(e,t,n){"use strict";var r=n(394),o=n(188);t.getPageLectureControlName=r.createSelector(function(e){return e.view.page},function(e){return o.pageLectureControlName(e)})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(642),a=n(431),s=n(639),u=n(367),c=n(638),l=n(10),p=n(440),h=n(640),f=n(460),d=function(e){function t(t){var n=e.call(this,t)||this;return n.handleFirstPageChange=function(e){n.setState({firstPage:e})},n.handleLastPageChange=function(e){n.setState({lastPage:e})},n.handleClose=function(){p.closeMenu()},n.handleKeyUp=function(e){e.which==f.KEYCODE_ESCAPE&&p.closeMenu()},n.handleInstructorNotesChange=function(e){n.setState({includeInstructorNotes:e.target.checked})},n.handleStudentNotesChange=function(e){n.setState({includeStudentNotes:e.target.checked})},n.handlePrintClick=function(){l.Context.controlSettings.print({pdfFirstPage:n.state.firstPage-1,pdfLastPage:n.state.lastPage-1,includeAnnotations:n.state.includeInstructorNotes,includeStudentAnnotations:n.state.includeStudentNotes})},n.state={firstPage:1,lastPage:t.pageCount,includeInstructorNotes:!1,includeStudentNotes:!1},n}return r(t,e),t.prototype.render=function(){var e=!l.Context.controlSettings.enablePrintStudentAnnotations,t=!l.Context.controlSettings.enablePrintAnnotations;return o.createElement(c.DropDown,{align:c.DropDownAlign.LEFT,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,maxRight:this.props.maxRight,otherClassName:"text-center",onOutsideClick:this.props.onOutsideClick},o.createElement("label",null,"First page:",o.createElement(h.InputPageNumber,{value:this.state.firstPage,qaLabel:"firstPageInput",pageCount:this.props.pageCount,onChange:this.handleFirstPageChange,onClose:this.handleClose})),o.createElement("label",null,"Last page:",o.createElement(h.InputPageNumber,{value:this.state.lastPage,qaLabel:"lastPageInput",pageCount:this.props.pageCount,onChange:this.handleLastPageChange,onClose:this.handleClose})),t?null:o.createElement("label",{"data-qa":"instructorNotesCheck"},"Instructor notes:",o.createElement("input",{type:"checkbox",checked:this.state.includeInstructorNotes,onClick:this.handleInstructorNotesChange,onKeyUp:this.handleKeyUp})),e?null:o.createElement("label",{"data-qa":"studentNotesCheck"},"Student notes:",o.createElement("input",{type:"checkbox",checked:this.state.includeStudentNotes,onClick:this.handleStudentNotesChange,onKeyUp:this.handleKeyUp})),o.createElement(i.Button,{disabled:!this.canPrint(),label:"Print",qaLabel:"confirmPrintBtn",onClick:this.handlePrintClick},o.createElement(a.Icon,{type:a.IconType.PRINT})))},t.prototype.canPrint=function(){return!isNaN(this.state.firstPage)&&!isNaN(this.state.lastPage)&&this.state.firstPage>=1&&this.state.firstPage<=this.props.pageCount&&this.state.lastPage>=1&&this.state.lastPage<=this.props.pageCount&&this.state.firstPage<=this.state.lastPage},Object.defineProperty(t.prototype,"includeInstructorNotes",{get:function(){return this.props.allowInstructorNotes&&this.state.includeInstructorNotes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"includeStudentNotes",{get:function(){return this.props.allowStudentNotes&&this.state.includeStudentNotes},enumerable:!0,configurable:!0}),t}(s.CustomDropDown);t.Component=d;var m=function(e,t){return{pageCount:e.metadata.book?e.metadata.book.pages.length:0}},g=u.connect(m)(d);t.PrintDropdown=g},function(e,t,n){"use strict";var r=n(394),o=n(387);t.getViewportClientRectWithoutToolbar=r.createSelector(function(e){return e.environment},function(e){var t=e.size.width>o.MENU_COLLAPSED_MAXWIDTH?o.TOOLBAR_HEIGHT:o.TOOLBAR_HEIGHT_COLLAPSED;return{left:0,top:0,right:e.size.width,bottom:e.size.height-t,width:e.size.width,height:e.size.height-t}})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(426),a=n(367),s=n(601),u=n(599),c=n(440),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement(s.ToolbarMenuButton,{active:this.props.menuOpen,size:u.ToolbarButtonSize.REGULAR,theme:u.ToolbarButtonTheme.REGULAR,height:u.ToolbarButtonHeight.REGULAR,qaLabel:"navigationBtn",title:"Page navigation",onClose:function(){return c.closeMenu(i.MenuType.Navigation)},onOpen:function(){return c.openMenu(i.MenuType.Navigation)},otherClassName:"pageIndication"},o.createElement("span",{className:"pageIndication__text label"},"PAGE")," ",o.createElement("span",{className:"pageIndication__page"},this.props.page+1)," ",o.createElement("span",{className:"pageIndication__text"},"/ ",this.props.pageCount))},t}(o.Component);t.Component=l;var p=function(e,t){return{menuOpen:e.toolbar.menuOpen==i.MenuType.Navigation,page:e.view.page,pageCount:e.metadata.book?e.metadata.book.pages.length:0}},h=a.connect(p)(l);t.ToolbarCenterPane=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(426),a=n(367),s=n(599),u=n(601),c=n(431),l=n(440),p=n(425),h=n(10),f=n(429),d=n(427),m=n(646),g=n(430),v=n(597),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDeleteAnnotation=function(){g.deleteSelectedAnnotation()},t.handlePlaylistClick=function(){t.props.userSettings.playlistOpen?p.closePlaylist():p.openPlaylist()},t}return r(t,e),t.prototype.render=function(){var e=h.Context.controlSettings.hideMarks?null:this.createMenuButton({menuType:i.MenuType.BookNotes,children:o.createElement(c.Icon,{type:c.IconType.NOTEBOOK}),onlyIcon:!0,qaLabel:"notes",title:"Notes"}),t=h.Context.controlSettings.hideMarks?null:this.createMenuButton({menuType:i.MenuType.Annotations,children:o.createElement(c.Icon,{type:d.ANNOTATION_TOOLS[this.props.annotationTool].icon}),onlyIcon:!0,qaLabel:"annotations",title:"Annotations"}),n=this.props.selectedVisualAnnotation?this.createMenuButton({menuType:i.MenuType.AnnotationColor,qaLabel:"annotColorMenuBtn",title:"Annotation color",children:o.createElement(m.ColorSwatch,{color:d.ANNOTATION_COLORS[this.props.selectedVisualAnnotation.c].color,size:m.Size.MINI})}):null,r=this.props.selectedVisualAnnotation?o.createElement(s.ToolbarButton,{size:s.ToolbarButtonSize.REGULAR,theme:s.ToolbarButtonTheme.REGULAR,height:s.ToolbarButtonHeight.REGULAR,qaLabel:"deleteAnnotationBtn",title:"Delete annotation",onClick:this.handleDeleteAnnotation},o.createElement(c.Icon,{type:c.IconType.DELETE})):null,a=r?null:this.createMenuButton({menuType:i.MenuType.Search,children:o.createElement(c.Icon,{type:c.IconType.SEARCH}),disabled:!this.props.textServerReady,onlyIcon:!0,qaLabel:"search",title:"Search"}),u=r||!h.Context.controlSettings.print?null:this.createMenuButton({menuType:i.MenuType.Print,children:o.createElement(c.Icon,{type:c.IconType.PRINT}),disabled:!1,onlyIcon:!0,qaLabel:"printBtn",title:"Print"}),l=this.props.hasPlaylist&&h.Context.controlSettings.enablePlaylist?o.createElement(s.ToolbarButton,{size:s.ToolbarButtonSize.REGULAR,theme:s.ToolbarButtonTheme.BLUE,height:s.ToolbarButtonHeight.REGULAR,onClick:this.handlePlaylistClick,active:this.props.userSettings.playlistOpen,qaLabel:"togglePlaylistBtn",title:this.props.userSettings.playlistOpen?"Close playlist":"Open playlist",onlyIcon:!0},o.createElement(c.Icon,{type:c.IconType.TOC})):null;return o.createElement("div",null,o.createElement("div",{className:"menu__separator"}),e,e?o.createElement("div",{className:"menu__separator"}):null,t,n?o.createElement("div",{className:"menu__separator"}):null,n,r?o.createElement("div",{className:"menu__separator"}):null,r,a?o.createElement("div",{className:"menu__separator"}):null,a,u?o.createElement("div",{className:"menu__separator"}):null,u,l)},t.prototype.createMenuButton=function(e){var t=this.props.menuOpen==e.menuType||e.otherMenuTypes&&e.otherMenuTypes.indexOf(this.props.menuOpen)!=-1;return o.createElement(u.ToolbarMenuButton,{active:t,disabled:e.disabled,size:s.ToolbarButtonSize.REGULAR,theme:s.ToolbarButtonTheme.REGULAR,height:s.ToolbarButtonHeight.REGULAR,title:e.title,onOpen:function(){return l.openMenu(e.menuType)},onClose:function(){return l.closeMenu()},onlyIcon:e.onlyIcon,qaLabel:e.qaLabel},e.children," ",e.label)},t}(o.Component);t.Component=y;var b=function(e,t){return{hasPlaylist:e.metadata.book&&e.metadata.book.playlist&&e.metadata.book.playlist.length>0,annotationTool:v.getSelectedAnnotationTool(e),menuOpen:e.toolbar.menuOpen,selectedVisualAnnotation:f.getSelectedVisualAnnotation(e),textServerReady:e.search.textServerReady,userSettings:e.userSettings}},E=a.connect(b)(y);t.ToolbarRightPane=E},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(367),s=n(426),u=n(395),c=n(387),l=n(665),p=n(427),h=n(442),f=n(618),d=n(670),m=n(671),g=n(429),v=n(430),y=n(672),b=n(673),E=n(667),w=n(425),x=n(674),T=n(10),C=n(16),N=n(597),S=n(11),_={position:"absolute",left:0,top:0,right:0,bottom:0,height:"100%",width:"100%",zIndex:c.ZINDEX_ANNOTATIONS_LAYER,pointerEvents:"auto"},O=600,P=20,A=(k={},k[s.AnnotationTool.ELLIPSE]={x:120,y:120},k[s.AnnotationTool.RECTANGLE]={x:200,y:100},k[s.AnnotationTool.TEXT]={x:160,y:100},k);!function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.VISUAL_ANNOTATION=1]="VISUAL_ANNOTATION",e[e.ANCHOR=2]="ANCHOR"}(r||(r={}));var I=function(e){function t(t){var n=e.call(this,t)||this;return n.handleBookmarkClick=function(){p.setBookmarked(n.props.page,!n.props.annotations.bookmarked)},n.handleAnnotationMouseDown=function(e,t,o){n.mouseDownTarget=r.VISUAL_ANNOTATION,n.mouseDownAnnotation={tool:t,id:o},n.startMouseDown(e)},n.handleAnchorMouseDown=function(e,t){n.mouseDownTarget=r.ANCHOR,n.mouseDownAnchorIdx=t,n.mouseDownAnnotation={tool:n.props.selectedVisualAnnotationTool,id:n.props.selectedVisualAnnotation.id},n.startMouseDown(e)},n.handleBackgroundMouseDown=function(e){n.mouseDownTarget=r.BACKGROUND,n.mouseDownAnnotation={tool:n.props.annotationTool,id:null},n.startMouseDown(e)},n.handleNoteClick=function(e){var t=n.props.annotations.notes[e];v.selectWords(n.props.page,t.fw,t.lw),v.startEditing()},n.handleAnnotationsSvgRef=function(e){n.annotationsSvgRef=e},n.handleMouseMove=function(e){return void 0!=n.touchStartAndHoldTimeout?void n.cancelMouseDown():void(n.mouseDownStartPt&&(e.stopImmediatePropagation(),e.preventDefault(),n.throttledDragHandling(e)))},n.throttledDragHandling=C._throttle(function(e){var t=n.getSvgMousePosition(e);if(n.mouseDownIsDragging||f.reachedDragThreshold(n.mouseDownStartPt,t)&&n.startDragging(t),n.mouseDownIsDragging){switch((n.props.selectedVisualAnnotation||n.props.annotationTool===s.AnnotationTool.HIGHLIGHT)&&S.isAndroidDevice()&&document.body.setAttribute("data-scroll","disabled"),n.mouseDownTarget){case r.BACKGROUND:n.mouseDownNewPt2=t;break;case r.VISUAL_ANNOTATION:case r.ANCHOR:var o=n.getMouseDownVisualAnnotation(),i=t.x-n.mouseDownStartPt.x,a=t.y-n.mouseDownStartPt.y;if(n.mouseDownNewPt1={x:o.x,y:o.y},n.mouseDownNewPt2={x:o.x+o.w,y:o.y+o.h},n.mouseDownTarget==r.ANCHOR){var u=d.ANCHOR_POSITIONS[n.mouseDownAnchorIdx].x,c=d.ANCHOR_POSITIONS[n.mouseDownAnchorIdx].y;0==u?n.mouseDownNewPt1.x+=i:1==u&&(n.mouseDownNewPt2.x+=i),0==c?n.mouseDownNewPt1.y+=a:1==c&&(n.mouseDownNewPt2.y+=a)}else n.mouseDownNewPt1.x+=i,n.mouseDownNewPt1.y+=a,n.mouseDownNewPt2.x+=i,n.mouseDownNewPt2.y+=a}n.updateStateFromMouseCoords()}},c.THROTTLE_DOM_EVENTS),n.handleMouseUp=function(e){if(n.mouseDownStartPt)switch(e.stopImmediatePropagation(),e.preventDefault(),n.mouseDownTarget){case r.BACKGROUND:switch(n.props.annotationTool){case s.AnnotationTool.ELLIPSE:case s.AnnotationTool.RECTANGLE:case s.AnnotationTool.TEXT:n.addOrEditVisualAnnotation(n.props.annotationTool,n.createVisualAnnotationWithMouseDownCoords()),n.props.annotationTool==s.AnnotationTool.TEXT&&v.startEditing(),w.setAnnotationTool(s.AnnotationTool.HIGHLIGHT);break;case s.AnnotationTool.HIGHLIGHT:n.mouseDownIsDragging?v.startEditing():v.unselectAnnotation()}break;case r.VISUAL_ANNOTATION:case r.ANCHOR:var t=n.getMouseDownVisualAnnotation();if(n.mouseDownIsDragging){var o=C._clone(t);o.x=Math.min(n.mouseDownNewPt1.x,n.mouseDownNewPt2.x),o.y=Math.min(n.mouseDownNewPt1.y,n.mouseDownNewPt2.y),o.w=Math.max(n.mouseDownNewPt1.x,n.mouseDownNewPt2.x)-o.x,o.h=Math.max(n.mouseDownNewPt1.y,n.mouseDownNewPt2.y)-o.y,n.addOrEditVisualAnnotation(n.mouseDownAnnotation.tool,o)}else n.mouseDownTarget==r.VISUAL_ANNOTATION&&n.props.selectedVisualAnnotation==n.getMouseDownVisualAnnotation()&&n.mouseDownAnnotation.tool==s.AnnotationTool.TEXT&&v.startEditing();v.selectAnnotation(n.props.page,n.mouseDownAnnotation.tool,n.mouseDownAnnotation.id)}n.cancelMouseDown()},n.state={},n}return o(t,e),t.prototype.componentWillUnmount=function(){this.cancelMouseDown()},t.prototype.render=function(){if(this.notReadyOrNotVisible())return null;var e=T.Context.controlSettings.hideMarks?null:i.createElement("div",{className:"pbookmark "+(this.props.annotations.bookmarked?"":"pbookmark--off"),style:{zIndex:c.ZINDEX_BOOKMARK,pointerEvents:"auto"},"data-qa":"bookmark"+this.props.page,onClick:this.handleBookmarkClick}),t={left:0,top:0,right:this.props.pageMeta.width,bottom:this.props.pageMeta.height},n={highlights:this.props.annotations.highlights,notes:this.props.annotations.notes,ellipses:this.props.annotations.ellipseAnnotations,rectangles:this.props.annotations.rectangleAnnotations,texts:this.props.annotations.textAnnotations},r=this.props.selectedVisualAnnotation?i.createElement(d.AnnotationAnchors,{annotation:this.props.selectedVisualAnnotation,scale:this.props.scale,onMouseDown:this.handleAnchorMouseDown}):null,o=this.state.dashedContourBounds?i.createElement(m.DashedContour,{rectangle:this.state.dashedContourBounds,tool:this.state.dashedContourTool}):null,a=this.props.selectedWordsRectangles?i.createElement(E.WordSelection,{color:c.COLOR_ONGOING_HIGHLIGHT,rectangles:this.props.selectedWordsRectangles,zIndex:c.ZINDEX_ONGOING_HIGHLIGHT,qaLabel:"ongoingHighl"}):null,s=this.props.foundWordsRectangles?i.createElement(E.WordSelection,{color:c.COLOR_FOUND_WORD,rectangles:this.props.foundWordsRectangles,zIndex:c.ZINDEX_FOUND_WORD,qaLabel:"foundWords"}):null;return i.createElement("div",{style:{width:"100%",height:"100%"}},i.createElement(l.AnnotationsSvg,{annotations:n,height:this.props.pageMeta.height/this.props.scale,wordPlacement:this.props.pageComputedMetadata.wordPlacement,style:_,viewBox:t,width:this.props.pageMeta.width/this.props.scale,onAnnotationMouseDown:this.handleAnnotationMouseDown,onBackgroundMouseDown:this.handleBackgroundMouseDown,onNoteClick:this.handleNoteClick,ref:this.handleAnnotationsSvgRef},r,o,a,s),e)},t.prototype.notReadyOrNotVisible=function(){return null==this.props.pageMeta||null==this.props.annotations||null==this.props.pageComputedMetadata||!this.props.visible},t.prototype.startMouseDown=function(e){var t=this,n=f.isTouchEvent(e.nativeEvent);this.mouseDownIsTouch=n,this.mouseDownStartPt=this.getSvgMousePosition(e.nativeEvent),this.mouseDownNewPt1=this.mouseDownStartPt,this.mouseDownNewPt2=null,this.mouseDownIsDragging=!1,n?(this.touchStartAndHoldTimeout=setTimeout(function(){t.touchStartAndHoldTimeout=void 0,t.startDragging({x:t.mouseDownStartPt.x+1,y:t.mouseDownStartPt.y})},O),document.addEventListener(f.TOUCHMOVE,this.handleMouseMove,!0),document.addEventListener(f.TOUCHEND,this.handleMouseUp,!0)):(document.addEventListener(f.MOUSEMOVE,this.handleMouseMove),document.addEventListener(f.MOUSEUP,this.handleMouseUp)),v.unselectWords()},t.prototype.cancelMouseDown=function(){this.touchStartAndHoldTimeout&&(clearInterval(this.touchStartAndHoldTimeout),this.touchStartAndHoldTimeout=void 0),this.mouseDownStartPt=void 0,this.mouseDownIsDragging=!1,document.removeEventListener(f.TOUCHMOVE,this.handleMouseMove),document.removeEventListener(f.TOUCHEND,this.handleMouseUp),document.removeEventListener(f.MOUSEMOVE,this.handleMouseMove),document.removeEventListener(f.MOUSEUP,this.handleMouseUp),this.clearDashedContour(),h.clearPageMouseCover(),document.body.setAttribute("data-scroll","enabled")},t.prototype.startDragging=function(e){switch(this.mouseDownIsDragging=!0,h.setPageMouseCover(this.props.page),this.mouseDownTarget){case r.BACKGROUND:switch(this.props.annotationTool){case s.AnnotationTool.ELLIPSE:case s.AnnotationTool.RECTANGLE:case s.AnnotationTool.TEXT:this.mouseDownNewPt1=this.mouseDownStartPt,this.mouseDownNewPt2=e;break;case s.AnnotationTool.HIGHLIGHT:this.mouseDownNewPt2=e}break;case r.ANCHOR:case r.VISUAL_ANNOTATION:var t=this.getMouseDownVisualAnnotation();this.mouseDownNewPt1={x:t.x,y:t.y},this.mouseDownNewPt2={x:t.x+t.w,y:t.y+t.h}}this.updateStateFromMouseCoords()},t.prototype.createVisualAnnotationWithMouseDownCoords=function(){var e,t=(Math.random()+1).toString(36).substring(2,7);if(this.mouseDownIsDragging){var n=Math.min(this.mouseDownNewPt1.x,this.mouseDownNewPt2.x),r=Math.min(this.mouseDownNewPt1.y,this.mouseDownNewPt2.y);e={id:t,x:n,y:r,w:Math.max(this.mouseDownNewPt1.x,this.mouseDownNewPt2.x)-n,h:Math.max(this.mouseDownNewPt1.y,this.mouseDownNewPt2.y)-r,c:this.props.annotationColor}}else e={id:t,x:this.mouseDownStartPt.x,y:this.mouseDownStartPt.y,w:A[this.props.annotationTool].x,h:A[this.props.annotationTool].y,c:this.props.annotationColor};return e},t.prototype.addOrEditVisualAnnotation=function(e,t){switch(this.constrainAnnotToMinimumAndPageSize(t),e){case s.AnnotationTool.ELLIPSE:p.addEllipse(this.props.page,t.id,t.x,t.y,t.w,t.h,t.c);break;case s.AnnotationTool.RECTANGLE:p.addRectangle(this.props.page,t.id,t.x,t.y,t.w,t.h,t.c);break;case s.AnnotationTool.TEXT:p.addText(this.props.page,t.id,t.x,t.y,t.w,t.h,t.c,t.t)}v.selectAnnotation(this.props.page,e,t.id)},t.prototype.getSvgMousePosition=function(e){var t=this.annotationsSvgRef.getBoundingClientRect(),n=f.getEventClientPoint(e);return{x:(n.x-t.left)/this.props.scale,y:(n.y-t.top)/this.props.scale}},t.prototype.getMouseDownVisualAnnotation=function(){return p.getVisualAnnotationByToolAndId(this.props.annotations,this.mouseDownAnnotation.tool,this.mouseDownAnnotation.id)},t.prototype.clearDashedContour=function(){var e={dashedContourTool:null,dashedContourBounds:null};this.setState(e)},t.prototype.updateStateFromMouseCoords=function(){this.constrainMouseDownCoordsToPageSize();var e;if(this.mouseDownTarget==r.BACKGROUND&&this.props.annotationTool==s.AnnotationTool.HIGHLIGHT){var t=this.getMouseDownSelectionWordRange();t?v.selectWords(this.props.page,t.firstWordIdx,t.lastWordIdx):v.unselectWords()}else e={dashedContourTool:this.mouseDownAnnotation.tool,dashedContourBounds:b.pointsToRectangle(this.mouseDownNewPt1,this.mouseDownNewPt2)},this.setState(e)},t.prototype.constrainMouseDownCoordsToPageSize=function(){this.mouseDownNewPt1.x=Math.max(Math.min(this.mouseDownNewPt1.x,this.props.pageMeta.width),0),this.mouseDownNewPt2.x=Math.max(Math.min(this.mouseDownNewPt2.x,this.props.pageMeta.width),0),this.mouseDownNewPt1.y=Math.max(Math.min(this.mouseDownNewPt1.y,this.props.pageMeta.height),0),this.mouseDownNewPt2.y=Math.max(Math.min(this.mouseDownNewPt2.y,this.props.pageMeta.height),0)},t.prototype.constrainAnnotToMinimumAndPageSize=function(e){e.x=Math.max(Math.min(e.x,this.props.pageMeta.width-P),0),e.y=Math.max(Math.min(e.y,this.props.pageMeta.height-P),0),e.w=Math.max(Math.min(e.w,this.props.pageMeta.width-e.x),P),e.h=Math.max(Math.min(e.h,this.props.pageMeta.height-e.x),P)},t.prototype.getMouseDownSelectionWordRange=function(){return this.props.pageComputedMetadata.wordPlacement.calcWordRangeBetweenPoints(this.mouseDownStartPt.x,this.mouseDownStartPt.y,this.mouseDownNewPt2.x,this.mouseDownNewPt2.y)},t}(i.Component);t.Component=I;var M={},R=function(e,t){return{annotations:e.annotations&&e.annotations.pages?e.annotations.pages[t.page]||M:null,annotationColor:e.userSettings.annotationColor,annotationTool:N.getSelectedAnnotationTool(e),foundWordsRectangles:e.search.resultsHighlight&&e.search.resultsHighlight.page===t.page?x.getFoundWordsPageRects(e):null,pageComputedMetadata:u.getComputedPageMetadataByIndex(e)[t.page],pageMeta:e.metadata.book&&e.metadata.book.pages?e.metadata.book.pages[t.page]:null,scale:e.view.scale?e.view.scale:1,selectedWordsRectangles:e.selection.words&&e.selection.words.page===t.page?y.getSelectedWordsPageRects(e):null,selectedVisualAnnotation:e.selection.visualAnnotation&&e.selection.visualAnnotation.page===t.page?g.getSelectedVisualAnnotation(e):null,selectedVisualAnnotationTool:e.selection.visualAnnotation?e.selection.visualAnnotation.tool:null,visible:e.view.nearPages&&t.page>=e.view.nearPages.first&&t.page<=e.view.nearPages.last}},L=a.connect(R)(I);t.LayerPageAnnotations=L;var k},function(e,t,n){"use strict";function r(e,t,n,r){return n=Math.max(n,g),r=Math.max(r,g),"translate("+(e+n/2)+", "+(t+r/2)+")"}function o(e,t){return"translate("+e+", "+t+")"}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},s=n(193),u=n(11),c=n(425),l=n(587),p=n(387),h=n(426),f=n(666),d=n(667),m=n(668),g=6,v=2;t.TEXT_STYLE={fontFamily:"Arial,Helvetica",fontSize:"13px",fontWeight:"bold",stroke:"none",fill:"#16a"};var y="font-family:Arial,Helvetica; font-size:13px; font-weight: bold; stroke:none; fill:#16a",b=13,E=.91*b,w=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleBackgroundMouseDown=function(e){f.handleMouseDownEvent(e)&&t.props.onBackgroundMouseDown(e)},t.handleAnnotationMouseDown=function(e,n){return function(r){f.handleMouseDownEvent(r)&&t.props.onAnnotationMouseDown(r,e,n)}},t.handleRefTouchStart=function(e,n){return function(r){r&&r.addEventListener("touchstart",function(r){r.nativeEvent=r,t.handleAnnotationMouseDown(e,n)(r)})}},t.handleRef=function(e){t.ref=e,e&&e.addEventListener("touchstart",function(e){e.nativeEvent=e,t.handleBackgroundMouseDown(e)})},t}return i(n,e),n.prototype.shouldComponentUpdate=function(e,t){return m(this,e,t)},n.prototype.render=function(){var e=u.isIeBrowser()&&9==u.getIeBrowserVersion()?s.createElement("rect",{fill:"transparent",width:"100%",height:"100%"}):null,t=[];return Array.prototype.push.apply(t,this.renderEllipses()),Array.prototype.push.apply(t,this.renderRectangles()),Array.prototype.push.apply(t,this.renderTexts()),Array.prototype.push.apply(t,this.renderHighlights()),Array.prototype.push.apply(t,this.renderNotes()),s.createElement("svg",{style:this.props.style,width:this.props.width,height:this.props.height,viewBox:this.props.viewBox.left+" "+this.props.viewBox.top+" "+(this.props.viewBox.right+" "+this.props.viewBox.bottom),onMouseDown:this.handleBackgroundMouseDown,ref:this.handleRef},e,s.createElement("g",null,s.createElement("g",null,t)),this.props.children)},n.prototype.getBoundingClientRect=function(){return this.ref?this.ref.getBoundingClientRect():null},n.prototype.renderHighlights=function(){var e=this,t=[];return null!=this.props.annotations.highlights&&this.props.annotations.highlights.forEach(function(n,r){var o=e.renderHighlight(r,n.fw,n.lw);null!=o&&t.push(o)}),t},n.prototype.renderNotes=function(){var e=this,t=[];return null!=this.props.annotations.notes&&this.props.annotations.notes.forEach(function(n,r){var o=e.renderHighlight(r,n.fw,n.lw,n.note);null!=o&&t.push(o)}),t},n.prototype.renderHighlight=function(e,t,n,r){var o=this;if(t<0||n>=this.props.wordPlacement.getCount()||t>n)return console.warn("Annotation word index out of bounds "+t+","+n),null;var i=void 0==r,a=this.props.wordPlacement.calcWordsBounds(t,n);if(void 0==a)return null;var u="high"+e,c="note"+e;return i?s.createElement(d.WordSelection,{color:p.COLOR_HIGHLIGHT,rectangles:a,zIndex:p.ZINDEX_HIGHLIGHT,
qaLabel:u,key:u}):s.createElement(d.WordSelection,{color:p.COLOR_NOTE,note:r,rectangles:a,zIndex:p.ZINDEX_NOTE,qaLabel:c,key:c,onClick:function(){return o.props.onNoteClick(e)}})},n.prototype.renderEllipses=function(){var e=this;return null==this.props.annotations.ellipses?[]:this.props.annotations.ellipses.map(function(t,n){var o={rx:Math.max(t.w,g)/2,ry:Math.max(t.h,g)/2},i="ell"+n;return s.createElement("g",{cursor:"move",transform:r(t.x,t.y,t.w,t.h),onMouseDown:e.handleAnnotationMouseDown(h.AnnotationTool.ELLIPSE,t.id),"data-qa":i,key:i,ref:e.handleRefTouchStart(h.AnnotationTool.ELLIPSE,t.id)},s.createElement("ellipse",a({strokeWidth:"2",fill:"none",stroke:c.ANNOTATION_COLOR_VALUES[t.c]},o)),s.createElement("ellipse",a({stroke:"#F00",opacity:"0",strokeWidth:"14",fill:"none",pointerEvents:"all"},o)))})},n.prototype.renderRectangles=function(){var e=this;return null==this.props.annotations.rectangles?[]:this.props.annotations.rectangles.map(function(t,n){var r={width:Math.max(t.w,g),height:Math.max(t.h,g)},i="rec"+n;return s.createElement("g",{cursor:"move",transform:o(t.x,t.y),onMouseDown:e.handleAnnotationMouseDown(h.AnnotationTool.RECTANGLE,t.id),"data-qa":i,key:i,ref:e.handleRefTouchStart(h.AnnotationTool.RECTANGLE,t.id)},s.createElement("rect",a({strokeWidth:"2",fill:"none",stroke:c.ANNOTATION_COLOR_VALUES[t.c]},r)),s.createElement("rect",a({stroke:"#F00",opacity:"0",strokeWidth:"14",fill:"none",pointerEvents:"all"},r)))})},n.prototype.renderTexts=function(){var e=this;return null==this.props.annotations.texts?[]:this.props.annotations.texts.map(function(n,r){for(var i=c.ANNOTATION_COLOR_VALUES[n.c],a=Math.max(n.w,g),u=Math.max(n.h,g),p=n.t?l.wrapSvgText(n.t,a-2*v,y):[],f=[],d=v,m=0;m<p.length&&!(d+b>u-v);m++){var w="tex"+r+"_"+m;f.push(s.createElement("text",{style:t.TEXT_STYLE,x:v,y:d+E,key:w},p[m])),d+=b}var x="annotText"+r;return s.createElement("g",{cursor:"move",transform:o(n.x,n.y),onMouseDown:e.handleAnnotationMouseDown(h.AnnotationTool.TEXT,n.id),ref:e.handleRefTouchStart(h.AnnotationTool.TEXT,n.id),"data-qa":x,key:x},s.createElement("rect",{strokeWidth:"1",fillOpacity:"0.3",pointerEvents:"all",stroke:i,fill:i,width:a,height:u}),f)})},n}(s.Component);w.defaultProps={onAnnotationMouseDown:function(){},onBackgroundMouseDown:function(){},onNoteClick:function(){}},t.AnnotationsSvg=w},function(e,t,n){"use strict";function r(e){return s.isTouchEvent(e.nativeEvent)?(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a.handleOutsidePopupDownEvent(null),!0):e.button==u&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a.handleOutsidePopupDownEvent(null),!0)}function o(e,t,n){var r=[];if(e)for(var o=0;o<e.length;o++){var i=e[o];n>=i.fw&&t<=i.lw&&r.push(i)}return r}function i(e,t,n){var r=null;if(e)for(var o=0;o<e.length;o++){var i=e[o];n>=i.fw&&t<=i.lw&&(null==r||r.fw>i.fw)&&(r=i)}return r}var a=n(602),s=n(618),u=0;t.handleMouseDownEvent=r,t.findHighlightsInRange=o,t.findFirstNoteInRange=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=n(193),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){for(var e={stroke:this.props.color,fill:this.props.color},t=[],n=0;n<this.props.rectangles.length;n++){var r=this.props.rectangles[n];if(void 0!=r){var a={width:r.w,height:r.h};t.push(i.createElement("g",{transform:"translate("+r.x+", "+r.y+")",key:n.toString(),"data-qa":this.props.qaLabel,onClick:this.props.onClick},i.createElement("rect",o({},e,a)),this.props.onClick?i.createElement("rect",o({opacity:"0",pointerEvents:"all"},e,a)):null,this.props.note?null:i.createElement("title",null,this.props.note)))}}return i.createElement("g",null,t)},t}(i.Component);t.WordSelection=a},function(e,t,n){"use strict";function r(e,t,n){return!o(e.props,t)||!o(e.state,n)}var o=n(669);e.exports=r},313,function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(666);t.ANCHOR_SIZE=10;var a=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"];t.ANCHOR_POSITIONS=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:1,y:.5},{x:1,y:1},{x:.5,y:1},{x:0,y:1},{x:0,y:.5}];var s=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRef=function(e,n){e&&e.addEventListener("touchstart",function(e){e.nativeEvent=e,i.handleMouseDownEvent(e)&&t.props.onMouseDown(e,n)})},t.handleMouseDown=function(e){return function(n){i.handleMouseDownEvent(n)&&t.props.onMouseDown(n,e)}},t}return r(n,e),n.prototype.render=function(){var e=this,n=this.props.annotation.x,r=this.props.annotation.y,i=this.props.annotation.x+this.props.annotation.w,s=this.props.annotation.y+this.props.annotation.h,u=t.ANCHOR_SIZE/this.props.scale,c=t.ANCHOR_POSITIONS.map(function(t,c){var l=i*t.x+n*(1-t.x),p=s*t.y+r*(1-t.y);return o.createElement("rect",{stroke:"#fff",strokeOpacity:"1",strokeWidth:"1",pointerEvents:"visiblePainted",fill:"#0096fd",fillOpacity:"1",cursor:a[c],x:l-u,y:p-u,width:2*u,height:2*u,key:"an"+c,onMouseDown:e.handleMouseDown(c),ref:function(t){return e.handleRef(t,c)}})});return o.createElement("g",null,c)},n}(o.Component);t.AnnotationAnchors=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=n(193),a=n(426),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t={stroke:"#888",strokeWidth:2,strokeOpacity:.5,fill:"none",pointerEvents:"none"};return e=this.props.tool==a.AnnotationTool.ELLIPSE?i.createElement("ellipse",o({},t,{cx:this.props.rectangle.x+this.props.rectangle.w/2,cy:this.props.rectangle.y+this.props.rectangle.h/2,rx:this.props.rectangle.w/2,ry:this.props.rectangle.h/2})):i.createElement("rect",o({},t,{x:this.props.rectangle.x,y:this.props.rectangle.y,width:this.props.rectangle.w,height:this.props.rectangle.h}))},t}(i.Component);t.DashedContour=s},function(e,t,n){"use strict";var r=n(394),o=n(395);t.getSelectedWordsPageRects=r.createSelector(o.getComputedPageMetadataByIndex,function(e){return e.selection.words},function(e,t){return null!=t&&e[t.page]?e[t.page].wordPlacement.calcWordsBounds(t.first,t.last):null})},function(e,t){"use strict";function n(e,t){var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return{x:n,y:r,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-r}}t.pointsToRectangle=n},function(e,t,n){"use strict";var r=n(394),o=n(395);t.getFoundWordsPageRects=r.createSelector(o.getComputedPageMetadataByIndex,function(e){return e.search.resultsHighlight},function(e,t){return null!=t&&e[t.page]?t.positions.map(function(n){return e[t.page].wordPlacement.getWordBounds(n)}):null})},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(406),s=n(14),u=n(676),c=n(678),l=n(10),p=n(8),h=n(680),f=n(682),d=n(182),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleScreenOverlayClose=function(){a.close()},t.handleBrowserNotSupportedClose=function(){s.clear()},t}return r(t,e),t.prototype.render=function(){if(null!=this.props.screenOverlay){if(this.props.screenOverlay.interactivityPopup)return o.createElement(u.InteractivityScreenOverlay,{url:this.props.screenOverlay.interactivityPopup.url,title:this.props.screenOverlay.interactivityPopup.title,onClose:this.handleScreenOverlayClose});if(this.props.screenOverlay.flashcards&&null!=this.props.screenOverlay.flashcards.flashcardSetId){var e=l.Context.resourceLoader.getResourceUrl(p.ResourceType.FLASHCARDS,[this.props.screenOverlay.flashcards.flashcardSetId]),t=new d.Promise(function(t){l.Context.resourceLoader.getJSON(e,t)});return o.createElement(h.FlashcardsScreenOverlay,{loadingCards:t,onClose:this.handleScreenOverlayClose})}if(this.props.screenOverlay.gallery){var n={};return this.props.galleryItems.forEach(function(e){var t=l.Context.store.getState().metadata.book.images[e.id],r=l.Context.resourceLoader.getResourceUrl(p.ResourceType.IMAGE,[e.id,t.ext]);n[e.id]=r}),o.createElement(f.GalleryScreenOverlay,{items:this.props.galleryItems,initialId:this.props.screenOverlay.gallery.initialId,urlById:n,onClose:this.handleScreenOverlayClose})}}return this.props.browserNotSupported?o.createElement(c.SupportedBrowsersScreenOverlay,{onClose:this.handleBrowserNotSupportedClose}):null},t}(o.Component);t.Component=m;var g=function(e,t){return{browserNotSupported:e.failure.browserNotSupported,galleryItems:e.metadata.book?e.metadata.book.gallery:null,screenOverlay:e.screenOverlay}},v=i.connect(g)(m);t.LayerScreenOverlay=v},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(677),a="interactivity",s=function(e){function t(t){var n=e.call(this,t)||this;return n.handleRef=function(e){n.frameRef=e},n.handleFrameLoad=function(){n.setState({loading:!1})},n.handleMessage=function(e){try{var t=JSON.parse(e.data);n.frameRef&&t.resize.width&&t.resize.height&&(n.frameRef.style.width=t.resize.width+"px",n.frameRef.style.height=t.resize.height+"px")}catch(e){}},n.state={loading:!0},n}return r(t,e),t.prototype.componentDidMount=function(){window.addEventListener("message",this.handleMessage)},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.handleMessage)},t.prototype.componentWillReceiveProps=function(e){this.props.url!=e.url&&this.setState({loading:!0})},t.prototype.render=function(){return o.createElement(i.ScreenOverlay,{preloading:this.state.loading,title:this.props.title,otherClassName:"interactivityPopup",shortcutScope:a,onClose:this.props.onClose},o.createElement("iframe",{className:"interactivityPopup__iframe",ref:this.handleRef,src:this.props.url,style:{opacity:this.state.loading?0:1},onLoad:this.handleFrameLoad}))},t}(o.Component);t.InteractivityScreenOverlay=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401),a=n(599),s=n(431),u=n(10),c=n(635),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleOverlayClick=function(e){e.stopPropagation()},t}return r(t,e),t.prototype.componentWillMount=function(){u.Context.pagesScroll.disable(),c.Shortcuts.startScope(this.props.shortcutScope),c.Shortcuts.bind("escape",this.props.onClose,this.props.shortcutScope)},t.prototype.componentWillUnmount=function(){c.Shortcuts.endScope(this.props.shortcutScope),u.Context.pagesScroll.enable()},t.prototype.render=function(){var e=this.props.preloading?o.createElement("div",{className:i("spinning-preloader","pos-middleCenter")}):null,t=this.props.title?o.createElement("div",{className:"overlay__title overlay__title--bottom"},o.createElement("div",{className:"overlay__title-content"},this.props.title)):null;return o.createElement("div",{className:i("overlay",this.props.otherClassName),style:{width:"100%",height:"100%"},onClick:this.handleOverlayClick},e,o.createElement(a.ToolbarButton,{size:a.ToolbarButtonSize.BIG,theme:a.ToolbarButtonTheme.REGULAR,height:a.ToolbarButtonHeight.REGULAR,qaLabel:"closeOverlayBtn",otherClassName:"pos-topRight",onClick:this.props.onClose},o.createElement(s.Icon,{type:s.IconType.CLOSE})),t,this.props.children)},t}(o.Component);t.ScreenOverlay=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(677),a=n(679),s=n(642),u="<h1>Your browser can’t support all our amazing features!</h1><br />Don’t worry, just install one of these modern browsers and you will be back to learning in no time!<br /><br />",c="No Thanks!",l=[{cs:"ie",url:"http://microsoft.com/ie"},{cs:"chrome",url:"http://www.google.com/chrome"},{cs:"firefox",url:"http://mozilla.org/firefox"},{cs:"safari",url:"http://apple.com/safari"}],p="supportedBrowsers",h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement(i.ScreenOverlay,{otherClassName:"interactivityPopup",onClose:function(){},shortcutScope:p},o.createElement(a.Pane,{color:a.PaneColor.WHITE,spacing:a.PaneSpacing.REGULAR,theme:a.PaneTheme.REGULAR,otherClassName:"supported-browsers pos-middleCenter"},o.createElement("div",{dangerouslySetInnerHTML:{__html:u}}),l.map(function(e){return t.renderBrowser(e.cs,e.url)}),o.createElement(s.Button,{label:c,qaLabel:"supportedBrowserClose",onClick:this.props.onClose})))},t.renderBrowser=function(e,t){return o.createElement("a",{className:"browser browser--"+e,key:t,href:t})},t}(o.Component);t.SupportedBrowsersScreenOverlay=h},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(401),s=n(600);!function(e){e[e.REGULAR=0]="REGULAR",e[e.DARK=1]="DARK",e[e.RED=2]="RED",e[e.WHITE=3]="WHITE"}(r=t.PaneColor||(t.PaneColor={}));var u;!function(e){e[e.REGULAR=0]="REGULAR",e[e.CONDENSED=1]="CONDENSED"}(u=t.PaneSpacing||(t.PaneSpacing={}));var c;!function(e){e[e.REGULAR=0]="REGULAR",e[e.BORDERED=1]="BORDERED"}(c=t.PaneTheme||(t.PaneTheme={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=a("pane",s.enumToClass("pane",r[this.props.color]),s.enumToClass("pane",u[this.props.spacing]),s.enumToClass("pane",c[this.props.theme]),this.props.otherClassName);return i.createElement("div",{className:e},this.props.children)},t}(i.Component);t.Pane=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(677),a=n(10),s=n(401),u=n(408),c=n(681),l=n(635),p="flashcards",h=function(e){function t(t){var n=e.call(this,t)||this;return n.handleCardRef=function(e){e&&u.HotspotUri.addClickHandlerToAnchorElements(e,a.Context.gotoPage)},n.handleCardClick=function(){n.setState(function(e){return{flipped:!e.flipped}})},n.handleLeftClick=function(){n.setState(function(e){return{cardIdx:Math.max(0,e.cardIdx-1),flipped:!1}})},n.handleRightClick=function(){n.setState(function(e){return{cardIdx:Math.min(e.cards.length-1,e.cardIdx+1),flipped:!1}})},n.state={cardIdx:0},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.loadingCards.then(function(t){e.setState({cards:t})}),a.Context.internalEventEmitter.bindDidSwipeLeft(this.handleRightClick),a.Context.internalEventEmitter.bindDidSwipeRight(this.handleLeftClick),l.Shortcuts.bind("home",function(){e.setState({cardIdx:0})},p),l.Shortcuts.bind("end",function(){e.setState({cardIdx:e.state.cards.length-1})},p)},t.prototype.componentWillUnmount=function(){a.Context.internalEventEmitter.unbindDidSwipeLeft(this.handleRightClick),a.Context.internalEventEmitter.unbindDidSwipeRight(this.handleLeftClick)},t.prototype.render=function(){var e=this,t=null==this.state.cards?null:o.createElement("div",{className:"flashcards__wrapper"},this.state.cards.map(function(t,n){return e.renderFlashcard(t,n)}));return o.createElement(i.ScreenOverlay,{preloading:null==this.state.cards,title:this.state.cards?this.state.cardIdx+1+" / "+this.state.cards.length:"",shortcutScope:p,onClose:this.props.onClose},o.createElement(c.NavButton,{disabled:!this.state.cards||this.state.cardIdx<1,isLeft:!0,onClick:this.handleLeftClick,shortcutScope:p}),o.createElement(c.NavButton,{disabled:!this.state.cards||this.state.cardIdx>=this.state.cards.length-1,isLeft:!1,onClick:this.handleRightClick,shortcutScope:p}),t)},t.prototype.renderFlashcard=function(e,t){var n=s("flashcard",{"flashcard--no-label":""==e.label},{"flashcard--active":t==this.state.cardIdx&&this.state.flipped},{"flashcard--center":t==this.state.cardIdx},{"flashcard--left":t<this.state.cardIdx}),r=""==e.label?null:o.createElement("div",{className:"flashcard__label",dangerouslySetInnerHTML:{__html:e.label}});return o.createElement("div",{className:n,onClick:this.handleCardClick,key:t},o.createElement("div",{className:"flashcard__flipper"},o.createElement("div",{className:"flashcard__front"},r,o.createElement("div",{className:"flashcard__body",dangerouslySetInnerHTML:{__html:e.question},ref:this.handleCardRef}),o.createElement("div",{className:"flashcard__title"},"Question")),o.createElement("div",{className:"flashcard__back"},r,o.createElement("div",{className:"flashcard__body",dangerouslySetInnerHTML:{__html:e.answer},ref:this.handleCardRef}),o.createElement("div",{className:"flashcard__title"},"Answer"))))},t}(o.Component);t.FlashcardsScreenOverlay=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(599),a=n(431),s=n(635),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.disabled!=e.disabled&&this.bindKeyboard(!e.disabled)},t.prototype.componentDidMount=function(){this.bindKeyboard(!this.props.disabled)},t.prototype.componentWillUnmount=function(){this.bindKeyboard(!1)},t.prototype.render=function(){return o.createElement(i.ToolbarButton,{disabled:this.props.disabled,size:i.ToolbarButtonSize.BIG,theme:i.ToolbarButtonTheme.REGULAR,height:i.ToolbarButtonHeight.FULL,qaLabel:this.props.isLeft?"navLeftBtn":"navRightBtn",otherClassName:this.props.isLeft?"pos-fullLeft":"pos-fullRight",onClick:this.props.onClick},o.createElement(a.Icon,{type:this.props.isLeft?a.IconType.ARROW_LEFT:a.IconType.ARROW_RIGHT}))},t.prototype.bindKeyboard=function(e){var t=this;this.props.shortcutScope&&(e?s.Shortcuts.bind(this.props.isLeft?"left":"right",function(){return t.props.onClick(),!1},this.props.shortcutScope):s.Shortcuts.unbind(this.props.isLeft?"left":"right",this.props.shortcutScope))},t}(o.Component);t.NavButton=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(677),a=n(10),s=n(681),u=n(16),c=n(635),l="gallery",p=function(e){function t(t){var n=e.call(this,t)||this;n.handleImgLoad=function(e){n.setState(function(t){var n=u._assign({},t.loaded,(o={},o[e]=!0,o)),r={loaded:n};return r;var o})},n.handleLeftClick=function(){n.setState(function(e){var t={itemIdx:Math.max(0,e.itemIdx-1)};return t})},n.handleRightClick=function(){n.setState(function(e){var t={itemIdx:Math.min(n.props.items.length-1,e.itemIdx+1)};return t})};var r=0;if(null!=n.props.initialId)for(var o=n.props.items.length-1;o>=0;o--)if(n.props.items[o].id==n.props.initialId){r=o;break}return n.state={itemIdx:r,loaded:{}},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this;a.Context.internalEventEmitter.bindDidSwipeLeft(this.handleRightClick),a.Context.internalEventEmitter.bindDidSwipeRight(this.handleLeftClick),c.Shortcuts.bind("home",function(){e.setState({itemIdx:0})},l),c.Shortcuts.bind("end",function(){e.setState({itemIdx:e.props.items.length-1})},l)},t.prototype.componentWillUnmount=function(){a.Context.internalEventEmitter.unbindDidSwipeLeft(this.handleRightClick),a.Context.internalEventEmitter.unbindDidSwipeRight(this.handleLeftClick)},t.prototype.render=function(){var e=this.props.items[this.state.itemIdx];return o.createElement(i.ScreenOverlay,{preloading:!this.state.loaded[e.id],title:e.title,otherClassName:"galleryview",shortcutScope:l,onClose:this.props.onClose},o.createElement("div",{className:"gallery"},this.renderImg(this.state.itemIdx,!0),this.renderImg(this.state.itemIdx-1),this.renderImg(this.state.itemIdx+1)),o.createElement(s.NavButton,{disabled:this.state.itemIdx<1,isLeft:!0,onClick:this.handleLeftClick,shortcutScope:l}),o.createElement(s.NavButton,{disabled:this.state.itemIdx>=this.props.items.length-1,isLeft:!1,onClick:this.handleRightClick,shortcutScope:l}))},t.prototype.renderImg=function(e,t){var n=this;if(e>=0&&e<this.props.items.length){var r=this.props.items[e].id;return o.createElement("div",{className:"gallery__content"},o.createElement("img",{src:this.props.urlById[r],onLoad:function(){return n.handleImgLoad(r)},className:"gallery__image",style:{visibility:t?"visible":"hidden"}}))}return null},t}(o.Component);t.GalleryScreenOverlay=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(367),a=n(442),s=n(431),u=n(599),c=n(443),l=n(425),p=n(684),h=n(625),f=40,d=40,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLeftClick=function(){a.setPage(t.props.page-1)},t.handleRightClick=function(){a.setPage(t.props.page+1)},t}return r(t,e),t.prototype.render=function(){var e={position:"absolute",left:0,width:f+"px",top:(this.props.viewportClientRectWithoutBars.bottom-d)/2+"px",height:f+"px"},t=this.props.page<1||!this.props.active?null:o.createElement("div",{style:e},o.createElement(u.ToolbarButton,{size:u.ToolbarButtonSize.NAV,theme:u.ToolbarButtonTheme.NAV,height:u.ToolbarButtonHeight.FULL,qaLabel:"prevPageBtn",otherClassName:"pos-fullLeft rcvPointerEvents",onClick:this.handleLeftClick,onTap:this.handleLeftClick},o.createElement(s.Icon,{type:s.IconType.ARROW_LEFT3}))),n={position:"absolute",left:this.props.viewportClientRectWithoutBars.right-f+"px",width:f+"px",top:(this.props.viewportClientRectWithoutBars.bottom-d)/2+"px",height:f+"px"},r=this.props.page>=this.props.pageCount-1||!this.props.active?null:o.createElement("div",{style:n},o.createElement(u.ToolbarButton,{size:u.ToolbarButtonSize.NAV,theme:u.ToolbarButtonTheme.NAV,height:u.ToolbarButtonHeight.FULL,qaLabel:"nextPageBtn",otherClassName:"pos-fullRight rcvPointerEvents",onClick:this.handleRightClick,onTap:this.handleRightClick},o.createElement(s.Icon,{type:s.IconType.ARROW_RIGHT3})));return o.createElement("div",{style:{width:"100%",height:"100%"}},t,r,o.createElement(p.AnnotationSelectionEditor,{store:this.props.store}))},t}(o.Component);t.Component=m;var g=function(e,t){return{active:e.userSettings.layout==l.LayoutMode.SIDEBYSIDE||e.userSettings.layout==l.LayoutMode.SINGLE,viewportClientRectWithoutBars:h.getViewportClientRectWithoutBars(e),page:e.view.page,pageCount:c.getPageCount(e)}},v=i.connect(g)(m);t.LayerNav=v},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(426),a=n(367),s=n(429),u=n(427),c=n(430),l=n(441),p=n(440),h=n(685),f=n(686),d=n(10),m=n(661),g=n(672),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTextAnnotationSave=function(e){u.editTextValue(t.props.selection.visualAnnotation.page,t.props.selection.visualAnnotation.id,e),c.stopEditing(),c.unselectWords()},t.handleHighlightCancel=function(){c.stopEditing(),c.unselectWords()},t.handleCreateHighlight=function(){u.addHighlight(t.props.selection.words.page,t.props.selection.words.first,t.props.selection.words.last),c.stopEditing(),c.unselectWords()},t.handleCreateNote=function(e){u.addNote(t.props.selection.words.page,t.props.selection.words.first,t.props.selection.words.last,e),c.stopEditing(),c.unselectWords()},t.handleDeleteHighlights=function(e){e.slice(0).forEach(function(e){u.deleteHighlight(t.props.selection.words.page,e.fw,e.lw)}),c.stopEditing(),c.unselectWords()},t.handleDeleteNote=function(e){u.deleteNote(t.props.selection.words.page,e.fw,e.lw),c.stopEditing(),c.unselectWords()},t.handleEditNote=function(e,n){u.addNote(t.props.selection.words.page,e.fw,e.lw,n),c.stopEditing(),c.unselectWords()},t.handleSearch=function(){p.openMenu(i.MenuType.Search),l.searchSelection(t.props.selection.words.page,t.props.selection.words.first,t.props.selection.words.last),c.unselectWords()},t}return r(t,e),t.prototype.render=function(){if(this.props.selection.editing){if(this.props.selectedVisualAnnotation&&this.props.selection.visualAnnotation.tool==i.AnnotationTool.TEXT)return o.createElement(h.TextAnnotationPopover,{scale:this.props.scale,selectedVisualAnnotation:this.props.selectedVisualAnnotation,selection:this.props.selection.visualAnnotation,onSave:this.handleTextAnnotationSave});if(this.props.selectedWordsPageRects)return o.createElement(f.HighlightPopover,{hideMarks:d.Context.controlSettings.hideMarks,highlights:this.props.highlights,notes:this.props.notes,selectedWordsPageRects:this.props.selectedWordsPageRects,selection:this.props.selection.words,viewportClientRect:this.props.viewportClientRect,onCancel:this.handleHighlightCancel,onCreateNote:this.handleCreateNote,onCreateHighlight:this.handleCreateHighlight,onDeleteHighlights:this.handleDeleteHighlights,onDeleteNote:this.handleDeleteNote,onEditNote:this.handleEditNote,onSearch:this.handleSearch})}return null},t}(o.Component);t.Component=v;var y=function(e,t){return{environment:e.environment,highlights:null!=e.selection.words&&e.annotations.pages[e.selection.words.page]?e.annotations.pages[e.selection.words.page].highlights:null,notes:null!=e.selection.words&&e.annotations.pages[e.selection.words.page]?e.annotations.pages[e.selection.words.page].notes:null,scale:e.view.scale,selectedVisualAnnotation:s.getSelectedVisualAnnotation(e),selectedWordsPageRects:g.getSelectedWordsPageRects(e),selection:e.selection,viewportClientRect:m.getViewportClientRectWithoutToolbar(e)}},b=a.connect(y)(v);t.AnnotationSelectionEditor=b},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(670),a=n(10),s=n(403),u=n(665),c=n(16),l=i.ANCHOR_SIZE+2,p=13,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTextareaRef=function(e){null!=e&&s.placeCaretAtEndAndScroll(e),t.textAreaRef=e},t.handleOverlayClick=function(){t.textAreaRef&&t.props.onSave(t.textAreaRef.value)},t}return r(t,e),t.prototype.render=function(){var e=a.Context.pageRectToClientCoords(this.props.selection.page,this.props.selectedVisualAnnotation.x,this.props.selectedVisualAnnotation.y,this.props.selectedVisualAnnotation.w,this.props.selectedVisualAnnotation.h);e.x=Math.floor(e.x-l),e.y=Math.floor(e.y-l),e.w=Math.ceil(e.w+2*l),e.h=Math.ceil(e.h+2*l);var t=p*this.props.scale,n=c._assign({color:u.TEXT_STYLE.fill},u.TEXT_STYLE,{position:"absolute",left:e.x,top:e.y,width:e.w,height:e.h,fontSize:t+"px",lineHeight:t+"px"});return o.createElement("div",{className:"overlay overlay--transparent paneAnnotationText",style:{pointerEvents:"auto"},onClick:this.handleOverlayClick},o.createElement("textarea",{style:n,defaultValue:this.props.selectedVisualAnnotation.t,ref:this.handleTextareaRef,"data-qa":"noteTextarea"}))},t}(o.Component);t.TextAnnotationPopover=h},function(e,t,n){"use strict";var r,o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(193),a=n(403),s=n(687),u=n(401),c=n(11),l=n(10),p=n(666),h=n(635),f=n(460);!function(e){e[e.NewSelection=0]="NewSelection",e[e.EditExistingNote=1]="EditExistingNote",e[e.EditNewNote=2]="EditNewNote"}(r||(r={}));var d="HighPopover",m=function(e){function t(t){var n=e.call(this,t)||this;return n.handleAddNote=function(e){n.setState({editingNewNote:!0})},n.handleTextareKeyUp=function(e){e.which==f.KEYCODE_ESCAPE&&n.props.onCancel()},n.handleTextareaRef=function(e){null==e||c.isMobileDevice()||a.placeCaretAtEndAndScroll(e),n.textAreaRef=e},n.handlePopoverRef=function(e){n.popoverRef=e,n.updatePopoverSize()},n.handleOverlayClick=function(){n.props.onCancel()},n.state={width:0,height:0},n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){e.selection==this.props.selection&&e.notes==this.props.notes||this.setState({editingNewNote:!1})},t.prototype.componentDidMount=function(){h.Shortcuts.startScope(d),h.Shortcuts.bind("escape",this.props.onCancel,d)},t.prototype.componentWillUnmount=function(){h.Shortcuts.endScope(d)},t.prototype.componentDidUpdate=function(){this.updatePopoverSize()},t.prototype.render=function(){var e,t,n,o=this.mode;if(c.matchDesktopMediaQuery()){var a=this.getSelectedWordsMinAndMaxY(),p=a.min,h=a.max,f=this.getSelectedWordsMinAndMaxXAtMinY(p),d=f.min,m=f.max,g=this.getSelectedWordsMinAndMaxXAtMaxY(h),v=g.min,y=g.max,b=l.Context.pagePointToClientCoords(this.props.selection.page,(d+m)/2,p),E=b.x,w=b.y,x=l.Context.pagePointToClientCoords(this.props.selection.page,(v+y)/2,h),T=x.x,C=x.y;e=w-this.props.viewportClientRect.top>this.props.viewportClientRect.bottom-C?s.ArrowDirection.BOTTOM:s.ArrowDirection.TOP,e==s.ArrowDirection.BOTTOM?(t=E-this.state.width/2,n=w-this.state.height-s.ARROW_HEIGHT):(t=T-this.state.width/2,n=C+s.ARROW_HEIGHT),t=Math.min(Math.max(t,this.props.viewportClientRect.left),this.props.viewportClientRect.right-this.state.width),n=Math.min(Math.max(n,this.props.viewportClientRect.top),this.props.viewportClientRect.bottom-this.state.height)}else e=s.ArrowDirection.BOTTOM,t=0,n=0;var N=u("popover","popover--open",{"popover--down":e==s.ArrowDirection.TOP},{"popover--add":o==r.EditNewNote},{"popover--edit":o==r.EditExistingNote});return i.createElement("div",{className:"overlay overlay--transparent popover__mask",style:{pointerEvents:"auto"},"data-qa":"highlightOverlayCancelBtn",onClick:this.handleOverlayClick},i.createElement("div",{className:N,style:{left:t,top:n},ref:this.handlePopoverRef,onClick:function(e){return e.stopPropagation()}},this.renderMenu(o,e),this.renderBody(o)))},t.prototype.getSelectedWordsMinAndMaxY=function(){return this.props.selectedWordsPageRects.reduce(function(e,t){return{min:Math.min(e.min,t.y),max:Math.max(e.max,t.y+t.h)}},{min:Number.MAX_VALUE,max:Number.MIN_VALUE})},t.prototype.getSelectedWordsMinAndMaxXAtMinY=function(e){return this.props.selectedWordsPageRects.reduce(function(t,n){return n.y==e?{min:Math.min(t.min,n.x),max:Math.max(t.max,n.x+n.w)}:t},{min:Number.MAX_VALUE,max:Number.MIN_VALUE})},t.prototype.getSelectedWordsMinAndMaxXAtMaxY=function(e){return this.props.selectedWordsPageRects.reduce(function(t,n){return n.y+n.h==e?{min:Math.min(t.min,n.x),max:Math.max(t.max,n.x+n.w)}:t},{min:Number.MAX_VALUE,max:Number.MIN_VALUE})},t.prototype.renderMenu=function(e,t){var n=this,o=[];return this.props.hideMarks||(o.push(0==this.selectedHighlights.length?i.createElement("li",{
className:"popover__highlight-btn",key:"high","data-qa":"createHighlightBtn",onClick:this.props.onCreateHighlight},"Highlight"):i.createElement("li",{className:"popover__highlight-btn",key:"rh","data-qa":"removeHighlightBtn",onClick:function(){return n.props.onDeleteHighlights(n.selectedHighlights)}},"Remove")),e!=r.EditExistingNote?o.push(i.createElement("li",{className:this.state.editingNewNote?"popover__note-btn":"popover__highlight-btn",key:"note","data-qa":"addNoteBtn",onClick:this.handleAddNote},"Add note")):o.push(i.createElement("li",{className:"popover__note-btn",key:"note"},"Edit note"))),o.push(i.createElement("li",{className:"popover__search-btn",onClick:this.props.onSearch,"data-qa":"highlightSearchBtn",key:"search"},"Search")),i.createElement("ul",null,o,i.createElement(s.Arrow,{direction:t,size:s.ArrowSize.BIG,position:s.ArrowPosition.EDGE}))},t.prototype.renderBody=function(e){var t=this;switch(e){case r.NewSelection:return null;case r.EditExistingNote:return i.createElement("div",{className:"popover__form"},i.createElement("textarea",{cols:30,rows:5,defaultValue:this.selectedNote.note,onKeyUp:this.handleTextareKeyUp,ref:this.handleTextareaRef,"data-qa":"editNoteTextarea"}),i.createElement("input",{type:"button",value:"Delete",onClick:function(){return t.props.onDeleteNote(t.selectedNote)},"data-qa":"editNoteDeleteBtn"}),i.createElement("input",{type:"button",value:"Cancel",onClick:this.props.onCancel,"data-qa":"editNoteCancelBtn"}),i.createElement("input",{type:"button",value:"Save",onClick:function(){return t.props.onEditNote(t.selectedNote,t.textAreaRef.value)},"data-qa":"editNoteSaveBtn"}));case r.EditNewNote:return i.createElement("div",{className:"popover__form"},i.createElement("textarea",{cols:30,rows:5,onKeyUp:this.handleTextareKeyUp,ref:this.handleTextareaRef,"data-qa":"newNoteTextarea"}),i.createElement("input",{type:"button",value:"Cancel",onClick:this.props.onCancel,"data-qa":"newNoteCancelBtn"}),i.createElement("input",{type:"button",value:"Save",onClick:function(){return t.props.onCreateNote(t.textAreaRef.value)},"data-qa":"newNoteSaveBtn"}));default:return null}},t.prototype.updatePopoverSize=function(){if(this.popoverRef){var e=this.popoverRef.getBoundingClientRect();e.width==this.state.width&&e.height==this.state.height||this.setState({width:e.width,height:e.height})}},Object.defineProperty(t.prototype,"selectedNote",{get:function(){return p.findFirstNoteInRange(this.props.notes,this.props.selection.first,this.props.selection.last)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedHighlights",{get:function(){return p.findHighlightsInRange(this.props.highlights,this.props.selection.first,this.props.selection.last)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return null!=this.selectedNote?r.EditExistingNote:this.state.editingNewNote?r.EditNewNote:r.NewSelection},enumerable:!0,configurable:!0}),t}(i.Component);t.HighlightPopover=m},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(193),i=n(401);t.ARROW_HEIGHT=16;var a;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.TOP=3]="TOP"}(a=t.ArrowDirection||(t.ArrowDirection={}));var s;!function(e){e[e.REGULAR=0]="REGULAR",e[e.BIG=1]="BIG"}(s=t.ArrowSize||(t.ArrowSize={}));var u;!function(e){e[e.REGULAR=0]="REGULAR",e[e.EDGE=1]="EDGE"}(u=t.ArrowPosition||(t.ArrowPosition={}));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=i("arrow","arrow--"+a[this.props.direction].toLowerCase(),{"arrow--big":this.props.size==s.BIG},{"arrow--edge":this.props.position==u.EDGE},this.props.otherClassName);return o.createElement("div",{className:e},this.props.children)},t}(o.Component);t.Arrow=c},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=!0),i.Context.store.getState().metadata.pages[e]?u.Promise.resolve():new u.Promise(function(n){c[e]||(c[e]=[]),c[e].push(n),t&&o(e)})}function o(e){var t=i.Context.resourceLoader.getResourceUrl(a.ResourceType.PAGE_META,[(e+1).toString()]);i.Context.resourceLoader.getJSON(t,function(t){s.loadPage(e,t),c[e].forEach(function(e){e()}),c[e]=[]})}var i=n(10),a=n(8),s=n(689),u=n(182),c=[];t.getPageContent=r},function(e,t,n){"use strict";function r(e,t){switch(void 0===e&&(e=b),t.type){case E:var n=t.payload.book,r=void 0;return r="400"==n.version?{major:0,minor:4}:f.parseVersion(n.version),!n.playlist&&n.autoplaylist&&(n.playlist=n.autoplaylist),d.Context.controlSettings.disableMultimedia&&(n.playlist=[],n.videos={}),n.playlist&&(n.playlist=n.playlist.filter(function(e){return""!=p.controlNameOfPlaylistItem(e)})),v._assign({},e,{book:n,bookVersion:r});case w:var o=e.pages.slice(),i=t.payload;return o[i.pageIdx]=u(s(a(i.page),i.pageIdx)),v._assign({},e,{pages:o});default:return e}}function o(e){h.dispatchAction(E,{book:e})}function i(e,t){d.Context.store.dispatch(function(n,r){r().metadata.pages[e]||n({type:w,payload:{pageIdx:e,page:t}})})}function a(e){var t=y._clone(e);d.Context.controlSettings.disableMultimedia&&(t.multimedia=[],t.overlayNoteId=null,t.overlayNotes=null),t.multimedia=t.multimedia||[];for(var n={},r=0;;r++){var o=l.ControlType[r];if(!o)break;n[o.toLowerCase()]=r}if(t.multimedia)for(var i=t.multimedia.length-1;i>=0;i--)if("string"==typeof t.multimedia[i].type){var a=n[t.multimedia[i].type.toLowerCase()];void 0==a?console.warn("Unable to identify type of "+t.multimedia[i].type):t.multimedia[i].type=a}return t}function s(e,t){function n(e){i.indexOf(e)!=-1?console.error("Duplicate control name: "+e):i.push(e),/^[a-zA-Z]\w*$/.test(e)||console.error("Wrong control name: "+e)}function r(e,t){return e.toLowerCase().trim()+"_"+t}if(!e.multimedia)return e;var o=y._clone(e),i=[];return o.multimedia.forEach(function(e,o){e.name||(e.name=c(e.id,t),n(e.name)),e.id&&n(e.id),e.formName&&(e.formName=r(e.formName,t))}),o}function u(e){if(!e.multimedia)return e;var t=y._clone(e);return t.multimedia.forEach(function(e,t){switch(e.type){case l.ControlType.FORMEDITBOX:m.fixProperties(e);break;case l.ControlType.FORMCHECKBOX:g.fixProperties(e)}}),t}function c(e,t){return"acp"+(t+1)+"_"+e}var l=n(390),p=n(187),h=n(15),f=n(690),d=n(10),m=n(463),g=n(455),v=n(16),y=n(16),b={pages:[]},E="metadata/BOOK",w="metadata/PAGE";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.loadBook=o,t.loadPage=i,t.nameFromIdAndPageIdx=c},function(e,t){"use strict";function n(e){var t={major:NaN,minor:NaN};if(e&&"string"==typeof e){var n=e.split(".");n.length>=2&&(t={major:parseInt(n[0],10),minor:parseInt(n[1],10)})}return t}t.parseVersion=n},function(e,t,n){"use strict";function r(e,t){void 0===e&&(e=p);var n;switch(t.type){case c:n={size:t.payload};break;case l:n={scroll:t.payload};break;default:return e}return u._assign({},e,n)}function o(){return function(e){h(e),window.onresize=function(){h(e)}}}function i(e,t){var n={x:e,y:t};s.dispatchAction(l,n)}var a=n(387),s=n(15),u=n(16),c="environment/CHANGE_WIDTH_AND_HEIGHT",l="environment/CHANGE_SCROLL",p={size:{height:0,width:0},scroll:{x:0,y:0}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.initEnvironment=o,t.changeScroll=i;var h=u._throttle(function(e){var t={height:window.innerHeight,width:window.innerWidth};e({type:c,payload:t})},a.THROTTLE_DOM_EVENTS)},function(e,t,n){"use strict";var r=n(693),o=n(10),i=n(425),a=function(){function e(e){var t=new r.Manager(e,{touchAction:"auto"}),n=new r.Swipe;t.add(n),t.on("swipeleft",function(){o.Context.internalEventEmitter.triggerDidSwipeLeft()}),t.on("swiperight",function(){o.Context.internalEventEmitter.triggerDidSwipeRight()});var a=new r.Pinch;t.add(a);var s;t.on("pinchstart",function(e){s=e.scale}),t.on("pinchmove",function(e){i.zoomBy(e.scale/s),s=e.scale})}return e}();t.TouchEventHandler=a},function(e,t,n){var r;/*! Hammer.JS - v2.0.7 - 2016-04-22
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the MIT license */
!function(o,i,a,s){"use strict";function u(e,t,n){return setTimeout(f(e,n),t)}function c(e,t,n){return!!Array.isArray(e)&&(l(e,n[t],n),!0)}function l(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function p(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,r,n),e.apply(this,arguments)}}function h(e,t,n){var r,o=t.prototype;r=e.prototype=Object.create(o),r.constructor=e,r._super=o,n&&me(r,n)}function f(e,t){return function(){return e.apply(t,arguments)}}function d(e,t){return typeof e==ye?e.apply(t?t[0]||s:s,t):e}function m(e,t){return e===s?t:e}function g(e,t,n){l(E(t),function(t){e.addEventListener(t,n,!1)})}function v(e,t,n){l(E(t),function(t){e.removeEventListener(t,n,!1)})}function y(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function b(e,t){return e.indexOf(t)>-1}function E(e){return e.trim().split(/\s+/g)}function w(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function x(e){return Array.prototype.slice.call(e,0)}function T(e,t,n){for(var r=[],o=[],i=0;i<e.length;){var a=t?e[i][t]:e[i];w(o,a)<0&&r.push(e[i]),o[i]=a,i++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function C(e,t){for(var n,r,o=t[0].toUpperCase()+t.slice(1),i=0;i<ge.length;){if(n=ge[i],r=n?n+o:t,r in e)return r;i++}return s}function N(){return Ce++}function S(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}function _(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){d(e.options.enable,[e])&&n.handler(t)},this.init()}function O(e){var t,n=e.options.inputClass;return new(t=n?n:_e?V:Oe?z:Se?Y:H)(e,P)}function P(e,t,n){var r=n.pointers.length,o=n.changedPointers.length,i=t&Le&&r-o===0,a=t&(De|Be)&&r-o===0;n.isFirst=!!i,n.isFinal=!!a,i&&(e.session={}),n.eventType=t,A(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function A(e,t){var n=e.session,r=t.pointers,o=r.length;n.firstInput||(n.firstInput=R(t)),o>1&&!n.firstMultiple?n.firstMultiple=R(t):1===o&&(n.firstMultiple=!1);var i=n.firstInput,a=n.firstMultiple,s=a?a.center:i.center,u=t.center=L(r);t.timeStamp=we(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=U(s,u),t.distance=B(s,u),I(n,t),t.offsetDirection=D(t.deltaX,t.deltaY);var c=k(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=Ee(c.x)>Ee(c.y)?c.x:c.y,t.scale=a?j(a.pointers,r):1,t.rotation=a?F(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,M(n,t);var l=e.element;y(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function I(e,t){var n=t.center,r=e.offsetDelta||{},o=e.prevDelta||{},i=e.prevInput||{};t.eventType!==Le&&i.eventType!==De||(o=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=o.x+(n.x-r.x),t.deltaY=o.y+(n.y-r.y)}function M(e,t){var n,r,o,i,a=e.lastInterval||t,u=t.timeStamp-a.timeStamp;if(t.eventType!=Be&&(u>Re||a.velocity===s)){var c=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,p=k(u,c,l);r=p.x,o=p.y,n=Ee(p.x)>Ee(p.y)?p.x:p.y,i=D(c,l),e.lastInterval=t}else n=a.velocity,r=a.velocityX,o=a.velocityY,i=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=i}function R(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:be(e.pointers[n].clientX),clientY:be(e.pointers[n].clientY)},n++;return{timeStamp:we(),pointers:t,center:L(t),deltaX:e.deltaX,deltaY:e.deltaY}}function L(e){var t=e.length;if(1===t)return{x:be(e[0].clientX),y:be(e[0].clientY)};for(var n=0,r=0,o=0;o<t;)n+=e[o].clientX,r+=e[o].clientY,o++;return{x:be(n/t),y:be(r/t)}}function k(e,t,n){return{x:t/e||0,y:n/e||0}}function D(e,t){return e===t?Ue:Ee(e)>=Ee(t)?e<0?Fe:je:t<0?He:Ve}function B(e,t,n){n||(n=qe);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(r*r+o*o)}function U(e,t,n){n||(n=qe);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,r)/Math.PI}function F(e,t){return U(t[1],t[0],Ye)+U(e[1],e[0],Ye)}function j(e,t){return B(t[0],t[1],Ye)/B(e[0],e[1],Ye)}function H(){this.evEl=Ke,this.evWin=Ze,this.pressed=!1,_.apply(this,arguments)}function V(){this.evEl=Je,this.evWin=et,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=nt,this.evWin=rt,this.started=!1,_.apply(this,arguments)}function G(e,t){var n=x(e.touches),r=x(e.changedTouches);return t&(De|Be)&&(n=T(n.concat(r),"identifier",!0)),[n,r]}function z(){this.evTarget=it,this.targetIds={},_.apply(this,arguments)}function q(e,t){var n=x(e.touches),r=this.targetIds;if(t&(Le|ke)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,i,a=x(e.changedTouches),s=[],u=this.target;if(i=n.filter(function(e){return y(e.target,u)}),t===Le)for(o=0;o<i.length;)r[i[o].identifier]=!0,o++;for(o=0;o<a.length;)r[a[o].identifier]&&s.push(a[o]),t&(De|Be)&&delete r[a[o].identifier],o++;return s.length?[T(i.concat(s),"identifier",!0),s]:void 0}function Y(){_.apply(this,arguments);var e=f(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new H(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function X(e,t){e&Le?(this.primaryTouch=t.changedPointers[0].identifier,K.call(this,t)):e&(De|Be)&&K.call(this,t)}function K(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,o=function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)};setTimeout(o,at)}}function Z(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],i=Math.abs(t-o.x),a=Math.abs(n-o.y);if(i<=st&&a<=st)return!0}return!1}function $(e,t){this.manager=e,this.set(t)}function Q(e){if(b(e,ft))return ft;var t=b(e,dt),n=b(e,mt);return t&&n?ft:t||n?t?dt:mt:b(e,ht)?ht:pt}function J(){if(!ct)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||o.CSS.supports("touch-action",n)}),e}function ee(e){this.options=me({},this.defaults,e||{}),this.id=N(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=vt,this.simultaneous={},this.requireFail=[]}function te(e){return e&xt?"cancel":e&Et?"end":e&bt?"move":e&yt?"start":""}function ne(e){return e==Ve?"down":e==He?"up":e==Fe?"left":e==je?"right":""}function re(e,t){var n=t.manager;return n?n.get(e):e}function oe(){ee.apply(this,arguments)}function ie(){oe.apply(this,arguments),this.pX=null,this.pY=null}function ae(){oe.apply(this,arguments)}function se(){ee.apply(this,arguments),this._timer=null,this._input=null}function ue(){oe.apply(this,arguments)}function ce(){oe.apply(this,arguments)}function le(){ee.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function pe(e,t){return t=t||{},t.recognizers=m(t.recognizers,pe.defaults.preset),new he(e,t)}function he(e,t){this.options=me({},pe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=O(this),this.touchAction=new $(this,this.options.touchAction),fe(this,!0),l(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function fe(e,t){var n=e.element;if(n.style){var r;l(e.options.cssProps,function(o,i){r=C(n.style,i),t?(e.oldCssProps[r]=n.style[r],n.style[r]=o):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function de(e,t){var n=i.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var me,ge=["","webkit","Moz","MS","ms","o"],ve=i.createElement("div"),ye="function",be=Math.round,Ee=Math.abs,we=Date.now;me="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}:Object.assign;var xe=p(function(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;)(!n||n&&e[r[o]]===s)&&(e[r[o]]=t[r[o]]),o++;return e},"extend","Use `assign`."),Te=p(function(e,t){return xe(e,t,!0)},"merge","Use `assign`."),Ce=1,Ne=/mobile|tablet|ip(ad|hone|od)|android/i,Se="ontouchstart"in o,_e=C(o,"PointerEvent")!==s,Oe=Se&&Ne.test(navigator.userAgent),Pe="touch",Ae="pen",Ie="mouse",Me="kinect",Re=25,Le=1,ke=2,De=4,Be=8,Ue=1,Fe=2,je=4,He=8,Ve=16,We=Fe|je,Ge=He|Ve,ze=We|Ge,qe=["x","y"],Ye=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(S(this.element),this.evWin,this.domHandler)}};var Xe={mousedown:Le,mousemove:ke,mouseup:De},Ke="mousedown",Ze="mousemove mouseup";h(H,_,{handler:function(e){var t=Xe[e.type];t&Le&&0===e.button&&(this.pressed=!0),t&ke&&1!==e.which&&(t=De),this.pressed&&(t&De&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Ie,srcEvent:e}))}});var $e={pointerdown:Le,pointermove:ke,pointerup:De,pointercancel:Be,pointerout:Be},Qe={2:Pe,3:Ae,4:Ie,5:Me},Je="pointerdown",et="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Je="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),h(V,_,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),o=$e[r],i=Qe[e.pointerType]||e.pointerType,a=i==Pe,s=w(t,e.pointerId,"pointerId");o&Le&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):o&(De|Be)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),n&&t.splice(s,1))}});var tt={touchstart:Le,touchmove:ke,touchend:De,touchcancel:Be},nt="touchstart",rt="touchstart touchmove touchend touchcancel";h(W,_,{handler:function(e){var t=tt[e.type];if(t===Le&&(this.started=!0),this.started){var n=G.call(this,e,t);t&(De|Be)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Pe,srcEvent:e})}}});var ot={touchstart:Le,touchmove:ke,touchend:De,touchcancel:Be},it="touchstart touchmove touchend touchcancel";h(z,_,{handler:function(e){var t=ot[e.type],n=q.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Pe,srcEvent:e})}});var at=2500,st=25;h(Y,_,{handler:function(e,t,n){var r=n.pointerType==Pe,o=n.pointerType==Ie;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)X.call(this,t,n);else if(o&&Z.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ut=C(ve.style,"touchAction"),ct=ut!==s,lt="compute",pt="auto",ht="manipulation",ft="none",dt="pan-x",mt="pan-y",gt=J();$.prototype={set:function(e){e==lt&&(e=this.compute()),ct&&this.manager.element.style&&gt[e]&&(this.manager.element.style[ut]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return l(this.manager.recognizers,function(t){d(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Q(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,o=b(r,ft)&&!gt[ft],i=b(r,mt)&&!gt[mt],a=b(r,dt)&&!gt[dt];if(o){var s=1===e.pointers.length,u=e.distance<2,c=e.deltaTime<250;if(s&&u&&c)return}return a&&i?void 0:o||i&&n&We||a&&n&Ge?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var vt=1,yt=2,bt=4,Et=8,wt=Et,xt=16,Tt=32;ee.prototype={defaults:{},set:function(e){return me(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(c(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=re(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return c(e,"dropRecognizeWith",this)?this:(e=re(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(c(e,"requireFailure",this))return this;var t=this.requireFail;return e=re(e,this),w(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(c(e,"dropRequireFailure",this))return this;e=re(e,this);var t=w(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;r<Et&&t(n.options.event+te(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=Et&&t(n.options.event+te(r))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=Tt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Tt|vt)))return!1;e++}return!0},recognize:function(e){var t=me({},e);return d(this.options.enable,[this,t])?(this.state&(wt|xt|Tt)&&(this.state=vt),this.state=this.process(t),void(this.state&(yt|bt|Et|xt)&&this.tryEmit(t))):(this.reset(),void(this.state=Tt))},process:function(e){},getTouchAction:function(){},reset:function(){}},h(oe,ee,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(yt|bt),o=this.attrTest(e);return r&&(n&Be||!o)?t|xt:r||o?n&De?t|Et:t&yt?t|bt:yt:Tt}}),h(ie,oe,{defaults:{event:"pan",threshold:10,pointers:1,direction:ze},getTouchAction:function(){var e=this.options.direction,t=[];return e&We&&t.push(mt),e&Ge&&t.push(dt),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,o=e.direction,i=e.deltaX,a=e.deltaY;return o&t.direction||(t.direction&We?(o=0===i?Ue:i<0?Fe:je,n=i!=this.pX,r=Math.abs(e.deltaX)):(o=0===a?Ue:a<0?He:Ve,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=o,n&&r>t.threshold&&o&t.direction},attrTest:function(e){return oe.prototype.attrTest.call(this,e)&&(this.state&yt||!(this.state&yt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ne(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),h(ae,oe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ft]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&yt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),h(se,ee,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[pt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(De|Be)&&!o)this.reset();else if(e.eventType&Le)this.reset(),this._timer=u(function(){this.state=wt,this.tryEmit()},t.time,this);else if(e.eventType&De)return wt;return Tt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===wt&&(e&&e.eventType&De?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=we(),this.manager.emit(this.options.event,this._input)))}}),h(ue,oe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ft]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&yt)}}),h(ce,oe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:We|Ge,pointers:1},getTouchAction:function(){return ie.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(We|Ge)?t=e.overallVelocity:n&We?t=e.overallVelocityX:n&Ge&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&Ee(t)>this.options.velocity&&e.eventType&De},emit:function(e){var t=ne(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),h(le,ee,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ht]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&Le&&0===this.count)return this.failTimeout();if(r&&o&&n){if(e.eventType!=De)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||B(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&i?this.count+=1:this.count=1,this._input=e;var s=this.count%t.taps;if(0===s)return this.hasRequireFailures()?(this._timer=u(function(){this.state=wt,this.tryEmit()},t.interval,this),yt):wt}return Tt},failTimeout:function(){return this._timer=u(function(){this.state=Tt},this.options.interval,this),Tt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==wt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),pe.VERSION="2.0.7",pe.defaults={domEvents:!1,touchAction:lt,enable:!0,inputTarget:null,inputClass:null,preset:[[ue,{enable:!1}],[ae,{enable:!1},["rotate"]],[ce,{direction:We}],[ie,{direction:We},["swipe"]],[le],[le,{event:"doubletap",taps:2},["tap"]],[se]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ct=1,Nt=2;he.prototype={set:function(e){return me(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?Nt:Ct},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,o=t.curRecognizer;(!o||o&&o.state&wt)&&(o=t.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],t.stopped===Nt||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&n.state&(yt|bt|Et)&&(o=t.curRecognizer=n),i++}},get:function(e){if(e instanceof ee)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(c(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(c(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=w(t,e);n!==-1&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return l(E(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return l(E(e),function(e){t?n[e]&&n[e].splice(w(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&de(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&fe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},me(pe,{INPUT_START:Le,INPUT_MOVE:ke,INPUT_END:De,INPUT_CANCEL:Be,STATE_POSSIBLE:vt,STATE_BEGAN:yt,STATE_CHANGED:bt,STATE_ENDED:Et,STATE_RECOGNIZED:wt,STATE_CANCELLED:xt,STATE_FAILED:Tt,DIRECTION_NONE:Ue,DIRECTION_LEFT:Fe,DIRECTION_RIGHT:je,DIRECTION_UP:He,DIRECTION_DOWN:Ve,DIRECTION_HORIZONTAL:We,DIRECTION_VERTICAL:Ge,DIRECTION_ALL:ze,Manager:he,Input:_,TouchAction:$,TouchInput:z,MouseInput:H,PointerEventInput:V,TouchMouseInput:Y,SingleTouchInput:W,Recognizer:ee,AttrRecognizer:oe,Tap:le,Pan:ie,Swipe:ce,Pinch:ae,Rotate:ue,Press:se,on:g,off:v,each:l,merge:Te,extend:xe,assign:me,inherit:h,bindFn:f,prefixed:C});var St="undefined"!=typeof o?o:"undefined"!=typeof self?self:{};St.Hammer=pe,r=function(){return pe}.call(t,n,t,e),!(r!==s&&(e.exports=r))}(window,document,"Hammer")},function(e,t,n){"use strict";function r(e){var t=o.compose(o.applyMiddleware(a.default))(o.createStore);return t(i.rootReducer,e)}var o=n(374),i=n(695),a=n(696);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var r=n(374),o=n(427),i=n(689),a=n(444),s=n(691),u=n(14),c=n(457),l=n(412),p=n(410),h=n(411),f=n(392),d=n(441),m=n(430),g=n(406),v=n(440),y=n(425),b=n(413),E=n(442),w=r.combineReducers({annotations:o.default,controls:a.default,environment:s.default,failure:u.default,forms:c.default,lectures:l.default,mediaOpen:p.default,mediaStatus:h.default,metadata:i.default,popupWindows:f.default,screenOverlay:g.default,search:d.default,selection:m.default,toolbar:v.default,userSettings:y.default,videos:b.default,view:E.default});t.rootReducer=w},function(e,t){"use strict";function n(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}t.__esModule=!0;var r=n();r.withExtraArgument=n,t.default=r},function(e,t,n){"use strict";function r(e,t){e.disabled=!0;try{t&&(t.forEach(function(e){"string"==typeof e.a&&("layout"==e.a?e.a=a.UserActionType.LAYOUT_MODE:"page"==e.a?e.a=a.UserActionType.PAGE:"zoom"==e.a&&(e.a=a.UserActionType.ZOOM))}),o(t))}finally{e.disabled=!1}}function o(e){e.forEach(function(e){e.a==a.UserActionType.FORM_CONTROL_VALUE&&null!=e.p&&(l.setControlState(e.k2,{value:e.p}),l.setControlState(h.nameFromIdAndPageIdx(e.k2,e.k1),{value:e.p}))}),e.forEach(function(e){switch(e.a){case a.UserActionType.BOOK_NOTES:u.setBookNotes(e.p);break;case a.UserActionType.PAGE_BOOKMARK:e.p&&p.isValidPageNumber(e.k1)&&u.setBookmarked(e.k1,!0);break;case a.UserActionType.PAGE_HIGHLIGHTS:e.p&&p.isValidPageNumber(e.k1)&&u.setHighlights(e.k1,e.p);break;case a.UserActionType.PAGE_NOTES:e.p&&p.isValidPageNumber(e.k1)&&u.setNotes(e.k1,e.p);break;case a.UserActionType.ELLIPSE_ANNOTATION:e.p&&p.isValidPageNumber(e.k1)&&u.addEllipse(e.k1,e.k2,e.p.x,e.p.y,e.p.w,e.p.h,e.p.c);break;case a.UserActionType.RECTANGLE_ANNOTATION:e.p&&p.isValidPageNumber(e.k1)&&u.addRectangle(e.k1,e.k2,e.p.x,e.p.y,e.p.w,e.p.h,e.p.c);break;case a.UserActionType.TEXT_ANNOTATION:e.p&&p.isValidPageNumber(e.k1)&&u.addText(e.k1,e.k2,e.p.x,e.p.y,e.p.w,e.p.h,e.p.c,e.p.t);break;case a.UserActionType.ANNOTATION_COLOR:if(!i){var t=parseInt(e.p,10);isNaN(t)||s.setAnnotationColor(t)}break;case a.UserActionType.LANGUAGE:i||s.setSubtitleLanguage(e.p);break;case a.UserActionType.LAYOUT_MODE:if(!i){var t=parseInt(e.p,10);isNaN(t)||s.setLayout(t)}break;case a.UserActionType.PAGE:var t=parseInt(e.p,10);isNaN(t)||c.setPage(t);break;case a.UserActionType.ZOOM:if(!i){var t=parseInt(e.p,10);isNaN(t)||s.setZoom(t)}break;case a.UserActionType.CONTROL_STATE:null!=e.p&&l.setControlState(e.k2,e.p)}})}function i(){return!!f.Context.controlSettings.saveUserSettings}var a=n(186),s=n(425),u=n(427),c=n(442),l=n(444),p=n(428),h=n(689),f=n(10);t.loadUserActions=r},function(e,t,n){"use strict";function r(e,t){if(0==t.scrollLeft&&0==t.scrollTop)return i.Promise.resolve();var n=function(e){var r={scrollLeft:e.scrollLeft()+Math.floor(t.scrollLeft),scrollTop:e.scrollTop()+Math.floor(t.scrollTop)};return new i.Promise(function(t){e.animate(r,{duration:500,queue:!1}).promise().then(function(){e.scrollTop()===r.scrollTop&&e.scrollLeft()===r.scrollLeft||e[0]!==document.body?t():n(o("html")).then(t)})})};return n(e)}var o=n(179),i=n(182);t.scrollElement=r},function(e,t,n){"use strict";function r(){var e=o.Context.controlSettings.userSettings;if(e){a.disableUserSettingsPersistence(!0);try{null!=e.annotationColor&&i.setAnnotationColor(e.annotationColor),null!=e.enableAutoPlay&&(e.enableAutoPlay?i.activateAutoPlay():i.deactivateAutoPlay()),null!=e.language&&i.setSubtitleLanguage(e.language),null!=e.layout&&i.setLayout(e.layout),null!=e.lectureNotesOn&&(e.lectureNotesOn?i.enableLectureNotes():i.disableLectureNotes()),e.playSpeed&&i.setPlaySpeed(e.playSpeed),null!=e.showPlaylist&&(e.showPlaylist?i.openPlaylist():i.closePlaylist()),null!=e.zoom&&i.setZoom(e.zoom)}finally{a.disableUserSettingsPersistence(!1)}}}var o=n(10),i=n(425),a=n(432);t.loadUserSettingsToStore=r},function(e,t,n){"use strict";var r=n(403),o=function(){function e(){this.enabled=!0}return e.prototype.getElement=function(){return this.contentElement},e.prototype.setElement=function(e){this.contentElement||(this.contentElement=e)},e.prototype.getViewportWidth=function(){return this.contentElement.clientWidth},e.prototype.getViewportInnerWidth=function(){return r.hasVerticalScrollbar(this.contentElement)?this.contentElement.clientWidth-r.getScrollbarWidth():this.contentElement.clientWidth},e.prototype.getViewportHeight=function(){return this.contentElement.clientHeight},e.prototype.getViewportInnerHeight=function(){return r.hasHorizontalScrollbar(this.contentElement)?this.contentElement.clientHeight-r.getScrollbarWidth():this.contentElement.clientHeight},e.prototype.setTop=function(e){this.contentElement.scrollTop=e},e.prototype.getTop=function(){return this.contentElement.scrollTop},e.prototype.getLeft=function(){return this.contentElement.scrollLeft},e.prototype.getScrollHeight=function(){return this.contentElement.scrollHeight},e.prototype.getBoundingClientRect=function(){return this.contentElement.getBoundingClientRect()},e.prototype.disable=function(){this.enabled&&this.contentElement&&(this.contentElement.classList.add("scroll-disabled"),this.enabled=!1)},e.prototype.enable=function(){!this.enabled&&this.contentElement&&(this.enabled=!0,this.contentElement.classList.remove("scroll-disabled"))},e}();t.PagesScroll=o},function(e,t,n){var r=(n(203),n(702)),o=!1;e.exports=function(e){e=e||{};var t=e.shouldRejectClick||r;o=!0,n(238).injection.injectEventPluginsByName({TapEventPlugin:n(703)(t)})}},function(e,t){e.exports=function(e,t){if(e&&t-e<750)return!0}},function(e,t,n){"use strict";function r(e,t){var n=l.extractSingleTouch(t);return n?n[e.page]:e.page in t?t[e.page]:t[e.client]+p[e.envScroll]}function o(e,t){var n=r(E.x,t),o=r(E.y,t);return Math.pow(Math.pow(n-e.x,2)+Math.pow(o-e.y,2),.5)}function i(e){return{tapMoveThreshold:g,ignoreMouseThreshold:v,eventTypes:T,extractEvents:function(t,n,i,a){if(!f(t)&&!d(t))return null;if(m(t))b=C();else if(e(b,C()))return null;var s=null,l=o(y,i);return d(t)&&l<g&&(s=c.getPooled(T.touchTap,n,i,a)),f(t)?(y.x=r(E.x,i),y.y=r(E.y,i)):d(t)&&(y.x=0,y.y=0),u.accumulateTwoPhaseDispatches(s),s}}}var a=n(704),s=n(240),u=n(237),c=n(267),l=n(705),p=n(268),h=n(706),f=(a.topLevelTypes,s.isStartish),d=s.isEndish,m=function(e){var t=["topTouchCancel","topTouchEnd","topTouchStart","topTouchMove"];return t.indexOf(e)>=0},g=10,v=750,y={x:null,y:null},b=null,E={x:{page:"pageX",client:"clientX",envScroll:"currentPageScrollLeft"},y:{page:"pageY",client:"clientY",envScroll:"currentPageScrollTop"}},w=["topTouchStart","topTouchCancel","topTouchEnd","topTouchMove"],x=["topMouseDown","topMouseMove","topMouseUp"].concat(w),T={touchTap:{phasedRegistrationNames:{bubbled:h({onTouchTap:null}),captured:h({onTouchTapCapture:null})},dependencies:x}},C=function(){return Date.now?Date.now:function(){return+new Date}}();e.exports=i},function(e,t){"use strict";var n={topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null},r={topLevelTypes:n};e.exports=r},function(e,t){var n={extractSingleTouch:function(e){var t=e.touches,n=e.changedTouches,r=t&&t.length>0,o=n&&n.length>0;return!r&&o?n[0]:r?t[0]:e}};e.exports=n},function(e,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t,n){"use strict";var r=n(394);t.getPlaylistPageFirstIndex=r.createSelector(function(e){return e.view.page},function(e){return e.metadata.book?e.metadata.book.playlist:null},function(e,t){if(null==t)return null;for(var n=0;n<t.length;n++)if(t[n].page>=e){if(t[n].page==e)return n;break}return null})},417,,,,,,,,,,,,,,,,,function(e,t){"use strict";t.TEXTSERVER_API_VERSION=1},function(e,t,n,r){"use strict";var o=n(r),i=(n(203),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),a=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},s=function(e,t,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n),o}return new r(e,t,n)},u=function(e,t,n,r){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,e,t,n,r),i}return new o(e,t,n,r)},c=function(e){var t=this;e instanceof t?void 0:o("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=10,p=i,h=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||p,n.poolSize||(n.poolSize=l),n.release=c,n},f={addPoolingTo:h,oneArgumentPooler:i,twoArgumentPooler:a,threeArgumentPooler:s,fourArgumentPooler:u};e.exports=f}]))});
//# sourceMappingURL=beckno.min.js.map